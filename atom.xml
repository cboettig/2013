<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>Lab Notebook</title>
 <link href="/2013/atom.xml" rel="self"/>
 <link href="/"/>
 <updated>2015-02-25T23:05:28+00:00</updated>
 <id>http://www.carlboettiger.info/2013</id>
 <author>
   <name>Carl Boettiger</name>
   <email>cboettig@gmail.com</email>
 </author>

 
 <entry>
   <title>Notes</title>
	 <link href="/2013/12/10/notes.html"/>
   <updated>2013-12-10T00:00:00+00:00</updated>
   <id>/12/10/notes</id>
   <content type="html">&lt;p&gt;Consider the model&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[d X_t = \alpha \left(\theta - X_t\right)dt + \sigma dB_t  \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;By Ito Isometry, we have:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[\langle X \rangle_t = E_t(X) = \theta \left(1 - e^{-\alpha t} \right) + X_0 e^{-\alpha t}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[\langle X^2 \rangle_t - \langle X \rangle_t^2 = V_t(X) = \frac{\sigma^2}{2 \alpha }\left(1 - e^{-2 \alpha t} \right)\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;If we assume discrete, uniform sampling of spacing &lt;span class=&quot;math&quot;&gt;\(\tau\)&lt;/span&gt;, then we have,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[P(\theta | X; \alpha, \sigma) = \sqrt{\frac{1}{2\pi V_{\tau} }}^{T-1} \exp\left(-\frac{\sum_t^{T-1} \left(X_{t+1} - E\right)^2 }{2V}\right) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;or more explicitly (taking &lt;span class=&quot;math&quot;&gt;\(\tau_i = 1\)&lt;/span&gt; without loss of generality),&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[P(\theta | X; \alpha, \sigma) = \sqrt{\frac{\tfrac{\alpha}{\sigma}}{\pi (1- e^{-\alpha t}) }}^{T-1} 
                                  \exp\left( - \frac{\sum_t^{T-1} \left(X_{t+1} - ( \theta (1 - e^{-\alpha}) + X_0 e^{-\alpha}) \right)^2 }{\tfrac{\sigma^2}{\alpha}(1-e^{-2\alpha})}\right) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;To integrate out &lt;span class=&quot;math&quot;&gt;\(\theta\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(P(X | \alpha, \sigma) = \int P(X | \theta, \alpha, \sigma ) P(\theta) d\theta\)&lt;/span&gt;, we’ll make this look like a Gaussian in &lt;span class=&quot;math&quot;&gt;\(\theta\)&lt;/span&gt; by completing the square. First, let us introduce a more compact notation to manipulate terms independent of &lt;span class=&quot;math&quot;&gt;\(\theta\)&lt;/span&gt;:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[A_t := X_{t+1} - X_0e^{-\alpha}\]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ B := 1-e^{-\alpha} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Our sum in the exponent can then be written more succinctly:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \sum_t^{T-1} (A_t - \theta B)^2 \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Squaring out inside the sum and distributing the summation operator (by linearity) and extracting or summing terms constant in &lt;span class=&quot;math&quot;&gt;\(t\)&lt;/span&gt;, we have:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \sum A_t^2 - 2 \theta B \sum A_t + \theta^2 B^2 (T-1) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;For which we complete the square in &lt;span class=&quot;math&quot;&gt;\(\theta\)&lt;/span&gt;,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ B^2 (T-1) \left( \left(\theta - \frac{\sum_t A_t}{B(T-1)}\right)^2 + \frac{\sum A_t ^2 - (\sum A_t)^2}{B^2 (T-1)} \right) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Which lets us write &lt;span class=&quot;math&quot;&gt;\(P(\theta | X; \alpha, \sigma)\)&lt;/span&gt; as a normal distribution in &lt;span class=&quot;math&quot;&gt;\(\theta\)&lt;/span&gt; times some constant terms:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ P(\theta | X; \alpha, \sigma) =  \exp \left(\frac{-\sum A_t^2 + (\sum A_t)^2 }{V_{\tau}  }\right) \sqrt{\frac{1}{2\pi V_{\tau} }}^{T-1} \int d\theta\exp\left( -\frac{ \left(\theta -  \frac{\sum_t A_t}{B(T-1)} \right)^2 }{\tfrac{2V_{\tau}}{B^2 (T-1)}}\right) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In which we recognize the integral as Gaussian with mean $=  $ and variance &lt;span class=&quot;math&quot;&gt;\(\nu = V_{\tau}/(B^2(T-1))\)&lt;/span&gt;, and thus can replace the integral with &lt;span class=&quot;math&quot;&gt;\(\sqrt{2 \pi \nu} = \sqrt{\frac{2 \pi V_{\tau} }{B^2(T-1)}}\)&lt;/span&gt;,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ P(\theta | X; \alpha, \sigma) =  \exp \left(\frac{-\sum A_t^2 + (\sum A_t)^2 }{V_{\tau}  }\right) \sqrt{\frac{1}{2\pi V_{\tau} }}^{T-1}  \sqrt{\frac{2 \pi V_{\tau} }{B^2(T-1)}}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Collecting common terms in &lt;span class=&quot;math&quot;&gt;\(V_t\)&lt;/span&gt;,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ P(\theta | X; \alpha, \sigma) =  \exp \left(\frac{f(A_t)}{V_{\tau}}\right) \sqrt{\frac{1}{2\pi}}^{T-1}  \sqrt{\frac{2 \pi  }{B^2(T-1)}} V_{\tau}^{\tfrac{1}{2}} V_{\tau}^{\tfrac{1-T}{2}}  \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ =  \exp \left(\frac{f(A_t)}{V_{\tau}}\right) \sqrt{\frac{(2 \pi)^{2-T}}{B ^ 2(T-1)}} V_{\tau}^{1 - \tfrac{T}{2}}  \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;where&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ f(A_t) = - \sum A_t^2 + \left( \sum A_t \right)^2 \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Then substituting in &lt;span class=&quot;math&quot;&gt;\(V_t = \tfrac{\sigma^2}{2\alpha} \left(1 - e^{-2\alpha}\right)\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ =  \exp \left(\frac{\tfrac{2\alpha f(A)}{1 - e^{-2\alpha}} }{\sigma^2}\right) \sqrt{\frac{(2 \pi)^{2-T}}{B ^ 2(T-1)}}  \left(\tfrac{1}{2\alpha} \left(1 - e^{-2\alpha}\right)\right)^{1 - \tfrac{T}{2}}\sigma^{2(1 - T/2)} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Which can be written to look like an Inverse Gamma integral in &lt;span class=&quot;math&quot;&gt;\(\sigma^2\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ = \mathcal{N} e^{\tfrac{-\beta}{\sigma^2}} (\sigma^2)^{-\gamma - 1} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;where&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \gamma = T/2 -2,\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \beta = \frac{2 \alpha  \left( \left( \sum A_t \right)^2- \sum A_t^2 \right) }{1 - e^{-2\alpha}} \]&lt;/span&gt; and&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \mathcal{N} = \sqrt{\frac{(2 \pi)^{2-T}}{B ^ 2(T-1)}}  \left(\tfrac{1}{2\alpha} \left(1 - e^{-2\alpha}\right)\right)^{1 - \tfrac{T}{2}} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Which we can integrate as Inverse Gamma (again assuming uniform prior, now in &lt;span class=&quot;math&quot;&gt;\(\sigma^2\)&lt;/span&gt;),&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ = \mathcal{N} \int e^{\tfrac{-\beta}{\sigma^2}} (\sigma^2)^{-\gamma - 1} d\sigma^2 = \mathcal{N} \frac{\beta^{\gamma}}{\Gamma(\gamma)}  \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;with &lt;span class=&quot;math&quot;&gt;\(\beta\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(\gamma\)&lt;/span&gt;, and &lt;span class=&quot;math&quot;&gt;\(\mathcal{N}\)&lt;/span&gt; as defined above.&lt;/p&gt;
&lt;!-- 

## marginalizing over $\sigma$

$$P(\theta | X; \alpha, \sigma) = \exp\left(-\sum A_t ^2 + (\sum A_t)^2\right)  \sqrt{\frac{1}{2\pi V }}^{T-1} \sqrt{\frac{2 \pi V}{B^2(T-1)}}$$

$$P(\theta | X; \alpha, \sigma) = \exp\left(-\sum A_t ^2 + (\sum A_t)^2\right)  \sqrt{\frac{1}{2\pi V }}^{T-2} \sqrt{\frac{1}{(1-e^{-\alpha})^2(T-1)}}$$


Now that we have effectively eliminated the parameter $r$ from our posterior calculation, we wish to also integrate out the second parameter, $\sigma$.  Once again we can &quot;integrate by analogy;&quot; the expression above in the variable $\sigma^2$ looks like a Gamma distribution,

$$ \int x^{\alpha - 1} e^{-\beta x} dx = \frac{\beta^{\alpha}}{\Gamma(\alpha)} $$ 

Where we take

$$ \alpha = T/2$$

and 

$$ \beta = \frac{1}{2} \left( \sum M_t^2 - \frac{ \left( \sum M_t \right)^2}{T - 1}\right) $$,

leaving us with 

$$\frac{1}{(T-1)\sqrt{2 \pi}^{T-2} } \frac{\tfrac{1}{2}^{T/2} \left( \sum M_t^2 - \frac{ \left( \sum M_t \right)^2}{T - 1}\right)^{T/2}}{\Gamma(T/2)} $$


--&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/11/26/notes.html"/>
   <updated>2013-11-26T00:00:00+00:00</updated>
   <id>/11/26/notes</id>
   <content type="html">&lt;h2 id=&quot;rnexml&quot;&gt;RNeXML&lt;/h2&gt;
&lt;h3 id=&quot;character-metadata&quot;&gt;Character metadata&lt;/h3&gt;
&lt;p&gt;EML provides a nice illustration of the kind of metadata we would want to typically accompany character trait data; at minimum, at the &lt;a href=&quot;http://knb.ecoinformatics.org/software/eml/eml-2.1.1/eml-attribute&quot;&gt;attribute&lt;/a&gt; level.&lt;/p&gt;
&lt;p&gt;Some of this is already there – we know if states are continuous or discrete, what possible states they can take on, and can add labels to state nodes to define what the symbols mean (however, perhaps an additional &lt;code&gt;meta&lt;/code&gt; annotation node would be preferred). We don’t have a way to specify the units of a continuous trait, or longer definitions of the traits themselves, etc.&lt;/p&gt;
&lt;p&gt;Obviously this is a hard problem, particularly in building any semantic reasoning around these traits. I gather that the phenoscape project is tackling this, but I’m not really up to speed on that. Long-term it would be nice to allow users to read and write trait metadata from R even without a working knowledge of the ontologies.&lt;/p&gt;
&lt;p&gt;One idea I’m pondering is if we might be able to generate an EML metadata file the NeXML. The most trivial and straight forward approach is simply to use EML vocabularly itself in the metadata.&lt;/p&gt;
&lt;h3 id=&quot;software-to-integrate-into-nexml-long-term&quot;&gt;Software to integrate into NeXML (long-term)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Visualization: automatically generate the appropriate HTML+javascript page to render tree with &lt;a href=&quot;http://www.jsphylosvg.com&quot;&gt;jsPhyloSVG&lt;/a&gt;/&lt;a href=&quot;http://www.phylotouch.com/&quot;&gt;phylotouch&lt;/a&gt; (&lt;a href=&quot;http://www.phylotouch.com/tm7/#&quot;&gt;example&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Support for phenoscape onotlogy tools, e.g. see data as generated by &lt;a href=&quot;http://phenoscape.org/wiki/Phenex&quot;&gt;phenex&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.nescent.org/wg/evoinfo/index.php?title=PhyloWS&quot;&gt;PhyloWS&lt;/a&gt; Generate a REST web service based on NeXML library(?)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;issues&quot;&gt;Issues&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Trying to understand if using nexml for comparative trait data will generate any confusion. (&lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/44&quot;&gt;#44&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/11/19/notes.html"/>
   <updated>2013-11-19T00:00:00+00:00</updated>
   <id>/11/19/notes</id>
   <content type="html">&lt;h3 id=&quot;rnexml&quot;&gt;RNeXML&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Feedback from Rutger, need to add &lt;code&gt;about&lt;/code&gt; attributes so that RDFa abstraction references the right level of the DOM (issue &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/35&quot;&gt;#35&lt;/a&gt;).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Looking for strategy for distilling RDF from RDFa in R, see &lt;a href=&quot;http://stackoverflow.com/questions/20026540/distill-rdfa-into-rdf-xml-in-r&quot;&gt;my question on SO&lt;/a&gt;. Hopefully don’t have to wrap some C library myself…&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/h3&gt;
&lt;p&gt;Writing writing.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Update pandoc templates to use yaml metadata for author, affiliation, abstract, etc. Avoids having to manually edit the &lt;code&gt;elsarticle.latex&lt;/code&gt; template with this metadata. Added &lt;a href=&quot;https://github.com/cboettig/pandoc-templates/&quot;&gt;fork&lt;/a&gt; for my templates, e.g. see my &lt;a href=&quot;https://github.com/cboettig/pandoc-templates/blob/f348513558c9189ef28f0aef06fe3031d7a17d96/elsarticle.latex&quot;&gt;elsarticle.latex&lt;/a&gt;. Example metadata in &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/a1801c525142d4bb64555721403d869ecfbde8d4/inst/doc/nonparametric-bayes.Rmd&quot;&gt;manuscript&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;fixing xtable caption (as argument)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Extended discussion. Adjustments to figures. See commit log /diffs for details.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;p&gt;&lt;span class=&quot;showtooltip&quot; title=&quot;Mace G (2013). &amp;#39;Global Change: Ecology Must Evolve.&amp;#39; Nature, 503, pp. 191-192. ISSN 0028-0836.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1038/503191a&quot;&gt;Mace (2013)&lt;/a&gt;&lt;/span&gt; , e.g.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;a new kind of ecology is needed that is predicated on scaling up efforts, data sharing and collaboration&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;hear hear.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;PNAS with a somewhat confused take on error rates, suggesting a revised threshold p-value…&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;AmNat &lt;a href=&quot;http://w3.biosci.utexas.edu/amnatasilomar/files/AsilomarMeetingProgramNov172013.pdf&quot;&gt;Asilomar schedule&lt;/a&gt; (pdf) is up.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Rnexml Metadata Queries</title>
	 <link href="/2013/11/17/RNeXML-metadata-queries.html"/>
   <updated>2013-11-17T00:00:00+00:00</updated>
   <id>/11/17/RNeXML-metadata-queries</id>
   <content type="html">&lt;p&gt;(From issue &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/20&quot;&gt;#20&lt;/a&gt;)&lt;/p&gt;
&lt;h3 id=&quot;basic-metadata-queries&quot;&gt;Basic metadata queries&lt;/h3&gt;
&lt;p&gt;a question of how the user queries that metadata. Currently we have a &lt;code&gt;metadata&lt;/code&gt; function that simply extracts all the metadata at the specified level (nexml, otus, trees, tree, etc) and returns a named character string in which the name corresponds to the &lt;code&gt;rel&lt;/code&gt; or &lt;code&gt;property&lt;/code&gt; and the value corresponds to the &lt;code&gt;content&lt;/code&gt; or &lt;code&gt;href&lt;/code&gt;, e.g.:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;birds &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;read.nexml&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;birdOrders.xml&amp;quot;&lt;/span&gt;)
meta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;get_metadata&lt;/span&gt;(birds) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;prints the named string with the top-level (default-level) metadata elements as so:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;meta 
##                                             dc:date 
##                                        &amp;quot;2013-11-17&amp;quot; 
##                                          cc:license 
## &amp;quot;http://creativecommons.org/publicdomain/zero/1.0/&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which we can subset by name, e.g. &lt;code&gt;meta[&amp;quot;dc:date&amp;quot;]&lt;/code&gt;. This is probably simplest to most R users; though exactly what the namespace prefix means may be unclear if they haven’t worked with namespaces before. (The user can always print a summary of the namespaces and prefixes in the nexml file using &lt;code&gt;birds@namespaces&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;This approach is simple, albeit a bit limited.&lt;/p&gt;
&lt;h3 id=&quot;xpath-queries&quot;&gt;XPath queries&lt;/h3&gt;
&lt;p&gt;For instance, the R user has a much more natural and powerful way to handle these issues of prefixes and namespaces using either the XML or rrdf libraries. For instance, if we extract meta nodes into RDF-XML, we could handle the queries like so:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;xpathSApply&lt;/span&gt;(meta, &lt;span class=&quot;st&quot;&gt;&amp;quot;//dc:title&amp;quot;&lt;/span&gt;, xmlValue)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;which uses the namespace prefix defined in the nexml; or&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;xpathSApply&lt;/span&gt;(meta, &lt;span class=&quot;st&quot;&gt;&amp;quot;//x:title&amp;quot;&lt;/span&gt;, xmlValue, &lt;span class=&quot;dt&quot;&gt;namespaces=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;http://purl.org/dc/elements/1.1/&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;defining the custom prefix &lt;code&gt;x&lt;/code&gt; to the URI&lt;/p&gt;
&lt;h3 id=&quot;sparql-queries&quot;&gt;Sparql queries&lt;/h3&gt;
&lt;p&gt;Pretty exciting that qe can make arbitrary SPARQL queries of the metadata as well.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(rrdf)
&lt;span class=&quot;kw&quot;&gt;sparql.rdf&lt;/span&gt;(ex, &lt;span class=&quot;st&quot;&gt;&amp;quot;SELECT ?title WHERE { ?x &amp;lt;http://purl.org/dc/elements/1.1/title&amp;gt; ?title })&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Obviously the XPath or SPARQL queries are more expressive / powerful than drawing out the metadata from the S4 structure directly. On the other hand, because both of these approaches use just the distilled metadata, the original connection between metadata elements and the structure of the XML tree is lost unless stated explicitly. An in-between solution is to use XPath on the nexml XML instead, though I think we cannot make use of the namespaces in that case, since they appear in attribute values rather than structure.&lt;/p&gt;
&lt;p&gt;Anyway, it’s nice to have these options in R, particularly for more complex queries where we might want to make some use of the ontology as well. On the other hand, simple presentation of basic metadata is probably necessary for most users.&lt;/p&gt;
&lt;p&gt;Would be nice to illustrate with a query that required some logical deduction from the ontology.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>So, you're active on Research Gate?</title>
	 <link href="/2013/11/14/research-gate.html"/>
   <updated>2013-11-14T00:00:00+00:00</updated>
   <id>/11/14/research-gate</id>
   <content type="html">&lt;p&gt;I have occassionally been getting this question:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;So, you’re active on ResearchGate?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Sounds like being accused of some scandal, doesn’t it?&lt;/p&gt;
&lt;p&gt;I’m not generally active on it - my impression is that the open science community is mostly skeptical about ResearchGate and any other “Social Network” for scientists, largely on the grounds that “we already use the same social networks everyone else uses.” Some object on more philosophical grounds (profit, Mendeley, etc), but heck I publish in Elsevier/Springer/Wiley so I won’t preach. That’s perhaps a US/elite institution centric view though; it seems more popular with a more international audience where things like basic access to pdfs may be more of an issue. I present no data to back any if that up.&lt;/p&gt;
&lt;p&gt;Personally, it hasn’t added any value for me, in contrast to the value I get from interacting with other researchers on Github, G+ or Twitter. Still, as RG recently got $35 million from Bill Gates, they might actually build something useful. Certainly traditional publishers have left plenty of room for innovation in the space of sharing data, networking, etc. So I have a profile there to wait and see, next to a disclaimer that says “please see my website for updated information.”&lt;/p&gt;
&lt;p&gt;However, I was actually impressed by ResearchGate this morning. While I thought I had successfully blocked most of their email notifications, one this morning had successfully found the full text of a recent paper of mine (albeit a few months after it had appeared). Instead of asking me to upload something, RG was able to obtain the full text from the publisher (Springer). On so doing, it also asks me if I would like to “follow” several of the researchers I cited who are also on ResearchGate.&lt;/p&gt;
&lt;p&gt;Why is that impressive? Mendeley, for all it’s much more natural fit into most researcher’s workflows, never automatically discovers papers I publish. If I want them in my Mendeley profile, I have to add them manually. Manually maintaining profiles across different networks is so entirely a waste of time and the antithesis of a linked data web where I have already made this information machine readable that I find it the most annoying feature by far in any of these sites. Here, ResearchGate is actually doing the intelligent thing, whether by connecting my RG identity to my ORCID ID, or something more heuristic. (Google Scholar automatically adds things to my profile, but in a far less selective algorithm that can be easily gamed, see &lt;a href=&quot;http://doi.org/10.1002/asi.23056&quot;&gt;10.1002/asi.23056&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;By obtaining the full-text directly from the publisher, they show the considerable advantage of a well-funded network. Presumably this indicates that access was negotiated directly with the publisher, who agrees and even facilitates me sharing the full-text of my otherwise paywalled article on my RG profile. That’s a non-trivial contribution towards open access: Contrast this to Mendeley’s more murky policy which encourages me to provide full text access through my user profile but places the legal responsibility directly on me to confirm that this permissible, or an organization like ORCID which despite (because of?) it’s more non-profit and utilitarian values does not have permission to distribute my paywalled pdfs on my profile. (Sure, my papers on arXiv already, but that isn’t the point).&lt;/p&gt;
&lt;p&gt;Likewise, using the citation data against the RG data on which researchers have profiles shows a vaguely intelligent use of data other platforms mostly ignore (providing useful suggestions using some understanding of the academic process rather than mindless application of some friend-of-a-friend network algorithm).&lt;/p&gt;
&lt;p&gt;(The fact that RG pings unfortunate souls who might have signed up once but have no desire to see my “Activity” on RG is one of it’s potentially effective marketing but more pernicious decisions. Use does not necessarily imply trust).&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/11/14/notes.html"/>
   <updated>2013-11-14T00:00:00+00:00</updated>
   <id>/11/14/notes</id>
   <content type="html">&lt;h2 id=&quot;ropensci&quot;&gt;ropensci&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ropensci stategic planning: wrote personal vision statement&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;rnexml&quot;&gt;RNeXML&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Comments on issues &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/12&quot;&gt;#12&lt;/a&gt; and &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/15#issuecomment-28493388&quot;&gt;#15&lt;/a&gt;, thinking about character matrices&lt;/li&gt;
&lt;li&gt;comments on &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/20#issuecomment-28494738&quot;&gt;#20&lt;/a&gt;, thinking about metadata parsing. (If only everyone knew xpath…)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Commit details on Github&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Do we need a culture of Data Science in Academia?</title>
	 <link href="/2013/11/13/Data-Science-Center.html"/>
   <updated>2013-11-13T00:00:00+00:00</updated>
   <id>/11/13/Data-Science-Center</id>
   <content type="html">&lt;p&gt;Just my draft copy of a &lt;a href=&quot;http://dynamicecology.wordpress.com/2013/11/25/do-we-need-a-culture-of-data-science-in-academia-guest-post/&quot;&gt;Guest blog post&lt;/a&gt; I wrote for Dynamic Ecology.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;On Tuesday the &lt;a href=&quot;http://www.nitrd.gov/nitrdgroups/index.php?title=Data_to_Knowledge_to_Action&quot;&gt;Whitehouse Office of Science and Technology Policy&lt;/a&gt; announced the creation of a $37.8 million dollar initiative to promote a “Data Science Culture” in academic institutions, funded by the &lt;a href=&quot;http://www.moore.org/newsroom/press-releases/2013/11/12/%20bold_new_partnership_launches_to_harness_potential_of_data_scientists_and_big_data&quot;&gt;Gordon and Betty Moore Foundation&lt;/a&gt;, &lt;a href=&quot;http://www.sloan.org/fileadmin/media/files/press_releases/datascience.pdf&quot;&gt;Alfred P. Sloan Foundation&lt;/a&gt;, and hosted in centers at the universities UC Berkeley, University of Washington, and New York University. Sadly, these announcements give little description of just what such a center would do, beyond repeating the usual the hype of “Big Data.”&lt;/p&gt;
&lt;p&gt;Fernando Perez, a research scientist at UC Berkeley closely involved with the process, paints a rather more provocative picture in his own perspective on &lt;a href=&quot;http://blog.fperez.org/2013/11/an-ambitious-experiment-in-data-science.html&quot;&gt;what this initiative might mean by a “Data Science Culture.”&lt;/a&gt; Rather than motivating the need for such a Center merely by expressing terabytes in scientific notation, Perez focuses on something not mentioned in the press releases. In his view, the objective of such a center stems from the observation that:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;the incentive mechanisms of academic research are at sharp odds with the rising need for highly collaborative interdisciplinary research, where computation and data are first-class citizens&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;His list of problems to be tackled by this Data Science Initiative includes some particularly catching references to issues that have raised themselves on Dynamic Ecology before:&lt;/p&gt;
&lt;!--
&gt; - An incentive structure that favors individualism, hyper-specialization and &quot;novelty&quot; to a toxic extreme
--&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;people grab methods like shirts from a rack, to see if they work with the pants they are wearing that day&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;methodologists tend to only offer proof-of-concept, synthetic examples, staying largely shielded from real-world concerns&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Well that’s a different tune than the usual big data hype&lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;. While it is easy to find anecdotes that support each of these charges, it is more difficult to assess just how rare or pervasive they really are. Though these are not new complaints among ecologists, the solutions (or at least antidotes) proposed in a Data Science Culture given a rather different emphasis. At first glance, the Data Science Culture sounds like the more familiar call for an interdisciplinary culture, emphasizing that the world would be a better place if only domain scientists learned more mathematics, statistics and computer science. It is not.&lt;/p&gt;
&lt;h5 id=&quot;the-problem-part-1-statistical-machismo&quot;&gt;the problem, part 1: &lt;a href=&quot;http://dynamicecology.wordpress.com/2012/09/11/statistical-machismo/&quot;&gt;statistical machismo&lt;/a&gt;?&lt;/h5&gt;
&lt;p&gt;As to whether ecologists choose methods to match their pants, we have at least some data beyond anecdote. A survey earlier this year by Joppa et al. &lt;a href=&quot;http://doi.org/10.1126/science.1231535&quot;&gt;(2013) &lt;em&gt;Science&lt;/em&gt;&lt;/a&gt;) has indeed shown that most ecologists select methods software guided primarily by concerns of fashion (in other words, whatever everybody else uses). The recent expansion of readily available statistical software has greatly increased the number of shirts on the rack. Titles in &lt;em&gt;Ecology&lt;/em&gt; reflect the trend of rising complexity in ecological models, such as &lt;a href=&quot;http://doi.org/10.1890/10-1124.1&quot;&gt;Living Dangerously with big fancy models&lt;/a&gt; and &lt;a href=&quot;http://doi.org/10.1890/10-0052.1&quot;&gt;Are exercises like this a good use of anybody’s time?&lt;/a&gt;). Because software enables researchers to make use of methods without the statistical knowledge of how to implement them from the ground up, many echo the position so memorably &lt;a href=&quot;http://press.princeton.edu/titles/8348.html&quot;&gt;articulated by Jim Clark&lt;/a&gt; that we “handing guns to children.” This belittling position usually leads to a call for improved education and training in mathematical and statistical underpinnings (see each of the 9 articles in another &lt;a href=&quot;http://doi.org/10.1890/08-1402.1&quot;&gt;&lt;em&gt;Ecology&lt;/em&gt; Forum&lt;/a&gt; on this topic), or the occassional wistful longing for a simpler time.&lt;/p&gt;
&lt;h5 id=&quot;the-solution-part-1-data-publication&quot;&gt;the solution, part 1: data publication?&lt;/h5&gt;
&lt;p&gt;What is most interesting to me in Perez’s perspective on the Data Science Institute in an emphasis on changing &lt;em&gt;incentives&lt;/em&gt; more than changing &lt;em&gt;educational&lt;/em&gt; practices. Perez characterizes the fundamental objective of the initiative as a &lt;em&gt;cultural shift in which&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“The creation of usable, robust computational tools, and the work of data acquisition and analysis must be treated as equal partners to methodological advances or domain-specific results”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;While this does not tackle the problem of misuse or misinterpretation of statistical methodology head-on, I believe it is a rather thought-provoking approach to mitigate the consequences of mistakes or limiting assumptions. By atomizing the traditional publication into such component parts: data, text, and software implementation, it becomes easier to recognize each for it’s own contributions. A brilliantly executed experimental manipulation need not live or die on some minor flaw in a routine statistical analysis when the data is a product in its own right. Programmatic access to raw data and computational libraries of statistical tools could make it easy to repeat or alter the methods chosen by the original authors, allowing the consequences of these mistakes to be both understood and corrected. In the current system in which access to the raw data is rare, statistical mistakes can be difficult to detect and even harder to remedy. This in turn places a high premium on the selection of appropriate statistical methods, while putting little selective pressure on the details of the data management or implementation of those methods. Allowing the data to stand by itself places a higher premium on careful collection and annotation of data (e.g. the adoption of metadata standards). To the extent that misapplication of statistical and modeling approaches could place a substantial error rate on the literature (&lt;a href=&quot;http://www.economist.com/news/briefing/21588057-scientists-think-science-self-correcting-alarming-degree-it-not-trouble?fsrc=scn/tw_ec/trouble_at_the_lab&quot;&gt;Economist&lt;/a&gt;, &lt;a href=&quot;http://doi.org/10.1371/journal.pmed.0020124&quot;&gt;Ioannidis 2005&lt;/a&gt;), independent data publication might be an intriguing antidote.&lt;/p&gt;
&lt;!--
Data scales in a way that publications do not, even (or rather, especially) within a particular sub-domain.  Given a single paper on a topic, it is much easier to read the conclusion than replicate it from the data.  Given 1000 papers on the topic vs having the underlying data in a standardized form, it becomes easier to replicate the analyses. Surely that would just lead to nonsense, given the idiosyncrasies of each different experiment that were never meant to be compared in that way?  Surely only by carefully reading not only each paper, but each supplement, can we really understand what was done well enough to replicate or re-analyze it?  Yet we cite papers as if they have demonstrated something in far more generality than all that.   

--&gt;
&lt;h5 id=&quot;the-problem-part-2-junk-software&quot;&gt;the problem, part 2: junk software&lt;/h5&gt;
&lt;p&gt;As Perez is careful to point out, those implementing and publishing methods aren’t helping either. Unreliable, inextensible and opaque computational implementations act both as barriers to adoption and validation. Trouble with scientific software has been well recognized by the literature (e.g. &lt;a href=&quot;http://doi.org/10.1038/467775a&quot;&gt;Merali (2010), &lt;em&gt;Nature&lt;/em&gt;&lt;/a&gt;, &lt;a href=&quot;http://doi.org/10.1038/nature10836&quot;&gt;Inces et al. (2012), &lt;em&gt;Nature&lt;/em&gt;&lt;/a&gt;), the news (&lt;a href=&quot;http://www.timeshighereducation.co.uk/news/save-your-work-give-software-engineers-a-career-track/2006431.article&quot;&gt;Times Higher Education&lt;/a&gt;) and funding agencies (&lt;a href=&quot;http://www.nsf.gov/pubs/2013/nsf13525/nsf13525.htm&quot;&gt;National Science Foundation&lt;/a&gt;). While it is difficult to assess the frequency of software bugs that may really alter the results (though see Inces et al.), designs that will make software challenging or impossible to maintain, scale to larger tasks or extend as methods evolve are more readily apparent. Cultural challenges around software run as deep as they do around data. When Mozilla’s Science Lab &lt;a href=&quot;http://doi.org/10.1038/501472a&quot;&gt;undertook a review of code&lt;/a&gt; associated with scientific publications, they took some criticism from other &lt;a href=&quot;http://simplystatistics.org/2013/09/26/how-could-code-review-discourage-code-disclosure-reviewers-with-motivation/&quot;&gt;advocates&lt;/a&gt; of publishing code. I encountered this first hand in replies from authors, editors and reviewers on my own blog post &lt;a href=&quot;http://carlboettiger.info/2013/06/13/what-I-look-for-in-software-papers.html&quot;&gt;suggesting we raise the bar&lt;/a&gt; on the review of methodological implementations. Despite disagreement about where that bar should be, I think we all felt the community could benefit from clearer guidance or consensus on how to review papers in which the software implementation plays an essential part and contribution.&lt;/p&gt;
&lt;h5 id=&quot;the-solution-part-2-software-publication&quot;&gt;the solution, part 2: software publication?&lt;/h5&gt;
&lt;p&gt;As in the case of data, educational practices are the route usually suggested to address better programming practices, and no doubt these are important. Once again though, it is interesting to think how a higher incentive on such research products might also improve their quality, or at least facilitate distilling the good from the bad from the ugly, more easily. Yet in this case, I think there is a potential downside as well.&lt;/p&gt;
&lt;h6 id=&quot;or-not&quot;&gt;Or not?&lt;/h6&gt;
&lt;p&gt;While widespread recognition of its importance will no doubt help bring us faster software, fewer bugs and more user-friendly interfaces, it may do more harm than good. Promotion of software as a product can lead to empire-building, for which ESRI’s ArcGIS might be a poster child. The scientific concepts become increasingly opaque, while training in a conceptually rich academic field gives way to more mindless training in the user interface of a single giant software tool. I believe that good scientific software should be modular – small code bases that can be easily understood, inter-operable, and perform a single task well (the Unix model). This lets us build more robust computational infrastructure tailored to the problem at hand, just as individual Lego bricks may be assembled and reassembled. Unfortunately, I do not see how recognition for software products would promote small modules over vast software platforms, or interoperability with other software instead of an exclusive walled garden.&lt;/p&gt;
&lt;!-- include image of lego brick tower?--&gt;
&lt;h4 id=&quot;so-change-incentives-how&quot;&gt;So, change incentives &lt;em&gt;how&lt;/em&gt;?&lt;/h4&gt;
&lt;p&gt;If this provides some argument as to why one might want to change incentives around data and software publication, I have said nothing to suggest how. After all, as ecologists we’re trained to reflect on the impact a policy would have, not advocate for what should be done about it. If the decision-makers agree about the effects of the given incentives, then choosing what to reward should be easier.&lt;/p&gt;
&lt;!--
#### Data Science Culture is Data Sharing Culture? 

In raising these questions, Perez brings the role of a Data Science Institute down from the clouds of superficial pattern-finding in astronomically large data sets that bear no resemblance to what most of us work on, and places front and center the challenges of designing, selecting, implementing and interpreting the richer statistical analyses we face each day. In the process of bolstering the data and methodology upon which we base research today, we may open up the doors to better, faster, and bigger science tomorrow.  

--&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;Probably for reasons discussed &lt;a href=&quot;http://dynamicecology.wordpress.com/2013/11/07/the-one-true-route-to-good-science-is/comment-page-1/#comment-20373&quot;&gt;recently on Dynamic Ecology&lt;/a&gt; about politicians and dirty laundry.&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
 </entry>
 
 <entry>
   <title>Mbi Day Five Notes</title>
	 <link href="/2013/11/08/MBI-day-five-notes.html"/>
   <updated>2013-11-08T00:00:00+00:00</updated>
   <id>/11/08/MBI-day-five-notes</id>
   <content type="html">&lt;p&gt;Panel discussion&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hugh’s question on the usefulness of dynamic vs static models: do we have dynamical systems envy?&lt;/li&gt;
&lt;li&gt;Chris: are temporal dynamics historical artefact, and space the new frontier?&lt;/li&gt;
&lt;li&gt;Hugh: though decision theory is fundamentally temporal. really question of sequential decision vs single decision&lt;/li&gt;
&lt;li&gt;Hugh, on what would be his priority if he had time for new question: Solve the 2 player, 2 step SDP competition closed form.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Paul: the narrow definitions of “math biology” with 1980s flavor.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;mathbiopaul&quot;&gt;@mathbiopaul&lt;/span&gt;: Formulating the hard problems arising in application in an appropriate abstraction that mathematicians will attack.&lt;/li&gt;
&lt;li&gt;Leah raises issue of publishing software and reproducibility&lt;/li&gt;
&lt;li&gt;Julia mentions Environmental modeling and software journal&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;notes-from-some-discussions-today&quot;&gt;Notes from some discussions today&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Sandy Leibold mentions potential for exploring early warning signals in larch budmoth data: &lt;span class=&quot;showtooltip&quot; title=&quot;Esper J, Buntgen U, Frank D, Nievergelt D and Liebhold A (2007). &amp;#39;1200 Years of Regular Outbreaks in Alpine Insects.&amp;#39; Proceedings of The Royal Society B: Biological Sciences, 274, pp. 671-679. ISSN 0962-8452.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1098/rspb.2006.0191&quot;&gt;Esper et al. (2007)&lt;/a&gt;&lt;/span&gt; , &lt;code&gt;r citet(&amp;quot;10.1111/j.1469 -8137.2009.02825.x&amp;quot;)&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Bill Fagan mentions paper with Eli Holmes on quasi-extinction forecasting &lt;span class=&quot;showtooltip&quot; title=&quot;Holmes E, Sabo J, Viscido S and Fagan W (2007). &amp;#39;A Statistical Approach to Quasi-Extinction Forecasting.&amp;#39; Ecology Letters, 10, pp. 1182-1198. ISSN 1461-023X.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2007.01105.x&quot;&gt;Holmes et al. (2007)&lt;/a&gt;&lt;/span&gt; and an analysis of the GPDD &lt;span class=&quot;showtooltip&quot; title=&quot;Fagan u, Meir u, Prendergast u, Folarin u and Karieva u (2001). &amp;#39;Characterizing Population Vulnerability For 758 Species.&amp;#39; Ecology Letters, 4, pp. 132-138. ISSN 1461-023X.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1046/j.1461-0248.2001.00206.x&quot;&gt;Fagan et al. (2001)&lt;/a&gt;&lt;/span&gt; as potentially interesting applications for our Bayesian nonparametrics work.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Matt Potts mentions DoD program in &lt;a href=&quot;http://www.serdp.org/&quot;&gt;Strategic Environmental Research and Development Program (SERDP)&lt;/a&gt;. E.g. see the current call for &lt;a href=&quot;http://www.serdp.org/content/download/22120/228239/version/2/file/FY15_RCSON-15-01_New+Conservation+Paradigms_Final.pdf&quot;&gt;New Paradigms for Managing Species and Ecosystems in a Non-Stationary World (pdf)&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;pdg-control&quot;&gt;pdg-control&lt;/h3&gt;
&lt;p&gt;Trying to understand pattern of increasing ENPV with increasing stochasticity. Despite having the same optimal policy inferred under increasing stochasticity (i.e. still in Reed’s self-sustaining criterion, below &lt;span class=&quot;math&quot;&gt;\(\sigma_g\)&lt;/span&gt; of 0.2 or so) the average over simulated replicates is higher. We don’t seem to obtain the theoretical ENPV, but something less, in either case. See code &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/38bccb71b08f1bbd02b7a5ca55188a739eea5109/inst/examples/noise_effects.Rmd&quot;&gt;noise_effects.md&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;ropensci&quot;&gt;ropensci&lt;/h3&gt;
&lt;p&gt;Schema.org defines a vocabulary for &lt;a href=&quot;http://schema.org/Dataset&quot;&gt;datasets&lt;/a&gt; (microdata/rdfa)&lt;/p&gt;
&lt;p&gt;Rutger gives a one-liner solution for tolweb to nexml using &lt;a href=&quot;https://github.com/rvosa/bio-phylo&quot;&gt;bio-phylo&lt;/a&gt; perl library:&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;perl&lt;/span&gt; -MBio::Phylo::IO=parse -e &lt;span class=&quot;st&quot;&gt;&amp;#39;print parse-&amp;gt;to_xml&amp;#39;&lt;/span&gt; format tolweb as_project 1 url &lt;span class=&quot;st&quot;&gt;&amp;#39;http://tolweb.org/onlinecontributors/app?service=external&amp;amp;page=xml/TreeStructureService&amp;amp;node_id=52643&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Hmm, there’s a journal of &lt;a href=&quot;http://www.sciencedirect.com/science/journal/15749541&quot;&gt;Ecological Informatics&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Rebecca S. Epanchin-Niell, Robert G. Haight, Ludek Berec, John M. Kean, Andrew M. Liebhold, Helen Regan, (2012) Optimal Surveillance And Eradication of Invasive Species in Heterogeneous Landscapes. &lt;em&gt;Ecology Letters&lt;/em&gt; &lt;strong&gt;15&lt;/strong&gt; 803-812 &lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2012.01800.x&quot;&gt;10.1111/j.1461-0248.2012.01800.x&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Rebecca S. Epanchin-Niell, James E. Wilen, (2012) Optimal Spatial Control of Biological Invasions. &lt;em&gt;Journal of Environmental Economics And Management&lt;/em&gt; &lt;strong&gt;63&lt;/strong&gt; 260-270 &lt;a href=&quot;http://dx.doi.org/10.1016/j.jeem.2011.10.003&quot;&gt;10.1016/j.jeem.2011.10.003&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;J. Esper, U. Buntgen, D. C Frank, D. Nievergelt, A. Liebhold, (2007) 1200 Years of Regular Outbreaks in Alpine Insects. &lt;em&gt;Proceedings of The Royal Society B: Biological Sciences&lt;/em&gt; &lt;strong&gt;274&lt;/strong&gt; 671-679 &lt;a href=&quot;http://dx.doi.org/10.1098/rspb.2006.0191&quot;&gt;10.1098/rspb.2006.0191&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;unknown Fagan, unknown Meir, unknown Prendergast, unknown Folarin, unknown Karieva, (2001) Characterizing Population Vulnerability For 758 Species. &lt;em&gt;Ecology Letters&lt;/em&gt; &lt;strong&gt;4&lt;/strong&gt; 132-138 &lt;a href=&quot;http://dx.doi.org/10.1046/j.1461-0248.2001.00206.x&quot;&gt;10.1046/j.1461-0248.2001.00206.x&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;A. R. Hall, A. D. Miller, H. C. Leggett, S. H. Roxburgh, A. Buckling, K. Shea, (2012) Diversity-Disturbance Relationships: Frequency And Intensity Interact. &lt;em&gt;Biology Letters&lt;/em&gt; &lt;strong&gt;8&lt;/strong&gt; 768-771 &lt;a href=&quot;http://dx.doi.org/10.1098/rsbl.2012.0282&quot;&gt;10.1098/rsbl.2012.0282&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Elizabeth Eli Holmes, John L. Sabo, Steven Vincent Viscido, William Fredric Fagan, (2007) A Statistical Approach to Quasi-Extinction Forecasting. &lt;em&gt;Ecology Letters&lt;/em&gt; &lt;strong&gt;10&lt;/strong&gt; 1182-1198 &lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2007.01105.x&quot;&gt;10.1111/j.1461-0248.2007.01105.x&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Brian Leung, Nuria Roura-Pascual, Sven Bacher, Jaakko Heikkilä, Lluis Brotons, Mark A. Burgman, Katharina Dehnen-Schmutz, Franz Essl, Philip E. Hulme, David M. Richardson, Daniel Sol, Montserrat Vilà, Marcel Rejmanek, (2012) Teasing Apart Alien Species Risk Assessments: A Framework For Best Practices. &lt;em&gt;Ecology Letters&lt;/em&gt; &lt;strong&gt;15&lt;/strong&gt; 1475-1493 &lt;a href=&quot;http://dx.doi.org/10.1111/ele.12003&quot;&gt;10.1111/ele.12003&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;A. D. Miller, S. H. Roxburgh, K. Shea, (2011) How Frequency And Intensity Shape Diversity-Disturbance Relationships. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;108&lt;/strong&gt; 5643-5648 &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1018594108&quot;&gt;10.1073/pnas.1018594108&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Adam David Miller, Stephen H. Roxburgh, Katriona Shea, (2011) Timing of Disturbance Alters Competitive Outcomes And Mechanisms of Coexistence in an Annual Plant Model. &lt;em&gt;Theoretical Ecology&lt;/em&gt; &lt;strong&gt;5&lt;/strong&gt; 419-432 &lt;a href=&quot;http://dx.doi.org/10.1007/s12080-011-0133-1&quot;&gt;10.1007/s12080-011-0133-1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Mbi Day Four Notes</title>
	 <link href="/2013/11/07/MBI-day-four-notes.html"/>
   <updated>2013-11-07T00:00:00+00:00</updated>
   <id>/11/07/MBI-day-four-notes</id>
   <content type="html">&lt;h2 id=&quot;morning-session&quot;&gt;Morning session&lt;/h2&gt;
&lt;h4 id=&quot;iadine-chades&quot;&gt;Iadine Chades&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Chadès, I., Carwardine, J., Martin, T.G., Nicol, S., Sabbadin, R. &amp;amp; Buffet, O. (2012) MOMDPs: a solution for modelling adaptive management problems. The Twenty-Sixth AAAI Conference on Artificial Intelligence (AAAI-12), pp. 267-273. Toronto, Canada.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;10.1098/rspb.2013.0325 Migratory connectivity magnifies the consequences of habitat loss from sea-level rise for shorebird populations&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;jake-lariviera&quot;&gt;Jake LaRiviera&lt;/h4&gt;
&lt;p&gt;presents the challenges of the uncertainty table. Additional challenges in making an apples-to-apples comparison of the benefit of decreasing noise of different systems (e.g. in pricing information?)&lt;/p&gt;
&lt;h4 id=&quot;me&quot;&gt;Me&lt;/h4&gt;
&lt;p&gt;Some good questions following talk, primarily on BNP part.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Where does the risk-adverse vs risk-prone behavior come from? Adjusting curvature of the uncertainty appropriately.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Any lessons after stock collapsed, e.g. Rebuild a stock rather than mantain it? (Perhaps, but may face hysteresis in a way the intial collapse does not).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Brute-force passive learning?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;afternoon-discussion&quot;&gt;Afternoon discussion&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Is an active learning approach more or less valuable in a changing environment&lt;/li&gt;
&lt;li&gt;Embracing surprise: how do we actually mathematically do this.&lt;/li&gt;
&lt;li&gt;Limitations due to constraints on frequency of updating. (e.g. we don’t get to change harvest, we get to set a TAC once every ten years).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Uncertainty affecting net present value vs affecting model behavior&lt;/li&gt;
&lt;/ol&gt;
&lt;!--
### Misc comments on L &amp; L

Brian, great post here.  

To be honest, it sounds like L&amp;L are primarily concerned about bad statistical practices rather than about open data, ecoinformatics, etc.  They speculate on a rising number of publications that make mistakes in multiple comparisons, in ignoring heterogeneity in data, in failing to have well-posed questions first.  This blog has often spoken to the issue of pervasiveness of statistical errors in the ecological literature, which is certainly neither a new problem.  As many commenters have pointed out, those ecologists not collecting their own data are perhaps not the leading culprits in making these statistical errors.  

I completely appreciate the deep knowledge of context that comes with first-hand collection of data, but at least to the extent that the context informs the conclusions, that context should be made part of the metadata.  Do we not move towards, not away, from enabling junk science when we permit conclusions to be drawn only by those who designed the experiment and collect the data?  

It is too easy to read L&amp;L as a defense of data hugging.  You can&#39;t use my data because you cannot understand it.  If publications and citations didn&#39;t play the role they do in our academic economy, I suspect we would hear the exact same sentiments about publications themselves: if I publish my ideas, people who lack my superior understanding of context will misunderstand and misuse them!  When these contributions are rewarded, it is easier to appreciate the benefits having these ideas be seen and debated among the scientific community outweigh the risk of misintepretation.  The same might be said of data.  

Open data is often represented as benefiting the parasites (through &quot;free&quot; publications) at a cost to the original contributors (in &quot;lost&quot; publications).  If the production and citation of one&#39;s original datasets became the major metric of scientific contribution, this would reward all those collecting data while leaving the parasites without any recognized contribution - a valuation that sounds more in line with how L&amp;L view the reliatve merits of these groups.  Given their position, it seems they would be great advocates for data publication and citation, which rewards the things they value most, and overhauling the current publication system so favorable to the existence of parasites.  


Phylogenetic data is perhaps the most pervasive example across ecological and evolutionary work where people now use sequences or phylogeny data they did not collect themselves.  And yes, the literature is rife with examples where this data has been misapplied - such as branch lengths being misinterpreted or uncertainty in branch lengths ignored.  Would fewer errors be made if we had no genbank and everyone had to collect all their own sequence data?  Yes, because most of these studies would become infeasible anyhow.  Creating a time-calibrated phylogeny from sequence data and fossils you collected all yourself might give you a greater appreciation for the uncertainty, but only to the extent that you learn the theoretical statistical underpinnings of the inference along the way.  

--&gt;
</content>
 </entry>
 
 <entry>
   <title>Mbi Day Three</title>
	 <link href="/2013/11/06/MBI-day-three.html"/>
   <updated>2013-11-06T00:00:00+00:00</updated>
   <id>/11/06/MBI-day-three</id>
   <content type="html">&lt;h2 id=&quot;mbi-workshop&quot;&gt;MBI Workshop&lt;/h2&gt;
&lt;h4 id=&quot;becky-epanchin-niell&quot;&gt;Becky Epanchin-Niell&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Motivating example of Rabies spatial control in Switzerland&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;2012 Eco Let: should New Zealand survey for bark beetle? Cost of survellience, control, and damage. &lt;span class=&quot;showtooltip&quot; title=&quot;Epanchin-Niell R, Haight R, Berec L, Kean J, Liebhold A and Regan H (2012). &amp;#39;Optimal Surveillance And Eradication of Invasive Species in Heterogeneous Landscapes.&amp;#39; Ecology Letters, 15, pp. 803-812. .&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2012.01800.x&quot;&gt;Epanchin-Niell et al. (2012)&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;2012 JEEM spatial spread of star thistle: control spread and eradication as an integer programming problem in deterministic context. (with Wilen) &lt;span class=&quot;showtooltip&quot; title=&quot;Epanchin-Niell R and Wilen J (2012). &amp;#39;Optimal Spatial Control of Biological Invasions.&amp;#39; Journal of Environmental Economics And Management, 63, pp. 260-270. ISSN 00950696.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.jeem.2011.10.003&quot;&gt;Epanchin-Niell &amp;amp; Wilen (2012)&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Breaking landscape into individual landowners makes it less valuable to control early.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;kat-shea&quot;&gt;Kat Shea&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;IDH varying both frequency and intensity. &lt;span class=&quot;showtooltip&quot; title=&quot;Miller A, Roxburgh S and Shea K (2011). &amp;#39;How Frequency And Intensity Shape Diversity-Disturbance Relationships.&amp;#39; Proceedings of The National Academy of Sciences, 108, pp. 5643-5648. ISSN 0027-8424.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1018594108&quot;&gt;Miller et al. (2011)&lt;/a&gt;&lt;/span&gt; , experimental example in &lt;span class=&quot;showtooltip&quot; title=&quot;Hall A, Miller A, Leggett H, Roxburgh S, Buckling A and Shea K (2012). &amp;#39;Diversity-Disturbance Relationships: Frequency And Intensity Interact.&amp;#39; Biology Letters, 8, pp. 768-771. ISSN 1744-9561.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1098/rsbl.2012.0282&quot;&gt;Hall et al. (2012)&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Changing of timing matters more than frequency (e.g. hit weed a key phase of life cycle) &lt;span class=&quot;showtooltip&quot; title=&quot;Miller A, Roxburgh S and Shea K (2011). &amp;#39;Timing of Disturbance Alters Competitive Outcomes And Mechanisms of Coexistence in an Annual Plant Model.&amp;#39; Theoretical Ecology, 5, pp. 419-432. ISSN 1874-1738.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1007/s12080-011-0133-1&quot;&gt;Miller et al. (2011b)&lt;/a&gt;&lt;/span&gt; .&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;changing autocorrelation of distrubance as a managment strategy&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;brian-leung&quot;&gt;Brian Leung&lt;/h4&gt;
&lt;p&gt;“Data, uncertainty and risk in biological invasions”&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alien risk assessments &lt;span class=&quot;showtooltip&quot; title=&quot;Leung B, Roura-Pascual N, Bacher S, Heikkilä J, Brotons L, Burgman M, Dehnen-Schmutz K, Essl F, Hulme P, Richardson D, Sol D, Vilà M and Rejmanek M (2012). &amp;#39;Teasing Apart Alien Species Risk Assessments: A Framework For Best Practices.&amp;#39; Ecology Letters, 15, pp. 1475-1493. .&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/ele.12003&quot;&gt;Leung et al. (2012)&lt;/a&gt;&lt;/span&gt; , shows a dominance of rank scoring over truely quantitative approaches. Limitations to each.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;It’s not the model complexity, but the implementation interface that poses the real barrier. Also need better integration needs.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h4 id=&quot;breakout-session-spatial-strategies-for-management&quot;&gt;Breakout session: Spatial strategies for management&lt;/h4&gt;
&lt;p&gt;Scott Barrett&lt;/p&gt;
&lt;h3 id=&quot;pdg-control&quot;&gt;PDG Control&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;back-and-forth with Paul: is second column redundant? Seems not: NPV when paying penalty that doesn’t exist is: profit under penalty (&lt;span class=&quot;math&quot;&gt;\(\Pi_0(x,h)\)&lt;/span&gt;) minus zero (adjustment cost), while scaling is set such that profit under penalty &lt;em&gt;minus adjustment cost&lt;/em&gt;, &lt;span class=&quot;math&quot;&gt;\(\Pi_0(x,h) - \Pi_1(h, c_2)\)&lt;/span&gt;. Also, better to normalize everything against the adjustment-free ENPV (&lt;span class=&quot;math&quot;&gt;\(Pi_0\)&lt;/span&gt;) than to normalize by the truth/simulation model (which differs in different cases).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;See &lt;a href=&quot;https://github.com/cboettig/pdg_control/commits/6e81656ce60a5c9f53bb8bd383b388266d72fcf3&quot;&gt;commit log&lt;/a&gt; for updated versions.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;bibliography&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Rebecca S. Epanchin-Niell, Robert G. Haight, Ludek Berec, John M. Kean, Andrew M. Liebhold, Helen Regan, (2012) Optimal Surveillance And Eradication of Invasive Species in Heterogeneous Landscapes. &lt;em&gt;Ecology Letters&lt;/em&gt; &lt;strong&gt;15&lt;/strong&gt; 803-812 &lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2012.01800.x&quot;&gt;10.1111/j.1461-0248.2012.01800.x&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Rebecca S. Epanchin-Niell, James E. Wilen, (2012) Optimal Spatial Control of Biological Invasions. &lt;em&gt;Journal of Environmental Economics And Management&lt;/em&gt; &lt;strong&gt;63&lt;/strong&gt; 260-270 &lt;a href=&quot;http://dx.doi.org/10.1016/j.jeem.2011.10.003&quot;&gt;10.1016/j.jeem.2011.10.003&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;A. R. Hall, A. D. Miller, H. C. Leggett, S. H. Roxburgh, A. Buckling, K. Shea, (2012) Diversity-Disturbance Relationships: Frequency And Intensity Interact. &lt;em&gt;Biology Letters&lt;/em&gt; &lt;strong&gt;8&lt;/strong&gt; 768-771 &lt;a href=&quot;http://dx.doi.org/10.1098/rsbl.2012.0282&quot;&gt;10.1098/rsbl.2012.0282&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Brian Leung, Nuria Roura-Pascual, Sven Bacher, Jaakko Heikkilä, Lluis Brotons, Mark A. Burgman, Katharina Dehnen-Schmutz, Franz Essl, Philip E. Hulme, David M. Richardson, Daniel Sol, Montserrat Vilà, Marcel Rejmanek, (2012) Teasing Apart Alien Species Risk Assessments: A Framework For Best Practices. &lt;em&gt;Ecology Letters&lt;/em&gt; &lt;strong&gt;15&lt;/strong&gt; 1475-1493 &lt;a href=&quot;http://dx.doi.org/10.1111/ele.12003&quot;&gt;10.1111/ele.12003&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;A. D. Miller, S. H. Roxburgh, K. Shea, (2011) How Frequency And Intensity Shape Diversity-Disturbance Relationships. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;108&lt;/strong&gt; 5643-5648 &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1018594108&quot;&gt;10.1073/pnas.1018594108&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Adam David Miller, Stephen H. Roxburgh, Katriona Shea, (2011) Timing of Disturbance Alters Competitive Outcomes And Mechanisms of Coexistence in an Annual Plant Model. &lt;em&gt;Theoretical Ecology&lt;/em&gt; &lt;strong&gt;5&lt;/strong&gt; 419-432 &lt;a href=&quot;http://dx.doi.org/10.1007/s12080-011-0133-1&quot;&gt;10.1007/s12080-011-0133-1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Mbi Day Two</title>
	 <link href="/2013/11/05/MBI-day-two.html"/>
   <updated>2013-11-05T00:00:00+00:00</updated>
   <id>/11/05/MBI-day-two</id>
   <content type="html">&lt;h2 id=&quot;mbi-workshop&quot;&gt;MBI Workshop&lt;/h2&gt;
&lt;h4 id=&quot;paul-armsworth&quot;&gt;Paul Armsworth&lt;/h4&gt;
&lt;p&gt;Very nice example of control in creating a market for ecosystem services for landowners. Key feature is that multiple land-owners respond by adjusting their prices, and so payments can be divided into fraction going into subsidy and fraction going into conservation. When one land-owner controls land that is particularly good cost per conservation accomplished, they also stand to gain largest value.&lt;/p&gt;
&lt;p&gt;Also looked at auction mechanism and impact of cooperation among landowners to create hold outs.&lt;/p&gt;
&lt;h4 id=&quot;hugh-possingham&quot;&gt;Hugh Possingham&lt;/h4&gt;
&lt;p&gt;Hot spot assignment. Marxan and success while ignoring dynamics. {to what extent is data substitute for dynamics}&lt;/p&gt;
&lt;p&gt;Dynamics (but no heterogeneity)&lt;/p&gt;
&lt;h4 id=&quot;bill-fagan&quot;&gt;Bill Fagan&lt;/h4&gt;
&lt;p&gt;Linking individual movements to population dynamics. Home range vs migration vs nomadic motion.&lt;/p&gt;
&lt;h4 id=&quot;afternoon-breakout&quot;&gt;Afternoon breakout&lt;/h4&gt;
&lt;p&gt;Looking at role of institutions and tractability of implementation problems. Interesting observation from Lou in the long-tail effect of certain individuals in explaining heterogeneity in implementation success.&lt;/p&gt;
&lt;hr /&gt;
&lt;h3 id=&quot;pdg-control&quot;&gt;PDG Control&lt;/h3&gt;
&lt;p&gt;Working on table following &lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/41&quot;&gt;issue #41&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Based on &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/5c18c1108dd7502a54bb39c1750d9be74c974ba0/inst/examples/policycosts/errors_table.Rmd&quot;&gt;errors_table.Rmd&lt;/a&gt;, plot from &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/49b3faf7cd4430aa8ba18cb5a36862b5d07f1e0f/inst/examples/policycosts/plot_table.Rmd&quot;&gt;plot_table.Rmd&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;shows the effect of greater noise actually reducing the impact of being wrong (either by ignoring adjustment costs that exist or assuming adjustment costs that don’t exist). Bigger induced reduction in NPV (higher cost) naturally decreases value.&lt;/p&gt;
&lt;p&gt;Functional form doesn’t matter when assuming costs that don’t exist, since these are calibrated to be equivalent by selecting the coefficients in order to have equal reduction in NPV. Obviously functional form does matter when ignoring penalties that do exist, and it seems that ignoring L2 penalties is most damaging, ignoring L1 penalties the least damaging?&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7371/10693106325_9cb0c2c8bb_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-1&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-1&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;TABLE border=1&gt;
&lt;TR&gt;
&lt;TH&gt;
&lt;/TH&gt;
&lt;TH&gt;
penalty_fn
&lt;/TH&gt;
&lt;TH&gt;
ignore_cost
&lt;/TH&gt;
&lt;TH&gt;
ignore_fraction
&lt;/TH&gt;
&lt;TH&gt;
assume_cost
&lt;/TH&gt;
&lt;TH&gt;
assume_fraction
&lt;/TH&gt;
&lt;TH&gt;
sigma_g
&lt;/TH&gt;
&lt;TH&gt;
reduction
&lt;/TH&gt;
&lt;/TR&gt;
&lt;TR&gt;
&lt;TD align=&quot;right&quot;&gt;
1
&lt;/TD&gt;
&lt;TD&gt;
L1
&lt;/TD&gt;
&lt;TD align=&quot;right&quot;&gt;
14536.09
&lt;/TD&gt;
&lt;TD align=&quot;right&quot;&gt;
1.00
&lt;/TD&gt;
&lt;TD align=&quot;right&quot;&gt;
16857.61
&lt;/TD&gt;
&lt;TD align=&quot;right&quot;&gt;
1.00
&lt;/TD&gt;
&lt;TD align=&quot;right&quot;&gt;
0.05
&lt;/TD&gt;
&lt;TD align=&quot;right&quot;&gt;
0.10
&lt;/TD&gt;
&lt;/TR&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 2 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L2 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 11020.10 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.76 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 15538.44 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.92 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.05 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.10 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
  &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 3 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; fixed &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 13584.97 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.92 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 17582.78 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.05 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.05 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.10 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
    &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 4 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L1 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 9273.66 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.09 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 17561.81 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.04 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.05 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
      &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 5 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L2 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 11020.10 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.76 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 15538.44 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.92 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.05 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
        &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 6 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; fixed &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 8332.45 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.84 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 17401.82 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.03 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.05 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
          &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 7 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L1 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; -641.78 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.21 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 15451.25 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.92 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.05 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.30 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
            &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 8 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L2 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; -272586.11 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; -24.90 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 11567.12 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.69 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.05 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.30 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
              &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 9 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; fixed &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; -1213.01 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; -0.46 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 15519.95 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.92 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.05 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.30 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 10 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L1 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 18281.97 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.01 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 20973.56 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.99 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.10 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                  &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 11 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L2 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 12462.51 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.72 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 19392.85 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.91 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.10 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                    &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 12 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; fixed &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 16691.94 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.03 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 20143.80 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.95 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.10 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                      &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 13 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L1 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 12788.95 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.96 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 20663.21 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.97 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                        &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 14 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L2 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 12462.51 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.72 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 19392.85 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.91 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                          &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 15 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; fixed &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 12399.01 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.88 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 21289.21 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.00 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                            &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 16 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L1 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 9099.48 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.73 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 19999.07 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.94 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.30 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                              &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 17 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L2 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; -6337.76 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; -0.39 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 17765.33 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.83 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.30 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 18 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; fixed &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 7399.01 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.62 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 21969.84 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.03 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.30 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                  &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 19 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L1 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 30227.43 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.07 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 31377.07 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.94 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.50 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.10 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                    &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 20 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L2 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 33472.18 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.00 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 33472.18 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.00 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.50 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.10 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                      &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 21 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; fixed &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 28926.73 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.09 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 30500.85 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.91 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.50 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.10 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                        &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 22 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L1 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 24157.93 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.10 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 31767.92 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.95 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.50 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                          &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 23 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L2 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 19091.31 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.93 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 29225.46 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.87 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.50 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                            &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 24 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; fixed &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 23573.19 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.02 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 30069.80 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.90 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.50 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.20 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                              &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 25 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L1 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 21086.12 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 1.12 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 32035.93 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.96 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.50 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.30 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                                &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 26 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; L2 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 19091.31 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.93 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 29225.46 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.87 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.50 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.30 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                                  &amp;lt;TR&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 27 &amp;lt;/TD&amp;gt; &amp;lt;TD&amp;gt; fixed &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 17209.56 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.85 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 32946.24 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.98 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.50 &amp;lt;/TD&amp;gt; &amp;lt;TD align=&amp;quot;right&amp;quot;&amp;gt; 0.30 &amp;lt;/TD&amp;gt; &amp;lt;/TR&amp;gt;
                                                     &amp;lt;/TABLE&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2 id=&quot;ropensci-ecoinformatics&quot;&gt;rOpenSci / ecoinformatics&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Exploring strategies for addressing certificate authentication workflow.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Plans to merge &lt;code&gt;dataone&lt;/code&gt; and &lt;code&gt;rdataone&lt;/code&gt;, shedding the current &lt;code&gt;rJava&lt;/code&gt; dependency and dealing with existing vs new namespacing &lt;a href=&quot;https://github.com/ropensci/rdataone/issues/1&quot;&gt;#1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;phylogenetics&quot;&gt;phylogenetics&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Some discussion of &lt;span class=&quot;showtooltip&quot; title=&quot;Quintero I, Wiens J and Harmon L (2013). &amp;#39;Rates of Projected Climate Change Dramatically Exceed Past Rates of Climatic Niche Evolution Among Vertebrate Species.&amp;#39; Ecology Letters, 16, pp. 1095-1103. .&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/ele.12144&quot;&gt;Quintero et al. (2013)&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Mbi Notes</title>
	 <link href="/2013/11/04/MBI-notes.html"/>
   <updated>2013-11-04T00:00:00+00:00</updated>
   <id>/11/04/MBI-notes</id>
   <content type="html">&lt;h2 id=&quot;sustainable-management-of-living-natural-resources&quot;&gt;&lt;a href=&quot;http://mbi.osu.edu/event/?id=277&quot;&gt;SUSTAINABLE MANAGEMENT OF LIVING NATURAL RESOURCES&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://mbi.osu.edu/event/?id=277#description&quot;&gt;Description&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://mbi.osu.edu/event/?id=277#schedule&quot;&gt;Full Schedule&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://mbi.osu.edu/event/?id=277#participants&quot;&gt;Participants&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;introductions&quot;&gt;Introductions&lt;/h2&gt;
&lt;h2 id=&quot;hastings&quot;&gt;Hastings&lt;/h2&gt;
&lt;h2 id=&quot;lou-gross&quot;&gt;Lou Gross&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Big picture: big data, computational challenges.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;NEON, DataONE, ADW, iDigBio&lt;/li&gt;
&lt;li&gt;“Convergence” as the new interdisciplinary (National Academies)&lt;/li&gt;
&lt;li&gt;Rise of synthesis centers&lt;/li&gt;
&lt;li&gt;“Enabling architecture for next gen life science research” – National Academies report Lou Gross (2013)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Comp Science for Natural Resource Management – Fuller, Wang, Gross (2007)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;language barriers: What’s a model? Mouse, drosophila? logistic, ricker? GIS map layers? …&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Contraints frequently dominate, not the control or the state equation.&lt;/p&gt;
&lt;p&gt;Let stakeholders make their own rankings. Scenario analysis vs optimal control. Uncertainies! “Relative assessment protocol” Fuller, Gross, Duke-Sylvester, Palmer. “Testing the robustness of management descions under uncertainty” (ATLSS modeling)&lt;/p&gt;
&lt;h3 id=&quot;breakouts&quot;&gt;Breakouts&lt;/h3&gt;
&lt;p&gt;notes from my breakout session:&lt;/p&gt;
&lt;h4 id=&quot;questions&quot;&gt;Questions&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Sensitivity analysis of Scenario Rankings&lt;/li&gt;
&lt;li&gt;What does a Resilience approach add&lt;/li&gt;
&lt;li&gt;Generalities&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;tools-for-decision-under-uncertainty&quot;&gt;Tools for decision under uncertainty&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;optimization&lt;/li&gt;
&lt;li&gt;threshold planning&lt;/li&gt;
&lt;li&gt;scenario planning&lt;/li&gt;
&lt;li&gt;resilience thinking&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(Polasky et al 2011 TREE)&lt;/p&gt;
&lt;h4 id=&quot;optimization&quot;&gt;optimization&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Info gap “theory”&lt;/li&gt;
&lt;li&gt;Satisfiability / mini-max&lt;/li&gt;
&lt;li&gt;model approximation methods&lt;/li&gt;
&lt;li&gt;dynamic programming&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;leading-challenges&quot;&gt;Leading Challenges&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;To what extent are these approaches different sides of the same coin?&lt;/li&gt;
&lt;li&gt;Are there truly non-optimization based approaches?&lt;/li&gt;
&lt;li&gt;Almost-optimal approaches&lt;/li&gt;
&lt;li&gt;Including constraints&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;what-we-do-well&quot;&gt;what we do well&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Optimize easy problems&lt;/li&gt;
&lt;li&gt;open loop&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;state-of-the-art&quot;&gt;State-of-the-art&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Starting to: simulate optimal solutions to simple problems under more realistic circumstances&lt;/li&gt;
&lt;li&gt;Starting to find multiple “optima”&lt;/li&gt;
&lt;li&gt;feedback control (SDP)&lt;/li&gt;
&lt;li&gt;Dual-control / adaptive control / active adaptive management / learning&lt;/li&gt;
&lt;li&gt;large state space&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;open-challenges-what-we-do-poorly&quot;&gt;Open challenges / what we do poorly&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Dual control under parameter uncertainty (without restrictive assumptions on parameters)&lt;/li&gt;
&lt;li&gt;high-dimensional problems&lt;/li&gt;
&lt;li&gt;multiple stake-holders / game-theory solutions (outside fisheries)&lt;/li&gt;
&lt;li&gt;mapping between control and implementation (partial controllability)&lt;/li&gt;
&lt;li&gt;large action space&lt;/li&gt;
&lt;li&gt;(multiple) delayed effect actions&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;open-challenges-multiple-stake-holder-games&quot;&gt;Open challenges: Multiple stake-holder games&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;beyond 2-player differential games (with feedback)&lt;/li&gt;
&lt;li&gt;simultaneous player actions&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;open-challenges-adaptive-management-timescales&quot;&gt;Open challenges: adaptive management timescales&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;frequency of revisiting decisions&lt;/li&gt;
&lt;li&gt;biological timescales&lt;/li&gt;
&lt;li&gt;political timescales&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;known-nuisances&quot;&gt;Known nuisances&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;curse of dimensionality&lt;/li&gt;
&lt;li&gt;data collection methods&lt;/li&gt;
&lt;li&gt;numerical methods&lt;/li&gt;
&lt;li&gt;local vs global&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;missed-things&quot;&gt;Missed things&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;spatial data, using rich data under the curse of dimensionality&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2 id=&quot;ropensci&quot;&gt;ropensci&lt;/h2&gt;
&lt;p&gt;Writing out proof-of-principle interface to the dataone REST API, see &lt;a href=&quot;https://github.com/ropensci/rdataone/&quot;&gt;rdataone&lt;/a&gt; and &lt;a href=&quot;https://github.com/ropensci/rdataone/issues/1&quot;&gt;Introduction to the package&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Key things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We can accomplish handling of certificates from httr, just add &lt;code&gt;config = list(sslcert = )&lt;/code&gt;; see &lt;code&gt;?httr::config&lt;/code&gt;, e.g. archive a file with:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;httr::&lt;span class=&quot;kw&quot;&gt;PUT&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;paste0&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;https://knb.ecoinformatics.org/knb/d1/mn/v1/archive/&amp;quot;&lt;/span&gt;, 
                         &lt;span class=&quot;st&quot;&gt;&amp;quot;urn:uuid:0bf9cf50-6b6b-45ad-b22c-ffd0ee2a21c3&amp;quot;&lt;/span&gt;), 
                                        &lt;span class=&quot;dt&quot;&gt;config=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;config&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;sslcert =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;/tmp/x509up_u1000&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Posting new data requires writing a system metadata XML file. Currently have a crude minimal version of this, &lt;a href=&quot;https://github.com/ropensci/rdataone/blob/6b0a8e9d53768c4e739179923681a053c13552a8/R/write_sysmeta.R&quot;&gt;write_sysmeta.R&lt;/a&gt;, should see how &lt;code&gt;dataone&lt;/code&gt; package is handling this.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Rnexml Semantic Considerations</title>
	 <link href="/2013/10/17/RNeXML-semantic-considerations.html"/>
   <updated>2013-10-17T00:00:00+00:00</updated>
   <id>/10/17/RNeXML-semantic-considerations</id>
   <content type="html">&lt;p&gt;Some very good feedback from Hilmar as I tackle some of the semantic capabilities of NeXML in RNeXML. As the complete discussion is already archived in the Github issues tracking, (see in particular &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/26&quot;&gt;#26&lt;/a&gt; and &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/24&quot;&gt;#24&lt;/a&gt;) I only paraphrase here.&lt;/p&gt;
&lt;p&gt;One of the central advantages we can offer in programmatic generation of NeXML in the R environment is the ability to validate names and enhance the metadata included in the resulting nexml file using programmatic queries to taxonomic name resolution services such as ITIS, EOL, NCBI, as provided in the &lt;a href=&quot;https://github.com/ropensci/taxize_&quot;&gt;taxize&lt;/a&gt; package.&lt;/p&gt;
&lt;p&gt;A subtly to this approach is discussed in issue &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/24&quot;&gt;#24&lt;/a&gt;. Whenever we provide new data, we should also provide future users the appropriate metadata describing where it came from, if we had found an exact match or maybe only a close match (perhaps an alternative spelling of the species name was used). Specifying the provenance exactly can become quite verbose, for each taxonomic unit we have:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;https://raw.github.com/phylotastic/ontologies/master/tnrs/tnrs-instance-1otu.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;which corresponds to adding RDFa to the NeXML looking something like:&lt;/p&gt;
&lt;pre class=&quot;sourceCode xml&quot;&gt;&lt;code class=&quot;sourceCode xml&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;otus&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tax1&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;&amp;lt;otu&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; label=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Struthioniformes&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;t1&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; xmlns:rdf=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;     xmlns:rdfs=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.w3.org/2000/01/rdf-schema#&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;     xmlns=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.w3.org/1999/xhtml&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;     xmlns:obo=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://purl.obolibrary.org/obo/&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;     xmlns:tc=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://rs.tdwg.org/ontology/voc/TaxonConcept#&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;     xmlns:dc=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://purl.org/dc/elements/1.1/&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;     xmlns:dcterms=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://purl.org/dc/terms/&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;     xmlns:tnrs=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://phylotastic.org/terms/tnrs.rdf#&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;     xmlns:xsd=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.w3.org/2001/XMLSchema#&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;     class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;rdf2rdfa&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; about=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://phylotastic.org/terms/tnrs-instance.rdf#otu5&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;        typeof=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;obo:CDAO_0000138&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;rdfs:label&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Panthera tigris HQ263408&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:resolvesAs&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; typeof=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:NameResolution&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:matchCount&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:matches&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
               &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; typeof=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:Match&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:acceptedName&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Panthera tigris&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:matchedName&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Panthera tigris&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:score&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;1.0&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tc:toTaxon&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; resource=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.ncbi.nlm.nih.gov/taxonomy/9694&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:usedSource&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                     &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; about=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.ncbi.nlm.nih.gov/taxonomy&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;                          typeof=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:ResolutionSource&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:description&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;NCBI Taxonomy&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:hasRank&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;3&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:sourceStatus&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;200: OK&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:title&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;NCBI&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                     &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
               &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:matches&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
               &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; typeof=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:Match&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:acceptedName&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Megalachne&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:matchedName&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Pantathera&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:score&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;0.47790686999749&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tc:toTaxon&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; resource=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.tropicos.org/Name/40015658&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:usedSource&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                     &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; about=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://tnrs.iplantcollaborative.org/&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;                          typeof=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:ResolutionSource&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:description&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;                             content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;The iPlant Collaborative TNRS provides parsing and fuzzy matching for plant taxa.&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:hasRank&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:sourceStatus&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;200: OK&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:title&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;iPlant Collaborative TNRS v3.0&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                     &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
               &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dcterms:source&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
               &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;                    about=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://phylotastic.org/terms/tnrs-instance.rdf#request&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;                    typeof=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:ResolutionRequest&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:submitDate&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Mon Jun 11 20:25:16 2012&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:usedSource&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; resource=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://tnrs.iplantcollaborative.org/&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:usedSource&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; resource=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.ncbi.nlm.nih.gov/taxonomy&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
               &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tnrs:submittedName&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Panthera tigris&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/otu&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Why provenance? This can be particularly important in tracking down errors or inconsistencies. For instance, image the taxanomic barcode id number we provide for a taxon is later divided into multiple species. Ideally this would be reflected in the updated entries of the barcode service, establishing new id numbers for the split members and identifying that the old id was split – after all, a barcode system is supposed to facilitate addressing these kinds of issues.&lt;/p&gt;
&lt;p&gt;Still, this appears much more verbose than say, what TreeBase does when automatically adding identifiers as annotations to the NeXML otu nodes.&lt;/p&gt;
&lt;p&gt;Meanwhile, in more concrete terms, we seem to have some consensus on using NCBI taxonomic ids, since its API queries are pretty fast:&lt;/p&gt;
&lt;pre class=&quot;sourceCode xml&quot;&gt;&lt;code class=&quot;sourceCode xml&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;otus&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tax1&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;&amp;lt;otu&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; label=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Struthioniformes&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;t1&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; xsi:type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;ResourceMeta&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://ncbi.nlm.nih.gov/taxonomy/8798&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tc:toTaxon&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;&amp;lt;/otu&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;note this example uses the &lt;code&gt;tc: http://rs.tdwg.org/ontology/voc/TaxonConcept#&lt;/code&gt; &lt;code&gt;toTaxon&lt;/code&gt; concept to provide a ontological definition of the link as a taxon identier.&lt;/p&gt;
&lt;p&gt;NCBI does not do partial matching, so we simply warn when a user’s taxonomic names do not match an NCBI id, giving them a chance to correct them if in error (either manually or automatically using the partial name matching functions in &lt;code&gt;taxize&lt;/code&gt;)&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/10/16/notes.html"/>
   <updated>2013-10-16T00:00:00+00:00</updated>
   <id>/10/16/notes</id>
   <content type="html">&lt;h3 id=&quot;rnexml&quot;&gt;RNeXML&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Example methods for metadata: https://github.com/ropensci/RNeXML/issues/20#issuecomment-26457772&lt;/li&gt;
&lt;li&gt;Closes #19 https://github.com/ropensci/RNeXML/issues/19#issuecomment-26459110&lt;/li&gt;
&lt;li&gt;Discussion of best identifiers for OTUs &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/24&quot;&gt;#24&lt;/a&gt;. Now waiting on Scott for choice of implementation&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;misc&quot;&gt;Misc&lt;/h3&gt;
&lt;h4 id=&quot;r-puzzle&quot;&gt;R puzzle&lt;/h4&gt;
&lt;p&gt;In R’s S4 methods, I can define methods with different signatures, i.e. different object classes for the same function call. But can I alter the names and number of arguments for a method?&lt;/p&gt;
&lt;p&gt;As usual, see Github for details on commits and issues.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Is it time to retire Pagel's lambda?</title>
	 <link href="/2013/10/11/is-it-time-to-retire-pagels-lambda.html"/>
   <updated>2013-10-11T00:00:00+00:00</updated>
   <id>/10/11/is-it-time-to-retire-pagels-lambda</id>
   <content type="html">&lt;p&gt;Pagel’s &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt; (lambda), introduced in &lt;a href=&quot;http://doi.org/10.1038/44766&quot; title=&quot;Inferring the historical patterns of biological evolution. in Nature.&quot;&gt;Pagel 1999&lt;/a&gt; as a potential measure of “phylogenetic signal,” the extent to which correlations in traits reflect their shared evolutionary history (as approximated by Brownian motion).&lt;/p&gt;
&lt;p&gt;Numerous critiques and ready alternatives have not appeared to decrease it’s popularity. There are many issues with the statistic, some of which I attempt to summarise below.&lt;/p&gt;
&lt;p&gt;The &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt; statistic is defined by the Brownian motion model together with a transformation of the branch lengths: multiply all internal branches by &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt;. The motivation for the definition is obvious: &lt;span class=&quot;math&quot;&gt;\(\lambda = 1\)&lt;/span&gt; the tree is unchanged and the model equivalent to Brownian motion, while for &lt;span class=&quot;math&quot;&gt;\(\lambda = 0\)&lt;/span&gt; the tree becomes a star phylogeny and the model is equivalent to completely independent random walks. &lt;span class=&quot;math&quot;&gt;\(0 &amp;lt; \lambda &amp;lt; 1\)&lt;/span&gt; provides an intermediate range where the correlations are weaker than expected.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem 1: It is biological nonsense to treat tips different from other edges.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;All other problems arise from this. While it is okay that a statistic does not have a corresponding evolutionary model, being part of an explicit model might have helped avoid this sillyness. Technically &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt; is a model, but one that treats evolution along “tips” as special, as if evolution should follow completely different rules for a species alive today relative to it’s former evolutionary history. Sounds almost creationist.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem 2: The statistic doesn’t measure what is says it measures.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;To demonstrate this, we can consider two cases in which phylogeny has the identical effect of explaining trait correlations, and yet have very different lambdas. Consider that Researcher 1 examines the phylogeny in Figure 1 and estimates very little phylogenetic signal, &lt;span class=&quot;math&quot;&gt;\(\lambda = 0.1\)&lt;/span&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(ape)
&lt;span class=&quot;kw&quot;&gt;cat&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;(((A_sp:10,B_sp:10):1,C_sp:11):1,D_sp:12);&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;file =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;ex.tre&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;)
ex &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;read.tree&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;ex.tre&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(ex)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3708/10715190003_f2f21044be_o.png&quot; alt=&quot;Figure 1&quot; /&gt;&lt;figcaption&gt;Figure 1&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Now Researcher 2 discovers closely related sister species of some of the taxa originally studied, as in Figure 2.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;cat&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;((((A_sp:1, A2_sp:1):9,(B_sp:1, B2_sp:1):9):1,(C_sp:1, C2_sp:1):10):1,(D_sp:1, D2_sp:1):11);&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;file =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;ex2.tre&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;)
ex2 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;read.tree&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;ex2.tre&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(ex2)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm6.staticflickr.com/5482/10715001046_f914f6ecee_o.png&quot; alt=&quot;Figure 2&quot; /&gt;&lt;figcaption&gt;Figure 2&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;There traits of sister taxa are very similar (indeed let us assume the sister species are hard to distinguish morphologically - perhaps why they were overlooked by Researcher 1). The OU or BM model estimates made by researcher 1 will closely agree with with those of Researcher 1, since the sister taxa have quite similar traits. Yet the &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt; estimates differs greatly – all of a sudden the phylogenetic signal must be quite high!&lt;/p&gt;
&lt;p&gt;And yet the underlying evolutionary process by which we have simulated the data has been unchanged! The difference arises because what formerly appeared as long tips have become short tips. How do we intepret a metric that depends so heavily on whether or not all sister species are present in the data? As noted, this problem does not impact other phylogenetic comparative methods to nearly the same extent.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem 3&lt;/strong&gt; The statistic has no notion of timescale or depth in the phylogeny.&lt;/p&gt;
&lt;p&gt;In &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt; (and other definitions such as Blomberg’s K), phylogenetic signal is an all-or-nothing proposition. If we find that really recently diverged species that happen to resemble each-other, while species that have diverged for longer than, say, a couple million years show no correlation – is this phylogenetic signal or not? This ‘extinction’ of phylogenetic signal as we go far enough back in time seems like a biologically reasonable concept that is perfectly well expressed in the &lt;span class=&quot;math&quot;&gt;\(\alpha\)&lt;/span&gt; parameter of the OU model, but is lost in the consideration of &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt;. If folks really want to estimate a continuous quantity to measure phylogenetic signal, I suggest &lt;span class=&quot;math&quot;&gt;\(\alpha\)&lt;/span&gt; is a far more meaningful number (note that it has units! (1/time or 1/branch length)).&lt;/p&gt;
&lt;p&gt;Consider the returning force alpha in the OU model (i.e. stabilizing selection). When alpha is near zero, the model is essentially Brownian, (i.e. ‘strong phylogenetic signal,’ where more recently diverged species are more similar on average than distantly related ones). When alpha is very large, traits reflect the selective constraint of the environment rather than their history, and so recently diverged species are no more or less likely to be similar than distant ones (provided all species in question are under the same OU model / same selection strength for the trait in question). The size of alpha gives the timescale over which ‘phylogenetic signal’ is lost (in units of the branch length). Two very recently diverged sister-taxa may thus show some phylogenetic correlation because their divergence time is of order 1/alpha, while those with longer divergence times act phylogeneticly independent, such as in our Figure 2 above. I find this an imperfect but reasonable meaning of phylogenetic signal.&lt;/p&gt;
&lt;p&gt;If we restrict &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt; to be strictly 1 or 0 these problems are alliviated, though then it is unnessary to define the statistic as such as we may instead consider a star tree (sometimes called the “white noise” model of evolution).&lt;/p&gt;
&lt;h4 id=&quot;other-such-statistics&quot;&gt;other such statistics&lt;/h4&gt;
&lt;p&gt;Pagel’s &lt;span class=&quot;math&quot;&gt;\(\delta\)&lt;/span&gt; is a transformation on node depth, which is again problematic as there is no meaningfully consistent way to describe what is a node (think about deep speciation events with no present day ancestor.) I believe &lt;span class=&quot;math&quot;&gt;\(\kappa\)&lt;/span&gt; would also be problematic to interpret as it is a nonlinear transform of branch length – raises branch length to a power – and thus would have a rather different effect depending on the units in which branch length were measured. (For instance, consider the case where the tree is scaled to length unity, so all branch lengths are less than one and thus become shorter with large exponents, vs one in which lengths are all larger than one). Fortunately these statistics are far less popular than &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/10/10/notes.html"/>
   <updated>2013-10-10T00:00:00+00:00</updated>
   <id>/10/10/notes</id>
   <content type="html">&lt;h3 id=&quot;authenticating-via-dataone-api&quot;&gt;Authenticating via DataOne API&lt;/h3&gt;
&lt;p&gt;Matt Jones provides a nice &lt;code&gt;dataone&lt;/code&gt; package to handle accessing and posting data to DataOne nodes such as the KNB from R. Uploading files through the API requires authentication, which in turn requires a certificate from CILogin. As this process proved a bit tricky to me, I add some documentation here. I am using a Ubuntu (13.04) system, so the procedure might differ slightly for other systems.&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;Go to &lt;a href=&quot;https://cilogon.org/?skin=DataONE&quot; class=&quot;uri&quot;&gt;https://cilogon.org/?skin=DataONE&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Select authentication credentials. I used Google as an OpenID provider.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;This asked me to download a file named &lt;code&gt;shibCILaunchGSCA.jnlp&lt;/code&gt;. This is a java webstart application and is suppsed to launch in the browser; a feature many operating systems apparently disabled due to security concerns. One could reconfigure the browser settings to execute this file type (using javaws), or simply download and run javaws manually in the command line:&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;$ &lt;span class=&quot;kw&quot;&gt;javaws&lt;/span&gt; shibCILaunchGSCA.jnlp&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;My process was slightly more troublesome as I had &lt;code&gt;java-6-openjdk&lt;/code&gt; &lt;code&gt;javaws&lt;/code&gt; installed as the default but needed the &lt;code&gt;java-7&lt;/code&gt; one to correspond to the rest of my setup… Also more complicated in that I downloaded &lt;code&gt;shibCILaunchGSCA.jnlp&lt;/code&gt; twice and first tried &lt;code&gt;javaws&lt;/code&gt; on the earlier download, which had become invalid when I created the second download. Words to the wise…&lt;/p&gt;
&lt;p&gt;This should basically finish the authentication by installing a certificate in &lt;code&gt;/tmp/x509up_u0&lt;/code&gt;, where the R package will look for it. If you already have a file of that name in &lt;code&gt;/tmp&lt;/code&gt; it will use a different name and the R package may be confused. You can work around this (see &lt;a href=&quot;https://github.com/mbjones/opensci_r_esa_2013/issues/3#issuecomment-25998107&quot;&gt;#3&lt;/a&gt;) but better to use the default for simplicity.&lt;/p&gt;
&lt;p&gt;At this point we can successfully upload data to DataOne nodes such as the KNB as illustrated in &lt;a href=&quot;https://github.com/mbjones/opensci_r_esa_2013/blob/ea8d106f912319bdcf7c1b54e33904a19954434f/dataone-r/dataone-write-data.R&quot;&gt;Matt’s tutorial&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id=&quot;notes&quot;&gt;Notes&lt;/h4&gt;
&lt;p&gt;This presupposes a working &lt;code&gt;rJava&lt;/code&gt; package, which can be tricky on Linux systems given the plethora of different flavors of Java. Though &lt;code&gt;rJava&lt;/code&gt; is provided as a Ubuntu binary (&lt;code&gt;apt-get install r-cran-rjava&lt;/code&gt;) the version is rather behind. Stackoverflow has some useful hints.&lt;/p&gt;
&lt;h4 id=&quot;todo&quot;&gt;ToDo&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Should now be able to wrap the dataone API in &lt;code&gt;reml&lt;/code&gt; in a similar way as we have done for figshare.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Might consider implementing the REST-based DataONE API calls directly through &lt;code&gt;RCurl&lt;/code&gt; or &lt;code&gt;httr&lt;/code&gt; to avoid the java issues. Will need to handle the certificate issues above regardless, though some steps can perhaps be wrapped into an R function…&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/10/09/notes.html"/>
   <updated>2013-10-09T00:00:00+00:00</updated>
   <id>/10/09/notes</id>
   <content type="html">&lt;p&gt;ugh, most journals don’t seem to hold to their own data publication policies.&lt;/p&gt;
&lt;p&gt;PNAS theoretically endorses UPSIDE, &lt;code&gt;r citet(&amp;quot;10.1073/pnas.0400437101&amp;quot;)&lt;/code&gt; principles from the National Academy of Science:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Principle 1. Authors should include in their publications the data, algorithms, or other information that is central or integral to the publication—that is, whatever is necessary to support the major claims of the paper and would enable one skilled in the art to verify or replicate the claims.&lt;/li&gt;
&lt;li&gt;Principle 2. If central or integral information cannot be included in the publication for practical reasons (for example, because a data set is too large), it should be made freely (without restriction on its use for research purposes and at no cost) and readily accessible through other means (for example, online). Moreover, when necessary to enable further research, integral information should be made available in a form that enables it to be manipulated, analyzed, and combined with other scientific data.&lt;/li&gt;
&lt;li&gt;Principle 3. If publicly accessible repositories for data have been agreed on by a community of researchers and are in general use, the relevant data should be deposited in one of the repositories by the time of publication.&lt;/li&gt;
&lt;li&gt;Principle 4. Authors of scientific publications should anticipate which materials integral to their publications are likely to be requested and should state in the “Materials and Methods” section or elsewhere how to obtain them.&lt;/li&gt;
&lt;li&gt;Principle 5. If a material integral to a publication is patented, the provider of the material should make the material available under a license for research use.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Kinda cool. Cooler if it was actually practiced. By the way, when did PNAS discontinue their HTML versions of articles? They were useful! (and one of few with mouse-over citations).&lt;/p&gt;
&lt;h3 id=&quot;rnexml&quot;&gt;RNeXML&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Added datatype detection, fixed some checks: &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/ad2d3338c8218de7d7f4abecde109159d512a35e&quot;&gt;ad2d333&lt;/a&gt; and see issue &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/18&quot;&gt;#18&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Not sure how to handle recursive node definitions in R’s S4 representation of Schema (ask Duncan..) e.g. a &lt;code&gt;meta&lt;/code&gt; element can have child &lt;code&gt;meta&lt;/code&gt; elements, but &lt;code&gt;setClass(&amp;quot;meta&amp;quot;, ..., contains=&amp;quot;meta&amp;quot;)&lt;/code&gt; seems problematic (arises in EML taxon definitions too..)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;meta elements can also take arbitrary RDF / RDFa as child elements; possibly convenient for adding large blocks of existing semantic metadta, see issue &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/23&quot;&gt;#23&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;thinking-about-calcofi-data&quot;&gt;thinking about CalCofi data&lt;/h3&gt;
&lt;p&gt;Ooh, CalCofi data in Nature Comment this morning: &lt;code&gt;r citet(&amp;quot;10.1038/502163a&amp;quot;)&lt;/code&gt;. Sam says data will be moving to &lt;a href=&quot;http://coastwatch.pfeg.noaa.gov/erddap/index.html&quot;&gt;NOAA’s ERDDAP&lt;/a&gt; when shutdown ends. Also see his new book on this data, &lt;code&gt;r citet(&amp;quot;http://link.springer.com/book/10.1007/978-94-007-7223-6/page/1&amp;quot;)&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&quot;dataone-reml-integration&quot;&gt;dataone reml integration&lt;/h3&gt;
&lt;p&gt;Hmm, &lt;a href=&quot;https://github.com/mbjones/opensci_r_esa_2013/tree/master/dataone-r&quot;&gt;read-only scripts&lt;/a&gt; working for me now but not authentication, see issue &lt;a href=&quot;https://github.com/mbjones/opensci_r_esa_2013/issues/3&quot;&gt;#3&lt;/a&gt;. Using credentials from Google via &lt;a href=&quot;https://cilogon.org/&quot;&gt;cilogon.org/&lt;/a&gt;…&lt;/p&gt;
&lt;h3 id=&quot;reading&quot;&gt;Reading&lt;/h3&gt;
&lt;p&gt;Citations correlate with … no other metric of merit. &lt;code&gt;r citet(&amp;quot;10.1371/journal.pbio.1001677&amp;quot;)&lt;/code&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/10/08/notes.html"/>
   <updated>2013-10-08T00:00:00+00:00</updated>
   <id>/10/08/notes</id>
   <content type="html">&lt;p&gt;Fisheries data from &lt;span class=&quot;showtooltip&quot; title=&quot;Glaser S, Fogarty M, Liu H, Altman I, Hsieh C, Kaufman L, MacCall A, Rosenberg A, Ye H and Sugihara G (2013). &amp;#39;Complex Dynamics May Limit Prediction in Marine Fisheries.&amp;#39; Fish And Fisheries, pp. n/a-n/a. .&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/faf.12037&quot;&gt;Glaser et al. (2013)&lt;/a&gt;&lt;/span&gt; available at &lt;a href=&quot;http://oceaninfo-dev.ucsd.edu/ichthyoplankton/&quot;&gt;IchthyoDB&lt;/a&gt; Larvae and egg counts. About 4 GB, initialized in &lt;code&gt;calcofi&lt;/code&gt; repo (local only).&lt;/p&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;h3 id=&quot;early-warning&quot;&gt;early warning&lt;/h3&gt;
&lt;p&gt;with “Quickest Detection” algorithm described in &lt;span class=&quot;showtooltip&quot; title=&quot;Carpenter S, Brock W, Cole J and Pace M (2013). &amp;#39;A New Approach For Rapid Detection of Nearby Thresholds in Ecosystem Time Series.&amp;#39; Oikos, pp. no-no. .&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/j.1600-0706.2013.00539.x&quot;&gt;Carpenter et al. (2013)&lt;/a&gt;&lt;/span&gt; and used by &lt;span class=&quot;showtooltip&quot; title=&quot;Batt R, Carpenter S, Cole J, Pace M and Johnson R (2013). &amp;#39;Changes in Ecosystem Resilience Detected in Automated Measures of Ecosystem Metabolism During A Whole-Lake Manipulation.&amp;#39; Proceedings of The National Academy of Sciences, 110, pp. 17398-17403. ISSN 0027-8424.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1316721110&quot;&gt;Batt et al. (2013)&lt;/a&gt;&lt;/span&gt;, which includes a rather friendly explanation in the appendix (SI).&lt;/p&gt;
&lt;p&gt;Uses a likelihood based method along with rather simple models of the probability of being in each state, and interestingly relies on the presence of a control system that has already experienced the transition.&lt;/p&gt;
&lt;p&gt;Warning statistic (Shiryaev-Roberts statistic) after seeing the &lt;span class=&quot;math&quot;&gt;\(n\)&lt;/span&gt;th point is&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[R_n = \left(1 + R_{n-1}\right) \Lambda\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;where &lt;span class=&quot;math&quot;&gt;\(\Lambda\)&lt;/span&gt; is the likelihood ratio of the probability that observation comes from the transitioned system, &lt;span class=&quot;math&quot;&gt;\(g(x_n)\)&lt;/span&gt; over the probability that original stable system &lt;span class=&quot;math&quot;&gt;\(f(x_n)\)&lt;/span&gt;,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \Lambda = \frac{g(x_n)}{f(x_n)} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This expression is derived in &lt;span class=&quot;showtooltip&quot; title=&quot;Polunchenko A and Tartakovsky A (2011). &amp;#39;State-of-The-Art in Sequential Change-Point Detection.&amp;#39; Methodology And Computing in Applied Probability, 14, pp. 649-684. ISSN 1387-5841.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1007/s11009-011-9256-5&quot;&gt;Polunchenko &amp;amp; Tartakovsky (2011)&lt;/a&gt;&lt;/span&gt;, though I haven’t followed the derivation in full, it’s still not clear to me why we sum the consecutive log ratios. I would think we needed the product.&lt;/p&gt;
&lt;p&gt;To apply this to the warning signal context we need three things: &lt;span class=&quot;math&quot;&gt;\(f\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(g\)&lt;/span&gt;, and the threshold at which &lt;span class=&quot;math&quot;&gt;\(R_n\)&lt;/span&gt; is considered a warning signal, &lt;span class=&quot;math&quot;&gt;\(A\)&lt;/span&gt;. Though &lt;span class=&quot;showtooltip&quot; title=&quot;Polunchenko A and Tartakovsky A (2011). &amp;#39;State-of-The-Art in Sequential Change-Point Detection.&amp;#39; Methodology And Computing in Applied Probability, 14, pp. 649-684. ISSN 1387-5841.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1007/s11009-011-9256-5&quot;&gt;Polunchenko &amp;amp; Tartakovsky (2011)&lt;/a&gt;&lt;/span&gt; derive the threshold given the acceptable error rate and then calculating the expected waiting time to observe such a deviation by chance. However, &lt;span class=&quot;showtooltip&quot; title=&quot;Carpenter S, Brock W, Cole J and Pace M (2013). &amp;#39;A New Approach For Rapid Detection of Nearby Thresholds in Ecosystem Time Series.&amp;#39; Oikos, pp. no-no. .&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/j.1600-0706.2013.00539.x&quot;&gt;Carpenter et al. (2013)&lt;/a&gt;&lt;/span&gt; and &lt;span class=&quot;showtooltip&quot; title=&quot;Batt R, Carpenter S, Cole J, Pace M and Johnson R (2013). &amp;#39;Changes in Ecosystem Resilience Detected in Automated Measures of Ecosystem Metabolism During A Whole-Lake Manipulation.&amp;#39; Proceedings of The National Academy of Sciences, 110, pp. 17398-17403. ISSN 0027-8424.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1316721110&quot;&gt;Batt et al. (2013)&lt;/a&gt;&lt;/span&gt;, prefer to test a range of thresholds &lt;span class=&quot;math&quot;&gt;\(A\)&lt;/span&gt; to settle on a value at which the results are not sensitive to perturbations in the choice. &lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Rather more curious is the choice of &lt;span class=&quot;math&quot;&gt;\(f\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(g\)&lt;/span&gt;. Implementation appears to rely on the presence of a control lake in the transitioned state in order to provide &lt;span class=&quot;math&quot;&gt;\(f\)&lt;/span&gt;, which is fortunately just the case for the whole-ecosystem lake experiment data. &lt;span class=&quot;showtooltip&quot; title=&quot;Batt R, Carpenter S, Cole J, Pace M and Johnson R (2013). &amp;#39;Changes in Ecosystem Resilience Detected in Automated Measures of Ecosystem Metabolism During A Whole-Lake Manipulation.&amp;#39; Proceedings of The National Academy of Sciences, 110, pp. 17398-17403. ISSN 0027-8424.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1316721110&quot;&gt;Batt et al. (2013)&lt;/a&gt;&lt;/span&gt; takes &lt;span class=&quot;math&quot;&gt;\(f\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(g\)&lt;/span&gt; to be Gaussian and of equal variance &lt;span class=&quot;math&quot;&gt;\(\sigma^2\)&lt;/span&gt; as estimated from the variance in the control lake.&lt;/p&gt;
&lt;p&gt;Ugh, I don’t see why the QD algorithm works at all in the context that it is applied for the PNAS and Oikos papers. It’s a change-point method. It might be one thing if they used this to determine when the shift occurred in the original state space. But they are using it to detect an increase in the warning indicator (windowed standard deviation) prior to the actual bifurcation. Okay, sure we can decide that a gradual increase looks more like a sudden jump up than it does a constant flat level with enough time.&lt;/p&gt;
&lt;p&gt;Set side concerns that the distributions for the window-averaged sd are demonstrably not normal with fixed mean and variance, as assumed, and not of equal variance, as assumed. The dynamics of the system itself can be Gaussian, though the system approaching the tipping point has time-dependent mean and variance as given by my equation 3.10 and 3.11 in &lt;span class=&quot;showtooltip&quot; title=&quot;Boettiger C and Hastings A (2012). &amp;#39;Quantifying Limits to Detection of Early Warning For Critical Transitions.&amp;#39; Journal of The Royal Society Interface, 9, pp. 2527-2539. ISSN 1742-5689.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1098/rsif.2012.0125&quot;&gt;Boettiger &amp;amp; Hastings (2012)&lt;/a&gt;&lt;/span&gt;. Clearlythe time-windowed variance cannot be modeled as coming from a constant Gaussian process when the whole point is that theory predicts it to be steadily increasing… Nor can I see any reason the variance in the windowed average sd be the same in the control system as in the manipulated system (a rather unnecessary assumption at any rate since in this case the sd can be estimated separately from the start of the time series of the control and manipulated data respectively).&lt;/p&gt;
&lt;p&gt;More troubling, they use the ‘control’ of a system that has already transitioned as the comparison. Again that might make sense if we were looking at the original state of the system, but I don’t see how that makes any sense when looking for a change in the system standard deviation. The warning signal is based on the assumption that the standard deviation increases as the eigenvalue approaches zero (the bifurcation). So the change we want to see is the difference between what standard deviations we get when the eigenvalue is not zero and we’re far from the bifurcation, and those of the eigenvalue near zero. It doesn’t matter what the eigenvalue (and therefore standard deviation) is at the other alternative stable state. And if the other state is truly stable, then if anything using it as the reference is positively misleading. And yet they detect transitions in both the real and simulated data. I think I must be missing something.&lt;/p&gt;
&lt;h2 id=&quot;misc-reading&quot;&gt;Misc reading&lt;/h2&gt;
&lt;p&gt;Ambitious Gillespie model for stochastic population dynamics in &lt;span class=&quot;showtooltip&quot; title=&quot;Kramer A, Lyons M, Dobbs F and Drake J (2013). &amp;#39;Bacterial Colonization And Extinction on Marine Aggregates: Stochastic Model of Species Presence And Abundance.&amp;#39; Ecology And Evolution, 3, pp. 4300-4309. .&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1002/ece3.789&quot;&gt;Kramer et al. (2013)&lt;/a&gt;&lt;/span&gt;. Interesting to see the paper use GillespieSSA, though from eariler emails with Mario I understand my pure C approach of the exact algorithm is still faster than the R implementation using the coarse-grained tau-leaping approach.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;R. D. Batt, S. R. Carpenter, J. J. Cole, M. L. Pace, R. A. Johnson, (2013) Changes in Ecosystem Resilience Detected in Automated Measures of Ecosystem Metabolism During A Whole-Lake Manipulation. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;110&lt;/strong&gt; 17398-17403 &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1316721110&quot;&gt;10.1073/pnas.1316721110&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;C. Boettiger, A. Hastings, (2012) Quantifying Limits to Detection of Early Warning For Critical Transitions. &lt;em&gt;Journal of The Royal Society Interface&lt;/em&gt; &lt;strong&gt;9&lt;/strong&gt; 2527-2539 &lt;a href=&quot;http://dx.doi.org/10.1098/rsif.2012.0125&quot;&gt;10.1098/rsif.2012.0125&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Stephen R. Carpenter, William A. Brock, Jonathan J. Cole, Michael L. Pace, (2013) A New Approach For Rapid Detection of Nearby Thresholds in Ecosystem Time Series. &lt;em&gt;Oikos&lt;/em&gt; no-no &lt;a href=&quot;http://dx.doi.org/10.1111/j.1600-0706.2013.00539.x&quot;&gt;10.1111/j.1600-0706.2013.00539.x&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Sarah M Glaser, Michael J Fogarty, Hui Liu, Irit Altman, Chih-Hao Hsieh, Les Kaufman, Alec D MacCall, Andrew A Rosenberg, Hao Ye, George Sugihara, (2013) Complex Dynamics May Limit Prediction in Marine Fisheries. &lt;em&gt;Fish And Fisheries&lt;/em&gt; n/a-n/a &lt;a href=&quot;http://dx.doi.org/10.1111/faf.12037&quot;&gt;10.1111/faf.12037&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Andrew M. Kramer, M. Maille Lyons, Fred C. Dobbs, John M. Drake, (2013) Bacterial Colonization And Extinction on Marine Aggregates: Stochastic Model of Species Presence And Abundance. &lt;em&gt;Ecology And Evolution&lt;/em&gt; &lt;strong&gt;3&lt;/strong&gt; 4300-4309 &lt;a href=&quot;http://dx.doi.org/10.1002/ece3.789&quot;&gt;10.1002/ece3.789&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Aleksey S. Polunchenko, Alexander G. Tartakovsky, (2011) State-of-The-Art in Sequential Change-Point Detection. &lt;em&gt;Methodology And Computing in Applied Probability&lt;/em&gt; &lt;strong&gt;14&lt;/strong&gt; 649-684 &lt;a href=&quot;http://dx.doi.org/10.1007/s11009-011-9256-5&quot;&gt;10.1007/s11009-011-9256-5&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;Under the Gaussian models they assume I suspect something can be proven about this to the effect that the larger the threshold the less sensitive it should be, as the chance of a random deviation becomes more and more unlikely farther into the tails. The Shiryaev-Roberts statistic shown in Figure 1(c) of the Oikos paper illustrates this insensitive range for A – the jump is very sharp.&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
 </entry>
 
 <entry>
   <title>Extending ape::phylo class to NeXML:</title>
	 <link href="/2013/10/07/nexml-phylo-class-extension.html"/>
   <updated>2013-10-07T00:00:00+00:00</updated>
   <id>/10/07/nexml-phylo-class-extension</id>
   <content type="html">&lt;p&gt;While working on the &lt;a href=&quot;https://github.com/ropensci/RNeXML&quot;&gt;RNeXML&lt;/a&gt; package, I have recently I have been puzzling over extending S3 objects to share some of the nice properties of S4 objects and methods while continuing to function with the potentially huge library of functions written to work with them. &lt;a href=&quot;http://stackoverflow.com/questions/17976217/make-s4-object-act-as-an-s3-class&quot;&gt;SO:&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;To illustrate this issue, consider the S3 class &lt;code&gt;phylo&lt;/code&gt; provided by the &lt;code&gt;ape&lt;/code&gt; package and used by most of the 30+ packages that reverse depend or reverse import &lt;code&gt;ape&lt;/code&gt;. Despite this popularity, the S3 class has quite a few shortcomings (including inconsistent definition in ordering of it’s components, see the phylobase paper). To address these concerns, a hackathon consisting of many of the leading developers in this field created the &lt;code&gt;phylobase&lt;/code&gt; package with &lt;code&gt;S4&lt;/code&gt; definitions of &lt;code&gt;phylo&lt;/code&gt; objects that extend the class to handle additional types of data and address various other concerns that have arisen. Unfortunately, as far as I can tell, adoption of the new format has been lacking. In my mind, the greatest limitation of the new format is the lack of compatibility with existing methods build on the S3 type.&lt;/p&gt;
&lt;p&gt;I never understood why phylobase did not do this. To illustrate the problem, let us load an S3 &lt;code&gt;phylo&lt;/code&gt; object and then coerce it into the &lt;code&gt;phylobase&lt;/code&gt; S4 type:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(phylobase)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(ape)
&lt;span class=&quot;kw&quot;&gt;data&lt;/span&gt;(bird.orders)
bird.orders4 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as&lt;/span&gt;(bird.orders, &lt;span class=&quot;st&quot;&gt;&amp;quot;phylo4&amp;quot;&lt;/span&gt;) &lt;span class=&quot;co&quot;&gt;# make ape::phylo tree into phylobase::phylo4 S4 class&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The S4 class has explicitly defined it’s own plotting method, so:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(bird.orders4) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7460/10145618405_f4b1a81df8_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;However, the original S3 plotting method fails:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;plot.phylo&lt;/span&gt;(bird.orders4) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Error: $ operator not defined for this S4 class&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;More interesting functions, many of which may not have even existed when &lt;code&gt;phylobase&lt;/code&gt; was written, operate only on the S3 class:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt; S &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;47&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;69&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;214&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;161&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;17&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;355&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;51&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;56&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;39&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;152&lt;/span&gt;,
             &lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;143&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;358&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;103&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;319&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;23&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;291&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;313&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;196&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1027&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5712&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;bd.ext&lt;/span&gt;(bird.orders4, S)   &lt;span class=&quot;co&quot;&gt;# Fails &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Error: object &amp;quot;phy&amp;quot; is not of class &amp;quot;phylo&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;While we can work around this with explicit coercion, this requirement is rather crude and breaks existing code users may already rely upon:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;bd.ext&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as&lt;/span&gt;(bird.orders4, &lt;span class=&quot;st&quot;&gt;&amp;quot;phylo&amp;quot;&lt;/span&gt;), S)   &lt;span class=&quot;co&quot;&gt;# Works only after coercion &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;
Extended Version of the Birth-Death Models to
    Estimate Speciation and Extinction Rates

    Data: phylogenetic: as(bird.orders4, &amp;quot;phylo&amp;quot;) 
             taxonomic: S 
        Number of tips: 23 
              Deviance: 290.2 
        Log-likelihood: -145.1 
   Parameter estimates:
      d / b = 2.315e-08   StdErr = 0.1542 
      b - d = 0.2765   StdErr = 0.009578 
   (b: speciation rate, d: extinction rate)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It appears this problem can be solved using &lt;code&gt;setOldClass&lt;/code&gt;. I’ve defined an the class &lt;code&gt;phyloS4&lt;/code&gt; which inherits all methods for the S3 &lt;code&gt;phylo&lt;/code&gt; class without having to explicitly declare those methods. In this way, we have the benefits of an S4 class while maintaining compatibility with all developers who only write functions based on the S3 class. (as long as functions don’t stupidly check the string identity &lt;code&gt;class(obj) == &amp;quot;phylo&amp;quot;&lt;/code&gt;, instead of using the proper class check &lt;code&gt;is(obj, &amp;quot;phylo&amp;quot;)&lt;/code&gt; – looking at you &lt;code&gt;ape::skyline&lt;/code&gt; and friends….)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;setClass&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;phyloS4&amp;quot;&lt;/span&gt;, 
         &lt;span class=&quot;kw&quot;&gt;representation&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;edge =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;matrix&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;dt&quot;&gt;Nnode =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;integer&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;dt&quot;&gt;tip.label =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;dt&quot;&gt;edge.length =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;numeric&amp;quot;&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;setOldClass&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;phylo&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;S4Class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;phyloS4&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;selectMethod&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;show&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;phylo&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;removeClass&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;phyloS4&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Now consider using our S4 version, rather than the phylobase S4 version:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;a &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;phylo&amp;quot;&lt;/span&gt;, bird.orders)
&lt;span class=&quot;kw&quot;&gt;is&lt;/span&gt;(a, &lt;span class=&quot;st&quot;&gt;&amp;quot;phylo&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;bd.ext&lt;/span&gt;(a, S)   &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;
Extended Version of the Birth-Death Models to
    Estimate Speciation and Extinction Rates

    Data: phylogenetic: a 
             taxonomic: S 
        Number of tips: 23 
              Deviance: 290.2 
        Log-likelihood: -145.1 
   Parameter estimates:
      d / b = 2.315e-08   StdErr = 0.1542 
      b - d = 0.2765   StdErr = 0.009578 
   (b: speciation rate, d: extinction rate)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Class, &lt;code&gt;show&lt;/code&gt;, and &lt;code&gt;plot&lt;/code&gt;, and additional (&lt;code&gt;bd.ext&lt;/code&gt;) methods from the S3 class just work. Now we want to extend the class to contain additional metadata (in my case, the &lt;code&gt;nexml&lt;/code&gt; information):&lt;/p&gt;
&lt;p&gt;I can then build a new class, &lt;code&gt;nexmlTree&lt;/code&gt; by extending this class. Again my new class acts like an S3 &lt;code&gt;phylo&lt;/code&gt; in any such functions, but adds a representation containing all the nexml data. This approach doesn’t minimize memory footprint, but usually that is not a concern for R users (otherwise coercion is always an option).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(RNeXML)
&lt;span class=&quot;kw&quot;&gt;setClass&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;nexmlTree&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;representation&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;nexml =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;nexml&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;contains=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;phylo&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;setMethod&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;show&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;nexmlTree&amp;quot;&lt;/span&gt;, function(object) &lt;span class=&quot;kw&quot;&gt;print.phylo&lt;/span&gt;(object))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] &amp;quot;show&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Again, we check a few methods:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt; b &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;nexmlTree&amp;quot;&lt;/span&gt;, bird.orders, &lt;span class=&quot;dt&quot;&gt;nexml =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;as&lt;/span&gt;(bird.orders, &lt;span class=&quot;st&quot;&gt;&amp;quot;nexml&amp;quot;&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;is&lt;/span&gt;(b, &lt;span class=&quot;st&quot;&gt;&amp;quot;phylo&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;bd.ext&lt;/span&gt;(b, S)   &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;
Extended Version of the Birth-Death Models to
    Estimate Speciation and Extinction Rates

    Data: phylogenetic: b 
             taxonomic: S 
        Number of tips: 23 
              Deviance: 290.2 
        Log-likelihood: -145.1 
   Parameter estimates:
      d / b = 2.315e-08   StdErr = 0.1542 
      b - d = 0.2765   StdErr = 0.009578 
   (b: speciation rate, d: extinction rate)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This provides the additional metadata while leaving us with an object that works with all existing functions.&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;I’m not quite sure why this required the &lt;code&gt;show&lt;/code&gt; method to be defined such that we wouldn’t get the S4 show method instead. As a default show method seems to be the only method automatically defined for the new class, I gather it is the only one we have to overwrite in preference for the &lt;code&gt;print.phylo()&lt;/code&gt; method.&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
 </entry>
 
 <entry>
   <title>Regime Vs State</title>
	 <link href="/2013/09/30/regime-vs-state.html"/>
   <updated>2013-09-30T00:00:00+00:00</updated>
   <id>/09/30/regime-vs-state</id>
   <content type="html">&lt;p&gt;Scratching out some thoughts here to address an issue that continues to bug me with the way the literature discusses these two very different issues.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;The ecological literature on early warning signals and related subjects continually seems to confuse the concept of state and regime.&lt;/p&gt;
&lt;p&gt;Let’s get this straight.&lt;/p&gt;
&lt;p&gt;&lt;big&gt;Regime &lt;span class=&quot;math&quot;&gt;\(=\)&lt;/span&gt; Attractor&lt;/big&gt;&lt;/p&gt;
&lt;p&gt;&lt;big&gt; State &lt;span class=&quot;math&quot;&gt;\(\neq\)&lt;/span&gt; Attractor&lt;/big&gt;&lt;/p&gt;
&lt;p&gt;&lt;big&gt; Nonlinear state change &lt;span class=&quot;math&quot;&gt;\(\neq\)&lt;/span&gt; Regime shift &lt;/big&gt;&lt;/p&gt;
&lt;p&gt;Evidence that a regime shift occurred, and when the shift occurred (e.g. change-point analysis) is not presented here. The theory of early warning signals rests on the notion of a change in the stability of a state (a bifurcation that impacts the stability of an attractor, in the dynamical systems sense, causing a transition to an alternative attractor). This process is distinct from one which may change the state-space coordinates of an attractor without impacting it’s stability (for instance, in a simple continuous-time logistic model the location of the attractor is determined by the carrying capacity parameter, K, while the stability of the attractor is determined by the growth-rate, r. If K depends on some manipulated parameter in a nonlinear way, than changes to this parameter will change the location of the attractor in a non-linear way while having no impact on stability and exhibit no classical warning signals (that is, the eigenvalue of the system does not approach zero, the mechanism posited for the increases in autocorrelation, coefficient of variation, etc). Consequently, it is difficult to distinguish between “early warning up to a year in advance of the regime shift” and “evidence that the system is being perturbed” by the periodic pulse introductions of a large predator.&lt;/p&gt;
&lt;p&gt;Both the theory of early warning signals and the theory of sudden or catastrophic regime shifts are based in dynamical systems theory of attractors and bifurcations.&lt;/p&gt;
&lt;p&gt;We can change state by moving a single attractor around. This doesn’t imply any change in stability of the attractor. Because everyone likes drawing ‘ball-and-cup’ diagrams[^1] in these discussions, this is the ball-in-cup version of a state shift:&lt;/p&gt;
&lt;p&gt;This is the ball-and-cup diagram of the “regime shift” (change of attractors, in this case due to a bifurcation).&lt;/p&gt;
&lt;p&gt;The point of this is not to introduce a semantic battle. If we want to decide “state” and “regime” should be used interchangeably that’s fine. Only we should not discuss a theory of “state-shifts” when we are considering shifts between alternate attractors and loss of stability.&lt;/p&gt;
&lt;p&gt;A catastrophic regime shift is characterized by the loss of stability&lt;/p&gt;
&lt;p&gt;[^1] Motivated by potential-energy plots – the negative integral of the force over state (e.g. position). I find this use somewhat peculiar, since while in physics we work with the potential energy directly all the time, in ecological dynamics we almost exclusively work with the growth rate equations, e.g. &lt;span class=&quot;math&quot;&gt;\(\tfrac{dN}{dt} = N \cdot f(N, t)\)&lt;/span&gt;, which is rather the “equation-of-motion” or force-representation, rather than it’s negative integral.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Reflections on the Mozilla Science Code Review Pilot</title>
	 <link href="/2013/09/25/mozilla-software-review.html"/>
   <updated>2013-09-25T00:00:00+00:00</updated>
   <id>/09/25/mozilla-software-review</id>
   <content type="html">&lt;p&gt;I was recently interviewed a &lt;em&gt;Nature&lt;/em&gt; senior reporter &lt;a href=&quot;http://twitter.com/erica_check&quot;&gt;Erika Check Hayden&lt;/a&gt; on the subject of the scientific &lt;a href=&quot;http://kaythaney.com/2013/08/08/experiment-exploring-code-review-for-science/&quot;&gt;code review project&lt;/a&gt; being conducted by &lt;a href=&quot;https://wiki.mozilla.org/ScienceLab&quot;&gt;Mozilla Science Lab&lt;/a&gt;. The piece appears in this week’s issue, &lt;a href=&quot;http://doi.org/10.1038/501472a&quot; title=&quot;Mozilla plan seeks to debug scientific code&quot;&gt;Hayden 2013&lt;/a&gt;. &lt;a href=&quot;http://carlboettiger.info/2013/06/13/what-I-look-for-in-software-papers.html&quot;&gt;My blog post&lt;/a&gt; sharing my own approach to code review is mentioned at the beginning of the article, though it is rather Roger Peng’s comments at the end that have stirred &lt;a href=&quot;https://twitter.com/Erika_Check/status/382911015358181376/photo/1&quot;&gt;some interesting discussion&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Roger raises two concerns. First, that increased scrutiny will discourage researchers from sharing code, (which, right or wrong, remains a voluntary choice in most journals):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;One worry I have is that, with reviews like this, scientists will be even more discouraged from publishing their code&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;and second, that code review does not focus on what matters mosts:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We need to get more code out there, not improve how it looks&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;(Erika provides a bit more context to Roger’s comments below).&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p&gt;
&lt;a href=&quot;https://twitter.com/ctitusbrown&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ctitusbrown&quot;&gt;@ctitusbrown&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/cboettig&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/kaythaney&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;kaythaney&quot;&gt;@kaythaney&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/nickbarnes&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;nickbarnes&quot;&gt;@nickbarnes&lt;/span&gt;&lt;/a&gt; see whole &lt;a href=&quot;https://twitter.com/simplystats&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;simplystats&quot;&gt;@simplystats&lt;/span&gt;&lt;/a&gt; quote on prof. code review discouraging sharing &lt;a href=&quot;http://t.co/pNQWT9Safz&quot;&gt;pic.twitter.com/pNQWT9Safz&lt;/a&gt;
&lt;/p&gt;
— Erika Check Hayden (&lt;span class=&quot;citation&quot; data-cites=&quot;Erika_Check&quot;&gt;@Erika_Check&lt;/span&gt;) &lt;a href=&quot;https://twitter.com/Erika_Check/statuses/382911015358181376&quot;&gt;September 25, 2013&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;p&gt;The &lt;em&gt;Nature&lt;/em&gt; News piece thus nails a central tension in the community between promoting higher standards for code (A position exemplified in an earlier &lt;em&gt;Nature&lt;/em&gt; column titled &lt;a href=&quot;http://doi.org/10.1038/467775a&quot; title=&quot;Merali 2010, Nature&quot;&gt;“Computational Science … Error: Why scientific programming does not compute”&lt;/a&gt;, and more recently in &lt;em&gt;Science&lt;/em&gt; by &lt;a href=&quot;http://doi.org/10.1126/science.1231535&quot; title=&quot;Joppa et al. 2013, &amp;#39;Troubling Trends in Scientific Software Use&amp;#39;&quot;&gt;Joppa &lt;em&gt;et al.&lt;/em&gt; 2013&lt;/a&gt;, which explicitly calls for peer review of scientific software) vs promoting more widespread sharing of software (as exemplified by Nick Barnes piece in the same issue, &lt;a href=&quot;http://doi.org/10.1038/467753a&quot; title=&quot;Barnes 2010, Nature&quot;&gt;“Publish your computer code: it is good enough”&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The arguments made in each of the perspectives are excellent, and should be required reading for anyone interested in the subject. In addition to the shorter comment by Barnes, I also recommend the more recent &lt;em&gt;Nature&lt;/em&gt; perspective, &lt;a href=&quot;http://doi.org/10.1038/nature10836&quot; title=&quot;Ince et al. 2012, Nature&quot;&gt;The Case for Open Computer Programs&lt;/a&gt;, which lays out the argument and modest practical recommendations (that have largely been ignored as far as I can tell) just brilliantly. In particular, I think they nail the issue of why describing the algorithm or providing pseudo-code is not a satisfactory description of the method.&lt;/p&gt;
&lt;p&gt;However, I also think the tension between review and sharing is somewhat artificial. While each of these positions emphasizes the need to share source-code, the call for code review by Merali, Joppa et al (or in my own blog post mentioned earlier), focus on &lt;em&gt;scientific software&lt;/em&gt; aimed at reuse by others. The concerns voiced in Roger Peng’s comments and echoed by Nick Barnes focus on another class of code entirely – code associated with a particular research publication that would primarily serve only to document and support those results, rather than be readily adapted to other uses.&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p&gt;
&lt;a href=&quot;https://twitter.com/cboettig&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/ctitusbrown&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ctitusbrown&quot;&gt;@ctitusbrown&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/kaythaney&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;kaythaney&quot;&gt;@kaythaney&lt;/span&gt;&lt;/a&gt; but far more important to get code out than to get it “right”, IYSWIM.
&lt;/p&gt;
— Nick Barnes (&lt;span class=&quot;citation&quot; data-cites=&quot;nickbarnes&quot;&gt;@nickbarnes&lt;/span&gt;) &lt;a href=&quot;https://twitter.com/nickbarnes/statuses/382746748135174144&quot;&gt;September 25, 2013&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;h3 id=&quot;classes-of-code-snippets-vs-software&quot;&gt;Classes of Code: Snippets vs Software&lt;/h3&gt;
&lt;p&gt;For me, the crux of these concerns lies in the difference between “software papers”&lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; and papers which merely use code in some element of the methodology. The Mozilla study focused exclusively on code appearing in the full-text of publications in PLoS Computational Biology. Though I am pleased to see the Science Lab tackle the issue of software review and bring the expertise of their professional software developers to bear on scientific code, this is perhaps not the kind of code I would have chosen to focus on (something I shared with the team early on in seeing the announcement).&lt;/p&gt;
&lt;p&gt;Without knowing which papers are included it is of course difficult to say to much. But knowing that the code appears in the full text of the papers themselves, we can assume that it is not a complete software package intended for reuse by other researchers. Using code within the body of a manuscript implies the intent to communicate methodology more concisely and precisely than might be done in prose; in much the same manner that we use equations in place of prose. This is an important development in scientific communication, but is also rather distinct from the use of code in other contexts, in which the code itself is meant to be read primarily by machines. It is code that is already intended to help &lt;em&gt;explain&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Code included in appendices to scientific papers is meant rather to &lt;em&gt;document&lt;/em&gt; exactly what has been done, in a manner that assists replication, and may require considerable effort to decipher exactly what is being done. Instead, it merely supports the more readable but less precise description and potentially the pseudo-code that would appear in the body text.&lt;/p&gt;
&lt;p&gt;Code intended for reuse as research software (in software papers) is another class entirely. Ostensibly, the user never needs to see the code itself, but only interact with the user interface or end-user functions (API) provided. Code that is written clearly and concisely still has value – helping identify bugs and facilitating future researcher-developers extending the software, but most of it’s functionality can be accessed and assessed without looking at the source. I think it is in this kind of review that we as a researcher-developer community could learn the most from the Mozilla software engineering experts.&lt;/p&gt;
&lt;p&gt;I believe the most important focus of code review is in scientific software rather than in code snippets. And in reviewing software, I think all of the most important elements do not actually involve reading the source code at all (as I discuss in my &lt;a href=&quot;http://carlboettiger.info/2013/07/09/reviewing-software-revisited.html&quot;&gt;revised position on reviewing software papers&lt;/a&gt;), but rather in establishing that the software behaves as expected and follows software development practices that make it more sustainable, such as hosting in a software repository, version control, or example input and output.&lt;/p&gt;
&lt;h3 id=&quot;code-vanity&quot;&gt;Code vanity?&lt;/h3&gt;
&lt;p&gt;Roger’s second comment appears more dismissive of code review than I think it actually is:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“We need to get more code out there, not improve how it looks.”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p&gt;
&lt;a href=&quot;https://twitter.com/kaythaney&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;kaythaney&quot;&gt;@kaythaney&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/ctitusbrown&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ctitusbrown&quot;&gt;@ctitusbrown&lt;/span&gt;&lt;/a&gt; yup, ‘pretty’ is dismissive terminology, though possibly short-hand for ‘human-readable’ not just ‘machine-readable’
&lt;/p&gt;
— Carl Boettiger (&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;) &lt;a href=&quot;https://twitter.com/cboettig/statuses/382905327013728256&quot;&gt;September 25, 2013&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;p&gt;Most modern languages include &lt;a href=&quot;http://en.wikipedia.org/wiki/Syntactic_sugar&quot;&gt;syntactic sugar&lt;/a&gt;: ways of expressing commands that are more easily interpretable to human readers. For instance, in C, &lt;code&gt;a[i]&lt;/code&gt; is syntactic sugar for &lt;code&gt;*(a+i)&lt;/code&gt;. Higher-level languages are in some ways all sugar around existing lower-level libraries.&lt;a href=&quot;#fn2&quot; class=&quot;footnoteRef&quot; id=&quot;fnref2&quot;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt; Like good mathematical notation or good prose, this is not just about being ‘pretty’, but being more effective in communicating with humans. Certainly this is something we can improve upon as researchers, but it is perhaps not the best starting point.&lt;/p&gt;
&lt;h3 id=&quot;share-first-fix-later&quot;&gt;Share first, fix later&lt;/h3&gt;
&lt;p&gt;If code review should apply to all levels of code or be reserved for scientific software may still be an open question. What we should be able to agree on is in the publishing of code in the first place:&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p&gt;
&lt;a href=&quot;https://twitter.com/cboettig&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/kaythaney&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;kaythaney&quot;&gt;@kaythaney&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/nickbarnes&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;nickbarnes&quot;&gt;@nickbarnes&lt;/span&gt;&lt;/a&gt; I think code sharing should be mandatory &lt;em&gt;shrug&lt;/em&gt;. It&#39;s part of the methods. I reject papers w/o it.
&lt;/p&gt;
— Titus Brown (&lt;span class=&quot;citation&quot; data-cites=&quot;ctitusbrown&quot;&gt;@ctitusbrown&lt;/span&gt;) &lt;a href=&quot;https://twitter.com/ctitusbrown/statuses/382903924253929472&quot;&gt;September 25, 2013&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;p&gt;It continues to surprise me how few journals require code deposition. &lt;em&gt;Science&lt;/em&gt; explicitly &lt;a href=&quot;http://doi.org/10.1126/science.1203354&quot;&gt;adopted a new policy in 2011&lt;/a&gt; stating&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Science&lt;/em&gt; is extending our data access requirement listed above to include computer codes involved in the creation or analysis of data&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;which asks that the data be placed in a appropriate permanent repository or otherwise placed in the supplementary materials (see &lt;a href=&quot;http://www.sciencemag.org/site/feature/contribinfo/prep/gen_info.xhtml#dataavail&quot;&gt;information for authors&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Yet I have not seen code provided for any analysis I have read in Science since 2011. Either we have a very different understanding of what it means to use computer codes in the analysis of data or &lt;em&gt;Science&lt;/em&gt; grossly neglects its own policy.&lt;a href=&quot;#fn3&quot; class=&quot;footnoteRef&quot; id=&quot;fnref3&quot;&gt;&lt;sup&gt;3&lt;/sup&gt;&lt;/a&gt; Not to pick on them of course, few other journals have explicitly adopted such a policy.&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p&gt;
.&lt;a href=&quot;https://twitter.com/cboettig&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/kaythaney&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;kaythaney&quot;&gt;@kaythaney&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/nickbarnes&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;nickbarnes&quot;&gt;@nickbarnes&lt;/span&gt;&lt;/a&gt; As one of my grad students said to me, “I don&#39;t understand why ‘must share code’ is a radical opinion.”
&lt;/p&gt;
— Titus Brown (&lt;span class=&quot;citation&quot; data-cites=&quot;ctitusbrown&quot;&gt;@ctitusbrown&lt;/span&gt;) &lt;a href=&quot;https://twitter.com/ctitusbrown/statuses/382904483102982145&quot;&gt;September 25, 2013&lt;/a&gt;
&lt;/blockquote&gt;
&lt;p&gt;Nick Barnes suggests that this alone may be enough to improve code quality:&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p&gt;
&lt;a href=&quot;https://twitter.com/cboettig&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/ctitusbrown&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ctitusbrown&quot;&gt;@ctitusbrown&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/kaythaney&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;kaythaney&quot;&gt;@kaythaney&lt;/span&gt;&lt;/a&gt; require sharing. Pride will then rapidly lead to review and other improvement techniques.
&lt;/p&gt;
— Nick Barnes (&lt;span class=&quot;citation&quot; data-cites=&quot;nickbarnes&quot;&gt;@nickbarnes&lt;/span&gt;) &lt;a href=&quot;https://twitter.com/nickbarnes/statuses/382755320143282176&quot;&gt;September 25, 2013&lt;/a&gt;
&lt;/blockquote&gt;
&lt;p&gt;Certainly it will help, though not enough if the state of open source scientific software is any indication (Nick does acknowledge a rather geological notion of ‘rapid’). Smaller codes used in particular analyses will certainly feel this pressure more, as they will be easier to scrutinize.&lt;/p&gt;
&lt;h3 id=&quot;so-what-might-we-learn-from-the-mozilla-code-review&quot;&gt;So what might we learn from the Mozilla Code review?&lt;/h3&gt;
&lt;p&gt;Focusing on code appearing in-line in papers certainly addresses a different beast than large scientific software packages intended for reuse. As Roger observed, we will likely learn that scientists aren’t software engineers. We may learn how to use code to communicate more effectively. We may learn some lessons that apply for larger codebases involved in scientific software, but I think there the problem are often outside of the individual lines of code themselves and arise from other development practices.&lt;/p&gt;
&lt;p&gt;Still, learning how to do code review at all would be an invaluable start. As the discussion on my own post on the subject made clear, we researchers have no training in this practice. The Mozilla study would give the first taste. I only hope they turn there attention next to larger scientific software that lives outside of the publications themselves and is intended at re-purposing and reuse. Meanwhile, I also hope journals will become more serious about recognizing code as methods, as they have started to do with data.&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;which I define as papers primarily aimed at promoting the reuse of a particular codebase and providing an indexed citation target to credit the work.&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&quot;fn2&quot;&gt;&lt;p&gt;It is frequently argued that ideal code should be ‘self-documenting’, with syntax so precise that no other explanation of the function is necessary. While I think this is an admirable ideal, it should never be a substitute for actually providing prose documentation as well. I find we too easily decieve ourselves as to just how self-documenting our own code really is (it’s all so obvious at the time, right?).&lt;a href=&quot;#fnref2&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&quot;fn3&quot;&gt;&lt;p&gt;From my reading it appears that &lt;em&gt;Science&lt;/em&gt; requirements are intentionally too vague on this issue, stating: “All computer codes involved in the creation or analysis of data must also be available to any reader of Science.” It is unclear if ‘available on request’ is considered appropriate for code, though it is explicitly not acceptable for data: “we have therefore required authors to enter into an archiving agreement, in which the author commits to archive the data on an institutional Web site, with a copy of the data held at Science”, and the editorial makes it clear that “the data access requirement … includes computer codes”. Meanwhile all studies involving ‘requests for data’ have shown a return rate of substantially less than a 100% (usually less than 20%, e.g. &lt;a href=&quot;http://doi.org/10.1371/journal.pbio.1001636&quot;&gt;this recent study&lt;/a&gt;). If that was a viable option we could just publish abstracts and have papers available on request too. If you need to know who wants your data, why not do the same for papers?&lt;a href=&quot;#fnref3&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/09/23/notes.html"/>
   <updated>2013-09-23T00:00:00+00:00</updated>
   <id>/09/23/notes</id>
   <content type="html">&lt;h3 id=&quot;nonparametric-bayes&quot;&gt;nonparametric bayes&lt;/h3&gt;
&lt;h4 id=&quot;reading&quot;&gt;Reading&lt;/h4&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Arnqvist, G. 2013 Editorial rejects? Novelty, schnovelty! Trends in ecology &amp;amp; evolution 28, 448-9. (doi:10.1016/j.tree.2013.05.007)&lt;/li&gt;
&lt;li&gt;Accounting for Complementarity to Maximize Monitoring Power for Species Management. 27, 988-999. (doi:10.1111/cobi.12092)&lt;/li&gt;
&lt;li&gt;Nes, E. H. Van, Hirota, M., Holmgren, M. &amp;amp; Scheffer, M. 2013 Tipping points in tropical tree cover: linking theory to data. (doi:10.1111/gcb.12398)&lt;/li&gt;
&lt;li&gt;Millar, R. B. 2002 Reference priors for Bayesian fisheries models. , 1492-1502. (doi:10.1139/F02-108)&lt;/li&gt;
&lt;li&gt;Mcallister, M. K. &amp;amp; Kirkwood, G. P. 1998 Bayesian stock assessment : a review and example application using the logistic model. , 1031-1060.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;writing&quot;&gt;writing&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;reorganizing, re-writing in intro.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;technical issues:&lt;/li&gt;
&lt;li&gt;pandoc 1.12 citation formating issues? How to use bibtex now?&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Makefile add dependency flags. Yay, brilliant.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;informatics-ropensci&quot;&gt;Informatics / ropensci&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Interesting discussion with Dave Bridges over semantic metadata in regards to his &lt;a href=&quot;http://bridgeslab.uthsc.edu/data-resource-sharing#comment-1056466868&quot;&gt;data management plan&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Karthik asks for thoughts on sustainability in advance of our meeting this fall.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Scott’s &lt;code&gt;taxize_&lt;/code&gt; paper is out (Chamberlain, S. a. &amp;amp; Szöcs, E. 2013 taxize: taxonomic search and retrieval in R. F1000Research 191, 1-20. doi:10.12688/f1000research.2-191.v1) Great, but also appears F1000 (and everyone else, including both my software papers) does a terrible job with code display in papers. Ought to have a more general open letter to publishers on this (Scott writing blog post on issue – yay). Sent this to F1000Research:&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Congrats on publishing http://f1000research.com/articles/2-191/v1 This looks like a promising article. Your support of research containing software, with support for features such as continual updating as the software improves, is an invaluable contribution to an crucial and frequently neglected element of academic research, and your innovative publishing workflow with visible and signed reviewer comments a welcome addition to the academic publishing landscape.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Overall the presentation of your HTML and pdf manuscripts looks quite strong. (I particularly appreciate the linked pdf and the availability of XML version).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;It is most unfortunate that code blocks appear as gifs rather than as text (in PDF, HTML, and XML versions). Being able to copy-paste code chunks is a valuable element to ensure reproducible output of the author’s provided code, and this is severely hampered by the use of the GIFs. Though I can copy the text for the most part from the GIF, certain characters are not ASCII encoded, so that commas, for instance, appear not as plain-text ASCII but as a UTF-8 comma symbol I don’t recognize, and which will not work in code.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;As you strive to bring publication into the 21st century, please consider addressing this important issue. All lines of code should be machine-readable in the XML, not images, and should use only the ASCII characters they actually involve.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;evolution-thinking&quot;&gt;evolution thinking&lt;/h3&gt;
&lt;p&gt;After another email on the topic, am assembling thoughts on comparative methods promises and pitfalls. Might be worth flushing out into proper post / article at some point. A broader version of the more narrower opinion I’ve been toying with writing for some time (beyond phylogenetic signal; or phylogenetic signal is not biologically meaningful). Similar statements should be made of rates.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Yes, so it’s a good question of just how meaningful that would be. I believe that assigning some Markovian process to some property associated with a species (e.g. Markov chain to categories, BM/OU to some continuous trait) in general is exciting but potentially dicey even in the context that we already apply the phylogenetic comparative method. Um, summarizing roughly, I think i have 3 concerns. (Take with a grain of salt, I’m probably on the far end of skepticism with regards to this stuff, and not completely up to date these days either).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Applicability&lt;/strong&gt;. It should be reasonable to think of the trait in question as evolving under the hypothesized model (at least approximately). For instance, Brownian Motion may not seem like a very biological model except for purely neutral processes, but I find it 100% reasonable as an approximation to lots of processes. Other models/statistics in this area I do not – such as Pagel’s lambda, because it treats tips differently from the rest of the tree and obviously evolution has no idea if it is on a tip or not. Without a clear picture of the quantities you have in mind it would be difficult for me to be sure how comfortable I am with it.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Power&lt;/strong&gt;. As the models get richer, clearly our ability to meaningfully distinguish between them goes down. This isn’t much of a problem in Bayesian framework, since we just get posteriors that look like our priors and we realize we haven’t learned anything, but it can be more misleading in a frequentist framework (though the method I take in that Evolution paper, based on frequentist methods from Huelsenbeck and others in the 1990s (and really Cox in the 1960s) tries to address that in a fequentist way instead).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Identifiability&lt;/strong&gt;. Other difficulties are more troublesome. A central tenant of the approach is to assume evolution on independent branches is independent – clearly a bit of a strange assumption when the process is supposed to capture competition between species that might lead to different niches, etc. However, relaxing this assumption (a growing interest recently) is yet more troublesome, since the tree no longer tells us much if traits can be correlated for reasons other than shared evolutionary history. This is just one of many ways we get a stronger problem than power – we have non-identifiable elements in our model, where we can explain the data equally effectively with different representations. (This arises in simpler models too of course).&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/09/19/notes.html"/>
   <updated>2013-09-19T00:00:00+00:00</updated>
   <id>/09/19/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;writing manuscript&lt;/li&gt;
&lt;li&gt;slides&lt;/li&gt;
&lt;li&gt;data request to Glaser.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;gpdd&quot;&gt;gpdd&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www3.imperial.ac.uk/cpb/databases/gpdd&quot;&gt;Global Popluation Dynamics Database&lt;/a&gt; initiated package &lt;a href=&quot;https://github.com/ropensci/rgpdd&quot;&gt;rgpdd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;data extraction – No API, but does provide direct dump in the form of a Microsoft Access &lt;code&gt;mdb&lt;/code&gt; database. For the moment I’m using mdbtools: &lt;code&gt;mdb-tables&lt;/code&gt; and &lt;code&gt;mdb-extract&lt;/code&gt; to convert to CSV and then reading those into R. &lt;a href=&quot;http://cran.r-project.org/web/packages/RODBC/index.html&quot;&gt;RODBC&lt;/a&gt; package installs but cannot read the database directly for me. Since data will fit into working memory no real reason to support database calls from R? (avoids extra dependencies). &lt;code&gt;data.table&lt;/code&gt; should speed internal computations.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;data compression. Looks like raw data exceeds CRAN’s 5MB limit, but &lt;code&gt;zx&lt;/code&gt; compressed binaries it will be less than &lt;span class=&quot;math&quot;&gt;\(&amp;lt;0.4\)&lt;/span&gt; MB. Compressing those from within R: &lt;code&gt;save(table_name, file=&amp;quot;filename.rda&amp;quot;, compress=&amp;quot;xz&amp;quot;)&lt;/code&gt;. Looks like database is essentially static with updates every few years, see &lt;a href=&quot;http://www3.imperial.ac.uk/cpb/databases/gpdd/updates&quot;&gt;Updates page&lt;/a&gt;. Together this makes a good case for distributing data directly in the package.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On distributing the data, note:&lt;/p&gt;
&lt;p&gt;“Not all of the data in GPDD is in the public domain; some are provided under licence from the BTO. We require permission before we can distribute some of the data sets. The data in these datasets have been removed from the DATA table in this online version of GPDD, but the metadata in the other tables has been left in place.” http://www3.imperial.ac.uk/cpb/databases/gpdd/structure&lt;/p&gt;
&lt;p&gt;Emailed database providers to confirm.&lt;/p&gt;
&lt;h3 id=&quot;gpdd-related-reading&quot;&gt;GPDD-related reading&lt;/h3&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Post, E., Brodie, J., Hebblewhite, M., Anders, A. D., Maier, J. a. K. &amp;amp; Wilmers, C. C. 2009 Global Population Dynamics and Hot Spots of Response to Climate Change. BioScience 59, 489-497. (doi:10.1525/bio.2009.59.6.7)&lt;/li&gt;
&lt;li&gt;Knape, J. &amp;amp; de Valpine, P. 2012 Are patterns of density dependence in the Global Population Dynamics Database driven by uncertainty about population abundance? Ecology Letters 15, 17-23. (doi:10.1111/j.1461-0248.2011.01702.x)&lt;/li&gt;
&lt;li&gt;Sibly, R. M., Barker, D., Denham, M. C., Hone, J. &amp;amp; Pagel, M. 2005 On the regulation of populations of mammals, birds, fish, and insects. Science (New York, N.Y.) 309, 607-10. (doi:10.1126/science.1110760)&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;notebook-infrastructure&quot;&gt;Notebook infrastructure&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ugh should implement script to transform DOIs to links+metadata. probably &lt;code&gt;knitcitations&lt;/code&gt; based, but without needing the verbose &lt;code&gt;r citep(&amp;quot;&lt;/code&gt; notation. pity markdown doesn’t support &lt;code&gt;rel&lt;/code&gt; attribute on links. Maybe possible already? https://drupal.org/node/421832 No luck there, though pandoc can avoid choking on this style of link attribute: https://github.com/jgm/pandoc/wiki/Pandoc-vs-Multimarkdown#image-and-link-attributes when compiling with &lt;code&gt;-f markdown+link_attributes&lt;/code&gt;. Unfortunately this doesn’t actually render the attributes but just silently drops them.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Adjust link to provide turtle instead of RDF/XML (avoid the download prompt)?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;interview-follow-up-links&quot;&gt;Interview follow-up links&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;I mentioned my involvement started with &lt;a href=&quot;http://carlboettiger.info/2013/06/13/what-I-look-for-in-software-papers.html&quot;&gt;this post&lt;/a&gt;; the (somewhat long) comments are useful.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;I should have mentioned that recently attended a workshop where environmental scientists were thinking about how to approach these issues related to software and code through the creation of a &lt;a href=&quot;http://isees.nceas.ucsb.edu&quot;&gt;Software Sustainability Center&lt;/a&gt;. (Of which code review could be one possible service it might provide).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;I might have mentioned that a few organizations are doing code review. Notably, the journal of open research, published by the new UK Software Sustainability Institute. They are one of the few organziations that have &lt;a href=&quot;http://carlboettiger.info/2013/07/09/reviewing-software-revisited.html&quot;&gt;code review guidelines&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Code review was recently &lt;a href=&quot;http://dx.doi.org/10.1126/science.1231535&quot;&gt;proposed&lt;/a&gt; and &lt;a href=&quot;http://dx.doi.org/10.1126/science.341.6143.236-b&quot;&gt;disputed&lt;/a&gt; in a Policy Forum piece in Science Magazine discussing these issues.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;This Times Higher Ed article recently highlighted the issues with Climate code: http://www.timeshighereducation.co.uk/news/save-your-work-give-software-engineers-a-career-track/2006431.article The Climate Code Foundation http://climatecode.org/ is doing excellent work to start addressing these issues.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Of course several earlier articles in Nature have highlighted these issues, including the important tension between encouraging scientists to &lt;a href=&quot;http://doi.org/10.1038/nature10836&quot;&gt;share code even if it isn’t “pretty”&lt;/a&gt;, vs &lt;a href=&quot;http://doi.org/10.1038/467775a&quot;&gt;improving the quality / readability of code&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/09/18/notes.html"/>
   <updated>2013-09-18T00:00:00+00:00</updated>
   <id>/09/18/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;nonparametric-bayes writing writing. see commits.&lt;/li&gt;
&lt;li&gt;Started slides for Mangel group retreat. (in progress).&lt;/li&gt;
&lt;li&gt;Working on requested review… background reading too.&lt;/li&gt;
&lt;li&gt;reml read methods for &lt;code&gt;data.set&lt;/code&gt; class, extending &lt;code&gt;attributeList&lt;/code&gt; metadata tools.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;scribble-notes-for-interivew&quot;&gt;Scribble notes for interivew&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;we are where math was 400 years ago - present theorem without proof.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;code plays an ever-increasing role in our research, and hence in describing what we have done&lt;/li&gt;
&lt;li&gt;potentially the most precise and consise way to describe a method. Also potentially the most obuscated or incoherent&lt;/li&gt;
&lt;li&gt;&lt;p&gt;we value writing. we value clean and documented wet lab technique.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;inline code vs software papers. Mozilla will focus on the former. the latter is more difficult.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;practices external to the code itself matter – maintenance, test suites, version control&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;reading&quot;&gt;Reading&lt;/h3&gt;
&lt;h4 id=&quot;structural-uncertainty-etc&quot;&gt;structural uncertainty, etc&lt;/h4&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Weitzman, M. L. Landing Fees vs Harvest Quotas with Uncertain Fish Stocks. Journal of Environmental Economics and Management 43, 325-338 (2002). (doi:10.1006/jeem.2000.1181)&lt;/li&gt;
&lt;li&gt;Weitzman, M. L. A Precautionary Tale of Uncertain Tail Fattening. Environmental and Resource Economics 55, 159-173 (2013). (doi:10.1007/s10640-013-9646-y)&lt;/li&gt;
&lt;li&gt;Weitzman, M. Structural uncertainty and the value of statistical life in the economics of catastrophic climate change. (2007). at &lt;a href=&quot;http://www.nber.org/papers/w13490&quot; class=&quot;uri&quot;&gt;http://www.nber.org/papers/w13490&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;ecoinformatics&quot;&gt;ecoinformatics&lt;/h4&gt;
&lt;ol start=&quot;5&quot; type=&quot;1&quot;&gt;
&lt;li&gt;Smith, V. et al. Beyond dead trees: integrating the scientific process in the Biodiversity Data Journal. Biodiversity Data Journal 1, e995 (2013). (doi:10.3897/BDJ.1.e995)&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&quot;methodology&quot;&gt;methodology&lt;/h5&gt;
&lt;ol start=&quot;7&quot; type=&quot;1&quot;&gt;
&lt;li&gt;Millar, R., Anderson, M. &amp;amp; Zunun, G. 2005 Fitting nonlinear environmental gradients to community data: a general distance-based approach. Ecology 86, 2245-2251.&lt;/li&gt;
&lt;li&gt;McArdle, B. &amp;amp; Anderson, M. 2001 Fitting multivariate models to community data: a comment on distance-based redundancy analysis. Ecology 82, 290-297.&lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/09/16/notes.html"/>
   <updated>2013-09-16T00:00:00+00:00</updated>
   <id>/09/16/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;finish up and push backlog of notebook updates&lt;/li&gt;
&lt;li&gt;[x] knitcitations slidify (issue &lt;a href=&quot;https://github.com/cboettig/knitcitations/issues/46&quot;&gt;46&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;recently resolved several further issues/requests with rfishbase&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ropensci&quot;&gt;ropensci&lt;/h2&gt;
&lt;p&gt;Have implemented a solution to extending &lt;code&gt;data.frame&lt;/code&gt; with metadata that I was &lt;a href=&quot;http://carlboettiger.info/2013/09/11/extending-data-frame-class.html&quot;&gt;tackling the other day&lt;/a&gt;. This raises several open questions on how we do the implementation, including whether we restrict this extension to providing the &lt;code&gt;attributeList&lt;/code&gt;-level metadata (or a subset thereof), or if we allow higher level nodes of &lt;code&gt;eml&lt;/code&gt; to act as extensions of &lt;code&gt;data.frame&lt;/code&gt; (e.g. &lt;code&gt;dataTable&lt;/code&gt;, which provides additional metadata attributes such as &lt;code&gt;entityTitle&lt;/code&gt;, as well as the &lt;code&gt;physical&lt;/code&gt; description of the &lt;code&gt;csv&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;Matt raises good points about what attribute data we want. Most we have addressed already, but this does raise additional challenges as well. See issue &lt;a href=&quot;https://github.com/ropensci/reml/issues/47&quot;&gt;#47&lt;/a&gt; for details and further discussion.&lt;/p&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;p&gt;Started catching up on some backlog of warning signals literature.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://dx.doi.org/10.1890/12-0670.1&quot; title=&quot;Rising catch variability preceded historical fisheries collapses in Alaska&quot;&gt;Litzow et al, Ecology&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.jtbi.2013.08.011&quot; title=&quot;Predicting critical transitions in a model of systemic inflammation&quot;&gt;Scheff et al, JTB&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://dx.doi.org/10.1109/ICNF.2013.6578895&quot; title=&quot;Signals of critical transitions in ecosystems associated with fluctuations of spatial patterns&quot;&gt;Corrado et al,&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://arxiv.org/abs/1307.8250&quot; title=&quot;Critical Transitions in Social Network Activity&quot;&gt;Kuhn et al, arXiv&lt;/a&gt;. Because something is a event (e.g. Thanksgiving) doesn’t make it a “critical transition”… What’s the state-space? The slowly-changing parameter? What’s the model?&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://doi.org/10.1086/670930&quot; title=&quot;Warning Signals of Regime Shifts as Intrinsic Properties of Endogenous Dynamics&quot;&gt;Fung et al, AmNat&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;writing&quot;&gt;Writing&lt;/h2&gt;
&lt;p&gt;writing writing&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Extending Data Frame Class</title>
	 <link href="/2013/09/11/extending-data-frame-class.html"/>
   <updated>2013-09-11T00:00:00+00:00</updated>
   <id>/09/11/extending-data-frame-class</id>
   <content type="html">&lt;p&gt;I’d like to define a class that acts just like a &lt;code&gt;data.frame&lt;/code&gt;, just like the &lt;code&gt;data.table&lt;/code&gt; class does, but contains some additional metadata (e.g. the units associated with the columns) and has some additional methods associated with it (e.g. that might do something with those units) while also working with any function that simply knows how to handle &lt;code&gt;data.frame&lt;/code&gt; objects.&lt;/p&gt;
&lt;p&gt;How might this be done?&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;I’m not really sure where to start on this, so below is a summary of my attempt so far and some further puzzles I have stumbled across (e.g. is a &lt;code&gt;data.frame&lt;/code&gt; and S4 object?). This seems to work, but might not be the best way to go about it.&lt;/em&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;If I understood what the data structure underlying &lt;code&gt;data.frame&lt;/code&gt; was, I might have a better idea how to extend it. But I don’t know what makes a &lt;code&gt;data.frame&lt;/code&gt; a &lt;code&gt;data.frame&lt;/code&gt;, as the exploration below will illustrate:&lt;/p&gt;
&lt;p&gt;For instance, it’s not clear if I should try writing my extended object as an S3 or an S4 object that inherits &lt;code&gt;data.frame&lt;/code&gt;. When is a &lt;code&gt;data.frame&lt;/code&gt; an S4 object and when is it an S3 object?&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;A &amp;lt;- new(&amp;quot;data.frame&amp;quot;)
isS4(A) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;returns &lt;code&gt;TRUE&lt;/code&gt;, suggesting that data.frames are S4 objects and that we might start with: &lt;code&gt;setClass(&amp;quot;myclass&amp;quot;, contains=&amp;quot;data.frame&amp;quot;)&lt;/code&gt;. However,&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;B &amp;lt;- data.frame(x = rnorm(10))
isS4(B) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;returns &lt;code&gt;FALSE&lt;/code&gt;, suggesting that &lt;code&gt;data.frames&lt;/code&gt; are S3 classes, and perhaps I should consider starting with&lt;/p&gt;
&lt;p&gt;attr(B, “class”) &amp;lt;- c(“myclass”, “data.frame”)&lt;/p&gt;
&lt;p&gt;It appears that a data.frame is built upon a list, since&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;is.list(data.frame(x = rnorm(10)))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;gives &lt;code&gt;TRUE&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Despite &lt;code&gt;isS4(B)&lt;/code&gt; being &lt;code&gt;FALSE&lt;/code&gt;, we find that the S4 method &lt;code&gt;slotNames(B)&lt;/code&gt; gives:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; slotNames(B)
[1] &amp;quot;.Data&amp;quot;     &amp;quot;names&amp;quot;     &amp;quot;row.names&amp;quot; &amp;quot;.S3Class&amp;quot; &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;suggesting that &lt;code&gt;data.frame&lt;/code&gt; is an S4 object, with a (unnamed?) list in &lt;code&gt;.Data&lt;/code&gt; and nonempty values in &lt;code&gt;names&lt;/code&gt;, along with the slot “.S3Class” containing the string “data.frame”.&lt;/p&gt;
&lt;p&gt;Interestingly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;B@names&lt;/code&gt; returns an error, while &lt;code&gt;slot(B, &amp;quot;names&amp;quot;)&lt;/code&gt; returns &lt;code&gt;&amp;quot;x&amp;quot;&lt;/code&gt;. (Suggesting &lt;code&gt;B&lt;/code&gt; is S3, with some &lt;code&gt;slot&lt;/code&gt; method defined?)&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;B@.Data&lt;/code&gt; returns an unnamed length-1 list containing a numeric vector with our 10 random values. (and illustrating a working &lt;code&gt;@&lt;/code&gt; accessor, suggesting &lt;code&gt;B&lt;/code&gt; is S4.)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Very confusing.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;From this exploration, I conclude that I can promote a &lt;code&gt;list&lt;/code&gt; to a &lt;code&gt;data.frame&lt;/code&gt; by providing an unnamed list, editing the “class” attribute, and then assigning values to the slots &lt;code&gt;names&lt;/code&gt; and &lt;code&gt;row.names&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;obj &amp;lt;- list(rnorm(10))
attr(obj, &amp;quot;class&amp;quot;) &amp;lt;- &amp;quot;data.frame&amp;quot;
slot(obj, &amp;quot;names&amp;quot;) &amp;lt;- &amp;quot;x&amp;quot;
slot(obj, &amp;quot;row.names&amp;quot;) &amp;lt;- 1:10&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And indeed &lt;code&gt;obj&lt;/code&gt; acts like a proper &lt;code&gt;data.frame&lt;/code&gt; (at least it prints like one).&lt;/p&gt;
&lt;p&gt;This suggests that I could extend &lt;code&gt;data.frame&lt;/code&gt; by adding a new slot for my units, like so:&lt;/p&gt;
&lt;p&gt;setClass(“myclass”, representation(units = “character”), contains=“data.frame”)&lt;/p&gt;
&lt;p&gt;But this does not inherit the slotNames &lt;code&gt;names&lt;/code&gt;, &lt;code&gt;row.names&lt;/code&gt;, &lt;code&gt;.S3Class&lt;/code&gt;. I try assigning these explicitly,&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;setClass(&amp;quot;myclass&amp;quot;, 
         representation(units = &amp;quot;character&amp;quot;,
                        names = &amp;quot;character&amp;quot;,
                        row.names = &amp;quot;integer&amp;quot;,
                        .S3Class = &amp;quot;character&amp;quot;),
                        contains = &amp;quot;list&amp;quot;)

obj &amp;lt;- new(&amp;quot;myclass&amp;quot;, names=&amp;quot;x&amp;quot;, row.names=1:10, units = &amp;quot;degrees Celsius&amp;quot;)
obj@.Data &amp;lt;- list(rnorm(10))
obj@.S3Class &amp;lt;- &amp;quot;data.frame&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;but this new object is not a &lt;code&gt;data.frame&lt;/code&gt;. Finally we add&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;attr(obj, &amp;quot;class&amp;quot;) &amp;lt;- &amp;quot;data.frame&amp;quot; &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and we have a successful extension that acts like a data frame. Some weird things of note: It appears that .S3Class needs to be assigned as above with &lt;code&gt;@&lt;/code&gt;, and not as a named argument in &lt;code&gt;new&lt;/code&gt; or as part of the &lt;code&gt;prototype&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This last step is almost certainly not what we really want to do, since it destroys our new class assigment (&lt;code&gt;myclass&lt;/code&gt;). We really want the object to have two classes, &lt;code&gt;myclass&lt;/code&gt; and &lt;code&gt;data.frame&lt;/code&gt;. However, if we do &lt;code&gt;attr(obj, &amp;quot;class&amp;quot;) &amp;lt;- c(&amp;quot;myclass&amp;quot;, &amp;quot;data.frame&amp;quot;)&lt;/code&gt;, then the object does not behave as a &lt;code&gt;data.frame&lt;/code&gt; at all.&lt;/p&gt;
&lt;p&gt;One might thing that the solution would be to then define all the S3 methods as copies of those avialable for data.frames, e.g. define &lt;code&gt;print.myclass &amp;lt;- print.data.frame&lt;/code&gt;. Unfortunately this doesn’t quite work (appears not to get &lt;code&gt;row.names&lt;/code&gt; and hence prints column headings but not data. Defining the S4 method for &lt;code&gt;row.names&lt;/code&gt; with &lt;code&gt;myclass&lt;/code&gt; signature doesn’t fix this either…).&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Isees Workforce Development Day 2</title>
	 <link href="/2013/09/11/ISEES-Workforce-Development-Day-2.html"/>
   <updated>2013-09-11T00:00:00+00:00</updated>
   <id>/09/11/ISEES-Workforce-Development-Day-2</id>
   <content type="html">&lt;p&gt;Near the end of another excellent day of discussions we were asked to put pen to paper to outline our own views in writing. My own contribution was the following notebook scribble.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;My own vision of what ISEES should be doing for workforce development:&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;ISEES would employ a multi-scale approach to improve basic computational expertise across the entire workforce necessary to fully participate in the modern software-immersed world of research through the development of &lt;em&gt;training standards&lt;/em&gt;, while using a &lt;em&gt;working-group model&lt;/em&gt; focused on emerging researcher-developer communities which would simultaneously improve the quality and synthesis of existing software tools while also delivering essential skills to the most transformative members of the research software communities.&lt;/p&gt;
&lt;p&gt;Development and promotion of standards for computational training. A workshop model could allow these to be written and updated by the community. These could serve as a guideline for curriculum development and play a key role in assessment. Curriculum review panels within departments, as well as reviewers of grants which include a component of computational training, would at least have such consensus standards to which they could point, either to reject sub-standard practices or make the case for increased resources to meet these goals. Curriculum should be geared towards inclusion of this training as part of domain-specific classes rather than extramural classes.&lt;/p&gt;
&lt;p&gt;Working groups or hack-a-thons bringing together “researcher-developer” domain scientists with software engineering experts would simultaneously provide a direct benefit to “hardening” (improving the interoperability, scalability, and sustainability) of existing software while also training the most influential members of the research community who are most frequently involved in training other domain scientists. By organizing such working groups around existing research communities, the incentive to participate would be higher as the outputs would be more directly aligned with existing research programmes, while at the same time training the researchers most active in software development in their domain and most likely to teach these skills to others.&lt;/p&gt;
&lt;p&gt;Thirdly, ISEES should support workshops or small conferences to address developing concerns in software workforce training, including issues such as assessing current training practices, measuring improvement and the impact of the center, or challenges in software career paths.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Didn’t really jot many notes down in today’s session, but will instead link the excellent prepared by our awesome expert facilitator &lt;a href=&quot;https://twitter.com/ninmah&quot;&gt;Rachel Smith&lt;/a&gt;.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3807/9727344142_8d449003a7_c.jpg&quot; /&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3727/9724949449_a5a7998b6c_c.jpg&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Isees Training Workshop Day 1</title>
	 <link href="/2013/09/10/ISEES-training-workshop-day-1.html"/>
   <updated>2013-09-10T00:00:00+00:00</updated>
   <id>/09/10/ISEES-training-workshop-day-1</id>
   <content type="html">&lt;h2 id=&quot;education-workforce-development-group&quot;&gt;Education / Workforce Development Group&lt;/h2&gt;
&lt;p&gt;Cannot do grand synthesis opaquely and be science. must be able to scale and evolve.&lt;/p&gt;
&lt;p&gt;How did data succeed? What features really made the difference and what were just sideshows?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Sticks (Funder and journal mandates?)&lt;/li&gt;
&lt;li&gt;Working groups (NCEAS)&lt;/li&gt;
&lt;li&gt;Training&lt;/li&gt;
&lt;li&gt;external forces: there is more data.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Why one center? Why not 15 centers? Divided by discipline rather than region…. synthesize the synthesis centers&lt;/p&gt;
&lt;p&gt;(on the ground risk assessment. the huge outside-of-the-academy representation).&lt;br /&gt;Computational training - math stats or computer science? Both.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Grassroots&lt;/li&gt;
&lt;li&gt;Infrastructure&lt;/li&gt;
&lt;li&gt;Killer app examples&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(Relatively) easy to just do it and do it wrong. Grand challenge synthesis – just plug different models and different data together in a terrible way.&lt;/p&gt;
&lt;p&gt;So what? step 1 is to try. step 2 is to iterate. must be able to do step 2.&lt;/p&gt;
&lt;p&gt;Papers don’t scale. What was once a robust exchange is largely talking past each other. We look at different data,&lt;/p&gt;
&lt;p&gt;Levels of software&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;stats&lt;/li&gt;
&lt;li&gt;one off models&lt;/li&gt;
&lt;li&gt;custom analytics&lt;/li&gt;
&lt;li&gt;modeling frameowrks&lt;/li&gt;
&lt;li&gt;community models&lt;/li&gt;
&lt;li&gt;workflows&lt;/li&gt;
&lt;li&gt;compute engines&lt;/li&gt;
&lt;li&gt;data management&lt;/li&gt;
&lt;li&gt;services (blast)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;The ‘odd’ model framework for individual based models. Hard to define/describe a model when it cannot be consisely stated in mathematics.&lt;br /&gt;see &lt;a href=&quot;http://jasss.soc.surrey.ac.uk/11/2/3.html&quot;&gt;Polhill et al 2008&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;h3 id=&quot;stakeholders&quot;&gt;Stakeholders&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;who has the most to lose The student. Perhaps the tax payer&lt;/li&gt;
&lt;li&gt;who would have most impact (on training?) Administrators (e.g. university level). Funder. Reviewer.&lt;/li&gt;
&lt;li&gt;who has most to contribute Researcher-developer (author).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Understanding current skills and practice: http://doi.org/10.1525/bio.2012.62.12.8&lt;/p&gt;
&lt;p&gt;Work involving computation is often considered interdisciplinary. We don’t&lt;/p&gt;
&lt;p&gt;Literacy&lt;/p&gt;
&lt;p&gt;Role of institutional instruction vs the software center.&lt;/p&gt;
&lt;p&gt;Teaching directly vs supporting training.&lt;/p&gt;
&lt;p&gt;Understanding, development, and publication of community standards. Something for reviewers of papers, grants, departments to point to&lt;/p&gt;
&lt;h2 id=&quot;day-1-wrapup&quot;&gt;Day 1 Wrapup&lt;/h2&gt;
&lt;h3 id=&quot;organization-and-governance&quot;&gt;Organization and Governance&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Stakeholders: Students, Educators, Researchers, Professional societies &amp;amp; Institutions, Funders, Data Repositories, Software Community&lt;/li&gt;
&lt;li&gt;Client: Researchers.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Where to engage&lt;/li&gt;
&lt;li&gt;Values: Results-oriented transparent collaborative community-drive, useful&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;rachel-smiths-visual-notes&quot;&gt;Rachel Smith’s Visual notes&lt;/h2&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm3.staticflickr.com/2869/9719874150_2e8d3c1b4b_c.jpg&quot; /&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7327/9718138109_0af2579343_c.jpg&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Lost Branches</title>
	 <link href="/2013/09/09/lost-branches.html"/>
   <updated>2013-09-09T00:00:00+00:00</updated>
   <id>/09/09/lost-branches</id>
   <content type="html">&lt;p&gt;Just read &lt;a href=&quot;http://10.1371/journal.pbio.1001636&quot;&gt;Lost Branches on the Tree of Life&lt;/a&gt; in &lt;em&gt;PLoS Biology&lt;/em&gt; and couldn’t agree more! I too am frequently frustrated by the lack of deposition or replies to email requests for data. The 16% reply rate seems consistent with other such studies. I agree with the general message that what is most needed is a cultural shift towards these expectations. I loved this paper overall but nonetheless cannot resist a few nitpicks.&lt;/p&gt;
&lt;p&gt;The article does address some data quality concerns, but makes no mention of challenges with many current formats for actually sharing the data. The use of “nexus” files differs between different programs (e.g. Mr Bayes makes certain modifications to its nexus files which may render them incompatible with other programs), or contain formatting errors that make them un-readable (For example, about 15% of NEXUS files submitted to the CIPRES portal contain unrecoverable yet hard-to-diagnose file format errors). I understand that the NeXML format (see Vos et al: 10.1093/sysbio/sys025) with a formal grammar provides a way to address both these validation and extensibility problems, so it might have been nice to see it referenced.&lt;/p&gt;
&lt;p&gt;While I agree with your recommendation that Treebase submission process be more streamlined (e.g. like Dryad), though on the other hand they didn’t make much mention of the that Treebase in turn supplies much richer metadata than Dryad. Clearly this is a trade-off and no doubt good that alternatives exist. Another minor angle that I didn’t see addressed so much in the paper is the role of publishers in even checking that the identifiers, when present, actually resolve to the data; an issue highlighted by this recent paper: https://peerj.com/articles/148/.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Some Rfishbase Updates</title>
	 <link href="/2013/09/08/some-rfishbase-updates.html"/>
   <updated>2013-09-08T00:00:00+00:00</updated>
   <id>/09/08/some-rfishbase-updates</id>
   <content type="html">&lt;p&gt;Ever since writing the &lt;code&gt;rfishbase&lt;/code&gt; package I’ve been frustrated by the lack of a proper API from Fishbase.org that would allow access to that wealth of information that is not exposed in the “Summary XML” files from which &lt;code&gt;rfishbase&lt;/code&gt; extracts its content. Since writing the paper in Journal of Fish Biology, I continue to receive user requests asking if or how such-and-such a data element might be extracted. Usually this involves a disappointing boiler-plate reply about how the package is limited to the “Summary XML” data and that improved query potential must wait for a proper API from Fishbase.org at some unspecified time.&lt;/p&gt;
&lt;p&gt;I have been in touch with many of the folks at Fishbase.org at various times looking for ways to address these issues. They have been in general keenly supportive of the idea, but I gather that they are largely overworked and under-resourced and as such, implementation of any of these steps has been very slow. Last October another rfishbase user contacted me, who works full time as a software developer. I put him in touch with the UBC team, and he is willing to volunteer the hours and expertise the FishBase development team lacks to help transform the database into a full API. I think this is a very promising development and a nice example of a community effort, but still faces the same fundamental challenges in getting things rolling. So, so far, no &lt;code&gt;rfishbase&lt;/code&gt; version 2. (Actually in our semantic versioning it would be the less romantic version 0.3 or 0.4 or so, depending on how many CRAN submits we do before then and provided we don’t break any backwards compatibility)…&lt;/p&gt;
&lt;p&gt;One of the more frequent requests involves accessing quantitative trophic level estimates provided for many species on the “Ecology” page, linked from the “Summary page”. The only way to access this data is by scraping the HTML.&lt;/p&gt;
&lt;p&gt;Previously I’ve been reluctant to scrape the HTML directly for several reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;It is generally unrealiable/unverifiable. Without any metadata (rdfa or microdata/microformats could have helped…) in the HTML to signpost that we have the correct value, we are generally counting arbitrary header, div and span elements, followed by some Regular Expression matching, to find the element we want.&lt;br /&gt;This is error-prone and easily broken by any changes in the html pages either over time or between pages for different species.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Second, it puts a much greater load on the fishbase servers. Often we cannot even start by querying the page we want, (e.g. since URLs involve things like stock-ids that the end user will not know and I haven’t located a look-up table), so a single call may follow links through several pages before parsing the data it needs. Repeating such queries over many fish programmatically can create a rather substantial burst of traffic that could slow or crash the servers.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;It’s slow. Making all the queries takes time, even for a computer. (Though caching, as we already do in rfishbase, could take care of much this).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;It is potentially time consuming and annoying to code the scaping.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Okay, the last is just me being lazy. Since this particular query about trophic level was a common email request, and as the data was available from the “Ecology” page of a species in the form of an HTML Table, (and hence somewhat less fragile to robustly identify…), I thought I’d give it a try.&lt;/p&gt;
&lt;p&gt;Here’s my approach (or see &lt;a href=&quot;&quot;&gt;source code&lt;/a&gt;). We would follow the same query structure as &lt;code&gt;getSize&lt;/code&gt; did &lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;, and execute several steps:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Visit the Summary page of the requested fish&lt;/li&gt;
&lt;li&gt;Find it’s Ecology page&lt;/li&gt;
&lt;li&gt;Find the Trophic level table&lt;/li&gt;
&lt;li&gt;parse the table.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In code, that looks like this:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;getTrophicLevel &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(&lt;span class=&quot;dt&quot;&gt;fish.data =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NULL&lt;/span&gt;,
                            &lt;span class=&quot;dt&quot;&gt;path =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NULL&lt;/span&gt;,
                            &lt;span class=&quot;dt&quot;&gt;as_table=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, 
                            &lt;span class=&quot;dt&quot;&gt;from =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;diet composition&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;individual food items&amp;quot;&lt;/span&gt;), 
                            &lt;span class=&quot;dt&quot;&gt;unfished =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;,
                            &lt;span class=&quot;dt&quot;&gt;justSE =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;,
                            &lt;span class=&quot;dt&quot;&gt;justReference =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;){

  ids &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getIds&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fish.data =&lt;/span&gt; fish.data, &lt;span class=&quot;dt&quot;&gt;path=&lt;/span&gt;path)
  out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(ids, function(id){
    summaryPage &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getSummary&lt;/span&gt;(id)
    ecologyPage &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getEcology&lt;/span&gt;(summaryPage)
    tab &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;readTrophicLevel&lt;/span&gt;(ecologyPage)
    if(as_table)
      tab
    else
      &lt;span class=&quot;kw&quot;&gt;parseTrophicLevel&lt;/span&gt;(tab, &lt;span class=&quot;dt&quot;&gt;from=&lt;/span&gt;from, &lt;span class=&quot;dt&quot;&gt;unfished=&lt;/span&gt;unfished,&lt;span class=&quot;dt&quot;&gt;justSE=&lt;/span&gt;justSE, &lt;span class=&quot;dt&quot;&gt;justReference=&lt;/span&gt;justReference)
    })
  out
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which has a whole bunch of options just to let the user control the format of the output / target value, since there are different numbers.&lt;/p&gt;
&lt;p&gt;Each of the steps corresponds to it’s own function:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;getIds &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(&lt;span class=&quot;dt&quot;&gt;fish.data=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NULL&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NULL&lt;/span&gt;){
  if(&lt;span class=&quot;kw&quot;&gt;is.null&lt;/span&gt;(fish.data))
    fish.data &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;loadCache&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;path=&lt;/span&gt;path)
  ids &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(fish.data, &lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;id&amp;#39;&lt;/span&gt;)
  species.names &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(fish.data, &lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;ScientificName&amp;#39;&lt;/span&gt;)
  &lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(ids) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;_&amp;quot;&lt;/span&gt;, species.names) &lt;span class=&quot;co&quot;&gt;# use underscores instead of spaces&lt;/span&gt;
  ids
}


getSummary &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(id){ 
  &lt;span class=&quot;co&quot;&gt;# Grab and parse page matching id&lt;/span&gt;
  url &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paste0&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.fishbase.org/summary/speciessummary.php?id=&amp;quot;&lt;/span&gt;, id)
  summaryPage &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;htmlParse&lt;/span&gt;(url) 
}

getEcology &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(summaryPage){
  link &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xpathApply&lt;/span&gt;(summaryPage, &lt;span class=&quot;st&quot;&gt;&amp;quot;//*[contains(@href, &amp;#39;/Ecology/FishEcologySummary.php&amp;#39;)][1]&amp;quot;&lt;/span&gt;, xmlAttrs)[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]][[&lt;span class=&quot;st&quot;&gt;&amp;quot;href&amp;quot;&lt;/span&gt;]]
  ecologyPage &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;htmlParse&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;paste0&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.fishbase.org/&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;./&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, link)))
}


readTrophicLevel &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(ecologyPage){ 
  tab &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;readHTMLTable&lt;/span&gt;(ecologyPage)[[&lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;]]
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;which are all nice and short and potentially self-explanatory. Extracting values from the table we isolate is done rather crudely at the moment and could no doubt be improved, but this is what I came up with:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;parseTrophicLevel &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(tab, 
                              &lt;span class=&quot;dt&quot;&gt;from =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;diet composition&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;individual food items&amp;quot;&lt;/span&gt;), 
                              &lt;span class=&quot;dt&quot;&gt;unfished =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;,
                              &lt;span class=&quot;dt&quot;&gt;justSE =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;,
                              &lt;span class=&quot;dt&quot;&gt;justReference =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;){
  from &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;match.arg&lt;/span&gt;(from)
  if(justReference)
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.character&lt;/span&gt;(tab[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
  else{
    col &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;
    adj &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
    if(unfished)
      col &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;
    if(justSE)
      adj &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
    if(from ==&lt;span class=&quot;st&quot;&gt; &amp;quot;diet composition&amp;quot;&lt;/span&gt;)
      out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.character&lt;/span&gt;(tab[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;,col+adj]))
    else if(from ==&lt;span class=&quot;st&quot;&gt; &amp;quot;individual food items&amp;quot;&lt;/span&gt;)
      out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.character&lt;/span&gt;(tab[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;,col+adj]))
  }
  out 
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Most of these are internal functions of course, only the top &lt;code&gt;getTrophicLevel&lt;/code&gt; is user-facing.&lt;br /&gt;The use is straight forward:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(rfishbase)
&lt;span class=&quot;kw&quot;&gt;data&lt;/span&gt;(fishbase)

&lt;span class=&quot;kw&quot;&gt;getTrophicLevel&lt;/span&gt;(fish.data[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;or any of the various optional configurations, e.g.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;getTrophicLevel&lt;/span&gt;(fish.data[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;as_table=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(which gives a list of tables matching these fish).&lt;/p&gt;
&lt;p&gt;The astute reader might notice that with &lt;code&gt;EcologyPage&lt;/code&gt; etc we have access to a lot more (tabular) data in this approach, which could be extended beyond that page as well, following the same template shown here. Just a matter of time and the other limitations discussed above.&lt;/p&gt;
&lt;p&gt;So anyway, if you need the getTrophicLevel, it’s available now on the &lt;a href=&quot;https://github.com/ropensci/rfishbase/issues/12&quot;&gt;Github version&lt;/a&gt; and should be on CRAN in the near future. Meanwhile, I’d certainly welcome other requests (or better yet, forks and pull requests implementing additional data fields along these same lines).&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;taking the &lt;code&gt;fish.data&lt;/code&gt; list as an argument – potentially a weird choice but oh well, that’s what I did when I first wrote the rfishbase API so may as well keep it. A more natural choice taking scientific names as arguments directly, instead of needing to start with a which_fish query, should be added one day to the entire package API.&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
 </entry>
 
 <entry>
   <title>Rnexml Milestone</title>
	 <link href="/2013/09/07/RNeXML-milestone.html"/>
   <updated>2013-09-07T00:00:00+00:00</updated>
   <id>/09/07/RNeXML-milestone</id>
   <content type="html">&lt;p&gt;We have also recently reached the first &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues?milestone=1&amp;amp;state=closed&quot;&gt;milestone&lt;/a&gt; in &lt;a href=&quot;https://github.com/ropensci/RNeXML&quot;&gt;RNeXML&lt;/a&gt;. We can now read NeXML files into R and convert to the popular &lt;code&gt;phylo&lt;/code&gt; format from the &lt;code&gt;ape&lt;/code&gt; package, as well as writing the &lt;code&gt;ape::phylo&lt;/code&gt; trees out into valid NeXML. We can also add basic metadata such as author, license, title and description to the file.&lt;/p&gt;
&lt;h3 id=&quot;development-notes&quot;&gt;Development notes&lt;/h3&gt;
&lt;p&gt;At the heart of this package is an internal S4 representation of the schema. While knowledgable users could interact with the S4 objects directly (easier and less error-prone than interacting with the XML parsing/serializing directly), we in general provide an end-user API which hides the internal complexity of S4 classes, as illustrated below. In principle this representation could be automatically generated from the schema using the &lt;code&gt;XMLSchema&lt;/code&gt; package, but that must wait until that package is more mature. Meanwhile, we rely on hand-coded classes and hand-coded coercion functions.&lt;/p&gt;
&lt;p&gt;The coercion functions take care of the translation into and out of the XML (parsing and serializing) without any need for xpath expressions. At the moment they are verbosely spelled out under the class definitions in classes.R file, though ideally they could be abstracted (e.g. as we do in &lt;code&gt;reml&lt;/code&gt;). Classes are based on the &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/1#issuecomment-22867535&quot;&gt;inheritance structure&lt;/a&gt; of the schema (unlike &lt;code&gt;reml&lt;/code&gt;), which makes additional nodes much easier to add and hence it is easier to extend this library. At this time we have only certain core elements from the schema as map naturally to &lt;code&gt;ape&lt;/code&gt; trees, along with the essential annotation elements (&lt;code&gt;meta&lt;/code&gt; nodes). Support for additional classes / schema elements will be added as driven by use cases.&lt;/p&gt;
&lt;p&gt;(See the &lt;a href=&quot;https://github.com/ropensci/RNeXML&quot;&gt;Github page&lt;/a&gt; for the most recent tutorial, this is just added here for my record).&lt;/p&gt;
&lt;h3 id=&quot;tutorial&quot;&gt;Tutorial&lt;/h3&gt;
&lt;p&gt;The development version of RNeXML is &lt;a href=&quot;https://github.com/ropensci/RNeXML&quot;&gt;available on Github&lt;/a&gt;. With the &lt;code&gt;devtools&lt;/code&gt; package installed on your system, RNeXML can be installed using:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(devtools)
&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;RNeXML&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;ropensci&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(RNeXML)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Read in a &lt;code&gt;nexml&lt;/code&gt; file into the &lt;code&gt;ape::phylo&lt;/code&gt; format:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;system.file&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;examples&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;trees.xml&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;package =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;RNeXML&amp;quot;&lt;/span&gt;)
tr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;nexml_read&lt;/span&gt;(f, &lt;span class=&quot;st&quot;&gt;&amp;quot;phylo&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Write an &lt;code&gt;ape::phylo&lt;/code&gt; tree into the &lt;code&gt;nexml&lt;/code&gt; format, including optional metadata:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;nexml_write&lt;/span&gt;(bird.orders, &lt;span class=&quot;st&quot;&gt;&amp;quot;birds.xml&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;creator =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Carl Boettiger &amp;lt;cboettig@ropensci.org&amp;gt;&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;example NeXML file for bird orders&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;description =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Example phylogeny taken from the ape documentation showing the major bird orders&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;next-steps&quot;&gt;Next Steps&lt;/h3&gt;
&lt;p&gt;Developing use cases, soliciting input, and writing a manuscript… See issues log.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Outreach &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/22&quot;&gt;#22&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;metadata use cases &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/21&quot;&gt;#21&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;serializing metadata (implementation) &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/18&quot;&gt;#18&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Testing &lt;a href=&quot;https://github.com/ropensci/RNeXML/issues/15&quot;&gt;#15&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Nsf Math Bio Postdoc</title>
	 <link href="/2013/09/06/NSF-math-bio-postdoc.html"/>
   <updated>2013-09-06T00:00:00+00:00</updated>
   <id>/09/06/NSF-math-bio-postdoc</id>
   <content type="html">&lt;p&gt;Guess it’s that time of year again. Just saw the reminder for &lt;a href=&quot;http://www.nsf.gov/funding/pgm_summ.jsp?pims_id=503622&amp;amp;WT.mc_id=USNSF_39&amp;amp;WT.mc_ev=click&quot;&gt;this year’s RFP for NSF Biology Post-docs&lt;/a&gt;. As I was fortunate enough to receive one of these for the “Mathematical Biology” track through last year’s call, I have received a few requests for materials and advice. I’m not sure if I have any more insight for having received this funding, but as I appreciated the advice of others this time last year I’ll give it a shot. I found it particularly useful to see another proposal, particularly one that was also from a theoretical angle, so I am grateful to &lt;a href=&quot;http://whitelab.weecology.org/&quot;&gt;Ethan White&lt;/a&gt; for sharing &lt;a href=&quot;http://dx.doi.org/10.6084/m9.figshare.93938&quot;&gt;his successful proposal on figshare&lt;/a&gt; (though for a call under “Bioinformatics” rather than “Mathematical Biology”). Following suit, &lt;a href=&quot;http://dx.doi.org/10.6084/m9.figshare.652970&quot;&gt;my own full proposal&lt;/a&gt; can be found on figshare. (This is also linked from my vita, which hasn’t proven very discoverable). While I do not feel it appropriate to post my reviews (after all, they are not written with the expectation of public release and I don’t own the copyright to them), you can drop me an email if you would like to see these privately.&lt;/p&gt;
&lt;p&gt;In that spirit, here is a bit of background on my own proposal with some general reflections on my reviews, both as a chance for me to think about the feedback I received as I now embark on this proposed research, and for whatever value it may have to this year’s applicants.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;In July I officially started my NSF mathematical biology post-doc with mentors Marc Mangel and Steve Munch: &lt;em&gt;Management for an uncertain world: robust decision theory in face of regime shifts&lt;/em&gt;. Over the next two years, this research will focus primarily in pursing three questions:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;strong&gt;Can early warning signals be incorporated into decision-theoretic approaches to decrease the chance of an undesirable critical transition?&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Can the use of non-parametric and machine learning approaches to ecosystem modeling and prediction decrease or increase the chance of an undesirable transition?&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;What learning strategies can be employed to reduce uncertainty without increasing the chance of accidentally crossing a tipping point?&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The project brings me into rather new ground into at least two new methodologies (Optimal control, specifically through stochastic dynamic programming – something I have been recently introduced to by economists in a NIMBIOS working group) and a new ecological system (fisheries dynamics). I had to smile on seeing that some of my reviewers fretted that the project sounded too similar to my thesis work. While potentially understandable from a comparison of my thesis title and my NSF proposal title, I had feared the actual content had more the opposite problem.&lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Overall my reviews were somewhat more applied than I anticipated, focusing much more on the conceptual goals of the research than the details of the implementation. In retrospect this was probably fortuitous, as I did not have space to fully develop the technical challenges in some of these areas, which are at points formidable (several areas involve methodology that is quite new to me. Question 3 in particular draws on two classically hard problems and I worry myself if I will have the capacity to tackle it effectively). From others I understand that my proposal was potentially somewhat more focused on big picture issues than on implementation details, which may not always be advisable but worked well in this case. It’s unclear to me if this is typical of more theoretical proposals or just luck.&lt;/p&gt;
&lt;h3 id=&quot;broader-impacts-and-the-open-notebook&quot;&gt;Broader Impacts and the Open Notebook&lt;/h3&gt;
&lt;p&gt;NSF gives quite a wide range of potential areas for broader impacts. The 2013 changes only made this more vague, extending the listed examples and emphasizing that they were meant to be illustrative, not prescriptive. A particularly promising change comes in using the same &lt;a href=&quot;http://www.nsf.gov/pubs/policydocs/pappguide/nsf13001/gpg_3.jsp#IIIA2&quot;&gt;criteria as the merit review&lt;/a&gt;; emphasizing that the effectiveness of the impact is assessed, and that the applicant is well-qualified for the task. Though I have volunteered much of my adult life with non-profit organizations working with under-served youth in my &lt;a href=&quot;/community.html&quot;&gt;community&lt;/a&gt;, I did not think it appropriate to shoehorn those activities into my proposal. For these reasons I chose not to focus on broadening participation of under-represented groups in this proposal, and instead emphasize three of five (now eight) suggested areas that I felt I could effectively impact through my open lab notebook: education, dissemination, and infrastructure.&lt;/p&gt;
&lt;p&gt;I think this was a bit of a gamble, focusing on something that was both more unique to me and that I could implement and assess well, rather than on something more traditionally recognized for broader impacts. It is difficult to know just what my panel thought of this idea – but my impressions is that “good enough” might be the general sentiment. Comments included:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The PI operates a blog (open notebook) that already receives attention and is an interesting way to promote engagement and learning across a broad community of scientific peers and perhaps the public.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;the notebook/blog could be developed into an online asynchronous classroom to mentor others in applying the results.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;The blog is a good idea for dissemination of results.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Whether or not this was a lukewarm endorsement of the open notebook, I’m excited that as part of my proposal the practice is officially part of my supported proposal and not merely a time-saving endeavor for myself. Though the more technical features seemed to be of little interest to my reviewers, I’ll nonetheless particularly interested in exploring the potential to better leverage such elements as &lt;a href=&quot;http://carlboettiger.info/2013/04/04/notebook-parsing.html&quot;&gt;semantic markup&lt;/a&gt; and &lt;a href=&quot;http://carlboettiger.info/2013/05/03/notebook-features-hashes-providing-an-immutable-and-verifiable-research-record.html&quot;&gt;hashes&lt;/a&gt; in the notebook as I move forward with my research.&lt;/p&gt;
&lt;h3 id=&quot;reflections-on-data-management&quot;&gt;Reflections on Data Management&lt;/h3&gt;
&lt;p&gt;The data management plan is supposed to be assessed under both ‘Intellectual Merit’ and ‘Broader Impact’ sections where applicable,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“The Data Management Plan will be reviewed as an integral part of the proposal, coming under Intellectual Merit or Broader Impacts or both, as appropriate for the scientific community of relevance.” &lt;a href=&quot;http://www.nsf.gov/pubs/policydocs/pappguide/nsf13001/gpg_2.jsp#IIC2j&quot;&gt;NSF GPG&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;which may have the effect that it is assessed under neither, unless a reviewer particularly cares about this section. I saw no mention of it in my own reviews. I have posted a draft of my &lt;a href=&quot;http://carlboettiger.info/2012/10/09/data-management-plan.html&quot;&gt;data management plan&lt;/a&gt; previously. Having recently become familiar with the Ecological Metadata Standard I will probably amend the plan to reflect this.&lt;/p&gt;
&lt;h4 id=&quot;weaknesses&quot;&gt;Weaknesses&lt;/h4&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;One reviewer expresses a desire for a case-study application&lt;/li&gt;
&lt;li&gt;One suggests more on broader public and under-served groups&lt;/li&gt;
&lt;li&gt;One feels the proposal has “some similarities to the dissertation”&lt;/li&gt;
&lt;/ol&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;After moving from an undergraduate in physics, I did my best to stitch my graduate work for an evolution and ecology PhD under a unifying theme in my dissertation, but it could hardly have been more across the map. My dissertation had three papers: one in Adaptive Dynamics, one in Comparative Phylogenetics, and one in warning signals of ecological shifts – there was no overlap in authors and essentially no overlap in the topic or reference lists (Okay, Cox 1968, in the latter two). I didn’t even attempt to weave in my two ecoinformatics papers. My undergraduate was similarly varied. I spent summer 2004 in an astrophysics lab (lambda CDM models with Neta Bahcall), 2005 sequencing extremeophilic microbes in a geomicrobiology lab (with TC Onstott), 2006 doing computational methods for boundary value problems during a plasma physics fellowship (with Hersh Rabitz). Though a physics major I wrote my first JP on population dynamics under clonal interference (David Huse), my second on adaptive dynamics (with Joshua Weitz), and my thesis on forest canopy models (with Stephen Pacala). It’s all a logical path of closely connected ideas in my mind of course ;-)&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
 </entry>
 
 <entry>
   <title>Whitehouse Open Data Memorandum</title>
	 <link href="/2013/09/05/whitehouse-open-data-memorandum.html"/>
   <updated>2013-09-05T00:00:00+00:00</updated>
   <id>/09/05/whitehouse-open-data-memorandum</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;http://www.whitehouse.gov/sites/default/files/omb/memoranda/2013/m-13-13.pdf&quot;&gt;Open Data Policy-Managing Information as an Asset&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Far from implemented, though the tools and resources at the newly created &lt;a href=&quot;http://project-open-data.github.io&quot;&gt;Project Open Data&lt;/a&gt; (hosted on Github!) look very promising. Some choice quotations below:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Pursuant to Executive Order of May 9, 2013, &lt;em&gt;“Making Open and Machine Readable the New Default for Government Information”&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Any datasets in the agency’s enterprise data inventory that can be made publicly available must be listed at &lt;code&gt;www.&amp;lt;agency&amp;gt;.gov/data&lt;/code&gt; in a human- and machine-readable format that enables automatic aggregation by Data.gov and other services (known as “harvestable files”), to the extent practicable.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Open data&lt;/strong&gt;: For the purposes of this Memorandum, the term “open data” refers to publicly available data structured in a way that enables the data to be fully discoverable and usable by end users. In general, open data will be consistent with the following principles:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Public&lt;/em&gt;. Agencies must adopt a presumption in favor of openness to the extent permitted by law and subject to […] valid restrictions.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Accessible&lt;/em&gt;. Open data are made available in convenient, modifiable, and open fonnats that can be retrieved, downloaded, indexed, and searched. Formats should be machine-readable (i.e., data are reasonably structured to allow automated processing). […] made available to the widest range of users for the widest range of purposes, often by providing the data in multiple formats for consumption. To the extent permitted by law, these formats should be non-proprietary, publicly available, and no restrictions should be placed upon their use.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Described&lt;/em&gt;. Open data are described fully so that consumers of the data have sufficient information to understand their strengths, weaknesses, analytical limitations, security requirements, as well as how to process them. This involves the use of robust, granular metadata (i.e., fields or elements that describe data).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Reusable&lt;/em&gt;. Open data are made available under an open license that places no restrictions on their use.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Complete&lt;/em&gt;. Open data are published in primary forms (i.e., as collected at the source), with the finest possible level of granularity that is practicable and permitted by law and other requirements. Derived or aggregate open data should also be published but must reference the primary data.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Timely&lt;/em&gt;. Open data are made available as quickly as necessary to preserve the value of the data. Frequency of release should account for key audiences and downstream needs.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Managed Post-Release&lt;/em&gt;. A point of contact must be designated to assist with data use and to respond to complaints about adherence to these open data requirements.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Reml Milestone</title>
	 <link href="/2013/09/02/reml-milestone.html"/>
   <updated>2013-09-02T00:00:00+00:00</updated>
   <id>/09/02/reml-milestone</id>
   <content type="html">&lt;p&gt;Reached a &lt;a href=&quot;https://github.com/ropensci/reml/issues/milestones?state=closed&amp;amp;with_issues=yes&quot;&gt;milestone&lt;/a&gt; in &lt;a href=&quot;https://github.com/ropensci/reml&quot;&gt;reml&lt;/a&gt; development today with basic implementation of reading, writing, and publishing valid EML files and a working test suite.&lt;/p&gt;
&lt;h3 id=&quot;an-s4-based-structure&quot;&gt;An S4-based structure&lt;/h3&gt;
&lt;p&gt;This involved a complete re-write of the pre-ESA code and is now completely S4-class based, allowing a more flexible structure that is easier and faster to extend. For instance, rather than having to explicitly think about the commands to parse and serialize a new metadata element that needs to be added from the schema, we just define the class for the object. Then we can leverage automated methods that can read into this class from XML and write out of it.&lt;/p&gt;
&lt;p&gt;For instance, we recently added the class &lt;code&gt;alternativeTimeScale&lt;/code&gt; following it’s &lt;a href=&quot;knb.ecoinformatics.org/software/eml/eml-2.1.1/eml-coverage.html#alternativeTimeScale&quot;&gt;definition in the Schema documentation&lt;/a&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;setClass&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;alternativeTimeScale&amp;quot;&lt;/span&gt;,
         &lt;span class=&quot;kw&quot;&gt;representation&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;timeScaleName =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;dt&quot;&gt;timeScaleAgeEstimate =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;dt&quot;&gt;timeScaleAgeUncertainty =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;dt&quot;&gt;timeScaleAgeExplanation =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;dt&quot;&gt;timeScaleCitation =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;) 
                        &lt;span class=&quot;co&quot;&gt;# FIXME should be citation type&lt;/span&gt;
        )
&lt;span class=&quot;kw&quot;&gt;setAs&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;XMLInternalElementNode&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;alternativeTimeScale&amp;quot;&lt;/span&gt;,   function(from) &lt;span class=&quot;kw&quot;&gt;emlToS4&lt;/span&gt;(from))
&lt;span class=&quot;kw&quot;&gt;setAs&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;alternativeTimeScale&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;XMLInternalElementNode&amp;quot;&lt;/span&gt;,   function(from) &lt;span class=&quot;kw&quot;&gt;S4Toeml&lt;/span&gt;(from))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Rather than bother with the XML parsing and serializing, we simply point R to use our predefined S4 coercion methods, specified after the class definition.&lt;/p&gt;
&lt;p&gt;Note this need a little more work as the FIXME note indicates, since we have not yet written the &lt;code&gt;citation&lt;/code&gt; class. Luckily, using the S4 approach this will be easy to update once that class is defined. In this manner, we can easily add elements that we need.&lt;/p&gt;
&lt;p&gt;Classes are defined in groups in files named after the class. Constructor functions are defined in files named after the functions themselves, which prefix &lt;code&gt;eml_&lt;/code&gt; to the class name. This adds some clarity (e.g. calling a function &lt;code&gt;eml_dataset&lt;/code&gt; vs &lt;code&gt;dataset&lt;/code&gt;) can also reduce namespace collisions.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt; that the S4 code is intended only to be developer-facing. Users interact with documented constructor functions, which have more end-user documentation (though still in development).&lt;/p&gt;
&lt;h2 id=&quot;examples-of-reading-writing-and-publishing-eml&quot;&gt;Examples of reading, writing, and publishing EML&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;devtools&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;reml&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;ropensci&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Load the package:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;reml&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;writing-r-data-into-eml&quot;&gt;Writing R data into EML&lt;/h3&gt;
&lt;p&gt;Consider some dataset as an R &lt;code&gt;data.frame&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dat =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;river =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;SAC&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;SAC&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;AM&amp;quot;&lt;/span&gt;),
                 &lt;span class=&quot;dt&quot;&gt;spp   =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;king&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;king&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;ccho&amp;quot;&lt;/span&gt;),
                 &lt;span class=&quot;dt&quot;&gt;stg   =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;smolt&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;parr&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;smolt&amp;quot;&lt;/span&gt;),
                 &lt;span class=&quot;dt&quot;&gt;ct    =&lt;/span&gt;  &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(293L, 410L, 210L))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Provide a list giving the &lt;strong&gt;column header&lt;/strong&gt; used in the data.frame, followed by a plain text definitions for the column, followed by a character vector giving the definition for the units:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;column descriptions&lt;/strong&gt;: These are usually just plain text definitions, though a URI to a semantic definition can be particularly powerful. See “Advanced Use” for details on adding richer information, such as the method used to collect the data or set the geographic, taxonomic, or temporal coverage of an individual column.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;column units&lt;/strong&gt;: For factors, this is a definition of the levels involved. For numeric data, specify the units from &lt;a href=&quot;http://knb.ecoinformatics.org/software/eml/eml-2.1.1/eml-unitTypeDefinitions.html#StandardUnitDictionary&quot;&gt;this list&lt;/a&gt;. For dates, specify the format, (e.g. YYYY or MM-DD-YY). For character strings, a definition of the kind of string can be given, (e.g. species scientific name), otherwise the column description will be used.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;metadata &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;river&amp;quot;&lt;/span&gt; =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;river&amp;quot;&lt;/span&gt;,
                      &lt;span class=&quot;st&quot;&gt;&amp;quot;River site used for collection&amp;quot;&lt;/span&gt;,
                      &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;SAC =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;The Sacramento River&amp;quot;&lt;/span&gt;, 
                        &lt;span class=&quot;dt&quot;&gt;AM =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;The American River&amp;quot;&lt;/span&gt;)),
       &lt;span class=&quot;st&quot;&gt;&amp;quot;spp&amp;quot;&lt;/span&gt; =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;spp&amp;quot;&lt;/span&gt;,
                    &lt;span class=&quot;st&quot;&gt;&amp;quot;Species common name&amp;quot;&lt;/span&gt;, 
                    &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;king =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;King Salmon&amp;quot;&lt;/span&gt;, 
                      &lt;span class=&quot;dt&quot;&gt;ccho =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Coho Salmon&amp;quot;&lt;/span&gt;)),
       &lt;span class=&quot;st&quot;&gt;&amp;quot;stg&amp;quot;&lt;/span&gt; =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;stg&amp;quot;&lt;/span&gt;,
                    &lt;span class=&quot;st&quot;&gt;&amp;quot;Life Stage&amp;quot;&lt;/span&gt;, 
                    &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;parr =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;third life stage&amp;quot;&lt;/span&gt;, 
                      &lt;span class=&quot;dt&quot;&gt;smolt =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fourth life stage&amp;quot;&lt;/span&gt;)),
       &lt;span class=&quot;st&quot;&gt;&amp;quot;ct&amp;quot;&lt;/span&gt;  =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;ct&amp;quot;&lt;/span&gt;,
                    &lt;span class=&quot;st&quot;&gt;&amp;quot;count&amp;quot;&lt;/span&gt;, 
                    &lt;span class=&quot;st&quot;&gt;&amp;quot;number&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;for convenience, this metadata list can instead be constructed with the help of the reml wizard&lt;/em&gt;. Just use &lt;code&gt;metadata &amp;lt;- metadata_wizard(dat)&lt;/code&gt; to begin. While this may be helpful starting out, regular users will find it faster to define the columns and units directly in the format above.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;eml_write&lt;/span&gt;(dat, metadata, &lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;reml example&amp;quot;&lt;/span&gt;,  
          &lt;span class=&quot;dt&quot;&gt;description =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;An example, intended for&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;                              illustrative purposes only.&amp;quot;&lt;/span&gt;,
          &lt;span class=&quot;dt&quot;&gt;creator =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Carl Boettiger &amp;lt;cboettig@gmail.com&amp;gt;&amp;quot;&lt;/span&gt;,
          &lt;span class=&quot;dt&quot;&gt;file =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;reml_example.xml&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] &amp;quot;reml_example.xml&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;See the &lt;a href=&quot;https://github.com/ropensci/reml/tree/master/inst/doc/reml_example.xml&quot;&gt;EML generated&lt;/a&gt; by this example. Note that if the &lt;code&gt;metadata&lt;/code&gt; argument providing the definitions for the &lt;code&gt;data.frame&lt;/code&gt; is not specified, &lt;code&gt;reml&lt;/code&gt; will launch the wizard to prompt the user.&lt;/p&gt;
&lt;h5 id=&quot;configuration&quot;&gt;Configuration&lt;/h5&gt;
&lt;p&gt;Configure general metadata you may want to frequently reuse, avoiding having to specify things like the name of the creator or contact.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;eml_config&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;creator =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Carl Boettiger &amp;lt;cboettig@ropensci.org&amp;gt;&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Karthik Ram&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;contact =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Carl Boettiger &amp;lt;cboettig@ropensci.org&amp;gt;&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;See &lt;a href=&quot;https://github.com/ropensci/reml/issues?labels=write+eml&amp;amp;page=1&amp;amp;state=open&quot;&gt;Open issues in writing EML&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;publish-eml&quot;&gt;Publish EML&lt;/h3&gt;
&lt;p&gt;Once we have generated a basic EML file, we can publish it to a variety of academic repositories where it will be indexed, permenently archived, more easily citable, and publicly discoverable.&lt;/p&gt;
&lt;p&gt;In this example, we will publish the above EML to &lt;a href=&quot;http://figshare.com&quot;&gt;figshare&lt;/a&gt; using the &lt;a href=&quot;https://github.com/ropensci/rfigshare&quot;&gt;rfigshare&lt;/a&gt; package. Like most academic repostories, figshare requires some basic metadata for any entry. Much of this we can automatically extract from our existing EML file. Additional metadata unique to figshare (e.g. matching it’s allowed “categories” can also be provided.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Note: this example assumes &lt;code&gt;rfigshare&lt;/code&gt; is installed, even though it is not required to use reml and run the examples in the other sections&lt;/em&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;id =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;eml_publish&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;reml_example.xml&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;description=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Example EML file from reml&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;categories =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Ecology&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;tags =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;EML&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;destination=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;figshare&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This creates a draft file visible only to the user configured in &lt;code&gt;rfigshare&lt;/code&gt;. The document can be made (permanently) public using either the figshare web interface, the &lt;code&gt;rfigshare&lt;/code&gt; package (using &lt;code&gt;fs_make_public(id)&lt;/code&gt;) or just by adding the argument &lt;code&gt;visibility = TRUE&lt;/code&gt; to the above &lt;code&gt;eml_publish&lt;/code&gt; command.&lt;/p&gt;
&lt;h3 id=&quot;reading-eml&quot;&gt;Reading EML&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;obj &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;eml_read&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;reml_example.xml&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can use various accessor functions to return the data and metadata elements in native R formats.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;dataTable&lt;/span&gt;(obj)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;  river  spp   stg  ct
1   SAC king smolt 293
2   SAC king  parr 410
3    AM ccho smolt 210&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;metadata &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;attributeList&lt;/span&gt;(obj)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;contact&lt;/span&gt;(obj)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] &amp;quot;Carl Boettiger &amp;lt;cboettig@gmail.com&amp;gt;&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that the contact has been coerced into R’s built-in ‘person’ object:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;contact&lt;/span&gt;(obj))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] &amp;quot;person&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citationInfo&lt;/span&gt;(obj)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Boettiger, Carl, 2013. reml example.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vignette + read and extract examples&lt;/p&gt;
&lt;h2 id=&quot;notes&quot;&gt;Notes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Resolved the strange segfault errors that arise unpredictably in tests by avoiding use of &lt;code&gt;XMLInternalDocument&lt;/code&gt; class. (Perhaps it is referencing the nodes after writing this and finding they have no address that causes this error?) Now segfault free.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Still need to fix external validator test (currently not run by &lt;code&gt;testthat::test_dir&lt;/code&gt; by avoiding the &lt;code&gt;test_&lt;/code&gt; prefix on the filename…) &lt;strong&gt;EDIT&lt;/strong&gt; 2013-09-05 Duncan has &lt;a href=&quot;&quot;&gt;fixed&lt;/a&gt; this, looking into having the form give more structured output.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Edit&lt;/strong&gt; 2013-09-04 some attribute definitions were not being written out correctly and have now been fixed. Still writing the &lt;a href=&quot;&quot;&gt;test cases&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;where-next&quot;&gt;Where next?&lt;/h2&gt;
&lt;p&gt;Lots more can be done on the package, as documented in our extensive &lt;a href=&quot;https://github.com/ropensci/reml/issues&quot;&gt;issues&lt;/a&gt; list and the discussions there-in.&lt;/p&gt;
&lt;p&gt;Further development will be driven around identifying and illustrating some particularly motivating use-cases beyond the basic creation and reading in of EML files, adding what additional functionality and debugging is required along the way.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/08/29/notes.html"/>
   <updated>2013-08-29T00:00:00+00:00</updated>
   <id>/08/29/notes</id>
   <content type="html">&lt;p&gt;Digging through some old stuff in the course of correspondance on related issues, I came across a few outstanding puzzles I’ve been meaning to wrap up one day:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://carlboettiger.info/2009/08/25/drift-effects.html&quot;&gt;Drift effecs – some difficulties&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://carlboettiger.info/2010/04/20/waiting-time.html&quot;&gt;Waiting Time&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;and some actual results that could deserve some renewed attention too.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://carlboettiger.info/2009/07/28/branching-times.html&quot;&gt;Phase 1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://carlboettiger.info/2011/01/06/two-routes-to-adaptive-branching.html&quot;&gt;Routes to branching&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also raises an interesting new question that could be addressed in this context: can we formulate a similar approach to the stochastic escape from an adaptive peak?&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Rnexml Coding</title>
	 <link href="/2013/08/28/rnexml-coding.html"/>
   <updated>2013-08-28T00:00:00+00:00</updated>
   <id>/08/28/rnexml-coding</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;test_ape.R unit tests now passing. Should still revise the coercion methods in nexml_write.R to something more clever. We aren’t coercing a tree to a nexml, we are building a nexml from a tree. Likewise handling the otu assignments of species names should be done directly &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/8a182d4cc6fb75099067142327788be8d51eef6e&quot;&gt;11:20 am 2013/08/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;start cleaning up old read/write methods obsoleted by toNeXML/fromNeXML methods &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/ffb7342f1d28b351984685a83e11d7df488696e8&quot;&gt;10:59 am 2013/08/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;inherited classes now replace all the original classes &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/004d31fc2c87a4cf2dba45ab08f1b8a663ab5258&quot;&gt;10:54 am 2013/08/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;All inheritance-based classes appearing in inst/examples/trees.xml now implemented &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/d9e649ac64b697d4ea982a1bb78b403400984392&quot;&gt;10:53 am 2013/08/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;added classes for otu, otus, tree, trees, nexml, edge, rootEdge &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/b9543f64352759f4dbb1f77a170cced78280c9a7&quot;&gt;12:04 am 2013/08/28&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Working on #1 : What works and what doesn’t: The example in inst/tests/inheritance.R should run using the class definitions in R/inherited_classes.R. Other class definitions are obsoleted by these updates and should eventually be removed. The ape methods should be unaffected, since the S4 classes have the same structure as before, only defined through inheritance instead.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ToDo: - Remove the obsoleted methods in classes.R, nexml_read.R and nexml_write.R - Check the ape.R unit tests, update other unit tests - Write remaining essential classes out by hand based on inheritance and schema definitions: e.g. edge, otu, otus, tree, trees, nexml &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/fd2e6b0f8f31823c4c65916a20fe339fb2038646&quot;&gt;04:26 pm 2013/08/27&lt;/a&gt; - Begun replacing class definitions with inheritance-based classes taking a brute-force approach in defining conversion methods. Conversion methods between XML and S4 explicitly assign attributes and values to S4 slots, rather than using the clever XML package functions to guess what goes where (since that approach cannot include a call to callNextMethod, which allows us to recursively go down the inheritance classes. The up side of this approach is that you don’t have to think much to write methods, it’s merely verbose.) &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/8b45dee59848702c5aea6bf23ea06802b462d55d&quot;&gt;04:11 pm 2013/08/27&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;fixed ape tests, extended setAs(‘nexml’, ‘phylo’) to handle the case of multiple trees &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/4fa252e20c7ee44a93573d3eb2c5dd3e781103c3&quot;&gt;04:27 pm 2013/08/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Now use otu labels as species names in both directions, closes #8 See updated tests in inst/test/test_ape.R. Note that coercing phylo-&amp;gt;tree is still permitted, since resulting S4 tree is valid (though really intended as internal), but coercing tree-&amp;gt;phylo is no longer available as a separate routine, since this is lossy as the tip.labels are not stored in tree but in nexml@otu &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/abf298614f587d7eb99c67a0acd15d731690df54&quot;&gt;03:54 pm 2013/08/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;updated nexml-&amp;gt;ape conversion to get tip.labels from otus instead of just using the otu attribute on the node, which simply corresponds to the id of the otu element in otu. the taxon (species name) is in the label of the matching element instead. Still needs some testing and a unit test to confirm the label is correct. This addresses 1/2 of #8.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Still need to handle the case of coercing ape-&amp;gt;nexml, in which a method generates the otus node from the tip.label list and matches the id to node’s otu attribute. This means that ape-&amp;gt;tree doesn’t look at tip.label, but just generates locally unique keys for the node otu attribute &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/b97df1abac843b33214109d95c5baaa740dbe83e&quot;&gt;01:40 pm 2013/08/28&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/08/26/notes.html"/>
   <updated>2013-08-26T00:00:00+00:00</updated>
   <id>/08/26/notes</id>
   <content type="html">&lt;h3 id=&quot;misc-tricks&quot;&gt;misc tricks&lt;/h3&gt;
&lt;p&gt;Always forget how to see the function definition of an S4 method:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt; &lt;span class=&quot;kw&quot;&gt;showMethods&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;xmlToS4&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;includeDefs=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;ropensci&quot;&gt;ropensci&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Closed rfigshare issue &lt;a href=&quot;https://github.com/ropensci/rfigshare/issues/50&quot;&gt;#50&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Still retooling reml to S4 and ReXML to inheritance-based S4 classes&lt;/li&gt;
&lt;li&gt;building classes on the schema’s inheritance model &lt;a href=&quot;https://github.com/ropensci/RNeXML/commit/58f45e087f8a973674e6170df7309f8c6a6dbc7f&quot;&gt;10:49 am 2013/08/26&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;In behavioral ecology we usually equate optimality with expected behavior arising from natural selection – i.e. the extent to which the observed behavior deviates from the optimal behavior is assumed to be due to modeling inaccuracies (optimizing the wrong thing).&lt;/p&gt;
&lt;p&gt;In the operations research / engineering context, it seems optimization is more of a direct decision making tool to decide a strategy / design a controller, rather than to understand behavior that arises from the interplay of other forces.&lt;/p&gt;
&lt;p&gt;I’m not quite clear what the standard interpretation is in the environmental economics / natural resource management context – do we also ascribe these deviations to modeling inaccuracy or rather to naive decision-makers (or a combination?)&lt;/p&gt;
&lt;p&gt;I’m guessing we are closer to the behavioral ecologist’s viewpoint – that, for instance, the deviations observed in Figure 1 (what is “optimal” vs what policymakers do) can be explained primarily in terms of optimizing the wrong thing (ignoring the policy costs). I’m wondering if it will appear crazy or standard to assert that the observed behaviour truly is optimal relative to the true costs and constraints, and therefore, just as the ecologist would do, we might use the data to guide us towards understanding the nature of the correct constraints and costs.&lt;/p&gt;
&lt;p&gt;A engineering minded critic might prefer a softer assumption – that the observed pattern reflects some design constraints perhaps (policy costs) but is not already “optimal” in reference to them, but rather some crude rule of thumb for lack of knowledge of how to determine the precise optimal tradeoff between adjustment costs and benefits. The difficulty with this latter approach is that it invites a third model for the ‘rule-of-thumb’ in addition to the optimal models with and without policy costs included.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;ht &lt;span class=&quot;citation&quot; data-cites=&quot;noamross&quot;&gt;@noamross&lt;/span&gt; for pointing out economists frequently assume deviations between predicted optimal and observed economic behavior (perhaps excluding policy..) are due to naiive models while we ecologists tend to assume they are the result of naiive policy.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/08/23/notes.html"/>
   <updated>2013-08-23T00:00:00+00:00</updated>
   <id>/08/23/notes</id>
   <content type="html">&lt;h2 id=&quot;work-work&quot;&gt;Work Work&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Finished review for R Journal (Wednesday)&lt;/li&gt;
&lt;li&gt;Finished review for TE.&lt;/li&gt;
&lt;li&gt;Began review for NSF&lt;/li&gt;
&lt;li&gt;updated service list (vita)&lt;/li&gt;
&lt;li&gt;Handling reimbursement of expenses&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Whoa, we can/should now use http://doi.org instead of http://dx.doi.org&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;software-sustainability-materials&quot;&gt;Software Sustainability materials&lt;/h2&gt;
&lt;p&gt;Seems like a popular new item, listing a couple recent articles in one place here:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://dx.doi.org/10.1126/science.1231535&quot;&gt;Perspective in &lt;em&gt;Science Magazine&lt;/em&gt;&lt;/a&gt;; also &lt;a href=&quot;http://dx.doi.org/10.1126/science.341.6143.236-b&quot;&gt;a critique&lt;/a&gt; and &lt;a href=&quot;http://dx.doi.org/10.1126/science.341.6143.237-a&quot;&gt;author’s rebuttal&lt;/a&gt; in a later edition. (Focuses on ecological code)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://kaythaney.com/2013/08/08/experiment-exploring-code-review-for-science/&quot;&gt;Mozilla Science Lab Code Review&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.timeshighereducation.co.uk/news/save-your-work-give-software-engineers-a-career-track/2006431.article&quot;&gt;Times Higher Ed piece&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Very good &lt;a href=&quot;http://dirkgorissen.com/2012/09/13/the-research-software-engineer/&quot;&gt;conference proceedings publication&lt;/a&gt; from the UK’s Software Sustainability Institute and other folks.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://isees.nceas.ucsb.edu/&quot;&gt;ISEES workshops&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;some-online-writing&quot;&gt;Some Online writing&lt;/h2&gt;
&lt;p&gt;Couldn’t resist weighing in on &lt;a href=&quot;http://ideas4sustainability.wordpress.com/2013/07/13/a-critical-appraisal-of-a-new-paper-on-big-data-and-the-future-of-ecology&quot;&gt;this “don’t require data sharing”&lt;/a&gt; post.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Isees Day 2</title>
	 <link href="/2013/08/14/ISEES-day-2.html"/>
   <updated>2013-08-14T00:00:00+00:00</updated>
   <id>/08/14/ISEES-day-2</id>
   <content type="html">&lt;h2 id=&quot;other-services-tangible-infrastructure-support-services&quot;&gt;Other services: Tangible infrastructure support services&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Discovery registration system. Includes:&lt;/li&gt;
&lt;li&gt;Software review and certification&lt;/li&gt;
&lt;li&gt;Use and quality metrics&lt;/li&gt;
&lt;li&gt;Ticket tracking&lt;/li&gt;
&lt;li&gt;Seed funding to join the ecosystem&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;community-building&quot;&gt;Community Building&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;user defined registry&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;// Hackathon?&lt;/p&gt;
&lt;h2 id=&quot;consulting-services&quot;&gt;Consulting services&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Support software lifecycle&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Function: Assist in full lifecycle software development: e.g. (and order notwithstanding) initiation, licensing, maintenance, hardening, extensible, release, decommissioning&lt;/li&gt;
&lt;li&gt;Mechanisms:&lt;/li&gt;
&lt;li&gt;Call for Proposals - to solicit consulting help (or to nominate a project to receive help) (e.g. Developer needing help supporting software. Community rescue of software. Developer wanting to archive obsolete software.)&lt;/li&gt;
&lt;li&gt;Selection mechanisms for projects to assist - community-based steering group&lt;/li&gt;
&lt;li&gt;Dissemination of best practices and training materials&lt;/li&gt;
&lt;li&gt;ISEES: review successful proposals, identification of likely problems, selection of appropriate consulting expertise&lt;/li&gt;
&lt;li&gt;ISEES: factiliation of execution consulting service - on-site, reverse-site, web-based, …&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Consultant “hotline” - quick answers to funnel questions to appropriate commmunity-based solutions&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Resources required:&lt;/li&gt;
&lt;li&gt;Network/Registry of consultants / developers / analysts / etc. The experts may be full-time staff, part-time staff and ad hoc groups of experts to help with a well defined problem.&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;math&quot;&gt;\($\)&lt;/span&gt; for consultants&lt;/li&gt;
&lt;li&gt;Website for submissions&lt;/li&gt;
&lt;li&gt;People to review submissions and identify resources&lt;/li&gt;
&lt;li&gt;Facilities for teleconferencing, online working space (e.g. wikis, repositories for data, software, cook books)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Physical meeting/collaboration spaces&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Reproduciblity Editor service, a la Journal of Biostats&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;advocacy&quot;&gt;Advocacy&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Take minimal advocacy approach. Roadmap best practices.&lt;/li&gt;
&lt;li&gt;Advocate NSF adopt software management plan: not gonna fly. Outline best practices&lt;/li&gt;
&lt;li&gt;Build brand, swag&lt;/li&gt;
&lt;li&gt;managing sponsors for bootcamps?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;crisis&quot;&gt;Crisis&lt;/h2&gt;
&lt;p&gt;The challenge with registries: Quickly become useless. Successful ones need automated updating. Does a few things things well.&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;How would ISEES uniquely provide value to enable science&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Intergrative science through software collaboration.&lt;/p&gt;
&lt;ol start=&quot;2&quot; type=&quot;1&quot;&gt;
&lt;li&gt;What 1 thing is most critical to pursue?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;via Hackathon / working group collaboration of researchers and expert developers. Building a sustainable software model emboding modularity and best practices.&lt;/p&gt;
&lt;p&gt;Registry model as incentive problem.&lt;br /&gt;Education and Code review Value is science. Pursue illustrating what can be achieved through open science.&lt;/p&gt;
&lt;p&gt;Right Scale. Why 1 institute, not 6 regional institutes?&lt;/p&gt;
&lt;p&gt;Efficient, Scalable, Reproducible, Impactful&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ian Truslove&lt;/li&gt;
&lt;li&gt;Christine White&lt;/li&gt;
&lt;li&gt;Annie Bryant&lt;/li&gt;
&lt;li&gt;Patricia Cruse&lt;/li&gt;
&lt;li&gt;Chris Mattmann&lt;/li&gt;
&lt;li&gt;Bryan Heidorn&lt;/li&gt;
&lt;li&gt;Greg Ederer&lt;/li&gt;
&lt;li&gt;Karthik Ram&lt;/li&gt;
&lt;li&gt;Bill Michener&lt;/li&gt;
&lt;li&gt;Bruce Caron&lt;/li&gt;
&lt;li&gt;Matt Jones&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Science via Integrated Software.&lt;/p&gt;
&lt;p&gt;Logic Model:&lt;/p&gt;
&lt;h3 id=&quot;functionserviceactivity&quot;&gt;Function/Service/Activity&lt;/h3&gt;
&lt;p&gt;Working group / hackathon on Software Lifecycle challenges that are impeding grand challenge science.&lt;/p&gt;
&lt;h3 id=&quot;resources&quot;&gt;Resources&lt;/h3&gt;
&lt;p&gt;2 - 4 meetings over 1-2 years. 8-10 people.&lt;/p&gt;
&lt;h3 id=&quot;outputs&quot;&gt;Outputs&lt;/h3&gt;
&lt;p&gt;Improvements to software lifecycle. (documentation, hardening, maintance, interface, usability, efficency, scalability)&lt;/p&gt;
&lt;h3 id=&quot;impact&quot;&gt;Impact&lt;/h3&gt;
&lt;p&gt;E,S,R,I (efficency, scalability, reproducibility, impact) science advances. New science that can’t be done now. Overall software quality advances.&lt;/p&gt;
&lt;h3 id=&quot;assessment&quot;&gt;Assessment&lt;/h3&gt;
&lt;p&gt;Number, quality, use of software products. Publications. Citations. Co-author networks (proxy of community)&lt;/p&gt;
&lt;h3 id=&quot;functionserviceactivity-1&quot;&gt;Function/Service/Activity&lt;/h3&gt;
&lt;p&gt;Workshop model. Address the other generic challenges (code review/registry, etc, see ‘other services’ at top)&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;What is the metadata for scientific software? The DataCite Schema for software? Avoid duplicating listing efforts of other repositories (CPAN, CRAN, etc), while providing academically relevant elements like citations (and potentially other use metrics, a la Github), code review scoring, link to permanent repository and bug tracking.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>ISEES software lifecycle and components workshop, Day 1</title>
	 <link href="/2013/08/13/ISEES-Day-1.html"/>
   <updated>2013-08-13T00:00:00+00:00</updated>
   <id>/08/13/ISEES-Day-1</id>
   <content type="html">&lt;p&gt;Range of large project to the long tail.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;statistical analyses&lt;/li&gt;
&lt;li&gt;One-off models&lt;/li&gt;
&lt;li&gt;community model&lt;/li&gt;
&lt;li&gt;Services (Blast)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;science-challenges&quot;&gt;Science Challenges&lt;/h3&gt;
&lt;p&gt;Outcomes of previous community workshops&lt;/p&gt;
&lt;h4 id=&quot;grand-challenge-areas.&quot;&gt;18 Grand Challenge areas.&lt;/h4&gt;
&lt;p&gt;Highlights: Supermodels. human/biophysical systems shape and be shaped by water availability. (A vision similar to Microsoft’s “Model all Earth” &lt;a href=&quot;http://dx.doi.org/10.1038/493295a&quot;&gt;Purves et al&lt;/a&gt;)&lt;/p&gt;
&lt;h4 id=&quot;functions-and-services-areas&quot;&gt;Functions and services areas:&lt;/h4&gt;
&lt;p&gt;(priority ordering)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Computational training (early career - all career)&lt;/li&gt;
&lt;li&gt;Assimilation and QA/QC tools&lt;/li&gt;
&lt;li&gt;Collaborative environment&lt;/li&gt;
&lt;li&gt;decisions and workflows&lt;/li&gt;
&lt;li&gt;software discovery&lt;/li&gt;
&lt;li&gt;consultants / collaborator&lt;/li&gt;
&lt;li&gt;community hub to converge on standards&lt;/li&gt;
&lt;li&gt;merging disparate tools&lt;/li&gt;
&lt;li&gt;user-friendly interfaces&lt;/li&gt;
&lt;li&gt;multiscale coupled modeling framework&lt;/li&gt;
&lt;li&gt;Software vetting (how about paper vetting?)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;software-sysems-and-lifecycle&quot;&gt;Software Sysems and Lifecycle&lt;/h3&gt;
&lt;p&gt;Innovation -&amp;gt; incubation/integration -&amp;gt; prduct development/hardening -&amp;gt; maintenance and support&lt;/p&gt;
&lt;hr /&gt;
&lt;ul&gt;
&lt;li&gt;What is and is not out of scope?&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Models of success (ESIP grassroots conception of problems). NCEAS working groups. NeSCENT Hackathons.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Models of failure&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;NSF has funded 16 Visions. Many are computer science efforts (compilers, language integration etc). 3 proposals are domain focused with close overlap: ISEES, Long Tail, and Water Science. These need to be aligned for us to succeed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;How about existing stuff:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ESIP? Lots of overlap.&lt;/li&gt;
&lt;li&gt;EarthCube Large top-down effort. Geo directorate, not Cyberinfrastructure (OCI) anyway, so overlap matters less. However, better funding chances when draws across directorates. (tap BIO).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Those are integration in general, not software sustainability issues in science.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Software huge range! Goal is different for different products! Incremental improvement from paper-only model.&lt;/p&gt;
&lt;p&gt;Sustainability and Adoption&lt;/p&gt;
&lt;p&gt;Town Hall ESIP (Environmental Science Information Planning)&lt;/p&gt;
&lt;p&gt;NCEAS for software. Instead of showing up with spreadsheets and trying to combine them, we show up with software. We add nubs.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Science as Lego. Papers: blocks. without the nubs. Easy to build tall towers. Fragile.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Data as Lego. Metadata as nubs.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Software as Lego. What are the nubs?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;small. unit tests. versioned. dependencies. accessible language and style. Licenses.&lt;/p&gt;
&lt;h2 id=&quot;software-lifecyle-session&quot;&gt;Software Lifecyle Session&lt;/h2&gt;
&lt;p&gt;Comparison: Commercial, Open Source, Academic Lab.&lt;/p&gt;
&lt;p&gt;Note this isn’t software &lt;em&gt;development&lt;/em&gt; lifecycle, which would occur within any of these blocks.&lt;/p&gt;
&lt;p&gt;Goals:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Issues that occur (strengths, weaknesses) in the lifecycle&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h3 id=&quot;services-activities-and-functions&quot;&gt;Services, Activities and Functions&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Software quality assessment&lt;/li&gt;
&lt;li&gt;Training&lt;/li&gt;
&lt;li&gt;Hackathons&lt;/li&gt;
&lt;li&gt;Archiving&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Add nubs. Good development makes for faster development.&lt;/p&gt;
&lt;p&gt;User/developer access&lt;/p&gt;
&lt;p&gt;Documentation. Versioning. Dependencies&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&quot;afternoon-breakout&quot;&gt;Afternoon breakout&lt;/h2&gt;
&lt;p&gt;Brainstorm Services, Activities, Functions.&lt;/p&gt;
&lt;h4 id=&quot;assist-groups-in-disseminating-and-hardening-software.&quot;&gt;Assist groups in disseminating and hardening software.&lt;/h4&gt;
&lt;p&gt;Successsful academic software is frequently a victim of it’s own success. They cannot keep up with support, bug requests.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Strategies for dissemination and maintenance.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Commercialization
&lt;ul&gt;
&lt;li&gt;Connections&lt;/li&gt;
&lt;li&gt;test data and use cases. (Because open source and commercial often don’t meet academic goals because they don’t have access to the data or questions!)&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Open Source Release
&lt;ul&gt;
&lt;li&gt;Strategy template: Host repository, contribution guidelines&lt;/li&gt;
&lt;li&gt;Mentorship for managing development&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Language and style accessible to community&lt;/li&gt;
&lt;li&gt;Hackathon for engaging community for future development&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hardening of software&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Written product: Objectives checklist: unit tests, RESTful APIs&lt;/li&gt;
&lt;li&gt;Meeting space: hackathon for hardening&lt;/li&gt;
&lt;li&gt;Funding: e.g. for a student Summer of Code style for hardening&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;software-review-and-certification&quot;&gt;Software review and certification&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;tied to software lifecycle&lt;/li&gt;
&lt;li&gt;Tiered system. e.g. level 3 is external hands-on testing by experts.&lt;/li&gt;
&lt;li&gt;Couple to publication of software papers or separate model?&lt;/li&gt;
&lt;li&gt;Scoring system analgous to repository scoring.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Computational career path. // (me): Doesn’t have to be - phylogenetics research driven by computational side.&lt;/p&gt;
&lt;p&gt;Leveraging social media, hashtags, stackoverflow for community&lt;/p&gt;
&lt;h3 id=&quot;synthesizing-functions&quot;&gt;Synthesizing Functions&lt;/h3&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Assist Groups in Maintenance (CS)&lt;/li&gt;
&lt;li&gt;Assist Groups in Hardening (CS)&lt;/li&gt;
&lt;li&gt;Software Review and Certification Program (OS) (ASSESSMENT)&lt;/li&gt;
&lt;li&gt;Mechanisms for sharing data / use cases (OS)&lt;/li&gt;
&lt;li&gt;Operation community based support services (CB) // no, these discussions happen in native environments.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Provide sofware use and quality metrics (OS) (ASSESSMENT)&lt;/li&gt;
&lt;li&gt;Provide best practices boot camp (T) (BEST PRACTICES)&lt;/li&gt;
&lt;li&gt;On site and remote course training (T) (BEST PRACTICES)&lt;/li&gt;
&lt;li&gt;The Dating Game - match researchers with engineers (CB)&lt;/li&gt;
&lt;li&gt;Support collaborative groups focused on software projects (CB)&lt;/li&gt;
&lt;li&gt;Advocate for open source approach (A)&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Develop policies to incentivise sharing and licenses (A)&lt;/li&gt;
&lt;li&gt;Promote software management plans to NSF etc (A)&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Consulation and mentoring services (CS)&lt;/li&gt;
&lt;li&gt;Directory for discovery (citation, evaluation) (OS)&lt;/li&gt;
&lt;li&gt;Kickstarter funding for software (OS)&lt;/li&gt;
&lt;li&gt;Connect industry to academia (CB)&lt;/li&gt;
&lt;li&gt;Certify papers as reproducible (RunMyCode service) (OS)&lt;/li&gt;
&lt;li&gt;Assist groups in making extensible (CS)&lt;/li&gt;
&lt;li&gt;ISEES swag (CB)&lt;/li&gt;
&lt;li&gt;Actively survey the community about practices. (OS)&lt;/li&gt;
&lt;li&gt;Assist groups in archiving and decomissioning. (CS)&lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>Esa 2013 Notes For Week</title>
	 <link href="/2013/08/08/ESA-2013-notes-for-week.html"/>
   <updated>2013-08-08T00:00:00+00:00</updated>
   <id>/08/08/ESA-2013-notes-for-week</id>
   <content type="html">&lt;h2 id=&quot;sun&quot;&gt;Sun&lt;/h2&gt;
&lt;p&gt;Co-Leading the Workshop on R, DataONE and open science.&lt;/p&gt;
&lt;p&gt;All material on &lt;a href=&quot;github.com/mbjones/opensci_r_esa_2013&quot;&gt;github&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;mon&quot;&gt;Mon&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ives Plenary&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Talking to Dave, Vasilis, Tye,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Lunch Vasilis, Ryan Batt&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;2:30 Chesson L100H / Ryan Batt L100J&lt;/li&gt;
&lt;li&gt;3:20 O’Regan L100H&lt;/li&gt;
&lt;li&gt;3:40 Adler L100H&lt;/li&gt;
&lt;li&gt;&lt;p&gt;4 Yaekel M100HC&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;ropensci meetup, funded by Github. Great turnout, great success. (And rare &lt;a href=&quot;http://t.co/AtmzFbJCCg&quot;&gt;shot of dev team&lt;/a&gt; together in person).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Theoretical ecology mixer&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Hastings Lab dinner&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Great discussions with Trevor Hefley on some very nice work dealing with biases in messy data. See &lt;a href=&quot;http://dx.doi.org/10.1016/j.ecolmodel.2013.05.003&quot;&gt;Hefley 2013&lt;/a&gt; and &lt;a href=&quot;http://dx.doi.org/10.1007/s12080-013-0195-3&quot;&gt;2013b&lt;/a&gt;, and more in the works.&lt;/p&gt;
&lt;h2 id=&quot;tues&quot;&gt;Tues&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;8am Carpenter L100B&lt;/li&gt;
&lt;li&gt;M100IB 8am - 10am&lt;/li&gt;
&lt;li&gt;10am meeting Carpenter, see seperate nodes&lt;/li&gt;
&lt;li&gt;12am Lunch with Lei Dai&lt;/li&gt;
&lt;li&gt;2:50pm Drake L100G&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Afternoon inteview with Virginia Gewin on Yeakel’s talk. Remarkable challenge to explain generalized modeling for ecological networks in plain english. Virginia gets all the credit for condensing my lengthy verbage into a tweet size summary. Now out in &lt;a href=&quot;http://www.nature.com/news/ancient-art-fills-in-egypt-s-ecological-history-1.13528&quot;&gt;Nature News&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open Science session in evening&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Amazing talk and later discussion with Russell Neches.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;open hardware and 3D printers for scientific research. 3 examples:&lt;/li&gt;
&lt;li&gt;cheaper than alternatives (water quality monitor on rduino chip, tweets data)&lt;/li&gt;
&lt;li&gt;More flexible than alternatives: variable depth 96 well plates to automate concentration of sample. (also cheap gel combs)&lt;/li&gt;
&lt;li&gt;When no alternative exists: measuring gape without harming fish.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Avoid Nature’s $9000 APC open access option by including a $1000 new genome. (Genome papers are OA by agreement…)&lt;/li&gt;
&lt;li&gt;Choose PhD advisor by Bayesian Classifier…&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;weds&quot;&gt;Weds&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;3:20 David Hoover (missed)&lt;/li&gt;
&lt;li&gt;3:40 Ingrid&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;spatial waves maxwell&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;4pm L Dai 101D&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;4:20 Anna Gardmark http://eco.confex.com/eco/2013/webprogram/Paper40488.html&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Explaining lack of recovery / hysteresis&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Prey competing with (younger life stages of) predators (Bundy Finning 2005 CJFAS, Walters .. , …)&lt;/li&gt;
&lt;li&gt;Prey predating upon younger life stages of codes (Swan and Sinclair 2000 CJFAS)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Prey growth changes due to predation (poor condition, or prey size structure) (vulnerability - deRoos Peerson 2002 PNAS)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;4:40 Mark Novak http://eco.confex.com/eco/2013/webprogram/Paper42117.html&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Kelp-urchin transition. Otters arrival leads to transitions in Vancouver Island set, resulting in shifts (used as training). San Nicolas Island sets transitions on its own, despite otter introduction in process. Spatial transects and 31 years of data, 5 replicate transects for all sites. Bayesian change-point analysis to identify shifts (e.g. see Erdman &amp;amp; Emerson 2012).&lt;/p&gt;
&lt;!-- Prior probability that change-point occurs, and signal to noise ratio priors.  Get posterior prob distribution of tipping pt occurs - continuous.  --&gt;
&lt;p&gt;Chatting with Mark after talk.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SySnc / NCEAS Mixer&lt;/li&gt;
&lt;li&gt;TweetUp&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Discussion of semantics and NeXML with Ben Morris (wrote python parser). Sounds like I need to read &lt;em&gt;semantic web for working ontologist&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Excellent discussion with Ethan White on what a Institute for Software Sustainability would do.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Training training training. Materials, workshops.&lt;/li&gt;
&lt;li&gt;Much would be improved with a few best practices: unit tests, version control&lt;/li&gt;
&lt;li&gt;Google Summer of Code style funding&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;thurs&quot;&gt;Thurs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;8am Thurs Dakos&lt;/li&gt;
&lt;li&gt;Discussion with Ryan Batt&lt;/li&gt;
&lt;li&gt;Discussions with Lei Dai and Vasilis. Lei’s Science paper data on Dryad (temporal indicators). Get back to Lei on format for this data.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Exchange with Bestlemyer - lack of time resolution for warining indicators of spatial study. Data from Ecosphere paper on Harvard’s LTER site.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Excellent discussion with Ben Bolker and Dave Harris on what Software Sustainability Institute would accomplish:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tackling archiving / backports of code. CRAN offers only “current” and “devel”, you’re on you’re own getting older stuff running.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Training! Not just for grad students - Ben would attend. More experienced, but self-taught, developers like Ben would come with their own questions and could guide what training they needed.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Bringing academics together with experts in hackathon style of improving existing codes would be great.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;One challenge is maintaining accessibility of code styles so that academics can continue to contribute. e.g. most academic R programmers don’t understand S4 classes, would be a potential barrier.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Van Noorden’s &lt;a href=&quot;http://t.co/KqFfGnpOAa&quot;&gt;data sharing article&lt;/a&gt; out, with quotes by Elizabeth, Wolkovich, Heather, Bill Mitchner, yours truly.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Flight out&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>F1000-Research publishing for ecologists</title>
	 <link href="/2013/08/07/F1000-Research.html"/>
   <updated>2013-08-07T00:00:00+00:00</updated>
   <id>/08/07/F1000-Research</id>
   <content type="html">&lt;p&gt;F1000-Research is waving article processing charges (APCs) for ecologists looking for an open access, open peer review platform to publish original research, null results, software papers, data papers, and an intriguing new category called “Observations”,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;to report serendipitous observations that they have not been able to study systematically, but that offer a starting point for further exploration. This is especially relevant for ecologists, as it provides a platform to report unexpected observations from the field, unrelated to the main goal of the field work.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This sounds similar to the Herp Notes of the &lt;a href=&quot;http://www.ssarherps.org/pages/HRinfo.php&quot;&gt;Herpetological Review&lt;/a&gt;, though obviously without a species bias. Hopefully F1000’s version will support intelligent metadata on place, time, and taxonomy involved.&lt;/p&gt;
&lt;p&gt;While APC waivers are a reasonable way for the journal to say thanks while establishing themselves, I would prefer to see it built upon proper market competition that involves a real market signal, rather than on fee waivers. Authors should choose if the added value of the journal justifies the price, and publishers should experiment with ways to drive down prices or improve added value through further publishing innovation. They don’t post prices as promently as PeerJ, but it does look like their &lt;a href=&quot;http://f1000research.com/article-processing-charges&quot;&gt;prices&lt;/a&gt; are a step in this direction. At $500 for short-format papers and $1000 for full papers, they have at least broken the pattern of copying PLoS ONE pricing (Nature Scientific Reports, ESA Ecosphere, looking at you) in the process. At this rate, costs per paper may be less than PeerJ’s for papers in the 5-10 author range…&lt;/p&gt;
&lt;p&gt;F1000Research also has an interesting review model in place that tries to be both pre-print and publication platform. Reviews are solicited while a preprint is posted, and the article becomes approved when three positive reviews are recieved. As such, it has always struck me as being very close to that of &lt;a href=&quot;http://www.biologydirect.com/about&quot;&gt;Biology Direct&lt;/a&gt;, with some key differences. Biology Direct, now six or seven years old, has become a place for high impact potentially controversial work, as well as more run-of-the-mill results. Reviews tend to be longer and more detailed than I see on F100 Research, though I hardly have statistically relevant sample. I suspect that the key differences in policy might help this: the signed reviews are published with the paper, regardless of whether the reviewers agree with the results (editors can reject inappropriate papers just by declining to have them reviewed).&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Summarizing Earlier Warning Signal Under Control Notes</title>
	 <link href="/2013/08/06/summarizing-earlier-warning-signal-under-control-notes.html"/>
   <updated>2013-08-06T00:00:00+00:00</updated>
   <id>/08/06/summarizing-earlier-warning-signal-under-control-notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;NSF goals:&lt;/li&gt;
&lt;li&gt;combine control methods and warning signals&lt;/li&gt;
&lt;li&gt;do non-parametric or machine learning increase or decrease chance of transition&lt;/li&gt;
&lt;li&gt;learning&lt;/li&gt;
&lt;li&gt;Further areas (from comment piece)&lt;/li&gt;
&lt;li&gt;baselines (statistical; emperical)&lt;/li&gt;
&lt;li&gt;context-specific (additional data sources, reflecting context in model)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;warning-signals-in-managed-systems&quot;&gt;Warning signals in managed systems&lt;/h2&gt;
&lt;p&gt;Management decreases the signal: compare likelihood statistic in &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/unmanaged_warning.md&quot;&gt;unmanaged_warning&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/managed_warning.md&quot;&gt;managed_warning&lt;/a&gt;:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7108/7853909166_45ecb1af08_o.png&quot; alt=&quot;unmanaged&quot; /&gt;&lt;figcaption&gt;unmanaged&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8445/7889665150_d2f03f6f86_o.png&quot; alt=&quot;managed&quot; /&gt;&lt;figcaption&gt;managed&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;estimating-stability-in-managed-systems&quot;&gt;Estimating Stability in managed systems&lt;/h2&gt;
&lt;p&gt;Recovery rate in optimally fished vs unfished system (based on the OU model): &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e6aaf0ba27e4280cbbb04d5ecfeb9b18f158ca77/inst/examples/stability.md&quot;&gt;stability.md&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7041/6960365083_4b41dd1f0a_z.jpg&quot; alt=&quot;OU parameters over replicates&quot; /&gt;&lt;figcaption&gt;OU parameters over replicates&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;How would a use of a signal feed back into a control algorithm? Need probabilities of possible models for driving a belief SDP?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;learning&quot;&gt;Learning&lt;/h2&gt;
&lt;p&gt;Learning about a tipping point: models are the correct allee-threshold (Myers) model, and the best-fit Beverton Holt model. Inability to learn fast enough leads to crashes &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/ff049e1f623413e1438555aec63ddbe65dec6d8f/inst/examples/model_uncertainty.md&quot;&gt;model_uncertainty.md&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7231/7019134197_cb196dbdb1_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;Active learning about parameters can be worse than not learning?&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/08/01/notes.html"/>
   <updated>2013-08-01T00:00:00+00:00</updated>
   <id>/08/01/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Registered for &lt;a href=&quot;http://w3.biosci.utexas.edu/amnatasilomar&quot;&gt;AmNat 2014 conference&lt;/a&gt; in Asilomar.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Nice &lt;a href=&quot;http://blogs.nature.com/methagora/2013/07/data-visualization-points-of-view.html&quot;&gt;collection Data Visualization pieces&lt;/a&gt; from Nature Methods.&lt;/li&gt;
&lt;li&gt;vim clipboard: put older items from clipboard history using: &lt;code&gt;&amp;quot;0p&lt;/code&gt;, &lt;code&gt;&amp;quot;1p&lt;/code&gt;, &lt;code&gt;&amp;quot;2p&lt;/code&gt;. See list in &lt;code&gt;:reg&lt;/code&gt;. (from &lt;a href=&quot;http://mkaz.com/solog/system/vim-cheat-sheet.html&quot;&gt;here&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;h1&gt;ESA2013 &lt;a href=&quot;http://fiesta.bren.ucsb.edu/~kendall/LV-talks-2013.html&quot;&gt;Lotka-Volterra Talks&lt;/a&gt;&lt;/h1&gt;&lt;/li&gt;
&lt;li&gt;Review methods to write S4 back to XML&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;from earlier&lt;/em&gt;:&lt;/p&gt;
&lt;h2 id=&quot;misc-reading&quot;&gt;misc reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.slideshare.net/dullhunk/the-seven-deadly-sins-of-bioinformatics&quot;&gt;Duncan Hull’s Seven deadly sins of bioinformatics&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Carole’s Goble’s &lt;a href=&quot;http://t.co/srxvCafNB5&quot;&gt;talk&lt;/a&gt; at &lt;a href=&quot;http://t.co/4WAB3PczGT&quot;&gt;ismb&lt;/a&gt;, as summarized &lt;a href=&quot;http://farm3.staticflickr.com/2877/9367535795_1fd45ba0de_c.jpg&quot;&gt;in graphical form&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Interesting: &lt;a href=&quot;http://www.researchobject.org/ontologies/&quot;&gt;researchobject.org/ontologies/&lt;/a&gt;, integration with Taverna, myExperiment… When will we learn the Unix lesson of little interoperable tools, not operating systems…&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;communications&quot;&gt;communications&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Reply to Pete on software papers, commentary on PLoS ONE guidelines.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Contact Paul Groth about &lt;a href=&quot;&quot;&gt;LinkItUp format&lt;/a&gt;, methods, objectives, applications (integrate approach into rfigshare).&lt;/li&gt;
&lt;li&gt;Check in of GSOC student RNeXML [#12]&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ropensci&quot;&gt;ropensci&lt;/h2&gt;
&lt;h3 id=&quot;rfigshare&quot;&gt;rfigshare&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Added a tag for “Published using rfigshare” in figshare, also added accompanying unit test in commit &lt;code&gt;[261b188](https://github.com/ropensci/rfigshare/commit/261b188e968102f36a027f9ef7ff3f8f7e878295)&lt;/code&gt;; closes issues #7 and #48&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;reml&quot;&gt;reml&lt;/h3&gt;
</content>
 </entry>
 
 <entry>
   <title>Nonparametric Bayes Wrapping Up Sensitivity</title>
	 <link href="/2013/07/28/nonparametric-bayes-wrapping-up-sensitivity.html"/>
   <updated>2013-07-28T00:00:00+00:00</updated>
   <id>/07/28/nonparametric-bayes-wrapping-up-sensitivity</id>
   <content type="html">&lt;p&gt;Remote RStudio configuration (keep forgetting options and ports).&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ssh&lt;/span&gt; -o &lt;span class=&quot;st&quot;&gt;&amp;quot;ExitOnForwardFailure yes&amp;quot;&lt;/span&gt; -f -N -L 1234:localhost:8787 one&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Initialize runs for sensitivity, looping over parameters and data. See:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/fd3585230a01afa525f456d13f5f958df4606006/inst/examples/sensitivity.md&quot;&gt;sensitivity.md&lt;/a&gt; (Myers)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/fd3585230a01afa525f456d13f5f958df4606006/inst/examples/sensitivity-allen.md&quot;&gt;sensitivity-allen.md&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Overall:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(yields_dat) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_density&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm6.staticflickr.com/5455/9387766618_9772fca7e1_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-5&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-5&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Compare over 12 simulation configurations with different parameters and different training data, the GP does consistently well. Only one case has relatively poor outcomes.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(yields_dat) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_density&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.factor&lt;/span&gt;(simulation), &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.factor&lt;/span&gt;(simulation)), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3834/9385132341_ea3cffbb8d_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-6&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-6&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;Run data backup to local disk&lt;/li&gt;
&lt;li&gt;NSF expense accounting&lt;/li&gt;
&lt;li&gt;calendar updates&lt;/li&gt;
&lt;li&gt;software paper policies email&lt;/li&gt;
&lt;li&gt;Luke Arbor reply&lt;/li&gt;
&lt;li&gt;looking at quick way to check out solutions to sums of Fisher wave equation over different diffusion coefficients (heterogenous dispersal rates), e.g. &lt;a href=&quot;http://www.os-scientific.org/physics/react/index.html#fisher_kolgomorov_doc&quot;&gt;in C&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Reply to Alex about wave + diffusion type solution pattern.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(t, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;s =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) (r *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dnorm&lt;/span&gt;(y, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;r *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(t)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;s *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dnorm&lt;/span&gt;(y, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;s *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(t)))/(&lt;span class=&quot;kw&quot;&gt;dnorm&lt;/span&gt;(y, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;r *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(t)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dnorm&lt;/span&gt;(y, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, 
    &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;s *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(t)))
&lt;span class=&quot;kw&quot;&gt;curve&lt;/span&gt;(f1, &lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xlab =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylab =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;mean dispersal&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3704/9387637650_939dd70f9c_o.png&quot; alt=&quot;mean dispersal rate declines as slow population arrives&quot; /&gt;&lt;figcaption&gt;mean dispersal rate declines as slow population arrives&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Formal Semantics With Reml</title>
	 <link href="/2013/07/25/formal-semantics-with-reml.html"/>
   <updated>2013-07-25T00:00:00+00:00</updated>
   <id>/07/25/formal-semantics-with-reml</id>
   <content type="html">&lt;p&gt;A lot has been happening in the &lt;code&gt;reml&lt;/code&gt; development over on our package Github page, particularly through discussion on the &lt;a href=&quot;http://ropensci.org/reml&quot;&gt;issues tracker&lt;/a&gt; we have been working through several of the major conceptual challenges in designing the package.&lt;/p&gt;
&lt;h3 id=&quot;semantics&quot;&gt;Semantics&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Writing Semantics&lt;/strong&gt;. Lots of elements of the EML schema have semantic meaning, but we can’t start leveraging ontological tools while these terms are defined only as part of the Schema vocabulary. In their current state, they are just “meaningless bits of syntax”, e.g. the schema only defines &lt;code&gt;gram&lt;/code&gt; as a valid text string that lives at &lt;code&gt;//attribute/measurementScale/ratio/unit/standardUnit&lt;/code&gt;. A computer reading the schema could never formally decide that this is the same gram we use to measure mass. We use formal semantics to say this: that is, that text-string &lt;code&gt;gram&lt;/code&gt; means &lt;a href=&quot;http://ecoinformatics.org/oboe/oboe.1.0/oboe-standards.owl#Gram&quot; class=&quot;uri&quot;&gt;http://ecoinformatics.org/oboe/oboe.1.0/oboe-standards.owl#Gram&lt;/a&gt;, which is embued with meaning.&lt;/p&gt;
&lt;p&gt;We’ve made some definite progress in how to go about making this leap from structure to meaning after considering a variety of potential avenues. A few &lt;a href=&quot;https://github.com/ropensci/reml/issues/5#issuecomment-21573824&quot;&gt;open questions&lt;/a&gt; (and a lot of implementation) remain. A useful observation comes from Ben in pointing out how we can add RDF directly to the EML, rather than relying on a second external schema file:&lt;/p&gt;
&lt;pre class=&quot;sourceCode xml&quot;&gt;&lt;code class=&quot;sourceCode xml&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;eml&amp;gt;&lt;/span&gt;
…
&lt;span class=&quot;kw&quot;&gt;&amp;lt;dataTable&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://some.namespace#myUniqueEntityId1&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;attribute&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://some.namespace#myUniqueAttributeId1&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;attribute&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://some.namespace#myUniqueAttributeId2&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/dataTable&amp;gt;&lt;/span&gt;
…
&lt;span class=&quot;kw&quot;&gt;&amp;lt;additionalMetadata&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;describes&amp;gt;&lt;/span&gt;http://some.namespace#myUniqueAttributeId1&lt;span class=&quot;kw&quot;&gt;&amp;lt;/describes&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;metadata&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;co&quot;&gt;&amp;lt;!-- RDF stuff here that annotates http://some.namespace#myUniqueAttributeId1 --&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;kw&quot;&gt;&amp;lt;rdf:RDF&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;                        xmlns:rdf=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;                        xmlns:o=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http:/oboe-core#&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;rdf:Description&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rdf:about=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://some.namespace#myUniqueAttributeId1&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                                &lt;span class=&quot;kw&quot;&gt;&amp;lt;o:entity&amp;gt;&lt;/span&gt;Air&lt;span class=&quot;kw&quot;&gt;&amp;lt;/o:entity&amp;gt;&lt;/span&gt;
                                &lt;span class=&quot;kw&quot;&gt;&amp;lt;o:characteristic&amp;gt;&lt;/span&gt;Temperature&lt;span class=&quot;kw&quot;&gt;&amp;lt;/o:characteristic&amp;gt;&lt;/span&gt;
                                &lt;span class=&quot;kw&quot;&gt;&amp;lt;cd:unit&amp;gt;&lt;/span&gt;Celsius&lt;span class=&quot;kw&quot;&gt;&amp;lt;/cd:unit&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;/rdf:Description&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;kw&quot;&gt;&amp;lt;/rdf:RDF&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;/metadata&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/additionalMetadata&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;additionalMetadata&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;describes&amp;gt;&lt;/span&gt;http://some.namespace#myUniqueAttributeId2&lt;span class=&quot;kw&quot;&gt;&amp;lt;/describes&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;metadata&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;co&quot;&gt;&amp;lt;!-- RDF stuff here that annotates http://some.namespace#myUniqueAttributeId2 --&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;/metadata&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/additionalMetadata&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/eml&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A complete implementation goes beyond translating the schema vocabulary to ontogogical terms where it makes sense to do so (e.g. units of measurement, taxonomy)&lt;/p&gt;
&lt;p&gt;Where else does it make sense to translate schema vocabularly into semantics?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Licenses? (dc:rights)&lt;/li&gt;
&lt;li&gt;Titles, people, dates, rest of citation information (via &lt;code&gt;dc:title&lt;/code&gt;, &lt;code&gt;dc:contributor&lt;/code&gt;, &lt;code&gt;prism:&lt;/code&gt; or &lt;code&gt;fabio:&lt;/code&gt; etc)&lt;/li&gt;
&lt;li&gt;attribute&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Would it be possible to create a XSLT stylesheet that one would apply to an EML file to produce corresponding RDF/XML file (that I could then amend to the original EML in an &lt;code&gt;additionalMetadata&lt;/code&gt; element)? I see the value of having the semantic metadata embedded in a single file, but rather than merely implementing R code that says “when you write a &lt;code&gt;&amp;lt;standardUnit&amp;gt;Celsius&lt;/code&gt; node, also write this &lt;code&gt;additionalMetadata&lt;/code&gt; node, it seems logical to have a tool that could simply read EML and say,”hey, &lt;code&gt;&amp;lt;standardUnit&amp;gt;Celsius&lt;/code&gt;, that’s an &lt;code&gt;&amp;lt;RDF ...&lt;/code&gt;“. Perhaps similar mappings could be made for taxonomy (though might need to query ubio for the identifier etc and so be beyond the scope of XSLT)?&lt;/p&gt;
&lt;p&gt;Such an XSLT might also map things like &lt;code&gt;&amp;lt;creator&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;title&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;intellectionalRights&amp;gt;&lt;/code&gt; etc to their ontological meanings too. Of course I don’t know anything about XSLT, and before we can programmatically combine spreadsheets, etc we really need to be adding custom semantics for all attributes, not just making RDFs of the things that are already defined…&lt;/p&gt;
&lt;p&gt;Whoops, we can get lost down the rabbit hole quickly here. e.g. Why not write all data to triples (e.g. see tools for &lt;a href=&quot;http://www.w3.org/wiki/ConverterToRdf#CSV_.28Comma-Separated_Values.29&quot;&gt;RDF from CSV&lt;/a&gt;… (Longevity of RDF? Of any given XML schema?)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RDF as schema-less XML?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Reading Semantics&lt;/strong&gt; (and actually doing something with it): the really hard problem motivating this exercise: &lt;a href=&quot;https://github.com/ropensci/reml/issues/8&quot;&gt;#8&lt;/a&gt;. We’ll get to this one eventually.&lt;/p&gt;
&lt;h3 id=&quot;schema-oriented-design&quot;&gt;Schema-oriented design&lt;/h3&gt;
&lt;p&gt;We can leverage the &lt;code&gt;.xsd&lt;/code&gt; schema files much more directly in creating our parser using a strategy built around S4 classes, as discussed in issue &lt;a href=&quot;https://github.com/ropensci/reml/issues/38&quot;&gt;#38&lt;/a&gt;. This leaves us with a lot of coercion to do. On the up side, we have reasonble S4 classes representing the EML contents, so we can consider it “parsed”. Defining how we write into these S4 objects instead of how we write into XML directly also makes our implementation more robust to changes in the schema. Coercion with S4 can leverage a variety of heurstics to make this pretty easy (e.g. simple matching of slot names, guessing parsing etc). Also allows us to have things like &lt;code&gt;data.frames&lt;/code&gt; that carry their metadata around with them.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Xml Parsing Strategies</title>
	 <link href="/2013/07/22/XML-parsing-strategies.html"/>
   <updated>2013-07-22T00:00:00+00:00</updated>
   <id>/07/22/XML-parsing-strategies</id>
   <content type="html">&lt;p&gt;Writing out some advice for our GSOC student on XML parsing. (Now filed as &lt;a href=&quot;https://github.com/shumelchyk/RNeXML/issues/11&quot;&gt;RNeXML/#11&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Here is some quick background on different ways we might go about extracting NeXML into an R object we want to work with. We can use S4 classes, R’s native &lt;code&gt;data.frame&lt;/code&gt; and &lt;code&gt;list&lt;/code&gt; types, or extract specific terms of interest with xpath. I illustrate each of these below using the example “trees.xml” in your repository.&lt;/p&gt;
&lt;p&gt;It would be good to decide on which strategy you want. As you seem to be leaning to the S4 already, note how I have made the slot labels correspond exactly to the attribute and node labels of the NeXML. This lets us use the &lt;code&gt;xmlToS4&lt;/code&gt; method:&lt;/p&gt;
&lt;h2 id=&quot;using-s4-classes&quot;&gt;Using S4 classes&lt;/h2&gt;
&lt;p&gt;We can define S4 class structures to correspond to the elements we want to extract. Elements omitted from our definition will be ignored.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;setClass&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;node&amp;quot;&lt;/span&gt;,
    &lt;span class=&quot;kw&quot;&gt;representation&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;id    =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                   &lt;span class=&quot;dt&quot;&gt;label =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                   &lt;span class=&quot;dt&quot;&gt;otu   =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                   &lt;span class=&quot;dt&quot;&gt;about =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                   &lt;span class=&quot;dt&quot;&gt;meta =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;meta&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that class “meta” is not yet defined, we will define it below. Note also that we could omit any slots we don’t care about, and they would simply be ignored. (Try deleting the &lt;code&gt;meta&lt;/code&gt; line, or the &lt;code&gt;about&lt;/code&gt; line.)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;setClass&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;edge&amp;quot;&lt;/span&gt;,
    &lt;span class=&quot;kw&quot;&gt;representation&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;source =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                   &lt;span class=&quot;dt&quot;&gt;target =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                   &lt;span class=&quot;dt&quot;&gt;id     =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                   &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;numeric&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;setClass&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;meta&amp;quot;&lt;/span&gt;,
         &lt;span class=&quot;kw&quot;&gt;representation&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;dt&quot;&gt;property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;dt&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;logical&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;st&quot;&gt;&amp;#39;xsi:type&amp;#39;&lt;/span&gt;=&lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;,
                        &lt;span class=&quot;dt&quot;&gt;datatype=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;character&amp;quot;&lt;/span&gt;))

&lt;span class=&quot;kw&quot;&gt;setAs&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;XMLInternalElementNode&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;meta&amp;quot;&lt;/span&gt;, function(from) &lt;span class=&quot;kw&quot;&gt;xmlToS4&lt;/span&gt;(from))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In order for &lt;code&gt;xmlToS4&lt;/code&gt; to work on nodes, I need the Coercion method for &lt;code&gt;meta&lt;/code&gt; too, defined above. We are now ready to rock and roll:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(XML)
doc &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xmlParse&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;tests/examples/trees.xml&amp;quot;&lt;/span&gt;)

edges &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getNodeSet&lt;/span&gt;(doc, &lt;span class=&quot;st&quot;&gt;&amp;quot;//x:tree[@id = &amp;#39;tree1&amp;#39;]/x:edge&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;namespaces=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;)
edges &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(edges, xmlToS4)

nodes &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getNodeSet&lt;/span&gt;(doc, &lt;span class=&quot;st&quot;&gt;&amp;quot;//x:tree[@id = &amp;#39;tree1&amp;#39;]/x:node&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;namespaces=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;)
nodes &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(nodes, xmlToS4)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;My opinion is that we should not bother writing validator methods etc for these classes we have just defined at this time. We can already validate the XML produced against the schema, and as the class definitions follow those from the schema, we should be reasonably robust. Happy to hear counter-arguments.&lt;/p&gt;
&lt;h2 id=&quot;extracting-attributes-or-values-directly-by-xpath-query&quot;&gt;Extracting Attributes or values directly by xpath query&lt;/h2&gt;
&lt;p&gt;A different route does not define class types at all, but just extracts the attributes we want. This is a bit more fast and loose.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;edges =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xpathSApply&lt;/span&gt;(doc, &lt;span class=&quot;st&quot;&gt;&amp;quot;//x:tree[@id = &amp;#39;tree1&amp;#39;]/x:edge&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;namespaces =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;, xmlAttrs)
nodes =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xpathSApply&lt;/span&gt;(doc, &lt;span class=&quot;st&quot;&gt;&amp;quot;//x:tree[@id = &amp;#39;tree1&amp;#39;]/x:node&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;namespaces =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;, 
  function(x) 
    &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;xmlGetAttr&lt;/span&gt;(x, &lt;span class=&quot;st&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;, &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;, as.character),  
      &lt;span class=&quot;kw&quot;&gt;xmlGetAttr&lt;/span&gt;(x, &lt;span class=&quot;st&quot;&gt;&amp;quot;otu&amp;quot;&lt;/span&gt;, &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;, as.character)))&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;coercing-into-standard-r-forms&quot;&gt;Coercing into standard R forms&lt;/h2&gt;
&lt;p&gt;This approach can be very quick and powerful if the data conforms to this structure.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;XML:::&lt;span class=&quot;kw&quot;&gt;xmlAttrsToDataFrame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;getNodeSet&lt;/span&gt;(doc, &lt;span class=&quot;st&quot;&gt;&amp;quot;//x:tree[@id = &amp;#39;tree1&amp;#39;]/x:node&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;namespaces=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;))
XML:::&lt;span class=&quot;kw&quot;&gt;xmlAttrsToDataFrame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;getNodeSet&lt;/span&gt;(doc, &lt;span class=&quot;st&quot;&gt;&amp;quot;//x:tree[@id = &amp;#39;tree1&amp;#39;]/x:edge&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;namespaces=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;without-xpath&quot;&gt;without XPath&lt;/h2&gt;
&lt;p&gt;We can skip over XPath based expressions by using xmlToList immediately:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;nex &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xmlToList&lt;/span&gt;(doc)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Unfortunately, this will do some possibly unexpected things: for instance, attributes are converted to list elements (&lt;code&gt;node$id&lt;/code&gt;, &lt;code&gt;node$otu&lt;/code&gt;, etc) on simple nodes (e.g. &lt;code&gt;&amp;lt;nodes&amp;gt;&lt;/code&gt; without a &lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt; node), while if they contain another node, attributes are one sub-list and the containing nodes another (e.g. &lt;code&gt;node$meta&lt;/code&gt; and &lt;code&gt;node$.attr&lt;/code&gt;, etc)&lt;/p&gt;
&lt;p&gt;Also note that instead of xpath queries as in the &lt;code&gt;xpathSApply&lt;/code&gt; and &lt;code&gt;getNodeSet&lt;/code&gt; examples above, we can index nodes the way would lists:&lt;/p&gt;
&lt;p&gt;e.g. &lt;code&gt;xmlRoot(doc)[[&amp;quot;trees&amp;quot;]][[&amp;quot;tree&amp;quot;]]&lt;/code&gt; instead of &lt;code&gt;getNodeSet(doc, &amp;quot;//trees/tree&amp;quot;)[[1]]&lt;/code&gt; (note that the former returns the first &lt;code&gt;&amp;lt;tree&amp;gt;&lt;/code&gt; node in the &lt;code&gt;&amp;lt;trees&amp;gt;&lt;/code&gt; node, while the latter returns all &lt;code&gt;&amp;lt;tree&amp;gt;&lt;/code&gt; nodes unless we just ask for the &lt;code&gt;[[1]]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;So this gives us a table of all node and edge elements:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;XML:::&lt;span class=&quot;kw&quot;&gt;xmlAttrsToDataFrame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;xmlRoot&lt;/span&gt;(doc)[[&lt;span class=&quot;st&quot;&gt;&amp;quot;trees&amp;quot;&lt;/span&gt;]][[&lt;span class=&quot;st&quot;&gt;&amp;quot;tree&amp;quot;&lt;/span&gt;]])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which gives us:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;   id label root  otu about source target  length
&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;  n1    n1 true &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;
&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;  n2    n2 &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;t1  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;
&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;  n3    n3 &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;
&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;  n4    n4 &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;#n4   &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;    &amp;lt;NA&amp;gt;&lt;/span&gt;
&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;  n5    n5 &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;t3  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;
&lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;  n6    n6 &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;t2  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;
&lt;span class=&quot;dv&quot;&gt;7&lt;/span&gt;  n7    n7 &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;
&lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt;  n8    n8 &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;t5  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;
&lt;span class=&quot;dv&quot;&gt;9&lt;/span&gt;  n9    n9 &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;t4  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;
&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt; e1  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;n1     n3 &lt;span class=&quot;fl&quot;&gt;0.34534&lt;/span&gt;
&lt;span class=&quot;dv&quot;&gt;11&lt;/span&gt; e2  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;n1     n2  &lt;span class=&quot;fl&quot;&gt;0.4353&lt;/span&gt;
&lt;span class=&quot;dv&quot;&gt;12&lt;/span&gt; e3  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;n3     n4   &lt;span class=&quot;fl&quot;&gt;0.324&lt;/span&gt;
&lt;span class=&quot;dv&quot;&gt;13&lt;/span&gt; e4  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;n3     n7  &lt;span class=&quot;fl&quot;&gt;0.3247&lt;/span&gt;
&lt;span class=&quot;dv&quot;&gt;14&lt;/span&gt; e5  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;n4     n5   &lt;span class=&quot;fl&quot;&gt;0.234&lt;/span&gt;
&lt;span class=&quot;dv&quot;&gt;15&lt;/span&gt; e6  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;n4     n6  &lt;span class=&quot;fl&quot;&gt;0.3243&lt;/span&gt;
&lt;span class=&quot;dv&quot;&gt;16&lt;/span&gt; e7  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;n7     n8 &lt;span class=&quot;fl&quot;&gt;0.32443&lt;/span&gt;
&lt;span class=&quot;dv&quot;&gt;17&lt;/span&gt; e8  &amp;lt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;n7     n9  &lt;span class=&quot;fl&quot;&gt;0.2342&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Sometimes this notation is cleaner than the xpath, sort of up to you.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes from chat with Duncan</title>
	 <link href="/2013/07/19/notes.html"/>
   <updated>2013-07-19T00:00:00+00:00</updated>
   <id>/07/19/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Keep metadata as part of the object&lt;/li&gt;
&lt;li&gt;Recursion problem coming up.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;validating&quot;&gt;Validating:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://github.com/ropensci/reml/issues/7&lt;/li&gt;
&lt;li&gt;Duncan has code using Matt’s java API&lt;/li&gt;
&lt;li&gt;If the EML isn’t valid, so what? Important for developers, users don’t care.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;api-design&quot;&gt;API design&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;what’s with the &lt;code&gt;do.call&lt;/code&gt;? This forces evaluation, can mess up lazyLoading, making for inefficient function handling.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Schema to create S4 objects&lt;/li&gt;
&lt;li&gt;Create R objects first, and then toXML&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;xmlschema&quot;&gt;XMLSchema&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;will improve as we go&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;paper-outline&quot;&gt;Paper outline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;EML exists – metadata vs vertical&lt;/li&gt;
&lt;li&gt;metadata manual in, manual out&lt;/li&gt;
&lt;li&gt;data synthesis?&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;r-object-to-xml&quot;&gt;R object to XML&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Accept / identify losely defined fields (lists)&lt;/li&gt;
&lt;li&gt;Manually create a coercision method between R’s objects, e.g. “person” (attempt match of named elements to list slots automatically).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Separate coersion methods for read and write.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;xml-to-r-object&quot;&gt;XML to R object&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ParseEML - because it saves us a lot to know this is EML.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Coerce into generic S4 R classes (class definitions from schema)&lt;/li&gt;
&lt;li&gt;Coerce automatically if element names are the same. Otherwise, manually coerce.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;further-possibilities&quot;&gt;Further possibilities&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Translations to other languages (e.g. python) can be automated.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Then add higher level mapping manually.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Updates On Managing References</title>
	 <link href="/2013/07/17/updates-on-managing-references.html"/>
   <updated>2013-07-17T00:00:00+00:00</updated>
   <id>/07/17/updates-on-managing-references</id>
   <content type="html">&lt;h3 id=&quot;mendeley-api-for-jekyll&quot;&gt;Mendeley API for Jekyll&lt;/h3&gt;
&lt;p&gt;Finally finished off my &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/7f7137fbdd4ca2eed86765b61561c283b4cd5811/_plugins/jekyll-labnotebook-plugins/mendeley.rb&quot;&gt;Mendeley API for Jekyll&lt;/a&gt; (The top uses the Ruby API implementation from Michael Bus, copied here since it is not yet provided as a gem. scroll to the bottom for my plugin code). The Mendeley API implementation is remarkably clumsy. For instance, rather than allowing queries to the API that specify a user’s folder and a sort-by field, we are forced to first query the folder for a list of IDs and then query document details &lt;em&gt;on every document in the folder&lt;/em&gt;, after which we can sort locally. Hence to show recent additions to a folder with 100s of documents requires 100s of API calls, instead of one single call. Straight-forward to program but incredibly slow and frustrating. Apparently this might be addressed in an eventual update of the API.&lt;/p&gt;
&lt;p&gt;Meanwhile, at least I know have a reasonably powerful tool to add reading lists by subject area directly from my library rather than pulling from my rather more aggregated group RSS feeds. Due to the ridiculous number of API calls, the plugin writes out the data in JSON, which provides a nice local database of the publication metadata we can read in from instead. The plugin will use local JSON file for the data if it exists – so one must delete the JSON file to trigger an update.&lt;/p&gt;
&lt;p&gt;Currently the plugin lists the &lt;code&gt;n&lt;/code&gt; most recent papers in a given folder. Further adaptation might be nice to allow for richer filtering, e.g. by tag,author, etc.&lt;/p&gt;
&lt;h3 id=&quot;direct-access-to-the-local-sql-database&quot;&gt;Direct access to the local SQL database&lt;/h3&gt;
&lt;p&gt;Accessing personal Mendeley data from the API is actually quite silly when the data is already available in a local SQLite database.&lt;/p&gt;
&lt;p&gt;Using R to explore and query my local Mendeley sqlite database directly:&lt;/p&gt;
&lt;p&gt;Make a copy of the database first&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;cp&lt;/span&gt; ~/.local/share/data/Mendeley Ltd./Mendeley Desktop/cboettig@gmail.com@www.mendeley.com.sqlite tmp.sqlite&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then in R, read in the database and show available tables (see &lt;a href=&quot;http://sandymuspratt.blogspot.com/2012/11/r-and-sqlite-part-1.html&quot;&gt;example tutorial&lt;/a&gt;):&lt;/p&gt;
&lt;pre class=&quot;{r}&quot;&gt;&lt;code&gt;library(&amp;#39;sqldf&amp;#39;)
db &amp;lt;- dbConnect(SQLite(), dbname=&amp;quot;tmp.sqlite&amp;quot;)
dbListTables(db)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Most metadata for all documents in the library appears in table &lt;code&gt;Documents&lt;/code&gt;. &lt;code&gt;dbListFields&lt;/code&gt; shows the column headers, though alternatively we can just read this information into an R &lt;code&gt;data.frame&lt;/code&gt; (This makes sense for reasonable size databases; for large databases we will want to query the data via SQL commands directly rather than attempting to load it all into memory).&lt;/p&gt;
&lt;pre class=&quot;{r}&quot;&gt;&lt;code&gt;dbListFields(db, &amp;quot;Documents&amp;quot;)
documents &amp;lt;- dbReadTable(db, &amp;quot;Documents&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Several useful fields are not included in this data frame. In particular, Author, Tag, Folder and Keywords. Some extra leg-work is needed to add this data. For instance &lt;code&gt;DocumentFolders&lt;/code&gt; gives us the map of each article &lt;code&gt;id&lt;/code&gt; to a folder &lt;code&gt;id&lt;/code&gt;, and then &lt;code&gt;Folders&lt;/code&gt; gives the details of that Folder.&lt;/p&gt;
&lt;p&gt;Using the &lt;code&gt;data.table&lt;/code&gt; package, indexing by &lt;code&gt;id&lt;/code&gt;, and using join methods would probably be the most efficient way to do this. (example may follow when I get the chance).&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Visit To Whoi</title>
	 <link href="/2013/07/11/visit-to-WHOI.html"/>
   <updated>2013-07-11T00:00:00+00:00</updated>
   <id>/07/11/visit-to-WHOI</id>
   <content type="html">&lt;p&gt;Presented my work from the &lt;a href=&quot;/tags/#nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/a&gt; project, &lt;em&gt;Avoiding tipping points in the management of ecological systems: a non-parametric Bayesian approach&lt;/em&gt; at the &lt;a href=&quot;http://www.whoi.edu/&quot;&gt;Woods Hole Oceangraphic Institution&lt;/a&gt; as part of their weekly Biology Department Seminar Series.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;9 - 9:30 &lt;a href=&quot;http://www.jbkellner.com/&quot;&gt;Julie Kellner&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;9:30-10:15 Ben Jones, (Kellner group)&lt;/li&gt;
&lt;li&gt;10:15 - 11:00 Math ecology group&lt;/li&gt;
&lt;li&gt;11:00 - 11:30 &lt;a href=&quot;http://www.whoi.edu/hpb/Site.do?id=14853&quot;&gt;Ian Carroll&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;11:30-12 Seminar prep&lt;/li&gt;
&lt;li&gt;12-1 my seminar&lt;/li&gt;
&lt;li&gt;1-2 Lunch with the Marine Policy Center (&lt;a href=&quot;http://www.whoi.edu/oceanus/viewArticle.do?id=3992&quot;&gt;Mike Fogarty&lt;/a&gt;, &lt;a href=&quot;http://www.whoi.edu/hpb/Site.do?id=1692&quot;&gt;Hauke Kite-Powell&lt;/a&gt;, &lt;a href=&quot;http://www.whoi.edu/hpb/Site.do?id=172&quot;&gt;Di Jin&lt;/a&gt;), Julie Kellner&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Enjoyable visit, with some particularly great questions after talk: including challenges/opportunities in multi-dimensional examples, concerns about temporal heterogeneity, partially observed systems / working with catch data in place of stock assessment data. Less push-back than I anticipated on using the Gaussian process; probably aided by the SDP context. Quite broad interest in SDP in particular too, estimating MSY following regression models seems common. Interesting discussion about the challenge introduced by today’s emphasis on ecosystem management; how to still retain focus on tractable models.&lt;/p&gt;
&lt;p&gt;Also some good discussion on the rOpenSci goals of large-scale data access and integration.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/07/10/notes.html"/>
   <updated>2013-07-10T00:00:00+00:00</updated>
   <id>/07/10/notes</id>
   <content type="html">&lt;h3 id=&quot;prsb-paper-is-out.&quot;&gt;PRSB paper is out.&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;TODO: Post to arxiv now that Drake’s side is out. Update vita. Reply to Drake. Clean up prosectors-fallacy repository. Post on paper(?)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Note: github record of earlier version of paper turns out handy in reply, (showed earlier wording about not necessary).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Also, some quick significance testing of &lt;a href=&quot;https://github.com/cboettig/prosecutors-fallacy/blob/092b004616e2859c1ab1a2d64892c641c7a527d0/inst/doc/sig-tests.md&quot;&gt;distributional differences&lt;/a&gt; associated with the patterns we show in Figure 1, for what it’s worth (in reply to query - yay for clean workflow making this easy).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;one day, follow up with Sebastian about the Freidlin-Wentzell work. “Yes, I’d be interested in trying a little dynamic programming for the discrete-time variational problem; it would be educational for me at least, and potentially applicable to some more specific research questions.” (me, April 23).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Read remaining articles in special issue of TE on warning signals, write out notes. Clear out ‘unsorted’ backlog&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;forking the r-journal; see separate post.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;some-thoughts-on-publishing-reviews.&quot;&gt;Some thoughts on publishing reviews.&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://smallpondscience.com/2013/04/15/transparency-in-research-publish-your-reviews/&quot;&gt;Excellent and provactive example by McGlynn&lt;/a&gt;, who links all reviews on papers to which he is a first author (the full cascade, not just reviews from the journal that ultimately accepted the paper). Comments&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;More thoughts and some comments from me on &lt;a href=&quot;http://timotheepoisot.fr/2013/07/10/sharing-reviews&quot;&gt;Tim’s blog&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Celebrating seven years of Biology Direct &lt;a href=&quot;http://dx.doi.org/10.1186/1745-6150-8-11&quot;&gt;Koonin et al 2013&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://figshare.com/articles/Moving_toward_a_sustainable_ecological_science_don_t_let_data_go_to_waste_/693745&quot;&gt;Poisot et al&lt;/a&gt; on data sharing. Nice piece, but the value of a metadata standard for distributing data is clearly not appreciated. Authors advocate data shared over an API without any notion of schema, and do not discuss the challenges and coarse-graining that goes into such vertically integrated repositories.&lt;/p&gt;
&lt;h3 id=&quot;reviewing-the-new-broader-impacts-guidelines&quot;&gt;Reviewing the new Broader impacts guidelines&lt;/h3&gt;
&lt;p&gt;2013 changes removes the examples, adds three new potential areas, and now uses the same assessment guidelines as the merit review does – importantly: requiring metrics of success.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Include but not limited to:&lt;/em&gt;&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;full participation of women, persons with disabilities, and underrepresented minorities in science, technology, engineering, and mathematics (STEM); (diversity)&lt;/li&gt;
&lt;li&gt;improved STEM education and educator development at any level; (education)&lt;/li&gt;
&lt;li&gt;increased public scientific literacy and public engagement with science and technology; (dissemination)&lt;/li&gt;
&lt;li&gt;improved well-being of individuals in society; (society)&lt;/li&gt;
&lt;li&gt;increased partnerships between academia, industry, and others; (partnerships) (new)&lt;/li&gt;
&lt;li&gt;improved national security; (security) (new)&lt;/li&gt;
&lt;li&gt;increased economic competitiveness of the United States; (economy) (new)&lt;/li&gt;
&lt;li&gt;enhanced infrastructure for research and education. (infrastructure)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;http://www.nsf.gov/pubs/policydocs/pappguide/nsf13001/gpg_2.jsp#IIC2d&quot;&gt;official text in the GPG&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Criteria&lt;/strong&gt;&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;What is the potential for the proposed activity to:&lt;/li&gt;
&lt;/ol&gt;
&lt;ol type=&quot;a&quot;&gt;
&lt;li&gt;Advance knowledge and understanding within its own field or across different fields (Intellectual Merit); and&lt;/li&gt;
&lt;li&gt;Benefit society or advance desired societal outcomes (Broader Impacts)?&lt;/li&gt;
&lt;/ol&gt;
&lt;ol start=&quot;2&quot; type=&quot;1&quot;&gt;
&lt;li&gt;To what extent do the proposed activities suggest and explore creative, original, or potentially transformative concepts?&lt;/li&gt;
&lt;li&gt;Is the plan for carrying out the proposed activities well-reasoned, well-organized, and based on a sound rationale? Does the plan incorporate a mechanism to assess success?&lt;/li&gt;
&lt;li&gt;How well qualified is the individual, team, or organization to conduct the proposed activities?&lt;/li&gt;
&lt;li&gt;Are there adequate resources available to the PI (either at the home organization or through collaborations) to carry out the proposed activities?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;http://www.nsf.gov/pubs/policydocs/pappguide/nsf13001/gpg_3.jsp#IIIA2&quot;&gt;official text in the GPG&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;packages&quot;&gt;packages&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;revisit Noam’s &lt;code&gt;knitcitations&lt;/code&gt; pull request? (&lt;a href=&quot;https://github.com/cboettig/knitcitations/pull/45&quot;&gt;#45&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;pushed documentation to RMendeley. &lt;code&gt;authored&lt;/code&gt; works for me, funny error for Noam…&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Forking The R Journal</title>
	 <link href="/2013/07/10/forking-the-R-journal.html"/>
   <updated>2013-07-10T00:00:00+00:00</updated>
   <id>/07/10/forking-the-R-journal</id>
   <content type="html">&lt;p&gt;All I really wanted to do is cite a paper in &lt;em&gt;the R Journal&lt;/em&gt;, which is peer-reviewed, open access (CC-BY), LaTeX based and without author charges. Sure, I could do that already, but I like being able to programmatically generate citation metadata from a URL – we do have this thing called the internet now, and citations are just links, right? Unfortunately, nice as it is, the R journal doesn’t have HTML landing pages for articles that embed the metadata.&lt;/p&gt;
&lt;p&gt;This makes it harder for Google Scholar to index the articles, and means that we cannot extract citation metadata from the URL using a tool like &lt;a href=&quot;http://greycite.knowledgeblog.org&quot;&gt;greycite&lt;/a&gt;. Until now.&lt;/p&gt;
&lt;p&gt;I wrote to Editor-in-Chief Hadley Wickam about this, who responded in the best way possible: making the &lt;a href=&quot;ihttps://github.com/rjournal/rjournal.github.io&quot;&gt;journal website’s Github repository&lt;/a&gt; public. A fork and a little hacking later, and voila, we have html landing pages for &lt;em&gt;the R Journal&lt;/em&gt; with embedded metadata (pending a &lt;a href=&quot;https://github.com/rjournal/rjournal.github.io/pull/1&quot;&gt;pull request&lt;/a&gt;). Check out &lt;a href=&quot;https://github.com/cboettig/rjournal.github.io/commit/e70e84e6e53e6c04ec9864af162d7ba58439d4d5&quot;&gt;the source code&lt;/a&gt; for how this works – it’s really quite straight forward since the metadata is already available in &lt;code&gt;_config.yaml&lt;/code&gt;. The main step involves a &lt;a href=&quot;https://github.com/cboettig/rjournal.github.io/blob/e70e84e6e53e6c04ec9864af162d7ba58439d4d5/_plugins/article_html_pages.rb&quot;&gt;Generator plugin&lt;/a&gt; which builds a page for each article and makes the relevant article metadata available to the page. Then we can write a &lt;a href=&quot;https://github.com/cboettig/rjournal.github.io/blob/e70e84e6e53e6c04ec9864af162d7ba58439d4d5/_layouts/article.html&quot;&gt;page template&lt;/a&gt; using Liquid code to import the metadata.&lt;/p&gt;
&lt;p&gt;The really exciting thing about this is the basic idea of forking a journal website and improving it. There’s a lot we could do to improve the R journal. I think that ideally we’d have HTML5 versions of the articles as well, something that would be straight forward if authors used knitr of course, but I realize that’s a bigger shift. One could also automatically enhance the HTML with quite a bit more semantic content, we could have animations, links the Rnw files, etc etc. I’d be happy to help and I’m sure others would too. R-journal is great but it could be so much more as an example and test-bed of innovation in statistical publishing.&lt;/p&gt;
&lt;p&gt;Well, now that the journal is open for pull requests, hack away!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Reviewing Software Revisited</title>
	 <link href="/2013/07/09/reviewing-software-revisited.html"/>
   <updated>2013-07-09T00:00:00+00:00</updated>
   <id>/07/09/reviewing-software-revisited</id>
   <content type="html">&lt;p&gt;Several weeks ago I wrote a &lt;a href=&quot;/2013/06/13/what-I-look-for-in-software-papers.html&quot;&gt;post&lt;/a&gt; describing issues I commonly raise when reviewing software papers. This provoked a lively discussion among authors, editors, and other reviewers of software papers (most of us having been on at least both reviewing and authoring end), with quite varied perspectives as to whether such criteria were appropriate in this context. As I describe there, I view the concept of dedicated software papers as a somewhat necessary “hack” of the publishing system, and hope a more mature system will eventually come into place, as is now happening for data through efforts such as &lt;a href=&quot;http://datadryad.org&quot;&gt;Dryad&lt;/a&gt; and associated journal archiving requirements.&lt;/p&gt;
&lt;p&gt;Sustainability of the software is important for the same reason archiving the literature is important – without this, we cannot build on existing work. Building on “researcher/developer” software (e.g. the kind of software typically covered in ‘software papers’) is currently an uncommon and risky, as eloquently argued by Brian O’Meara in the comments of &lt;a href=&quot;http://carlboettiger.info/2013/04/23/we-need-more-object-oriented-design-in-comparative-methods.html&quot;&gt;an earlier post&lt;/a&gt; describing just such a failure.&lt;/p&gt;
&lt;p&gt;Through that discussion, I’ve come to see the goal of reviewing software papers as one of software sustainability. After all, the publication becomes a part of the researcher’s permanent record and part of the permanent scholarly archive, designed to outlive the journal itself. It seems reasonable that the software it describes should at least exist and do something five years later. Though this sentiment underlies most of my criteria, my phrasing is often too specific and a little too grounded in language explicit to software development.&lt;/p&gt;
&lt;p&gt;As I learned from Neil Chue Hong (&lt;a href=&quot;http://www.software.ac.uk/&quot;&gt;Software Sustainability Institute&lt;/a&gt;) in a follow up from that discussion, The Journal of Open Research Software has recently revised its guidelines making much of this more explicit and much better worded than I did. They provide separate lists for the reviewer to comment on both the paper and the software – making it clear that the review goes beyond the paper. The questions for the paper are every bit as valuable as those from the software section: for instance, reference to sections on “Reuse”, “Quality Control”, and “Implementation and Architecture”. While these things might not get their own section headings in an MEE paper, the ideas should certainly be addressed. I think these guidelines provide an excellent checklist for promoting sustainable software without putting undo emphasis on questions of performance, scalability, extensibility, etc.&lt;/p&gt;
&lt;h2 id=&quot;journal-of-open-research-softwares-guidelines&quot;&gt;Journal of Open Research Software’s Guidelines&lt;/h2&gt;
&lt;p&gt;(content below &lt;a href=&quot;http://creativecommons.org/licenses/by/3.0/&quot;&gt;CC-BY&lt;/a&gt;, quoted from &lt;a href=&quot;http://openresearchsoftware.metajnl.com/&quot;&gt;Journal of Open Research Software&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Please provide a list of your recommendations, indicating which are compulsory for acceptance and which are optional but would improve the quality of the paper or the reusability of the software.&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&quot;the-paper&quot;&gt;The paper&lt;/h3&gt;
&lt;ol type=&quot;a&quot;&gt;
&lt;li&gt;Is the title of the paper descriptive and objective?&lt;/li&gt;
&lt;li&gt;Does the Abstract give an indication of the software’s functionality, and where it would be used?&lt;/li&gt;
&lt;li&gt;Do the keywords enable a reader to search for the software?&lt;/li&gt;
&lt;li&gt;Does the Introduction give enough background information to understand the context of the software’s development and use?&lt;/li&gt;
&lt;li&gt;Does the Implementation and Architecture section give enough information to get an idea of how the software is designed, and any constraints that may be placed on its use?&lt;/li&gt;
&lt;li&gt;Does the Quality Control section adequately explain how the software results can be trusted?&lt;/li&gt;
&lt;li&gt;Does the Reuse section provide concrete and useful suggestions for reuse of the software, for instance: other potential applications, ways of extending or modifying the software, integration with other software?&lt;/li&gt;
&lt;li&gt;Are figures and diagrams used to enhance the description? Are they clear and meaningful?&lt;/li&gt;
&lt;li&gt;Do you believe that another researcher could take the software and use it, or take the software and build on it?&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;the-software&quot;&gt;The software&lt;/h3&gt;
&lt;ol type=&quot;a&quot;&gt;
&lt;li&gt;Is the software in a suitable repository? (see &lt;a href=&quot;http://openresearchsoftware.metajnl.com/about/repositories/&quot; class=&quot;uri&quot;&gt;http://openresearchsoftware.metajnl.com/about/repositories/&lt;/a&gt; for more information)&lt;/li&gt;
&lt;li&gt;Does the software have a suitable open licence? (see &lt;a href=&quot;http://openresearchsoftware.metajnl.com/faq/#q5&quot; class=&quot;uri&quot;&gt;http://openresearchsoftware.metajnl.com/faq/#q5&lt;/a&gt; for more information)&lt;/li&gt;
&lt;li&gt;If the Archive section is filled out, is the link in the form of a persistent identifier, e.g. a DOI? Can you download the software from this link?&lt;/li&gt;
&lt;li&gt;If the Code repository section is filled out, does the identifier link to the appropriate place to download the source code? Can you download the source code from this link?&lt;/li&gt;
&lt;li&gt;Is the software license included in the software in the repository? Is it included in the source code?&lt;/li&gt;
&lt;li&gt;Is sample input and output data provided with the software?&lt;/li&gt;
&lt;li&gt;Is the code adequately documented? Can a reader understand how to build/deploy/install/run the software, and identify whether the software is operating as expected?&lt;/li&gt;
&lt;li&gt;Does the software run on the systems specified? (if you do not have access to a system with the prerequisite requirements, let us know)&lt;/li&gt;
&lt;li&gt;Is it obvious what the support mechanisms for the software are?&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;p&gt;Like my own list, a repository, a license, and sample input-output data are all mentioned explicitly. Software review section suggests there should be a mechanism in place to “identify whether the software is operating as expected” – such as basic unit tests. Extensibility is also mentioned, but without any reference to features that may or may not assist in that – a fault of my own list, which was probably over-specific on that account. I think these are reasonable and solid guidelines, and would love to see other journals that frequently publish software papers (Looking at you, MEE, JSS, Bioinformatics, R Journal, PLoS Comp Bio) adopt similar criteria.&lt;/p&gt;
&lt;p&gt;Of course I’d love to hear what others think about this.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Reml Update</title>
	 <link href="/2013/07/08/reml-update.html"/>
   <updated>2013-07-08T00:00:00+00:00</updated>
   <id>/07/08/reml-update</id>
   <content type="html">&lt;p&gt;Made substanial progress on the &lt;a href=&quot;https://github.com/ropensci/reml&quot;&gt;reml&lt;/a&gt; project. We have reached our &lt;a href=&quot;https://github.com/ropensci/reml/issues?milestone=1&amp;amp;state=closed&quot;&gt;first milestone&lt;/a&gt;, being able to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Successfully validate the EML generated (&lt;a href=&quot;https://github.com/ropensci/reml/issues/28&quot;&gt;#28&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Start a unit test suite write eml unit tests (&lt;a href=&quot;https://github.com/ropensci/reml/issues/14&quot;&gt;#14&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Extract appropriate R objects from EML dataTable read eml (&lt;a href=&quot;https://github.com/ropensci/reml/issues/6&quot;&gt;#6&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add function to publish EML data through figshare publish eml (&lt;a href=&quot;https://github.com/ropensci/reml/issues/3&quot;&gt;#3&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Generate an EML file given a data.frame and appropriate metadata write eml (&lt;a href=&quot;https://github.com/ropensci/reml/issues/2&quot;&gt;#2&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As illustrated by the example shown in the Readme:&lt;/p&gt;
&lt;h2 id=&quot;writing-r-data-into-eml&quot;&gt;Writing R data into EML&lt;/h2&gt;
&lt;p&gt;Install and load:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;install.packages&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;uuid&amp;quot;&lt;/span&gt;,,&lt;span class=&quot;st&quot;&gt;&amp;#39;http://rforge.net/&amp;#39;&lt;/span&gt;,&lt;span class=&quot;dt&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;source&amp;#39;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;devtools&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;reml&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;ropensci&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;reml&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Configure general metadata you may want to reuse again and again through settings:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt; eml$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;contact_givenName =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Carl&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;contact_surName =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Boettiger&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;contact_email =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;cboettig@ropensci.org&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Consider some dataset as an R &lt;code&gt;data.frame&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  dat =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;river=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;SAC&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;SAC&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;AM&amp;quot;&lt;/span&gt;),
                        &lt;span class=&quot;dt&quot;&gt;spp =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;king&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;king&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;ccho&amp;quot;&lt;/span&gt;),
                        &lt;span class=&quot;dt&quot;&gt;stg =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;smolt&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;parr&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;smolt&amp;quot;&lt;/span&gt;),
                        &lt;span class=&quot;dt&quot;&gt;ct =&lt;/span&gt;  &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(293L, 410L, 210L))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Provide definitions for the columns. These are usually just plain text definitions, though a URI to a semantic definition can be particularly powerful. See “Advanced Use” for details on adding richer information, such as the method used to collect the data or set the geographic, taxanomic, or temporal coverage of an individual column.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;      col_metadata =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;river =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;http://dbpedia.org/ontology/River&amp;quot;&lt;/span&gt;,
                       &lt;span class=&quot;dt&quot;&gt;spp =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;http://dbpedia.org/ontology/Species&amp;quot;&lt;/span&gt;,
                       &lt;span class=&quot;dt&quot;&gt;stg =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Life history stage&amp;quot;&lt;/span&gt;,
                       &lt;span class=&quot;dt&quot;&gt;ct =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;count&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Define the units used in each column. For factors, this is a definition of the levels involved. For numeric data, specify the units from &lt;a href=&quot;http://knb.ecoinformatics.org/software/eml/eml-2.1.1/eml-unitTypeDefinitions.html#StandardUnitDictionary&quot;&gt;this list&lt;/a&gt;. For dates, specify the format, (e.g. YYYY or MM-DD-YY). For character strings, a definition of the kind of string can be given, (e.g. species scientific name), otherwise the column description will be used.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;      unit_metadata =
&lt;span class=&quot;st&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;river =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;SAC =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;The Sacramento River&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;AM =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;The American River&amp;quot;&lt;/span&gt;),
            &lt;span class=&quot;dt&quot;&gt;spp =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;king =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;King Salmon&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ccho =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Coho Salmon&amp;quot;&lt;/span&gt;),
            &lt;span class=&quot;dt&quot;&gt;stg =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;parr =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;third life stage&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;smolt =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fourth life stage&amp;quot;&lt;/span&gt;),
            &lt;span class=&quot;dt&quot;&gt;ct =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;number&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The hard work is over, time to generate some EML.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;eml_write&lt;/span&gt;(dat, col_metadata, unit_metadata, &lt;span class=&quot;dt&quot;&gt;.title=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;A test EML file&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;file=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;my_eml_data.xml&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;file_description=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Test data, only intended for testing&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;See the &lt;a href=&quot;https://github.com/ropensci/reml/tree/master/inst/doc/my_eml_data.xml&quot;&gt;EML generated&lt;/a&gt; by this example.&lt;/p&gt;
&lt;h2 id=&quot;publish-eml&quot;&gt;Publish EML&lt;/h2&gt;
&lt;p&gt;Once we have generated a basic EML file, we can publish it to a variety of academic repositories where it will be indexed, permenently archived, more easily citable, and publicly discoverable.&lt;/p&gt;
&lt;p&gt;In this example, we will publish the above EML to &lt;a href=&quot;http://figshare.com&quot;&gt;figshare&lt;/a&gt; using the &lt;a href=&quot;https://github.com/ropensci/rfigshare&quot;&gt;rfigshare&lt;/a&gt; package. Like most academic repostories, figshare requires some basic metadata for any entry. Much of this we can automatically extract from our existing EML file. Additional metadata unique to figshare (e.g. matching it’s allowed “categories” can also be provided.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;id =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;eml_publish&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;my_eml_data.xml&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;description=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Example EML file from reml&amp;quot;&lt;/span&gt;, 
                &lt;span class=&quot;dt&quot;&gt;categories =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Ecology&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;tags =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;EML&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;destination=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;figshare&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Starting An Eml Package For R</title>
	 <link href="/2013/06/26/starting-an-EML-package-for-R.html"/>
   <updated>2013-06-26T00:00:00+00:00</updated>
   <id>/06/26/starting-an-EML-package-for-R</id>
   <content type="html">&lt;p&gt;Started &lt;a href=&quot;https://github.com/ropensci/reml&quot;&gt;&lt;code&gt;reml&lt;/code&gt;&lt;/a&gt;, and R package for reading, writing, manipulating and publishing EML files. More details and progress so far on the Github page; in particular flushing out design goals in the &lt;a href=&quot;https://github.com/ropensci/reml/issues&quot;&gt;issues tracker&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;initial-goals&quot;&gt;Initial goals&lt;/h3&gt;
&lt;p&gt;To start, I am aiming for a proof of principle case in which we can write an R &lt;code&gt;data.frame&lt;/code&gt; into EML (&lt;a href=&quot;https://github.com/ropensci/reml/issues/2&quot;&gt;issue #2&lt;/a&gt;), publish to a remote repository such as figshare (&lt;a href=&quot;https://github.com/ropensci/reml/issues/3&quot;&gt;issue #3&lt;/a&gt;), and then read the data back in as the original R object types from the EML (&lt;a href=&quot;https://github.com/ropensci/reml/issues/6&quot;&gt;issue #6&lt;/a&gt;). This will require specifying some generic metadata and basic column and unit metadata for the data frame. It would be good to get feedback on what way is most convenient to specify the required metadata in R.&lt;/p&gt;
&lt;h3 id=&quot;integration-goals-issue-8&quot;&gt;Integration goals (issue &lt;a href=&quot;https://github.com/ropensci/reml/issues/8&quot;&gt;#8&lt;/a&gt;)&lt;/h3&gt;
&lt;p&gt;This is the &lt;strong&gt;holy grail&lt;/strong&gt; of metadata infrastructure and ostensibly the primary purpose of EML, see &lt;a href=&quot;http://dx.doi.org/10.1146/annurev.ecolsys.37.091305.110031&quot; title=&quot;The New Bioinformatics: Integrating Ecological Data from the Gene to the Biosphere in Annual Review of Ecology, Evolution, and Systematics&quot;&gt;Jones et al 2006&lt;/a&gt;. Despite that, integration is not actually possible without semantic definitions as well, see &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.11.016&quot; title=&quot;Ecoinformatics: supporting ecology as a data-intensive science; in Trends in Ecology &amp;amp; Evolution. doi: 10.1016/j.tree.2011.11.016&quot;&gt;Michener &amp;amp; Jones 2012&lt;/a&gt;, from which we adapt this minimal example below.&lt;/p&gt;
&lt;p&gt;This example provides minimal and sometimes missing semantics; which may make it unresolvable. A complete semantic solution is diagrammed in the figure from &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.11.016&quot; title=&quot;Ecoinformatics: supporting ecology as a data-intensive science; in Trends in Ecology &amp;amp; Evolution. doi: 10.1016/j.tree.2011.11.016&quot;&gt;Michener &amp;amp; Jones 2012&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;dataset-1&quot;&gt;Dataset 1&lt;/h3&gt;
&lt;pre class=&quot;sourceCode ruby&quot;&gt;&lt;code class=&quot;sourceCode ruby&quot;&gt; dat = data.frame(river=c(&lt;span class=&quot;st&quot;&gt;&amp;quot;SAC&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;SAC&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;AM&amp;quot;&lt;/span&gt;), 
                   spp = c(&lt;span class=&quot;st&quot;&gt;&amp;quot;king&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;king&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;ccho&amp;quot;&lt;/span&gt;), 
                   stg = c(&lt;span class=&quot;st&quot;&gt;&amp;quot;smolt&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;parr&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;smolt&amp;quot;&lt;/span&gt;),
                   ct =  c(293L, 410L, 210L))

 col_metadata = c(river = &lt;span class=&quot;st&quot;&gt;&amp;quot;http://dbpedia.org/ontology/River&amp;quot;&lt;/span&gt;,
                  spp = &lt;span class=&quot;st&quot;&gt;&amp;quot;http://dbpedia.org/ontology/Species&amp;quot;&lt;/span&gt;, 
                  stg = &lt;span class=&quot;st&quot;&gt;&amp;quot;Life history stage&amp;quot;&lt;/span&gt;,
                  ct = &lt;span class=&quot;st&quot;&gt;&amp;quot;count&amp;quot;&lt;/span&gt;)

 unit_metadata = 
  list(river = c(&lt;span class=&quot;dt&quot;&gt;SAC&lt;/span&gt; = &lt;span class=&quot;st&quot;&gt;&amp;quot;The Sacramento River&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;AM&lt;/span&gt; = &lt;span class=&quot;st&quot;&gt;&amp;quot;The American River&amp;quot;&lt;/span&gt;),
       spp = c(king = &lt;span class=&quot;st&quot;&gt;&amp;quot;King Salmon&amp;quot;&lt;/span&gt;, ccho = &lt;span class=&quot;st&quot;&gt;&amp;quot;Coho Salmon&amp;quot;&lt;/span&gt;),
       stg = c(parr = &lt;span class=&quot;st&quot;&gt;&amp;quot;third life stage&amp;quot;&lt;/span&gt;, smolt = &lt;span class=&quot;st&quot;&gt;&amp;quot;fourth life stage&amp;quot;&lt;/span&gt;),
       ct = &lt;span class=&quot;st&quot;&gt;&amp;quot;number&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;dataset-2&quot;&gt;Dataset 2&lt;/h3&gt;
&lt;pre class=&quot;sourceCode ruby&quot;&gt;&lt;code class=&quot;sourceCode ruby&quot;&gt; dat = data.frame(site = c(&lt;span class=&quot;st&quot;&gt;&amp;quot;SAC&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;AM&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;AM&amp;quot;&lt;/span&gt;), 
                   species = c(&lt;span class=&quot;st&quot;&gt;&amp;quot;Chinook&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Chinook&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Silver&amp;quot;&lt;/span&gt;), 
                   smct = c(245L, 511L, 199L),
                   pcnt =  c(290L, 408L, 212L))

 col_metadata = c(site = &lt;span class=&quot;st&quot;&gt;&amp;quot;http://dbpedia.org/ontology/River&amp;quot;&lt;/span&gt;,
                  species = &lt;span class=&quot;st&quot;&gt;&amp;quot;http://dbpedia.org/ontology/Species&amp;quot;&lt;/span&gt;, 
                  smct = &lt;span class=&quot;st&quot;&gt;&amp;quot;Smolt count&amp;quot;&lt;/span&gt;,
                  pcnt = &lt;span class=&quot;st&quot;&gt;&amp;quot;Parr count&amp;quot;&lt;/span&gt;)

 unit_metadata = 
  list(river = c(&lt;span class=&quot;dt&quot;&gt;SAC&lt;/span&gt; = &lt;span class=&quot;st&quot;&gt;&amp;quot;The Sacramento River&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;AM&lt;/span&gt; = &lt;span class=&quot;st&quot;&gt;&amp;quot;The American River&amp;quot;&lt;/span&gt;),
       spp = c(&lt;span class=&quot;dt&quot;&gt;Chinook&lt;/span&gt; = &lt;span class=&quot;st&quot;&gt;&amp;quot;King Salmon&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Silver&lt;/span&gt; = &lt;span class=&quot;st&quot;&gt;&amp;quot;Coho Salmon&amp;quot;&lt;/span&gt;),
       smct = &lt;span class=&quot;st&quot;&gt;&amp;quot;number&amp;quot;&lt;/span&gt;,
       pcnt = &lt;span class=&quot;st&quot;&gt;&amp;quot;number&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;figure&quot;&gt;Figure&lt;/h3&gt;
&lt;figure&gt;
&lt;img src=&quot;https://f.cloud.github.com/assets/222586/710800/c0d567b6-de83-11e2-94b1-52090b0c9a5f.png&quot; alt=&quot;ontology_synthesis2&quot; /&gt;&lt;figcaption&gt;ontology_synthesis2&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/06/24/notes.html"/>
   <updated>2013-06-24T00:00:00+00:00</updated>
   <id>/06/24/notes</id>
   <content type="html">&lt;h2 id=&quot;exploring-xml-schema-in-r&quot;&gt;Exploring XML Schema in R&lt;/h2&gt;
&lt;p&gt;I danced around the room after reading these lines in the excellent &lt;a href=&quot;http://www.springer.com/statistics/computational+statistics/book/978-1-4614-7899-7&quot;&gt;XML and Web Technologies for Data Sciences with R&lt;/a&gt; book:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We can generate S4 class definitions corresponding to the data structures that are represented in the XML document. We can programmatically generate R code that will map an XML document adhering to this schema to corresponding R data structures. Similarly, we can automate the creation of code to serialize, or write, an R object of a particular type to a suitable XML format corresponding to the schema&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Wow. Automatically turn EML objects into R objects and vice versa! Generate a NeXML parser for R automatically. The world is your oyster now!&lt;/p&gt;
&lt;h2 id=&quot;diving-in&quot;&gt;Diving in&lt;/h2&gt;
&lt;p&gt;Using &lt;code&gt;install_github(&amp;quot;XMLSchema&amp;quot;, &amp;quot;omegahat&amp;quot;)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Trouble so far.&lt;/p&gt;
&lt;h3 id=&quot;eml&quot;&gt;EML&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;readSchema&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;eml.xsd&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;From Duncan:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;As I suspected from just the description of the problem, there is a recursive circularity in the schema files - eml-documentation.xsd imports eml-text.xsd which imports eml-documentation.xsd. I’ll try to find some time to handle this.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Staying tuned…&lt;/p&gt;
&lt;h3 id=&quot;nexml&quot;&gt;NexML&lt;/h3&gt;
&lt;p&gt;This is a schema for phylogenetic trees. Being able to use this schema would be a big improvement over the current approach of our treebase package, which queries a vertically integrated database that is far less expressive then the NeXML schema.&lt;/p&gt;
&lt;p&gt;I tried this schema, but cannot download the file for some reason:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;nex &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;readSchema&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.nexml.org/2009/nexml.xsd&amp;quot;&lt;/span&gt;)
failed to load HTTP resource
Error:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;failed to load HTTP resource
&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I download a copy from here and set its xsd/ directory as my working directory:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;nex &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;readSchema&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;nexml.xsd&amp;quot;&lt;/span&gt;)
Error:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;XML content does not seem to be XML:&lt;span class=&quot;st&quot;&gt; &amp;#39;./continuous.xsd&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;because the path should be &lt;code&gt;characters/continuous.xsd&lt;/code&gt;. Not sure why I’m not managing to navigate the paths correctly here.&lt;/p&gt;
&lt;h3 id=&quot;kml-example-from-book&quot;&gt;KML example from book&lt;/h3&gt;
&lt;p&gt;I cannot load the KML schema directly from the website:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;kx =&lt;span class=&quot;st&quot;&gt; &amp;quot;https://developers.google.com/kml/schema/kml21.xsd&amp;quot;&lt;/span&gt;
&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;kml =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;readSchema&lt;/span&gt;(kx)
Error:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;XML content does not seem to be XML:&lt;span class=&quot;st&quot;&gt; &amp;#39;https://developers.google.com/kml/schema/kml21.xsd&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Likewise,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;kml =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;readSchema&lt;/span&gt;( &lt;span class=&quot;st&quot;&gt;&amp;quot;http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd&amp;quot;&lt;/span&gt;)
failed to load HTTP resource
Error:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;failed to load HTTP resource&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;fails, though the other example works&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pmml =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;readSchema&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.dmg.org/v4-1/pmml-4-1.xsd&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If I wget the xsd and save it locally first, then I can readSchema on the local file. If I have &lt;code&gt;options(error = recover)&lt;/code&gt; set, then&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt; &lt;span class=&quot;kw&quot;&gt;defineClasses&lt;/span&gt;(kml)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;gets me deep into the debugger. If I run it with &lt;code&gt;options(error=NULL)&lt;/code&gt;, then I get warnings:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;defineClasses&lt;/span&gt;(kml)
&lt;span class=&quot;kw&quot;&gt;character&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
Warning messages:
&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;In&lt;/span&gt; (function (className, baseType, &lt;span class=&quot;dt&quot;&gt;where =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;globalenv&lt;/span&gt;())  :
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;http:&lt;span class=&quot;er&quot;&gt;//&lt;/span&gt;earth.google.com/kml/&lt;span class=&quot;fl&quot;&gt;2.1&lt;/span&gt;.Object is an existing class
&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;In&lt;/span&gt; (function (className, baseType, &lt;span class=&quot;dt&quot;&gt;where =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;globalenv&lt;/span&gt;())  :
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;http:&lt;span class=&quot;er&quot;&gt;//&lt;/span&gt;earth.google.com/kml/&lt;span class=&quot;fl&quot;&gt;2.1&lt;/span&gt;.Feature is an existing class
&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;In&lt;/span&gt; (function (className, baseType, &lt;span class=&quot;dt&quot;&gt;where =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;globalenv&lt;/span&gt;())  :
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;http:&lt;span class=&quot;er&quot;&gt;//&lt;/span&gt;earth.google.com/kml/&lt;span class=&quot;fl&quot;&gt;2.1&lt;/span&gt;.LookAt is an existing class
&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;In&lt;/span&gt; (function (className, baseType, &lt;span class=&quot;dt&quot;&gt;where =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;globalenv&lt;/span&gt;())  :
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;http:&lt;span class=&quot;er&quot;&gt;//&lt;/span&gt;earth.google.com/kml/&lt;span class=&quot;fl&quot;&gt;2.1&lt;/span&gt;.Geometry is an existing class
&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;In&lt;/span&gt; (function (className, baseType, &lt;span class=&quot;dt&quot;&gt;where =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;globalenv&lt;/span&gt;())  :
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;http:&lt;span class=&quot;er&quot;&gt;//&lt;/span&gt;earth.google.com/kml/&lt;span class=&quot;fl&quot;&gt;2.1&lt;/span&gt;.StyleSelector is an existing class
&lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;In&lt;/span&gt; (function (className, baseType, &lt;span class=&quot;dt&quot;&gt;where =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;globalenv&lt;/span&gt;())  :
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;http:&lt;span class=&quot;er&quot;&gt;//&lt;/span&gt;earth.google.com/kml/&lt;span class=&quot;fl&quot;&gt;2.1&lt;/span&gt;.TimePrimitive is an existing class
&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I load an minimal &lt;a href=&quot;http://en.wikipedia.org/wiki/Keyhole_Markup_Language&quot;&gt;example file&lt;/a&gt; and try fromXML, but hit an error:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; doc &amp;lt;- xmlParse(&amp;quot;kmlexample.xml&amp;quot;)
&amp;gt; fromXML(doc)
Error in UseMethod(&amp;quot;xmlAttrs&amp;quot;, node) : 
  no applicable method for &amp;#39;xmlAttrs&amp;#39; applied to an object of class &amp;quot;c(&amp;#39;XMLInternalDocument&amp;#39;, &amp;#39;XMLAbstractDocument&amp;#39;)&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Stay tuned for more from Duncan on getting this rolling..&lt;/p&gt;
&lt;h3 id=&quot;reading&quot;&gt;Reading&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Early warning signals in multivariate dynamics: &lt;code&gt;r citet(&amp;quot;http://arxiv.org/abs/1306.3465&amp;quot;, &amp;quot;discusses&amp;quot;)&lt;/code&gt;. Population size grows as approaches collapse, multidemensional data needed to detect slowing down (eigenvalue estimates from multidimensional autoregressive model)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Little grants are more bang for the buck than big grants: &lt;code&gt;r citet(&amp;quot;10.1371/journal.pone.0065263&amp;quot;, &amp;quot;discusses&amp;quot;)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;code-tricks&quot;&gt;Code tricks&lt;/h3&gt;
&lt;p&gt;From Egan, on getting a useful version of rvm on Ubuntu 12.04 (lets me install &lt;code&gt;bundle install&lt;/code&gt; on the lab-notebook gemfile so I can deploy from &lt;code&gt;zero.ucdavis&lt;/code&gt;, etc.)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;RVM has to be installed locally because the packaged version is broken. Before installation, the following packages need to be installed globally (unless you have root access in which case the installer will take care of them):&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;    bison
    libyaml-dev
    libgdbm-dev
    gawk
    sqlite&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;To install RVM, run:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;    \curl -L https://get.rvm.io | bash -s stable --ruby --autolibs=enable --auto-dotfiles&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;which takes a while because it downloads and builds a lot. The installer takes care of the configuration automatically and all you need to do after installation is log into a fresh shell to source the required functions and environment.&lt;/p&gt;
&lt;/blockquote&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes On Leveraging The Ecological Markup Language</title>
	 <link href="/2013/06/23/notes-on-leveraging-the-ecological-markup-language.html"/>
   <updated>2013-06-23T00:00:00+00:00</updated>
   <id>/06/23/notes-on-leveraging-the-ecological-markup-language</id>
   <content type="html">&lt;p&gt;This post creates new tag &lt;a href=&quot;/tags.html#eml&quot;&gt;eml&lt;/a&gt; for posts discussing the Ecological Markup Langauge or the implementation of an R parser thereof (&lt;a href=&quot;https://github.com/ropensci/reml&quot;&gt;reml&lt;/a&gt;).&lt;/p&gt;
&lt;h3 id=&quot;why-eml&quot;&gt;Why EML?&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://10.1146/annurev.ecolsys.37.091305.110031&quot;&gt;Jones et al.(2005)&lt;/a&gt; give an excellent explanation describing the relative advantage of the descriptive metadata approach over vertically integrated repositories (such as Genbank, TreeBase, or many other repostories that have been the focus of rOpenSci development to date).&lt;/p&gt;
&lt;p&gt;In short, the EML approach allows archiving of very heterogeneous data without having to standardize everything into a narrow and pre-defined syntax.&lt;/p&gt;
&lt;h3 id=&quot;providers-of-eml&quot;&gt;Providers of EML&lt;/h3&gt;
&lt;p&gt;As far as I can tell, the long-term ecological research program sites are responsible for almost all available EML files. XML files in specificed schemas involve strict criteria and are thus best generated by software.&lt;/p&gt;
&lt;h3 id=&quot;use-cases-of-eml&quot;&gt;Use cases of EML&lt;/h3&gt;
&lt;p&gt;These sites seem to do a better job generating this data than making any use of it – a &lt;a href=&quot;http://dx.doi.org/10.1007/978-90-481-8782-9_5&quot;&gt;review of the project&lt;/a&gt; mentions “a common metadata” standard in passing and without citation. While providing nice examples of the breadth of ecological data as published by a range of researchers and journals, it provides little obvious example of synthesis. I just reread Jones et al. review to confirm that it provides no examples of papers involving data synthesis based on EML (instead citing a single example of manual data synthesis to illustrate the challenges involved).&lt;/p&gt;
&lt;h3 id=&quot;generating-eml&quot;&gt;Generating EML&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://dx.doi.org/10.1109/4236.957896&quot;&gt;Metacat&lt;/a&gt; a GPL program written in Java by EML authors Matt and co, describes itself as a database that uses EML to store data. It might be a useful tool for generating EML, but looks pretty intimidating to me. It probably provides the “&lt;a href=&quot;http://knb.ecoinformatics.org/knb/cgi-bin/register-dataset.cgi?cfg=knb&quot;&gt;Web Software Interface&lt;/a&gt;” that provides rather minimal EML&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://knb.ecoinformatics.org/morphoportal.jsp&quot;&gt;Morpho&lt;/a&gt; is aimed at documenting species trait data, and looks like a rather useful if tedious tool for generating EML files. Unfortunately, without the ability to script inputs or automatically detect existing data structures, we are forced through the rather arduous process of adding all metadata annotation each time.&lt;/p&gt;
&lt;h2 id=&quot;what-can-a-package-offer&quot;&gt;What can a package offer?&lt;/h2&gt;
&lt;p&gt;Translating xpath commands into R function wrappers probably provides little utility. Do we really need a &lt;code&gt;get_authors&lt;/code&gt; function in place of &lt;code&gt;getNodeSet(doc, &amp;quot;//creator&amp;quot;)&lt;/code&gt;? Of course we might want to convert the returned nodes into characters strings or R &lt;code&gt;person&lt;/code&gt; objects. Or providing larger chunks of metadata extracted into a single R object, or text-based summary (e.g. markdown or yaml).&lt;/p&gt;
&lt;p&gt;A package could also provide utilities to generate EML from R objects, leveraging the metadata implicit in R objects that is not present in a CSV (in which there is no built-in notion of whether a column is numeric or character string, what missing value characters it uses, or really if it is consistent at all. Avoiding manual specification of these things makes the metadata annotation less tedious as well.&lt;/p&gt;
&lt;p&gt;Of course such ideas are just the beginning. Ideally a package could help tackle the grand challenge of heterogeneous data integration, though this might have to wait for more semantics than are natively found EML.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Annual Review discussing “ecoinformatics” and the EML approach &lt;span class=&quot;showtooltip&quot; title=&quot;Jones M, Schildhauer M, Reichman O and Bowers S (2006). &amp;#39;The New Bioinformatics: Integrating Ecological Data From The Gene to The Biosphere.&amp;#39; Annual Review of Ecology, Evolution, And Systematics, 37, pp. 519-544. ISSN 1543-592X.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1146/annurev.ecolsys.37.091305.110031&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Jones et al. (2006)&lt;/a&gt;&lt;/span&gt; .&lt;/li&gt;
&lt;li&gt;The use of ontologies in ecology &lt;span class=&quot;showtooltip&quot; title=&quot;Madin J, Bowers S, Schildhauer M and Jones M (2008). &amp;#39;Advancing Ecological Research With Ontologies.&amp;#39; Trends in Ecology &amp;amp; Evolution, 23, pp. 159-168. ISSN 01695347.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2007.11.007&quot; rel=&quot;http://purl.org/spar/cito/usesMethodIn&quot; &gt;Madin et al. (2008)&lt;/a&gt;&lt;/span&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Updated, shorter review in TREE &lt;span class=&quot;showtooltip&quot; title=&quot;Michener W and Jones M (2012). &amp;#39;Ecoinformatics: Supporting Ecology as A Data-Intensive Science.&amp;#39; Trends in Ecology &amp;amp; Evolution, 27, pp. 85-93. ISSN 01695347.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.11.016&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Michener &amp;amp; Jones (2012)&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Simple EML introduction in &lt;em&gt;Frontiers&lt;/em&gt; &lt;span class=&quot;showtooltip&quot; title=&quot;Fegraus E, Andelman S, Jones M and Schildhauer M (2005). &amp;#39;Maximizing The Value of Ecological Data With Structured Metadata: an Introduction to Ecological Metadata Language (Eml) And Principles For Metadata Creation.&amp;#39; Bulletin of The Ecological Society of America, 86, pp. 158-168. ISSN 0012-9623.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1890/0012-9623(2005)86[158:MTVOED]2.0.CO;2&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Fegraus et al. (2005)&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;metacat paper, &lt;span class=&quot;showtooltip&quot; title=&quot;Jones M, Berkley C, Bojilova J and Schildhauer M (2001). &amp;#39;Managing Scientific Metadata.&amp;#39; Ieee Internet Computing, 5, pp. 59-68. ISSN 10897801.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1109/4236.957896&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Jones et al. (2001)&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;LTER paper, &lt;span class=&quot;showtooltip&quot; title=&quot;Müller F, Baessler C, Schubert H, Klotz S, Gosz J, Waide R and Magnuson J (unknown). &amp;#39;Long-Term Ecological Research.&amp;#39; Unknown.&quot;&gt;&lt;a href=&quot;&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Müller et al. (unknown)&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Eric H. Fegraus, Sandy Andelman, Matthew B. Jones, Mark Schildhauer, (2005) Maximizing The Value of Ecological Data With Structured Metadata: an Introduction to Ecological Metadata Language (Eml) And Principles For Metadata Creation. &lt;em&gt;Bulletin of The Ecological Society of America&lt;/em&gt; &lt;strong&gt;86&lt;/strong&gt; 158-168 &lt;a href=&quot;http://dx.doi.org/10.1890/0012-9623(2005)86[158:MTVOED]2.0.CO;2&quot;&gt;10.1890/0012-9623(2005)86[158:MTVOED]2.0.CO;2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;M.B. Jones, C. Berkley, J. Bojilova, M. Schildhauer, (2001) Managing Scientific Metadata. &lt;em&gt;Ieee Internet Computing&lt;/em&gt; &lt;strong&gt;5&lt;/strong&gt; 59-68 &lt;a href=&quot;http://dx.doi.org/10.1109/4236.957896&quot;&gt;10.1109/4236.957896&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Matthew B. Jones, Mark P. Schildhauer, O.J. Reichman, Shawn Bowers, (2006) The New Bioinformatics: Integrating Ecological Data From The Gene to The Biosphere. &lt;em&gt;Annual Review of Ecology, Evolution, And Systematics&lt;/em&gt; &lt;strong&gt;37&lt;/strong&gt; 519-544 &lt;a href=&quot;http://dx.doi.org/10.1146/annurev.ecolsys.37.091305.110031&quot;&gt;10.1146/annurev.ecolsys.37.091305.110031&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Joshua S. Madin, Shawn Bowers, Mark P. Schildhauer, Matthew B. Jones, (2008) Advancing Ecological Research With Ontologies. &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt; &lt;strong&gt;23&lt;/strong&gt; 159-168 &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2007.11.007&quot;&gt;10.1016/j.tree.2007.11.007&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;William K. Michener, Matthew B. Jones, (2012) Ecoinformatics: Supporting Ecology as A Data-Intensive Science. &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt; &lt;strong&gt;27&lt;/strong&gt; 85-93 &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.11.016&quot;&gt;10.1016/j.tree.2011.11.016&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Felix Müller, Cornelia Baessler, Hendrik Schubert, Stefan Klotz, James R. Gosz, Robert B. Waide, John J. Magnuson, (unknown) Long-Term Ecological Research. &lt;em&gt;Unknown&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Nonparametric Bayes Summary Ideas</title>
	 <link href="/2013/06/20/nonparametric-bayes-summary-ideas.html"/>
   <updated>2013-06-20T00:00:00+00:00</updated>
   <id>/06/20/nonparametric-bayes-summary-ideas</id>
   <content type="html">&lt;p&gt;If you do know the model and are simply uncertain about the parameters, you can often do all right (e.g. better than maximum likelihood approach) by doing the SDP over the Bayesian posterior distribution of the estimated model. Not surprisingly, if you don’t have the correct model, this can fail pretty dramatically (in particular in very nonlinear models, e.g. tipping point models I have been looking at). Model choice and model averaging approaches aren’t much help here, because often the structurally correct model doesn’t fit the observed data any better – since the problems occur due to model inaccuracies where we don’t have data; e.g. near the tipping point.&lt;/p&gt;
&lt;p&gt;The surprising thing (to me anyway) is that using an appropriate nonparametric Bayesian process (e.g. Gaussian processes) to approximate the dynamics in place of a parametric model, I can often do just as well as having the correct model structure! I believe this works because I get a better description of the uncertainty in regions where I don’t have data.&lt;/p&gt;
&lt;p&gt;I’m trying to write this work up now. It’s a bit of a nuisance because you always have to convince yourself that the differences in performance aren’t just due to MCMC convergence issues, so there’s a wealth of nuisance parameters to worry about.&lt;/p&gt;
&lt;p&gt;You can see the basic idea here. All models can fit the data reasonably well…&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7317/8736417226_03129480a9_c.jpg&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;But the wrong parametric models cause the SDP to crash the stock, while the GP or the correct structural estimate perform about as well as you would using the true simulation parameters (e.g. GP, True, and correct structured “Allen” model all like on top of each other):&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm6.staticflickr.com/5338/9081265332_2b6d056375_o.png&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Figure For Summarizing Simulations</title>
	 <link href="/2013/06/18/figure-for-summarizing-simulations.html"/>
   <updated>2013-06-18T00:00:00+00:00</updated>
   <id>/06/18/figure-for-summarizing-simulations</id>
   <content type="html">&lt;p&gt;Trying to find a better way to summarize outputs of simulations,&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm6.staticflickr.com/5448/9021275460_cbc5de534d_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Heavy over-plotting makes the simulation trajectories themselves hard to read, even with transparent curves. Instead, we can plot the cumulative profit (technically should be discounted first):&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm6.staticflickr.com/5334/9019048845_1e55f47129_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;We can normalize these profits as a fraction of the theoretical optimum (true), providing a comparison that is less dependent on model parameters.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3672/9093236637_273d3f3974_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;We can then attempt to plot these on a single plot, either as stacked histograms:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm6.staticflickr.com/5531/9093236713_f4737d525e_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;or stacked density plots:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm6.staticflickr.com/5328/9093236773_168c3a160b_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Even after (or because of) some tuning of binwidth I’m not sure I’m happy. Will probably go with the histogram. The density plot fails when distribution is purely a delta function, giving a uniform distribution instead (and is thus maximally wrong); this can be avoided by adding a small jitter.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Code: see complete code &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/fc63651f1b1ef44b0b53817d35351a11997c6ce8/inst/examples/BUGS/external-chunks.R&quot;&gt;nonparametric-bayes/fc6365&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;## @knitr Figure3
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(sims_data) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(reps,method), &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;method), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey, &lt;span class=&quot;dt&quot;&gt;guide =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;guide_legend&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;override.aes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)))


## @knitr profits
Profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sims_data[, &lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(profit), by=&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;method&amp;quot;&lt;/span&gt;)]
tmp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dcast&lt;/span&gt;(Profit, reps ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;method)
&lt;span class=&quot;co&quot;&gt;#tmp$Allen &amp;lt;- tmp[,&amp;quot;Allen&amp;quot;] + rnorm(dim(tmp)[1], 0, 1) # jitter for plotting&lt;/span&gt;
tmp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;tmp /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;tmp[,&lt;span class=&quot;st&quot;&gt;&amp;quot;True&amp;quot;&lt;/span&gt;]
tmp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(tmp[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;dim&lt;/span&gt;(tmp)[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]])
actual_over_optimal &amp;lt;-&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(tmp, variable !=&lt;span class=&quot;st&quot;&gt; &amp;quot;True&amp;quot;&lt;/span&gt;)


## @knitr Figure4 
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(actual_over_optimal, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_histogram&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable, &lt;span class=&quot;dt&quot;&gt;scales =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;free_y&amp;quot;&lt;/span&gt;)  +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;guides&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;legend.position =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Total profit by replicate&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_fill_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(actual_over_optimal, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_histogram&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;variable), &lt;span class=&quot;dt&quot;&gt;binwidth=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Total profit by replicate&amp;quot;&lt;/span&gt;)+&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_fill_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(actual_over_optimal, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value, &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_density&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;..density..), &lt;span class=&quot;dt&quot;&gt;position=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;stack&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;adjust=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;9&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Total profit by replicate&amp;quot;&lt;/span&gt;)+&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_fill_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey)+&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_color_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Via Noam. &lt;a href=&quot;http://snikolov.wordpress.com/2012/11/14/early-detection-of-twitter-trends/&quot;&gt;Interesting&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Richard interview&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/scholmd/scholmd/wiki/Todo-list-from-workshop&quot;&gt;scholarly markdown&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Exchange with Martin on &lt;a href=&quot;http://blog.martinfenner.org/2013/06/17/what-is-scholarly-markdown/#comment-934745570&quot;&gt;links are citations&lt;/a&gt; &lt;strong&gt;Edit&lt;/strong&gt;: it appears comments have been lost, but see discussion on the follow-up post, &lt;a href=&quot;blog.martinfenner.org/2013/06/19/citations-in-scholarly-markdown/&quot;&gt;citations in scholarly markdown&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Wow, the scaling unit &lt;code&gt;em&lt;/code&gt; in LaTeX, CSS, etc. actually comes from the width of the character &lt;code&gt;M&lt;/code&gt;, dating back to printing-press era, when that character was used to define the spacing &lt;a href=&quot;http://tex.stackexchange.com/questions/119068/meaning-of-quad?newsletter=1&amp;amp;nlcode=50792%7ca76d&quot;&gt;quadratone&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes For Van Noorden Chat</title>
	 <link href="/2013/06/17/notes-for-van-noorden-chat.html"/>
   <updated>2013-06-17T00:00:00+00:00</updated>
   <id>/06/17/notes-for-van-noorden-chat</id>
   <content type="html">&lt;p&gt;Below are my scribble notes in prep for an interview with Richard, a writier for Nature.&lt;/p&gt;
&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;Advice for early-career scientists on how to think about organizing and publishing research data online.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Things like - why do it,&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Good for science (idealist), good for reputation (careerist), etc, but most importantly: helps you do your research.&lt;/p&gt;
&lt;p&gt;I had the pleasure of meeting with then Secretary of Energy Stephen Chu last summer at a small Department of Energy computational science conference. Secretary Chu described what he missed most in being away from his research Berkeley National Laboratories was the joy of sharing the excitement of scientific discovery. He descibed reading a recent article on some advance in quantum computing while on a return flight on Airforce One, and probably boring the Secretary of Agriculture sitting next to him to death as he nararrated just how clever the study was. Whether you are a noble lauraeate or just starting your career, there’s nothing like the joy of engaging other scientists in discussing details of research you are passionate about.&lt;/p&gt;
&lt;p&gt;Drake story: Becuase he had access to my data, he could engage more substantively by directly demonstrating the point he wished to make about the observed pattern in the data. His ideas then prompted me to run several additional analyses to test if my original intuition was correct, or if he had indeed discovered a novel indicator. Because I had my workflow, I could do this quickly and easily. Our discussion will be published by PRSB, accompanied by data in Dryad, and others can weigh in on the question.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;which specific sites/applications/tools are there,&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A wealth of tools today. Anyone who can manage to submit a paper with EditorialManager or ManuscriptCentral without swearing will have no problem using the tools available today (though it may increase personal resentment towards said clunky submission systems)&lt;/p&gt;
&lt;p&gt;Both are free at the moment, provide DOIs with CLOCKSS archival backup, discoverability, APIs.&lt;/p&gt;
&lt;p&gt;Published data: Dryad. Integrated with our journals, data DOI appears on the cover page, good use statistics, good API, familar to the community.&lt;br /&gt;Figshare: Beautiful online display, (lacks: download / citation data so far, less journal integration (PLoS, some NPG), start-up model instead of non-profit model; sustainability plan less obvious.) Private (e.g. within-group) and public options.&lt;/p&gt;
&lt;p&gt;Github: ‘a better dropbox.’ free, infinite, open, collaborative,&lt;/p&gt;
&lt;p&gt;Effortlessly share &lt;em&gt;rapidly changing&lt;/em&gt; content (data, code, manuscript drafts). Fast, verifiable, and persistent identifiers to versions. Collaborative writing and feedback. Provider-independent technology (e.g. git FOSS works with or without Github INC). No CLOCKSS backup. Possible but less ideal for binary data files (e.g. images). Web hosting for sharing truly custom content with full analytics.&lt;/p&gt;
&lt;p&gt;Lab Notebook:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;what things do you need to look out for (such as data permanence, how to make data citable and discoverable, how to fit in with your field’s requirements, etc).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Metadata.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I see that you’re a great advocate of sharing data and open science, and I’d be keen to talk about what you’ve got out of it,&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;what you’ve learned,&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;and any advice you’d give to early-career scientists who are wondering about how to start.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Start in your lab group, and make it habit. You’ll be the biggest beneficiary…&lt;/p&gt;
&lt;p&gt;Data sharing isn’t new, and established researchers are often better positioned and more willing to take risks, so I’d hate for them to think “youngsters today think they invented this stuff.” That said, one of the best things early-career scientists can do is encourage this practice in their field.&lt;/p&gt;
&lt;p&gt;(early Drosophila story)&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>What I look for in 'Software Papers'</title>
	 <link href="/2013/06/13/what-I-look-for-in-software-papers.html"/>
   <updated>2013-06-13T00:00:00+00:00</updated>
   <id>/06/13/what-I-look-for-in-software-papers</id>
   <content type="html">&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt; Thanks to the rich discussion in the comments and beyond, I’ve revised my thoughts on this somewhat, as I discuss in &lt;a href=&quot;/2013/07/09/reviewing-software-revisited.html&quot;&gt;this more recent post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I am more and more frequently reviewing ‘software papers:’ which I define as publications whose primary purpose is to publicize a piece of scientific software and provide a traditional research product with hopes that it will receive citations and recognition from other researchers in grant and job reviews. To me this feels very much like hacking the publication recognition system rather than the ideal way to recognize and track the role of software in research communities, but a very practical one in the current climate. I have written two myself, so I have been on both ends of this issue. In this post, I share what I look for in such papers and what omissions I see most frequently.&lt;/p&gt;
&lt;h2 id=&quot;reviewing-software&quot;&gt;Reviewing software&lt;/h2&gt;
&lt;p&gt;If we are going to employ this hack of the publication system for software, we should at least use it to maximal advantage. As a reviewer, I feel that means reviewing not just the submitted manuscript but the software itself. If we can agree on nothing else, we as a community should at least be able to say:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;my review of a software paper is a review of the software&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I assume most other authors, reviewers and editors on this content share this implicit assumption, but I’d love to hear first hand from anyone else. For instance: as an editor, what would you do if your reviewers only commented on the paper directly and not on the software distributed?&lt;/p&gt;
&lt;p&gt;We are not really taught to review software, any more than we are taught to write it in the first place. Most journals offer little guidance on this (though see the Journal of Open Research Software &lt;a href=&quot;http://openresearchsoftware.metajnl.com/peer-review/&quot;&gt;guidelines for peer review of software&lt;/a&gt;, all though they are still rather minimal.) In the absence of a culture on software reviewing, I thought I would lay out my own perspective with the hope of hearing feedback and push back from others. Perhaps through such dialogs we can develop clearer expectations for this rapidly expanding genre.&lt;/p&gt;
&lt;h2 id=&quot;reviewing-the-software-paper&quot;&gt;Reviewing the software paper&lt;/h2&gt;
&lt;p&gt;I don’t include “to document” the software as a purpose, since none do so very comprehensively, and besides, documentation belongs in the software, not in a journal. “Publicize” usually includes some motivating examples that could convince many readers that the software does something useful for them without too much effort. As such, I expect the paper to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;provide the journal’s audience with a clear motivation for why the package is useful, * and have at least one functioning “wow” example that I can run (by copy-paste) and understand without difficulty (e.g. without referring to code comments or the package manual to understand the function calls and their arguments).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is an intentionally low bar that I hope helps promote these kinds of contributions. Despite this, papers frequently fail the copy-paste test or the plain text explanations of the function calls. Come on people. Meanwhile, I try to focus the rest of my review on the software itself.&lt;/p&gt;
&lt;h2 id=&quot;my-partial-list-of-criteria&quot;&gt;My partial list of criteria&lt;/h2&gt;
&lt;p&gt;As I am almost always reviewing R packages, the software already meets some very basic standards required by submission to CRAN: dependencies and license stated, built-in documentation, passing some minimal automatic checks, etc. (See the &lt;a href=&quot;http://cran.r-project.org/web/packages/policies.html&quot;&gt;CRAN Policies&lt;/a&gt; and the &lt;a href=&quot;http://cran.r-project.org/doc/manuals/R-exts.html&quot;&gt;Writing R Extensions Manual&lt;/a&gt; for details). This is great, as it clears the first few hurdles of installation, etc. without much fuss, but still provides a bar that is by itself unacceptably low for published scientific software. Here is a list of the things I see that most often frustrate me. This isn’t intended as a style-guide or a comprehensive list of best practices, just my own pet peeves. I have somewhat tongue-in-cheek labeled them by severity of the review I might give; which like any other use of these terms is more of a measure of how annoyed I am then anything else. Critiques and suggestions welcome.&lt;/p&gt;
&lt;h3 id=&quot;edit&quot;&gt;Edit:&lt;/h3&gt;
&lt;p&gt;The comments from other reviewers, authors, and editors have been fantastic, thank you all. I particularly appreciate the opportunity to have reviewing styles critiqued, something that does not happen in normal peer review.&lt;/p&gt;
&lt;p&gt;Just a note on my headings here. I do not see any of these things as “gatekeeping requirements” and have intentionally omitted the option of “&lt;em&gt;Reject&lt;/em&gt;”. I would reject such a paper for methodological flaws, etc., but not for any of the reasons on my list below. The list is intended only to improve, not prevent, software publication.&lt;/p&gt;
&lt;p&gt;I believe any of the decisions below typically result in a revision to the same journal, that authors judiciously choose how to respond to reviewer comments guided by the editor’s own feedback, and that it is ultimately the editor’s decision whether any of this is relevant. &lt;code&gt;&amp;lt;/edit&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;reject-and-resubmit&quot;&gt;“Reject and resubmit”&lt;/h2&gt;
&lt;h3 id=&quot;automatic-tests&quot;&gt;Automatic tests&lt;/h3&gt;
&lt;p&gt;A scientific R package &lt;em&gt;must must must&lt;/em&gt; have some automated tests that are run by &lt;code&gt;R CMD check&lt;/code&gt;. Even if further development of the package doesn’t break anything (most likely only if further development doesn’t happen), changes to the package dependencies could still break things, and so it is crucial to have a mechanism in place to detect these problems when they arise. For code that runs quickly, the simplest way to do this is through the examples in the documentation. I don’t expect all scientific software to have a complete test suite with 100% coverage covering all the weird things that can happen if a user passes in a matrix when the function expects a data frame or has some unanticipated missing values, etc. Just some tests to make sure the basic examples execute and I’ll be happy. Longer running functions or those that need calls to external web resources shouldn’t be run in the examples (too much of a burden for CRAN’s automatic testing) so they should be marked &lt;code&gt;dontrun&lt;/code&gt; and put in a separate test suite or vignette as it says in the manual.&lt;/p&gt;
&lt;h3 id=&quot;passing-optional-arguments&quot;&gt;Passing optional arguments&lt;/h3&gt;
&lt;p&gt;I see authors write functions like this all the time:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;myfunction&lt;/span&gt;(f, p){ 
  &lt;span class=&quot;co&quot;&gt;#  stuff&lt;/span&gt;
  o &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim&lt;/span&gt;(f, p)
  &lt;span class=&quot;co&quot;&gt;#  stuff&lt;/span&gt;
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;calling an existing library function like &lt;code&gt;optim&lt;/code&gt; that has a whole host of very useful optional arguments that have a significant impact on how the algorithm functions. Whenever you a rich function like &lt;code&gt;optim&lt;/code&gt;, please have the courtesy to make it’s arguments available to future users and developers through your function call. Yes, most users will just want the default arguments, (or your default arguments, if different), and that can be handled just fine by providing default values as optional arguments. R has a fantastic mechanism for this exact issue: the &lt;code&gt;...&lt;/code&gt; argument. The above code could be fixed simply by using:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;myfunction&lt;/span&gt;(f, p, ...){ 
  &lt;span class=&quot;co&quot;&gt;#  stuff&lt;/span&gt;
  o &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim&lt;/span&gt;(f, p, ...)
  &lt;span class=&quot;co&quot;&gt;#  stuff&lt;/span&gt;
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;which works just they way you think it would. If you have more than one such function (ask yourself if you can write shorter functions first and then) pass optional arguments as lists,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;myfunction&lt;/span&gt;(f, p, optim_options, fn2_options){
  &lt;span class=&quot;co&quot;&gt;# stuff&lt;/span&gt;
  o &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;do.call&lt;/span&gt;(optim, &lt;span class=&quot;kw&quot;&gt;as.list&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(f, p, optim_options)))
  &lt;span class=&quot;co&quot;&gt;# stuff&lt;/span&gt;
  b &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;do.call&lt;/span&gt;(fn2, fn2_options)
  &lt;span class=&quot;co&quot;&gt;# stuff &lt;/span&gt;
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;arguments can also be extracted with &lt;code&gt;list(...)$arg1&lt;/code&gt; etc.&lt;/p&gt;
&lt;p&gt;A converse of this issue is not providing default arguments where it might be natural to do so. This does not bother me so much, as it is probably useful to force the user to think how many iterations &lt;code&gt;n&lt;/code&gt; are appropriate for their problem rather than just assuming that &lt;code&gt;100&lt;/code&gt; is good because it is the default. The only time this case is annoying is when the argument will not be changing – such as a user’s authentication token to access a web resource. Don’t make me manually pass the token to every function in the library please.&lt;/p&gt;
&lt;h3 id=&quot;development-site-and-bug-tracker&quot;&gt;Development site and bug tracker&lt;/h3&gt;
&lt;p&gt;I would really like to see a link to the software development page, such as r-forge or Github. The primary asset in this context is pointing reviewers to an address with a bug tracking system where issues can be assigned ticket numbers and readers can transparently see if a package is being actively maintained. A reader who comes across the paper years later who has only an email address that may or may not work has little way to determine what the latest version of the code is, whether it is actively maintained, or whether earlier versions that may have been in used in previous publications suffered from any significant bugs.&lt;/p&gt;
&lt;h3 id=&quot;cite-your-dependencies&quot;&gt;Cite your dependencies!&lt;/h3&gt;
&lt;p&gt;We write software papers with the sometimes vain hope that they will be cited by users, so authors of such papers should at least follow these best practices themselves. R includes a native mechanism for providing citations to packages, &lt;code&gt;citation(packagename)&lt;/code&gt;, including the information for any software paper published along with it. Be sure to add your own software papers to the &lt;code&gt;CITATION&lt;/code&gt; file. More information can be found in my post on &lt;a href=&quot;http://purl.org/cboettig/2012/03/20/citing-r-packages.html&quot;&gt;Citing R packages&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;major-revisions&quot;&gt;“Major Revisions”&lt;/h2&gt;
&lt;p&gt;These are other things that commonly frustrate me, but fall on a bit more of a continuum of style rather than gross oversights. As such I’m not sure that any one of these things would justify rejection.&lt;/p&gt;
&lt;h3 id=&quot;functionalize-the-code&quot;&gt;Functionalize the code&lt;/h3&gt;
&lt;p&gt;Style guides will tell you to keep functions short, not more than a screen or 20 lines. Breaking large functions into a series of smaller functions and documenting those smaller functions – even if they are only used internally – is a great help to a reviewer trying to understand what a function is supposed to do and also test that it does what it says. Anyone building the code base later (most often yourself) will appreciate the reusable modules.&lt;/p&gt;
&lt;h3 id=&quot;stable-clean-and-complete-return-objects&quot;&gt;Stable, clean, and complete return objects&lt;/h3&gt;
&lt;p&gt;An extension of providing optional arguments to functions is to also provide access to all of their return information. To extend the example from wrapping &lt;code&gt;optim&lt;/code&gt;, this would involve returning the convergence information. Using object classes and helper functions for return objects helps keep code stable and lets users leverage existing code for similar objects, such as fitting or plotting routines. More discussion on this topic based on my own experiences in the post, &lt;a href=&quot;http://carlboettiger.info/2013/04/23/we-need-more-object-oriented-design-in-comparative-methods.html#comment-878249659&quot;&gt;we need more object oriented design in comparative methods&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;state-a-license&quot;&gt;State a license&lt;/h3&gt;
&lt;p&gt;Because CRAN requires this through the DESCRIPTION file, R package authors rarely neglect this entirely. A sometimes misconception is that because R itself is primarily dual-licensed under GPL-2 and GPL-3 that R packages must use a GPL license due to the “viral” clause of the GPL. This clause only applies if you are modifying existing GPL functions directly and is not a requirement for R packages, which recognize a large array of licenses. My own recommendation for authors seeking to maximize the impact of their work is to use MIT, BSD (2 clause), or CC0 license for the package. CC0 has the advantage of being suitable for and data or documentation included, but authors should do there homework and decide what is best for them.&lt;/p&gt;
&lt;h2 id=&quot;minor-revisions&quot;&gt;“Minor Revisions”&lt;/h2&gt;
&lt;p&gt;Consistent use of coding style, good documentation, clear examples, intelligent reuse of code, and other best practices are all areas in which any work could improve. While we can all become better developers by highlighting these issues in our reviews, they are probably best developed over time and in dialog with the user community. I also put anything extending the scope of functionality into this category – I do not have any concept of minimal contribution as long as the code meets the criteria above. Meanwhile, there’s always a few pet peeves I just cannot help mentioning. Here’s one which is particular to R packages and so commonly overlooked.&lt;/p&gt;
&lt;h3 id=&quot;imports-not-depends&quot;&gt;IMPORTS not DEPENDS&lt;/h3&gt;
&lt;p&gt;Many developers overlook that package dependencies that provide functions your functions will use internally should be listed as under IMPORTS rather than DEPENDS. This keeps the users namespace cleaner and avoids collisions of functions having the same name. Use DEPENDS only for those packages whose functions will be used by the end user as well.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;If you are an author, editor, or reviewer of R software packages, what are your pet peeves?&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/06/13/notes.html"/>
   <updated>2013-06-13T00:00:00+00:00</updated>
   <id>/06/13/notes</id>
   <content type="html">&lt;p&gt;Assembling various loose ends and some ropensci work.&lt;/p&gt;
&lt;h2 id=&quot;misc-things-to-work-out-and-write-at-some-date&quot;&gt;Misc things to work out and write at some date&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Catch up on literature reading (unsorted list in Mendeley). Get entries into notebook.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Write thoughts on selecting links anchor text in the notebook&lt;/li&gt;
&lt;li&gt;knitr script workflow: externalizing chunks, cache and figure prefixes.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;branching projects and unique repositories&lt;/li&gt;
&lt;li&gt;source code for all manuscripts into repositories&lt;/li&gt;
&lt;li&gt;clean up directories. in particular, establish separate prosecutors-fallacy repository&lt;/li&gt;
&lt;li&gt;Comments on workflow: Date-oriented (notebook) vs File-oriented (Github) explanation. (Or is Github both, via history button, and the notebook just the summary that links to it?)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ropensci&quot;&gt;ropensci&lt;/h2&gt;
&lt;p&gt;As per &lt;a href=&quot;http://ropensci.org/blog/2013/06/12/sloan/&quot;&gt;yesterday’s announcement&lt;/a&gt;, we are officially funded by a generous grant from the Alfred P. Sloan Foundation!&lt;/p&gt;
&lt;p&gt;Today:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Writing feedback on goals, comments to advisors&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;taxize&quot;&gt;taxize&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;My friendly &lt;a href=&quot;https://github.com/ropensci/taxize_/issues/151&quot;&gt;review&lt;/a&gt; of Scott’s taxize &lt;a href=&quot;https://github.com/ropensci/taxize_/tree/dev_ms/inst/doc&quot;&gt;manuscript&lt;/a&gt; (&lt;a href=&quot;https://github.com/ropensci/taxize_/blob/dev_ms/inst/doc/taxize_withcode_plos.pdf?raw=true&quot;&gt;pdf&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ropensci-website&quot;&gt;ropensci website&lt;/h3&gt;
&lt;p&gt;Scott has a good question about automatic TOC sidebars.&lt;/p&gt;
&lt;p&gt;Can generate TOC with redcarpet filter, but it grabs all headers. Unclear how to modify so that it grabs only headers above a certain level. See &lt;a href=&quot;https://github.com/vmg/redcarpet/issues/267&quot;&gt;my attempt as an issue in redcarpet repo&lt;/a&gt;. Similarly pandoc only provides &lt;code&gt;--toc&lt;/code&gt; as a compile flag, which does not give us the same control over it’s placement in the HTML.&lt;/p&gt;
&lt;h3 id=&quot;misc-semantics&quot;&gt;misc semantics&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Interesting &lt;a href=&quot;http://serena.macs.hw.ac.uk/serena/discover-me-semantically/process.php&quot;&gt;example&lt;/a&gt; of RDF visualization and linking to external linked-data resources. In particular, good use/example of linking to DBpedia information. See &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/63&quot;&gt;issue #63&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Open peer review on &lt;a href=&quot;http://publications.copernicus.org/services/public_peer_review.html&quot;&gt;copernicus platform&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Smith fellows 2014 &lt;a href=&quot;http://www.conbio.org/mini-sites/smith-fellows/apply/proposal-guidelines&quot;&gt;applications open&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Neil’s &lt;a href=&quot;http://www.software.ac.uk/blog/2013-04-09-five-stars-research-software&quot;&gt;five stars of research software&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Titus’s &lt;a href=&quot;http://ivory.idyll.org/blog/ladder-of-academic-software-notsuck.html&quot;&gt;academic software notsuck&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Nature Chemistry’s take on &lt;a href=&quot;http://blogs.nature.com/thescepticalchymist/2013/06/all-you-can-tweet-the-blog-version.html/?WT.mc_id=TWT_NatureBlogs&quot;&gt;Twitter for publishers&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A Nature Chemistry blog reflects on &lt;a href=&quot;http://blogs.nature.com/thescepticalchymist/2013/06/speaking-frankly-the-allure-of-pasteurs-quadrant.html&quot;&gt;Pasteur’s Quadrant&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;G8 Science ministers &lt;a href=&quot;https://www.gov.uk/government/news/g8-science-ministers-statement&quot;&gt;call for&lt;/a&gt; global research infrastructure, open scientific research data and expanded access to results&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;how-i-use-git-with-svn-repositories&quot;&gt;How I use git with svn repositories&lt;/h4&gt;
&lt;p&gt;I don’t use SVN much, but in my opinion “commits” mean something different in SVN then in Git anyway, so I’d rather not entangle the commit history. Because merging is hard in SVN and all local changes are slave to the master central repository, commits tend to be larger, more polished things. Commits and merges are cheap and easy in git, so I commit much more often. By having to commit twice, I am deliberate about whether I’m committing to SVN, with all the overhead that involves, or whether I’m just committing to git.&lt;/p&gt;
&lt;p&gt;I think my approach is much easier than &lt;a href=&quot;http://cameron.bracken.bz/git-with-r-forge&quot;&gt;this&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;my-replies-to-data-quality-survey&quot;&gt;My replies to data quality survey&lt;/h2&gt;
&lt;h5 id=&quot;what-constitutes-data-quality&quot;&gt;What constitutes data quality?&lt;/h5&gt;
&lt;p&gt;&lt;strong&gt;Statistical quality&lt;/strong&gt; Measurement error, the degree to which potential covariates are either controlled for or co-measured, and the sample size.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Computational quality&lt;/strong&gt; Open and standardized format (csv, xml in defined schema of the field, etc) Thorough metadata conforming to tightly defined and verifiable schema. Terms defined as URIs / linked data. Openly accessible under permissive licensing.&lt;/p&gt;
&lt;h5 id=&quot;how-might-data-quality-be-assessed-generally&quot;&gt;How might data quality be assessed generally?&lt;/h5&gt;
&lt;p&gt;Statistical quality depends on what the researcher wants to do with it, and is generally easy for the researcher to assess. All the elements listed under statistical quality should simply be included in metadata, and researchers can draw their own conclusions about sample size, covariates, etc.&lt;/p&gt;
&lt;p&gt;Computational quality measurement should reflect data management practices more broadly. Something like Tim Berners Lee’s five-star mechanism for linked data, or badges that indicate if data includes verification tools, etc.&lt;/p&gt;
&lt;h5 id=&quot;datacites-role&quot;&gt;DataCite’s Role?&lt;/h5&gt;
&lt;p&gt;Good quality data should be incentivised the same way good publications are. If good quality data can make a career, researchers will rise to the challenge with a little help for proofreading and formatting. Ease of depositing data in a useful format and sharing that data, along with metrics to reflect the impact it has, can go a long way in this regard.&lt;/p&gt;
&lt;!-- Text that didn&#39;t make it into my post 

## Where to submit

Actually, I don&#39;t care.  Almost any journal publishing methodology recieves software papers, which often provides a clear target audience.  For instance, though the [JSS]() is best adapted to publishing papers involving R packages, the editorial board is not one of ecologists or evolutionary biologists, who more frequently publish software papers in [MEE](), [Oxford Bioinformatics]() or [PLoS Bioinformatics]().  The JISC&#39;s Journal of Open Research Software ... 


--&gt;
</content>
 </entry>
 
 <entry>
   <title>manuscript reviews on github?</title>
	 <link href="/2013/06/10/mansucript-reviews-on-github.html"/>
   <updated>2013-06-10T00:00:00+00:00</updated>
   <id>/06/10/mansucript-reviews-on-github</id>
   <content type="html">&lt;p&gt;I was recently impressed to learn of Trevor Bedford’s strategy of seeking &lt;a href=&quot;https://twitter.com/trvrb/status/334310856982671361&quot;&gt;pre-approval&lt;/a&gt; for posting his reviewer’s comments as Github issues. Beyond providing links to the data and source-code, I generally don’t advertise the open science nature of papers I submit – I guess I assume that if the reader or reviewers care, it should be easy enough for them to discover it. Consequently I am usually immediately frustrated to realize that upon receiving my reviews I have to create a second, private repository for the review material, our replies to reviewers, etc., as I don’t have permission to disclose that information. &lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; I have recently stumbled across &lt;a href=&quot;http://www.steinsaltz.me.uk/pnas.html&quot;&gt;several&lt;/a&gt; &lt;a href=&quot;http://theseamonster.net/2013/05/are-unreasonably-harsh-reviewers-retarding-the-pace-of-coral-reef-science/&quot;&gt;examples&lt;/a&gt; of authors publishing to the web anonymous reviews they have received. Though anonymous, I feel the practice potentially murky without explicit permission, so I would appreciate any insight others have on this.&lt;/p&gt;
&lt;h3 id=&quot;asking-permission&quot;&gt;Asking permission&lt;/h3&gt;
&lt;p&gt;Trevor’s approach suggests I should consider broaching this question when first submitting my review, so I am puzzling over the best way to do so. One option would be to include such a request in the cover letter. For example,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The authors of this manuscript would like to request that the editor and reviewers indicate in their replies if they consent or decline to have their comments posted anonymously in the public &lt;a href=&quot;#&quot;&gt;Issues Tracker&lt;/a&gt; of this paper.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Does that need more explanation? A link to examples like &lt;a href=&quot;https://github.com/trvrb/flux/issues?labels=reviewer+1&quot;&gt;Trevor’s&lt;/a&gt; that have done this before? Do I need to explain the value of having this kind of transparent provenance for the paper? Should I mention how this could give the reviewer more transparent credit? Encourage them to comment directly on Github from their own account?&lt;/p&gt;
&lt;p&gt;Does this need the blessing of the journal? How would you feel about such a clause as a reviewer or editor? For a recent review I had done of a paper that was similarly written on Github, I obtained the Journal’s permission to post my review as an &lt;a href=&quot;https://github.com/weecology/data-sharing-paper/issues/71&quot;&gt;issue&lt;/a&gt; in their repository. I would love to see more examples of this kind of thing, if anyone has come across them.&lt;/p&gt;
&lt;h2 id=&quot;cover-letters-for-open-science-manuscripts&quot;&gt;Cover letters for open science manuscripts?&lt;/h2&gt;
&lt;p&gt;While I lean towards a minimal statement such as the one above, perhaps a cover letter would be a good place to document some of the other open and reproducible features of the manuscript? Or perhaps such statements should be added to the manuscript itself? Among the options, I might point out:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;The manuscript has been written on Github. Consequently the full drafting and &lt;strong&gt;revision history&lt;/strong&gt; is available, along with graphs of author contributions (which omit authors without Github accounts and may be distorted by trivial line changes)&lt;/li&gt;
&lt;li&gt;The manuscript has been written with all the code necessary to repoduce the results embedded as a &lt;a href=&quot;http://yihui.name/knitr&quot;&gt;knitr&lt;/a&gt; &lt;strong&gt;dynamic document&lt;/strong&gt;. This helps ensure the analysis is always in synch with the results presented in the manuscript and the that the research is reproducible. The analysis, figures, and manuscript can be reassembled from scratch by typing &lt;code&gt;make pdf&lt;/code&gt; in the repository directory.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Code&lt;/strong&gt; to replicate the analysis and produce each of the figures shown can be found at: (Version-stable lnk to the appropriate Github pages? Deposit in Figshare/Dryad first?)&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Data&lt;/strong&gt; to replicate the analysis and data shown in each of the figures can be found at: (Easiest to link to Github, since the code and data already reside there.&lt;br /&gt;&lt;em&gt;Alternatively I could deposit these in &lt;a href=&quot;http://figshare.com&quot;&gt;Figshare&lt;/a&gt; or &lt;a href=&quot;http://datadryad.org&quot;&gt;Dryad&lt;/a&gt; first…)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;The manuscript, code, data, and documentation are available &lt;strong&gt;as an R package in the Github repository&lt;/strong&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The &lt;strong&gt;issues tracker&lt;/strong&gt; associated with the manuscript’s repository provides a record of this research, including lines of investigation that were resolved into the results presented here, lines that were closed as dead-ends or null results, and outstanding issues for further investigation.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The &lt;strong&gt;daily lab notebook entries&lt;/strong&gt; accompanying this research can be found under the &lt;a href=&quot;/tags&quot;&gt;project-tag&lt;/a&gt; between dates of XX and XX.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Listing all of these would make for a somewhat lengthy cover letter, which might be a bit overwhelming to be useful (or seem more promotional than valuable). Are any of the seven things above worth highlighting in particular?&lt;/p&gt;
&lt;p&gt;Perhaps these details could be deferred to a README file in the project’s Github repo, and the cover letter could simply provide a link to the project repository? What, if anything, would appear most useful and accessible to a reviewer unfamiliar with this approach or its potential value? Though elements of this approach have been discussed in the published literature, e.g. &lt;span class=&quot;showtooltip&quot; title=&quot;Gentleman R and Temple Lang D (2007). Statistical Analyses And
Reproducible Research. _Journal of Computational And Graphical
Statistics_, *16*. ISSN 1061-8600, 
http://dx.doi.org/10.1198/106186007X178663.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1198/106186007X178663&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Gentleman &amp;amp; Temple Lang (2007)&lt;/a&gt;&lt;/span&gt; ‘compendium’ concept, &lt;span class=&quot;showtooltip&quot; title=&quot;Stodden V (2009). Enabling Reproducible Research: Open Licensing
for Scientific Innovation. 
http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1362040. 
http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1362040.&quot;&gt;&lt;a href=&quot;http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1362040&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Stodden (2009)&lt;/a&gt;&lt;/span&gt; RRS concept, or &lt;span class=&quot;showtooltip&quot; title=&quot;Peng R (2011). Reproducible Research in Computational Science.
_Science_, *334*. ISSN 0036-8075, 
http://dx.doi.org/10.1126/science.1213847.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1126/science.1213847&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Peng (2011)&lt;/a&gt;&lt;/span&gt; reproducible papers in the Journal of Biostatistics, I’m unsure if pointing a reviewer to these references would be more valuable or more confusing. Let me know what you think.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Robert Gentleman, Duncan Temple Lang, (2007) Statistical Analyses And Reproducible Research. &lt;em&gt;Journal of Computational And Graphical Statistics&lt;/em&gt; &lt;strong&gt;16&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1198/106186007X178663&quot;&gt;10.1198/106186007X178663&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;R. D. Peng, (2011) Reproducible Research in Computational Science. &lt;em&gt;Science&lt;/em&gt; &lt;strong&gt;334&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1126/science.1213847&quot;&gt;10.1126/science.1213847&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Victoria Stodden, (2009) Enabling Reproducible Research: Open Licensing for Scientific Innovation. &lt;a href=&quot;http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1362040&quot; class=&quot;uri&quot;&gt;http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1362040&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;Strictly speaking the edits to the manuscript in the open repository could also be considered confidential, though at that stage I haven’t yet signed the copyright agreements that come with publication, which tend to be quite reasonable even for the traditional subscription based journals I work with&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
 </entry>
 
 <entry>
   <title>Semi Analytic Posteriors</title>
	 <link href="/2013/06/05/semi-analytic-posteriors.html"/>
   <updated>2013-06-05T00:00:00+00:00</updated>
   <id>/06/05/semi-analytic-posteriors</id>
   <content type="html">&lt;p&gt;The difficulty in comparing the nonparametric Bayesian inference against parametric Bayesian inference is ensuring that the poorer performance of the latter is not do to numerical limitations of the MCMC (no one is quite so worried about the cases where the mcmc solution appears to work well…) Convergence is almost impossible to truly establish, and lots of pathologies (correlations between variables, particularly without simulataneous updating) can frustrate it considerably. While multiple chains and long run times are the reasonable default, for simple enough models we can take a more direct approach.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Script matches commit &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/26d84c5c147d853a075dc5b1c1be593a38d04f10/inst/examples/semi-analytic-posteriors.md&quot;&gt;26d84c/semi-analytic-posteriors.md&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;generating-model-and-parameters&quot;&gt;Generating Model and parameters&lt;/h3&gt;
&lt;p&gt;Ricker model, parameterized as&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[X_{t+1} = X_t r e^{-\beta X_t + \sigma Z_t}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;for random unit normal &lt;span class=&quot;math&quot;&gt;\(Z_t\)&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x,h,p)  x *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(-x *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) 
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;)
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# approx, a li&amp;#39;l&amp;#39; less&lt;/span&gt;
Xo &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# approx, a li&amp;#39;l&amp;#39; less&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;
z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)
x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;)
N &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;123&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;sample-data&quot;&gt;Sample Data&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(N)
x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Xo
for(t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(N&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;))
  x[t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;z_g&lt;/span&gt;() *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x[t], &lt;span class=&quot;dt&quot;&gt;h=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p=&lt;/span&gt;p)
&lt;span class=&quot;kw&quot;&gt;qplot&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:N, x)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8279/8962756154_f2a4fa4257_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;compute-the-posterior-after-marginalizing-over-r-and-sigma-parameters&quot;&gt;Compute the posterior after marginalizing over &lt;span class=&quot;math&quot;&gt;\(r\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(\sigma\)&lt;/span&gt; parameters:&lt;/h2&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[P(\beta | X) \]&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Mt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(t, beta) &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(x[t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;]) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(x[t]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;beta *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x[t]
beta_grid =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e-5&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;by=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e-3&lt;/span&gt;)

P_B.X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(beta_grid, function(beta){
  Mt_vec =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(N&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;), Mt, beta)
  sum_of_squares &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(Mt_vec^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
  square_of_sums &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(Mt_vec)^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;
  &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(N/&lt;span class=&quot;dv&quot;&gt;2-1&lt;/span&gt;) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(sum_of_squares -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;square_of_sums/(N&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;)) ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(N/&lt;span class=&quot;dv&quot;&gt;2-1&lt;/span&gt;) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gamma&lt;/span&gt;(N/&lt;span class=&quot;dv&quot;&gt;2-1&lt;/span&gt;)
  })

&lt;span class=&quot;kw&quot;&gt;qplot&lt;/span&gt;(beta_grid, -&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(P_B.X))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3800/8962756744_a8e8471f32_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Posterior mode is at:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;beta_grid[&lt;span class=&quot;kw&quot;&gt;which.min&lt;/span&gt;(P_B.X)]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 0.09801&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Estimating the Myers model on this data:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[X_{t+1} = Z_t \frac{r X_t^{\theta}}{1 + X_t^{\theta} / K}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;With &lt;span class=&quot;math&quot;&gt;\(Z_t\)&lt;/span&gt; lognormal, unit mean, std &lt;span class=&quot;math&quot;&gt;\(\sigma\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Marginal distribution over the remaining parameters is a 2D grid:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Mt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(t, theta, K) &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(x[t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;]) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;theta *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(x[t]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x[t] ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;theta /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K) 
theta_grid =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e-5&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)
K_grid =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e-5&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;30&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)

prob &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(theta, K){
  Mt_vec =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(N&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;), Mt, theta, K)
  sum_of_squares &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(Mt_vec^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
  square_of_sums &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(Mt_vec)^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;
  &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(N/&lt;span class=&quot;dv&quot;&gt;2-1&lt;/span&gt;) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(sum_of_squares -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;square_of_sums/(N&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;)) ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(N/&lt;span class=&quot;dv&quot;&gt;2-1&lt;/span&gt;) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gamma&lt;/span&gt;(N/&lt;span class=&quot;dv&quot;&gt;2-1&lt;/span&gt;)
}



P_theta_K.X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(theta_grid, function(theta)
                &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(K_grid, function(k) &lt;span class=&quot;kw&quot;&gt;prob&lt;/span&gt;(theta, k)))


&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;df =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(P_theta_K.X)
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(df) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;theta&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;lik&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(theta_grid[theta], K_grid[K], &lt;span class=&quot;dt&quot;&gt;z=&lt;/span&gt;-&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(lik))) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_contour&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;..level..), &lt;span class=&quot;dt&quot;&gt;binwidth=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm3.staticflickr.com/2806/8961561559_66a72a0ecc_o.png&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Sensitivity Of Gp Comparisons In Further Examples</title>
	 <link href="/2013/06/04/sensitivity-of-gp-comparisons-in-further-examples.html"/>
   <updated>2013-06-04T00:00:00+00:00</updated>
   <id>/06/04/sensitivity-of-gp-comparisons-in-further-examples</id>
   <content type="html">&lt;h1 id=&quot;comparison-of-nonparametric-bayesian-gaussian-process-estimates-to-standard-the-parametric-bayesian-approach&quot;&gt;Comparison of Nonparametric Bayesian Gaussian Process estimates to standard the Parametric Bayesian approach&lt;/h1&gt;
&lt;p&gt;Plotting and knitr options, (can generally be ignored)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(modeest)
posterior.mode &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) {
  &lt;span class=&quot;kw&quot;&gt;mlv&lt;/span&gt;(x, &lt;span class=&quot;dt&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;shorth&amp;quot;&lt;/span&gt;)$M
}&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;model-and-parameters&quot;&gt;Model and parameters&lt;/h3&gt;
&lt;p&gt;Uses the model derived in &lt;code&gt;citet(&amp;quot;10.1080/10236190412331335373&amp;quot;)&lt;/code&gt;, of a Ricker-like growth curve with an allee effect, defined in the pdgControl package,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;RickerAllee
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# approx, a li&amp;#39;l&amp;#39; less&lt;/span&gt;
allee &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# approx, a li&amp;#39;l&amp;#39; less&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Various parameters defining noise dynamics, grid, and policy costs.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;
sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.0&lt;/span&gt;
z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)
z_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;+(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;runif&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_m
x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;)
h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid
profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x,h) &lt;span class=&quot;kw&quot;&gt;pmin&lt;/span&gt;(x, h)
delta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;
OptTime &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# stationarity with unstable models is tricky thing&lt;/span&gt;
reward &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
xT &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
Xo &amp;lt;-&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;allee&lt;span class=&quot;fl&quot;&gt;+.5&lt;/span&gt;&lt;span class=&quot;co&quot;&gt;# observations start from&lt;/span&gt;
x0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K &lt;span class=&quot;co&quot;&gt;# simulation under policy starts from&lt;/span&gt;
Tobs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;sample-data&quot;&gt;Sample Data&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  &lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1234&lt;/span&gt;)
  &lt;span class=&quot;co&quot;&gt;#harvest &amp;lt;- sort(rep(seq(0, .5, length=7), 5))&lt;/span&gt;
  x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(Tobs)
  x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Xo
  nz &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
  for(t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(Tobs&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;))
    x[t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;z_g&lt;/span&gt;() *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x[t], &lt;span class=&quot;dt&quot;&gt;h=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p=&lt;/span&gt;p)
  obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,nz), 
                          &lt;span class=&quot;kw&quot;&gt;pmax&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,Tobs&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;), x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(Tobs&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;)])), 
                    &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,nz), 
                          x[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;:Tobs]))
raw_plot &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:Tobs, &lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x), &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time,x)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;()
raw_plot&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7406/8954616307_5e7a9d3e27_o.png&quot; alt=&quot;plot of chunk obs&quot; /&gt;&lt;figcaption&gt;plot of chunk obs&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;maximum-likelihood&quot;&gt;Maximum Likelihood&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;12345&lt;/span&gt;)
estf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(p){ 
    mu &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(obs$x,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,p)
    -&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;dlnorm&lt;/span&gt;(obs$y, &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(mu), p[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;]), &lt;span class=&quot;dt&quot;&gt;log=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
}
par &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]*&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;), 
         p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]*&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;), 
         p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;]*&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, .&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;), 
         sigma_g *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;))
o &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim&lt;/span&gt;(par, estf, &lt;span class=&quot;dt&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;L&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lower=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e-5&lt;/span&gt;,&lt;span class=&quot;fl&quot;&gt;1e-5&lt;/span&gt;,&lt;span class=&quot;fl&quot;&gt;1e-5&lt;/span&gt;,&lt;span class=&quot;fl&quot;&gt;1e-5&lt;/span&gt;))
f_alt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;f
p_alt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(o$par[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]), &lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(o$par[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]), &lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(o$par[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;]))
sigma_g_alt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(o$par[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;])

est &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;f =&lt;/span&gt; f_alt, &lt;span class=&quot;dt&quot;&gt;p =&lt;/span&gt; p_alt, &lt;span class=&quot;dt&quot;&gt;sigma_g =&lt;/span&gt; sigma_g_alt, &lt;span class=&quot;dt&quot;&gt;mloglik=&lt;/span&gt;o$value)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Mean predictions&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;true_means &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, f, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, p)
est_means &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, est$f, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, est$p)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;non-parametric-bayes&quot;&gt;Non-parametric Bayes&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;#inv gamma has mean b / (a - 1) (assuming a&amp;gt;1) and variance b ^ 2 / ((a - 2) * (a - 1) ^ 2) (assuming a&amp;gt;2)&lt;/span&gt;
s2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)  
d.p =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Estimate the Gaussian Process (nonparametric Bayesian fit)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_mcmc&lt;/span&gt;(obs$x, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;obs$y, &lt;span class=&quot;dt&quot;&gt;n=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;s2.p =&lt;/span&gt; s2.p, &lt;span class=&quot;dt&quot;&gt;d.p =&lt;/span&gt; d.p)
gp_dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_predict&lt;/span&gt;(gp, x_grid, &lt;span class=&quot;dt&quot;&gt;burnin=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e4&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;thin=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;300&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Show traces and posteriors against priors&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;plots &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;summary_gp_mcmc&lt;/span&gt;(gp, &lt;span class=&quot;dt&quot;&gt;burnin=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e4&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;thin=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;300&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;figure/process-noise-only-gp_traces_densities1.png&quot; alt=&quot;plot of chunk gp_traces_densities&quot; /&gt; &lt;img src=&quot;http://farm4.staticflickr.com/3687/8954616527_4c7cefe499_o.png&quot; alt=&quot;plot of chunk gp_traces_densities&quot; /&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;# Summarize the GP model&lt;/span&gt;
tgp_dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(  &lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x_grid, 
                 &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; gp_dat$E_Ef, 
                 &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; gp_dat$E_Ef -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(gp_dat$E_Vf), 
                 &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; gp_dat$E_Ef +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(gp_dat$E_Vf) )&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;parametric-bayesian-models&quot;&gt;Parametric Bayesian Models&lt;/h2&gt;
&lt;p&gt;We use the JAGS Gibbs sampler, a recent open source BUGS implementation with an R interface that works on most platforms. We initialize the usual MCMC parameters; see &lt;code&gt;?jags&lt;/code&gt; for details.&lt;/p&gt;
&lt;p&gt;All parametric Bayesian estimates use the following basic parameters for the JAGS MCMC:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x 
N &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x);
jags.data &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;N&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;y&amp;quot;&lt;/span&gt;)
n.chains &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;
n.iter &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e6&lt;/span&gt;
n.burnin &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10000&lt;/span&gt;)
n.thin &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;floor&lt;/span&gt;(n.chains *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(n.iter -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n.burnin)/&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;))
n.update &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We will use the same priors for process and observation noise in each model,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;stdQ_prior_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e-6&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)
stdR_prior_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e-6&lt;/span&gt;, .&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
stdQ_prior  &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(x, stdQ_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], stdQ_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
stdR_prior  &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(x, stdR_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], stdR_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;parametric-bayes-of-correct-allen-model&quot;&gt;Parametric Bayes of correct (Allen) model&lt;/h3&gt;
&lt;p&gt;We initiate the MCMC chain (&lt;code&gt;init_p&lt;/code&gt;) using the true values of the parameters &lt;code&gt;p&lt;/code&gt; from the simulation. While impossible in real data, this gives the parametric Bayesian approach the best chance at succeeding. &lt;code&gt;y&lt;/code&gt; is the timeseries (recall &lt;code&gt;obs&lt;/code&gt; has the &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(x_{t+1}\)&lt;/span&gt; pairs)&lt;/p&gt;
&lt;p&gt;The actual model is defined in a &lt;code&gt;model.file&lt;/code&gt; that contains an R function that is automatically translated into BUGS code by &lt;em&gt;R2WinBUGS&lt;/em&gt;. The file defines the priors and the model. We write the file from R as follows:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;K_prior_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;40.0&lt;/span&gt;)
logr0_prior_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;)
logtheta_prior_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;)

bugs.model &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sprintf&lt;/span&gt;(
&lt;span class=&quot;st&quot;&gt;&amp;quot;model{&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  K     ~ dunif(%s, %s)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  logr0    ~ dunif(%s, %s)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  logtheta ~ dunif(%s, %s)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  stdQ ~ dunif(%s, %s)&amp;quot;&lt;/span&gt;, 
  K_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], K_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;],
  logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;],
  logtheta_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logtheta_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;],
  stdQ_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], stdQ_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]),

  &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  iQ &amp;lt;- 1 / (stdQ * stdQ);&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  r0 &amp;lt;- exp(logr0)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  theta &amp;lt;- exp(logtheta)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  y[1] ~ dunif(0, 10)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  for(t in 1:(N-1)){&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    mu[t] &amp;lt;- y[t] * exp(r0 * (1 - y[t]/K)* (y[t] - theta) / K )&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    y[t+1] ~ dnorm(mu[t], iQ) &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  }&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;}&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;writeLines&lt;/span&gt;(bugs.model, &lt;span class=&quot;st&quot;&gt;&amp;quot;allen_process.bugs&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Write the priors into a list for later reference&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;K_prior     &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(x, K_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], K_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
logr0_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(x, logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
logtheta_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(x, logtheta_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logtheta_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
par_priors  &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; K_prior, &lt;span class=&quot;dt&quot;&gt;deviance =&lt;/span&gt; function(x) &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x, 
                    &lt;span class=&quot;dt&quot;&gt;logr0 =&lt;/span&gt; logr0_prior, &lt;span class=&quot;dt&quot;&gt;logtheta =&lt;/span&gt; logtheta_prior,
                    &lt;span class=&quot;dt&quot;&gt;stdQ =&lt;/span&gt; stdQ_prior)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We define which parameters to keep track of, and set the initial values of parameters in the transformed space used by the MCMC. We use logarithms to maintain strictly positive values of parameters where appropriate.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;jags.params=&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;stdQ&amp;quot;&lt;/span&gt;) &lt;span class=&quot;co&quot;&gt;# be sensible about the order here&lt;/span&gt;
jags.inits &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(){
  &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;=&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;),
       &lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;) ),
       &lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(  &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;) ), 
       &lt;span class=&quot;st&quot;&gt;&amp;quot;stdQ&amp;quot;&lt;/span&gt;=&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;( &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;)),
       &lt;span class=&quot;dt&quot;&gt;.RNG.name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;base::Wichmann-Hill&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;.RNG.seed=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;123&lt;/span&gt;)
}

&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1234&lt;/span&gt;)
&lt;span class=&quot;co&quot;&gt;# parallel refuses to take variables as arguments (e.g. n.iter = 1e5 works, but n.iter = n doesn&amp;#39;t)&lt;/span&gt;
allen_jags &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;do.call&lt;/span&gt;(jags.parallel, &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;jags.data, &lt;span class=&quot;dt&quot;&gt;inits=&lt;/span&gt;jags.inits, 
                                      jags.params, &lt;span class=&quot;dt&quot;&gt;n.chains=&lt;/span&gt;n.chains, 
                                      &lt;span class=&quot;dt&quot;&gt;n.iter=&lt;/span&gt;n.iter, &lt;span class=&quot;dt&quot;&gt;n.thin=&lt;/span&gt;n.thin, 
                                      &lt;span class=&quot;dt&quot;&gt;n.burnin=&lt;/span&gt;n.burnin, 
                                      &lt;span class=&quot;dt&quot;&gt;model.file=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;allen_process.bugs&amp;quot;&lt;/span&gt;))

&lt;span class=&quot;co&quot;&gt;# Run again iteratively if we haven&amp;#39;t met the Gelman-Rubin convergence criterion&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;recompile&lt;/span&gt;(allen_jags) &lt;span class=&quot;co&quot;&gt;# required for parallel&lt;/span&gt;
allen_jags &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;do.call&lt;/span&gt;(autojags, &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;object=&lt;/span&gt;allen_jags, &lt;span class=&quot;dt&quot;&gt;n.update=&lt;/span&gt;n.update, 
                                     &lt;span class=&quot;dt&quot;&gt;n.iter=&lt;/span&gt;n.iter, &lt;span class=&quot;dt&quot;&gt;n.thin =&lt;/span&gt; n.thin))&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;convergence-diagnostics-for-allen-model&quot;&gt;Convergence diagnostics for Allen model&lt;/h4&gt;
&lt;p&gt;R notes: this strips classes from the &lt;code&gt;mcmc.list&lt;/code&gt; object (so that we have list of matrices; objects that &lt;code&gt;reshape2::melt&lt;/code&gt; can handle intelligently), and then combines chains into one array. In this array each parameter is given its value at each sample from the posterior (index) for each chain.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;tmp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.mcmc&lt;/span&gt;(allen_jags), as.matrix) &lt;span class=&quot;co&quot;&gt;# strip classes the hard way...&lt;/span&gt;
allen_posteriors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(tmp, &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(tmp[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]])) 
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(allen_posteriors) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;variable&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;chain&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(allen_posteriors) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(index, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7432/8954617241_ee7c8ab2c6_o.png&quot; alt=&quot;plot of chunk allen-traces&quot; /&gt;&lt;figcaption&gt;plot of chunk allen-traces&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;allen_priors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(allen_posteriors, &lt;span class=&quot;st&quot;&gt;&amp;quot;variable&amp;quot;&lt;/span&gt;, function(dd){
    grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(dd$value), &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(dd$value), &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;) 
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; grid, &lt;span class=&quot;dt&quot;&gt;density =&lt;/span&gt; par_priors[[dd$variable[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]](grid))
})

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(allen_posteriors, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;geom=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;path&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;position=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;identity&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.7&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;allen_priors, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;density), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8128/8954617519_134c3da154_o.png&quot; alt=&quot;plot of chunk allen-posteriors&quot; /&gt;&lt;figcaption&gt;plot of chunk allen-posteriors&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Reshape the posterior parameter distribution data, transform back into original space, and calculate the mean parameters and mean function&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;A &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;allen_posteriors
A$index &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;A$index +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;A$chain *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(A$index) &lt;span class=&quot;co&quot;&gt;# Combine samples across chains by renumbering index &lt;/span&gt;
pardist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;acast&lt;/span&gt;(A, index ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable)
&lt;span class=&quot;co&quot;&gt;# pardist &amp;lt;- acast(allen_posteriors[2:3], 1:table(allen_posteriors$variable)[1] ~ variable) # NOT SURE WHY THIS FAILS &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# transform model parameters back first&lt;/span&gt;
pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;]) 
pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;])
&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(pardist)[&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(pardist)==&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &amp;quot;theta&amp;quot;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(pardist)[&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(pardist)==&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &amp;quot;r0&amp;quot;&lt;/span&gt;
bayes_coef &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(pardist,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, posterior.mode) 
bayes_pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(bayes_coef[&lt;span class=&quot;st&quot;&gt;&amp;quot;r0&amp;quot;&lt;/span&gt;], bayes_coef[&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;], bayes_coef[&lt;span class=&quot;st&quot;&gt;&amp;quot;theta&amp;quot;&lt;/span&gt;])) &lt;span class=&quot;co&quot;&gt;# parameters formatted for f&lt;/span&gt;
allen_f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x,h,p) &lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;RickerAllee&lt;/span&gt;(x,h, &lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(p[&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;r0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;theta&amp;quot;&lt;/span&gt;)])))
allen_means &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, f, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, bayes_pars)
bayes_pars&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 0.01929 7.72010 0.06654&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(pardist)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;         K deviance       r0    theta   stdQ
170 21.327    45.03 0.010484 3.826031 0.3737
171 14.261    45.02 0.029587 0.019707 0.4387
172  7.828    40.50 0.129248 2.769482 0.3795
173 29.450    45.66 0.044378 0.006615 0.4461
174 37.580    44.89 0.006334 1.252886 0.3766
175 20.168    45.05 0.033854 0.144171 0.4294&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;parametric-bayes-based-on-the-structurally-wrong-model-ricker&quot;&gt;Parametric Bayes based on the structurally wrong model (Ricker)&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;K_prior_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;40.0&lt;/span&gt;)
logr0_prior_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;)

bugs.model &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sprintf&lt;/span&gt;(
&lt;span class=&quot;st&quot;&gt;&amp;quot;model{&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  K    ~ dunif(%s, %s)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  logr0    ~ dunif(%s, %s)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  stdQ ~ dunif(%s, %s)&amp;quot;&lt;/span&gt;, 
  K_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], K_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;],
  logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;],
  stdQ_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], stdQ_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]),

  &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  iQ &amp;lt;- 1 / (stdQ * stdQ);&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  r0 &amp;lt;- exp(logr0)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  y[1] ~ dunif(0, 10)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  for(t in 1:(N-1)){&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    mu[t] &amp;lt;- y[t] * exp(r0 * (1 - y[t]/K) )&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    y[t+1] ~ dnorm(mu[t], iQ) &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  }&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;}&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;writeLines&lt;/span&gt;(bugs.model, &lt;span class=&quot;st&quot;&gt;&amp;quot;ricker_process.bugs&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Compute prior curves&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;K_prior     &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(x, K_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], K_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
logr0_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(x, logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
par_priors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; K_prior, &lt;span class=&quot;dt&quot;&gt;deviance =&lt;/span&gt; function(x) &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x, 
                   &lt;span class=&quot;dt&quot;&gt;logr0 =&lt;/span&gt; logr0_prior, &lt;span class=&quot;dt&quot;&gt;stdQ =&lt;/span&gt; stdQ_prior)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We define which parameters to keep track of, and set the initial values of parameters in the transformed space used by the MCMC. We use logarithms to maintain strictly positive values of parameters where appropriate.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;# Uniform priors on standard deviation terms&lt;/span&gt;
jags.params=&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;stdQ&amp;quot;&lt;/span&gt;)
jags.inits &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(){
  &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;=&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;),
       &lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;),
       &lt;span class=&quot;st&quot;&gt;&amp;quot;stdQ&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;),
       &lt;span class=&quot;dt&quot;&gt;.RNG.name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;base::Wichmann-Hill&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;.RNG.seed=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;123&lt;/span&gt;)
}
&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;12345&lt;/span&gt;) 
ricker_jags &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;do.call&lt;/span&gt;(jags.parallel, 
                       &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;jags.data, &lt;span class=&quot;dt&quot;&gt;inits=&lt;/span&gt;jags.inits, 
                            jags.params, &lt;span class=&quot;dt&quot;&gt;n.chains=&lt;/span&gt;n.chains, 
                            &lt;span class=&quot;dt&quot;&gt;n.iter=&lt;/span&gt;n.iter, &lt;span class=&quot;dt&quot;&gt;n.thin=&lt;/span&gt;n.thin, &lt;span class=&quot;dt&quot;&gt;n.burnin=&lt;/span&gt;n.burnin,
                            &lt;span class=&quot;dt&quot;&gt;model.file=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;ricker_process.bugs&amp;quot;&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;recompile&lt;/span&gt;(ricker_jags)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 251

Initializing model

Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 251

Initializing model

Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 251

Initializing model

Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 251

Initializing model

Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 251

Initializing model

Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 251

Initializing model&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;ricker_jags &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;do.call&lt;/span&gt;(autojags, 
                       &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;object=&lt;/span&gt;ricker_jags, &lt;span class=&quot;dt&quot;&gt;n.update=&lt;/span&gt;n.update, &lt;span class=&quot;dt&quot;&gt;n.iter=&lt;/span&gt;n.iter, 
                            &lt;span class=&quot;dt&quot;&gt;n.thin =&lt;/span&gt; n.thin, &lt;span class=&quot;dt&quot;&gt;progress.bar=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;convergence-diagnostics-for-parametric-bayes-ricker-model&quot;&gt;Convergence diagnostics for parametric bayes Ricker model&lt;/h4&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;tmp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.mcmc&lt;/span&gt;(ricker_jags), as.matrix) &lt;span class=&quot;co&quot;&gt;# strip classes the hard way...&lt;/span&gt;
ricker_posteriors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(tmp, &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(tmp[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]])) 
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(ricker_posteriors) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;variable&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;chain&amp;quot;&lt;/span&gt;)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(ricker_posteriors) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(index, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7354/8954617787_8743f7915f_o.png&quot; alt=&quot;plot of chunk ricker-traces&quot; /&gt;&lt;figcaption&gt;plot of chunk ricker-traces&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;ricker_priors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(ricker_posteriors, &lt;span class=&quot;st&quot;&gt;&amp;quot;variable&amp;quot;&lt;/span&gt;, function(dd){
    grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(dd$value), &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(dd$value), &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;) 
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; grid, &lt;span class=&quot;dt&quot;&gt;density =&lt;/span&gt; par_priors[[dd$variable[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]](grid))
})
&lt;span class=&quot;co&quot;&gt;# plot posterior distributions&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(ricker_posteriors, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;geom=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;path&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;position=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;identity&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.7&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;ricker_priors, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;density), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm6.staticflickr.com/5326/8954618029_911b481fc8_o.png&quot; alt=&quot;plot of chunk ricker-posteriors&quot; /&gt;&lt;figcaption&gt;plot of chunk ricker-posteriors&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Reshape posteriors data, transform back, calculate mode and corresponding function.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;A &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;ricker_posteriors
A$index &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;A$index +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;A$chain *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(A$index) &lt;span class=&quot;co&quot;&gt;# Combine samples across chains by renumbering index &lt;/span&gt;
ricker_pardist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;acast&lt;/span&gt;(A, index ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable)
ricker_pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(ricker_pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;]) &lt;span class=&quot;co&quot;&gt;# transform model parameters back first&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(ricker_pardist)[&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(ricker_pardist)==&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &amp;quot;r0&amp;quot;&lt;/span&gt;
bayes_coef &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(ricker_pardist,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, posterior.mode) &lt;span class=&quot;co&quot;&gt;# much better estimates from mode then mean&lt;/span&gt;
ricker_bayes_pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(bayes_coef[&lt;span class=&quot;st&quot;&gt;&amp;quot;r0&amp;quot;&lt;/span&gt;], bayes_coef[&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;]))

ricker_f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x,h,p){
  &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x, function(x){ 
    x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;pmax&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, x-h) 
    &lt;span class=&quot;kw&quot;&gt;pmax&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, x *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(p[&lt;span class=&quot;st&quot;&gt;&amp;quot;r0&amp;quot;&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;] )) )
  })
}
ricker_means &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, Ricker, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, ricker_bayes_pars[&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)])

&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(ricker_pardist)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;         K deviance       r0   stdQ
170 30.871    44.59 0.011138 0.4164
171 15.920    44.30 0.003492 0.4062
172  8.630    46.04 0.040291 0.4962
173  7.935    37.59 0.172355 0.3977
174  8.622    42.76 0.096497 0.3325
175  8.279    40.48 0.143866 0.4316&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;ricker_bayes_pars&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 0.008073 8.011228&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;myers-parametric-bayes&quot;&gt;Myers Parametric Bayes&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;logr0_prior_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;)
logtheta_prior_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;)
logK_prior_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;6.0&lt;/span&gt;)

bugs.model &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sprintf&lt;/span&gt;(
&lt;span class=&quot;st&quot;&gt;&amp;quot;model{&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  logr0    ~ dunif(%s, %s)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  logtheta    ~ dunif(%s, %s)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  logK    ~ dunif(%s, %s)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  stdQ ~ dunif(%s, %s)&amp;quot;&lt;/span&gt;, 
  logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;],
  logtheta_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logtheta_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;],
  logK_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logK_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;],
  stdQ_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], stdQ_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]),

  &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  iQ &amp;lt;- 1 / (stdQ * stdQ);&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  r0 &amp;lt;- exp(logr0)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  theta &amp;lt;- exp(logtheta)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  K &amp;lt;- exp(logK)&lt;/span&gt;

&lt;span class=&quot;st&quot;&gt;  y[1] ~ dunif(0, 10)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  for(t in 1:(N-1)){&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    mu[t] &amp;lt;- r0 * pow(abs(y[t]), theta) / (1 + pow(abs(y[t]), theta) / K)&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    y[t+1] ~ dnorm(mu[t], iQ) &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  }&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;}&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;writeLines&lt;/span&gt;(bugs.model, &lt;span class=&quot;st&quot;&gt;&amp;quot;myers_process.bugs&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;logK_prior     &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(x, logK_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logK_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
logr_prior     &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(x, logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logr0_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
logtheta_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(x, logtheta_prior_p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], logtheta_prior_p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
par_priors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;( &lt;span class=&quot;dt&quot;&gt;deviance =&lt;/span&gt; function(x) &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x, &lt;span class=&quot;dt&quot;&gt;logK =&lt;/span&gt; logK_prior,
                    &lt;span class=&quot;dt&quot;&gt;logr0 =&lt;/span&gt; logr_prior, &lt;span class=&quot;dt&quot;&gt;logtheta =&lt;/span&gt; logtheta_prior, 
                    &lt;span class=&quot;dt&quot;&gt;stdQ =&lt;/span&gt; stdQ_prior)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;jags.params=&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;logK&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;stdQ&amp;quot;&lt;/span&gt;)
jags.inits &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(){
  &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)), 
       &lt;span class=&quot;st&quot;&gt;&amp;quot;logK&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)),
       &lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt; =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)),  
       &lt;span class=&quot;st&quot;&gt;&amp;quot;stdQ&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;),
       &lt;span class=&quot;dt&quot;&gt;.RNG.name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;base::Wichmann-Hill&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;.RNG.seed=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;123&lt;/span&gt;)
}
&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;12345&lt;/span&gt;)
myers_jags &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;do.call&lt;/span&gt;(jags.parallel, 
                      &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;jags.data, &lt;span class=&quot;dt&quot;&gt;inits=&lt;/span&gt;jags.inits, jags.params, 
                           &lt;span class=&quot;dt&quot;&gt;n.chains=&lt;/span&gt;n.chains, &lt;span class=&quot;dt&quot;&gt;n.iter=&lt;/span&gt;n.iter, &lt;span class=&quot;dt&quot;&gt;n.thin=&lt;/span&gt;n.thin,
                           &lt;span class=&quot;dt&quot;&gt;n.burnin=&lt;/span&gt;n.burnin, &lt;span class=&quot;dt&quot;&gt;model.file=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;myers_process.bugs&amp;quot;&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;recompile&lt;/span&gt;(myers_jags)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 291

Initializing model

Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 291

Initializing model

Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 291

Initializing model

Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 291

Initializing model

Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 291

Initializing model

Compiling model graph
   Resolving undeclared variables
   Allocating nodes
   Graph Size: 291

Initializing model&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;myers_jags &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;do.call&lt;/span&gt;(autojags, 
                      &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(myers_jags, &lt;span class=&quot;dt&quot;&gt;n.update=&lt;/span&gt;n.update, &lt;span class=&quot;dt&quot;&gt;n.iter=&lt;/span&gt;n.iter, 
                           &lt;span class=&quot;dt&quot;&gt;n.thin =&lt;/span&gt; n.thin, &lt;span class=&quot;dt&quot;&gt;progress.bar=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Convergence diagnostics for parametric bayes&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;tmp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.mcmc&lt;/span&gt;(myers_jags), as.matrix) &lt;span class=&quot;co&quot;&gt;# strip classes the hard way...&lt;/span&gt;
myers_posteriors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(tmp, &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(tmp[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]])) 
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(myers_posteriors) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;variable&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;chain&amp;quot;&lt;/span&gt;)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(myers_posteriors) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(index, value)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8134/8955814112_feb5f6abb2_o.png&quot; alt=&quot;plot of chunk myers-traces&quot; /&gt;&lt;figcaption&gt;plot of chunk myers-traces&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;par_prior_curves &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(myers_posteriors, &lt;span class=&quot;st&quot;&gt;&amp;quot;variable&amp;quot;&lt;/span&gt;, function(dd){
    grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(dd$value), &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(dd$value), &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;) 
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; grid, &lt;span class=&quot;dt&quot;&gt;density =&lt;/span&gt; par_priors[[dd$variable[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]](grid))
})

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(myers_posteriors, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;geom=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;path&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;position=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;identity&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.7&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;par_prior_curves, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;density), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3772/8955814344_b654594c98_o.png&quot; alt=&quot;plot of chunk myers-posteriors&quot; /&gt;&lt;figcaption&gt;plot of chunk myers-posteriors&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;A &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;myers_posteriors
A$index &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;A$index +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;A$chain *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(A$index) &lt;span class=&quot;co&quot;&gt;# Combine samples across chains by renumbering index &lt;/span&gt;
myers_pardist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;acast&lt;/span&gt;(A, index ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable)
### myers_pardist &amp;lt;- acast(myers_posteriors[2:3], 1:table(myers_posteriors$variable) ~ variable) 
myers_pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logK&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(myers_pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logK&amp;quot;&lt;/span&gt;]) &lt;span class=&quot;co&quot;&gt;# transform model parameters back first&lt;/span&gt;
myers_pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(myers_pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;]) &lt;span class=&quot;co&quot;&gt;# transform model parameters back first&lt;/span&gt;
myers_pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(myers_pardist[,&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;]) &lt;span class=&quot;co&quot;&gt;# transform model parameters back first&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(myers_pardist)[&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(myers_pardist)==&lt;span class=&quot;st&quot;&gt;&amp;quot;logK&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &amp;quot;K&amp;quot;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(myers_pardist)[&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(myers_pardist)==&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &amp;quot;r0&amp;quot;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(myers_pardist)[&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(myers_pardist)==&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &amp;quot;theta&amp;quot;&lt;/span&gt;


bayes_coef &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(myers_pardist,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, posterior.mode) &lt;span class=&quot;co&quot;&gt;# much better estimates&lt;/span&gt;
myers_bayes_pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(bayes_coef[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;], bayes_coef[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;], bayes_coef[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]))
myers_means &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, Myer_harvest, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, myers_bayes_pars)
myers_f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x,h,p) &lt;span class=&quot;kw&quot;&gt;Myer_harvest&lt;/span&gt;(x, h, p[&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;r0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;theta&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;)])
&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(myers_pardist)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;    deviance      K      r0 theta   stdQ
170    37.69  32.42 0.32913 2.156 0.2818
171    32.99  51.72 0.20896 2.373 0.3612
172    40.26  52.83 0.22398 2.260 0.4654
173    32.80  76.54 0.12968 2.749 0.3711
174    32.81 216.04 0.04136 3.512 0.3907
175    32.55 330.07 0.02654 3.813 0.3118&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;myers_bayes_pars&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 31.8192  0.1065 34.4760&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;phase-space-diagram-of-the-expected-dynamics&quot;&gt;Phase-space diagram of the expected dynamics&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;models &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x_grid, 
                     &lt;span class=&quot;dt&quot;&gt;GP=&lt;/span&gt;tgp_dat$y, 
                     &lt;span class=&quot;dt&quot;&gt;True=&lt;/span&gt;true_means, 
                     &lt;span class=&quot;dt&quot;&gt;MLE=&lt;/span&gt;est_means, 
                     &lt;span class=&quot;dt&quot;&gt;Ricker=&lt;/span&gt;ricker_means, 
                     &lt;span class=&quot;dt&quot;&gt;Allen =&lt;/span&gt; allen_means,
                     &lt;span class=&quot;dt&quot;&gt;Myers =&lt;/span&gt; myers_means)
models &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(models, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;)

&lt;span class=&quot;co&quot;&gt;# some labels&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(models) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;method&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)

&lt;span class=&quot;co&quot;&gt;# labels for the colorkey too&lt;/span&gt;
model_names =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;GP&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;True&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;MLE&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Ricker&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Allen&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Myers&amp;quot;&lt;/span&gt;)
colorkey=cbPalette
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(colorkey) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;model_names &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;plot_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(tgp_dat) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x,y,&lt;span class=&quot;dt&quot;&gt;ymin=&lt;/span&gt;ymin,&lt;span class=&quot;dt&quot;&gt;ymax=&lt;/span&gt;ymax), &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;gray80&amp;quot;&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;models, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, value, &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;method), &lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;obs, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x,y), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;expression&lt;/span&gt;(X[t])) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;expression&lt;/span&gt;(X[t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;])) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;cbPalette) 
&lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(plot_gp)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3820/8954618731_61ebc877be_o.png&quot; alt=&quot;plot of chunk Figure1&quot; /&gt;&lt;figcaption&gt;plot of chunk Figure1&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;goodness-of-fit&quot;&gt;Goodness of fit&lt;/h2&gt;
&lt;p&gt;This shows only the mean predictions. For the Bayesian cases, we can instead loop over the posteriors of the parameters (or samples from the GP posterior) to get the distribution of such curves in each case.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(MASS)
step_ahead &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, f, p){
  h =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
  x_predict &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x, f, h, p)
  n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x_predict) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
  y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], x_predict[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:n])
  y
}
step_ahead_posteriors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x){
gp_f_at_obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_predict&lt;/span&gt;(gp, x, &lt;span class=&quot;dt&quot;&gt;burnin=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e4&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;thin=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;300&lt;/span&gt;)
df_post &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sample&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;), 
  function(i){
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x), &lt;span class=&quot;dt&quot;&gt;stock =&lt;/span&gt; x, 
                &lt;span class=&quot;dt&quot;&gt;GP =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;mvrnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, gp_f_at_obs$Ef_posterior[,i], gp_f_at_obs$Cf_posterior[[i]]),
                &lt;span class=&quot;dt&quot;&gt;True =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x,f,p),  
                &lt;span class=&quot;dt&quot;&gt;MLE =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x,f,est$p), 
                &lt;span class=&quot;dt&quot;&gt;Allen =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x, allen_f, pardist[i,]), 
                &lt;span class=&quot;dt&quot;&gt;Ricker =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x, ricker_f, ricker_pardist[i,]), 
                &lt;span class=&quot;dt&quot;&gt;Myers =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x, myers_f, myers_pardist[i,]))
  }), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;))
}

df_post &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;step_ahead_posteriors&lt;/span&gt;(x)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df_post) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, stock)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value, &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(L1,variable)), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey, &lt;span class=&quot;dt&quot;&gt;guide =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;guide_legend&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;override.aes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;))) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3792/8954618965_9b92db0892_o.png&quot; alt=&quot;plot of chunk Figureb&quot; /&gt;&lt;figcaption&gt;plot of chunk Figureb&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;optimal-policies-by-value-iteration&quot;&gt;Optimal policies by value iteration&lt;/h2&gt;
&lt;p&gt;Compute the optimal policy under each model using stochastic dynamic programming. We begin with the policy based on the GP model,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;MaxT =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# uses expected values from GP, instead of integrating over posterior&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#matrices_gp &amp;lt;- gp_transition_matrix(gp_dat$E_Ef, gp_dat$E_Vf, x_grid, h_grid)&lt;/span&gt;

&lt;span class=&quot;co&quot;&gt;# Integrate over posteriors &lt;/span&gt;
matrices_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_transition_matrix&lt;/span&gt;(gp_dat$Ef_posterior, gp_dat$Vf_posterior, x_grid, h_grid) 

&lt;span class=&quot;co&quot;&gt;# Solve the SDP using the GP-derived transition matrix&lt;/span&gt;
opt_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_gp, x_grid, h_grid, MaxT, xT, profit, delta, reward)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Determine the optimal policy based on the allen and MLE models&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;matrices_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f_transition_matrix&lt;/span&gt;(f, p, x_grid, h_grid, sigma_g)
opt_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_true, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;MaxT, xT, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;delta)

matrices_estimated &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f_transition_matrix&lt;/span&gt;(est$f, est$p, x_grid, h_grid, est$sigma_g)
opt_estimated &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_estimated, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;MaxT, xT, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;delta)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Determine the optimal policy based on Bayesian Allen model&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;matrices_allen &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;parameter_uncertainty_SDP&lt;/span&gt;(allen_f, x_grid, h_grid, pardist, &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;)
opt_allen &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_allen, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;MaxT, xT, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;delta)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Bayesian Ricker&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;matrices_ricker &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;parameter_uncertainty_SDP&lt;/span&gt;(ricker_f, x_grid, h_grid, &lt;span class=&quot;kw&quot;&gt;as.matrix&lt;/span&gt;(ricker_pardist), &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;)
opt_ricker &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_ricker, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;MaxT, xT, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;delta)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Bayesian Myers model&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;matrices_myers &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;parameter_uncertainty_SDP&lt;/span&gt;(myers_f, x_grid, h_grid, &lt;span class=&quot;kw&quot;&gt;as.matrix&lt;/span&gt;(myers_pardist), &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;)
myers_alt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_myers, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;MaxT, xT, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;delta)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Assemble the data&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;OPT =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;GP =&lt;/span&gt; opt_gp$D, &lt;span class=&quot;dt&quot;&gt;True =&lt;/span&gt; opt_true$D, &lt;span class=&quot;dt&quot;&gt;MLE =&lt;/span&gt; opt_estimated$D, &lt;span class=&quot;dt&quot;&gt;Ricker =&lt;/span&gt; opt_ricker$D, &lt;span class=&quot;dt&quot;&gt;Allen =&lt;/span&gt; opt_allen$D, &lt;span class=&quot;dt&quot;&gt;Myers =&lt;/span&gt; myers_alt$D)
colorkey=cbPalette
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(colorkey) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(OPT) &lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;graph-of-the-optimal-policies&quot;&gt;Graph of the optimal policies&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;policies &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stock=&lt;/span&gt;x_grid, &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(OPT, function(x) x_grid[x])), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(policies) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;method&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policies, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, stock -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;method)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1.2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;stock size&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;escapement&amp;quot;&lt;/span&gt;)  +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7348/8954619233_e007f06eab_o.png&quot; alt=&quot;plot of chunk Figure2&quot; /&gt;&lt;figcaption&gt;plot of chunk Figure2&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;simulate-100-realizations-managed-under-each-of-the-policies&quot;&gt;Simulate 100 realizations managed under each of the policies&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sims &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(OPT, function(D){
  &lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
  &lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, function(i) 
    &lt;span class=&quot;kw&quot;&gt;ForwardSimulate&lt;/span&gt;(f, p, x_grid, h_grid, x0, D, z_g, &lt;span class=&quot;dt&quot;&gt;profit=&lt;/span&gt;profit, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;OptTime)
  )
})

dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(sims, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(sims[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]][[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]))
dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(dat)
&lt;span class=&quot;kw&quot;&gt;setnames&lt;/span&gt;(dt, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;L1&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;L2&amp;quot;&lt;/span&gt;), &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;method&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;)) 
&lt;span class=&quot;co&quot;&gt;# Legend in original ordering please, not alphabetical: &lt;/span&gt;
dt$method =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;factor&lt;/span&gt;(dt$method, &lt;span class=&quot;dt&quot;&gt;ordered=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;levels=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(OPT))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dt) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(reps,method), &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;method), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey, &lt;span class=&quot;dt&quot;&gt;guide =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;guide_legend&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;override.aes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3808/8955815586_814e0c50d6_o.png&quot; alt=&quot;plot of chunk Figure3&quot; /&gt;&lt;figcaption&gt;plot of chunk Figure3&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[, &lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(profit), by=&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;method&amp;quot;&lt;/span&gt;)]
Profit[, &lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(V1), by=&lt;span class=&quot;st&quot;&gt;&amp;quot;method&amp;quot;&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;   method     V1
1:     GP 24.908
2:   True 26.532
3:    MLE  4.420
4: Ricker  8.363
5:  Allen  7.041
6:  Myers  7.347&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(Profit, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(V1)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_histogram&lt;/span&gt;() +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~method, &lt;span class=&quot;dt&quot;&gt;scales =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;free_y&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;guides&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;legend.position =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Total profit by replicate&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm3.staticflickr.com/2881/8954620001_2722b7d9d9_o.png&quot; alt=&quot;plot of chunk totalprofits&quot; /&gt;&lt;figcaption&gt;plot of chunk totalprofits&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;allen_deviance &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;posterior.mode&lt;/span&gt;(pardist[,&lt;span class=&quot;st&quot;&gt;&amp;#39;deviance&amp;#39;&lt;/span&gt;])
ricker_deviance &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;posterior.mode&lt;/span&gt;(ricker_pardist[,&lt;span class=&quot;st&quot;&gt;&amp;#39;deviance&amp;#39;&lt;/span&gt;])
myers_deviance &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;posterior.mode&lt;/span&gt;(myers_pardist[,&lt;span class=&quot;st&quot;&gt;&amp;#39;deviance&amp;#39;&lt;/span&gt;])
true_deviance &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;estf&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(p, sigma_g))
mle_deviance &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;estf&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(est$p, est$sigma_g))

&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;allen =&lt;/span&gt; allen_deviance, &lt;span class=&quot;dt&quot;&gt;ricker=&lt;/span&gt;ricker_deviance, &lt;span class=&quot;dt&quot;&gt;myers=&lt;/span&gt;myers_deviance, &lt;span class=&quot;dt&quot;&gt;true=&lt;/span&gt;true_deviance, &lt;span class=&quot;dt&quot;&gt;mle=&lt;/span&gt;mle_deviance)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;  allen  ricker   myers    true     mle 
  45.26   44.78   34.48  -61.08 -287.60 &lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Analytic Marginalizing For Posteriors</title>
	 <link href="/2013/06/04/analytic-marginalizing-for-posteriors.html"/>
   <updated>2013-06-04T00:00:00+00:00</updated>
   <id>/06/04/analytic-marginalizing-for-posteriors</id>
   <content type="html">&lt;p&gt;Consider the model&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ X_{t+1} = X_t r e^{-\beta X_t + \sigma Z_t } \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;with &lt;span class=&quot;math&quot;&gt;\(Z_t\)&lt;/span&gt; a unit normal random variable. The likelihood of the sequence of &lt;span class=&quot;math&quot;&gt;\(T\)&lt;/span&gt; observations of &lt;span class=&quot;math&quot;&gt;\(X\)&lt;/span&gt; under this model is thus&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[P(X | r, \beta, \sigma) = \frac{1}{\sqrt{2 \pi \sigma^2}^{T-1}} \exp\left(\frac{\sum_t^{T-1} \left(\log X_{t+1} - \log X_t - \log r + \beta X_t\right)^2 }{2 \sigma^2}\right) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;To integrate out &lt;span class=&quot;math&quot;&gt;\(r\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(P(X | \beta, \sigma) = \int P(X | r, \beta, \sigma ) P(r) dr\)&lt;/span&gt;, we’ll make this look like a Gaussian in &lt;span class=&quot;math&quot;&gt;\(\log r\)&lt;/span&gt; by completing the square; getting the square on the outside of the sum. First we collect all the other terms as the factor, &lt;span class=&quot;math&quot;&gt;\(M_t\)&lt;/span&gt;;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[M_t := \log X_{t+1} - \log X_t + \beta X_t\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Also define &lt;span class=&quot;math&quot;&gt;\(a = \log r\)&lt;/span&gt;, then after expanding the square inside the sum we have&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[\sum_t^{T-1} \left(\log r - M_t\right)^2 = \sum_t^{T-1} a^2 - 2 \sum_t^{T-1} a M_t + \sum_t^{T-1} M_t^2 \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;(using the linearity of the summation operator). Use the trick of adding and subtracting &lt;span class=&quot;math&quot;&gt;\(\left( \sum M_t \right)^2/(T-1)\)&lt;/span&gt;, to get:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ = -\sum_t^{T-1} M_t^2 -\frac{\left(\sum_t^{T-1} M_t\right)^2}{T-1}  + \frac{\left(\sum_t^{T-1} M_t\right)^2}{T-1} - 2 a \sum M_t + (T-1)a^2\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ =  -\sum_t^{T-1} M_t^2 -\frac{\left(\sum_t^{T-1} M_t\right)^2}{T-1}  +(T-1)\left( \left(\frac{\sum_t^{T-1} M_t}{T-1}\right)^2 - \frac{2 a \sum M_t}{T-1} + a^2\right)\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ = -\sum_t^{T-1} M_t^2 -\frac{\left(\sum_t^{T-1} M_t\right)^2}{T-1}  +(T-1)\left( \frac{\sum_t^{T-1} M_t}{T-1} - a\right)^2\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Returning this expression into our exponential in place of the sum of squares, we have&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[P(r, \beta, \sigma | X) = \frac{1}{\sqrt{2 \pi \sigma^2}^{T-1}} \exp\left(-\frac{(T-1)\left( \frac{\sum_t^{T-1} M_t}{T-1} - a\right)^2}{2 \sigma^2}\right) \exp\left(\frac{-\sum_t^{T-1} M_t^2 -\frac{\left(\sum_t^{T-1} M_t\right)^2}{T-1} }{2 \sigma^2}\right) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Note that the second &lt;span class=&quot;math&quot;&gt;\(\exp\)&lt;/span&gt; term does not depend on &lt;span class=&quot;math&quot;&gt;\(a\)&lt;/span&gt;. The remaining argument has Gaussian form in &lt;span class=&quot;math&quot;&gt;\(da\)&lt;/span&gt;, so after pulling out the constant terms we can easily integrate this over &lt;span class=&quot;math&quot;&gt;\(da\)&lt;/span&gt;. (Note that we have an implicit uniform prior on &lt;span class=&quot;math&quot;&gt;\(a\)&lt;/span&gt; here).&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \int \exp\left(\frac{-\left(\frac{\sum_t^{T-1} M_t}{T-1} - a \right)^2}{2 \sigma^1 (T-1)^{-1} } \right) d a  = \sqrt{\frac{2\pi\sigma^2}{T-1}}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;which we can combine with the remaining terms to recover&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \frac{1}{(T-1)\left(2 \pi \sigma^2 \right)^{T-2}} \exp\left(\frac{-\sum M_t^2 + \frac{\left(\sum M_t\right)^2}{T-1}}{2\sigma^2} \right)\]&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;marginalizing-over-sigma&quot;&gt;marginalizing over &lt;span class=&quot;math&quot;&gt;\(\sigma\)&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;Now that we have effectively eliminated the parameter &lt;span class=&quot;math&quot;&gt;\(r\)&lt;/span&gt; from our posterior calculation, we wish to also integrate out the second parameter, &lt;span class=&quot;math&quot;&gt;\(\sigma\)&lt;/span&gt;. Once again we can “integrate by analogy;” the expression above in the variable &lt;span class=&quot;math&quot;&gt;\(\sigma^2\)&lt;/span&gt; looks like a Gamma distribution,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \int x^{\alpha - 1} e^{-\beta x} dx = \frac{\beta^{\alpha}}{\Gamma(\alpha)} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Where we take&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \alpha = T/2\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \beta = \frac{1}{2} \left( \sum M_t^2 - \frac{ \left( \sum M_t \right)^2}{T - 1}\right) \]&lt;/span&gt;,&lt;/p&gt;
&lt;p&gt;leaving us with&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[\frac{1}{(T-1)\sqrt{2 \pi}^{T-2} } \frac{\tfrac{1}{2}^{T/2} \left( \sum M_t^2 - \frac{ \left( \sum M_t \right)^2}{T - 1}\right)^{T/2}}{\Gamma(T/2)} \]&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;additional-recruitment-functions&quot;&gt;Additional recruitment functions&lt;/h2&gt;
&lt;p&gt;The above derivation can be followed identically for the three-parameter recruitment functions I refer to as the Allen and Myers models after an appropriate choice of &lt;span class=&quot;math&quot;&gt;\(M_t\)&lt;/span&gt;. In both the Ricker and Allen models we must first reparamaterize the models to isolate the &lt;span class=&quot;math&quot;&gt;\(\alpha\)&lt;/span&gt; term correctly.&lt;/p&gt;
&lt;h4 id=&quot;ricker&quot;&gt;Ricker&lt;/h4&gt;
&lt;p&gt;The original parameterization&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ X_{t+1} = X_t e^{r \left( 1 - \frac{X_t}{K}\right)}\]&lt;/span&gt; does not partition into the form above. Taking &lt;span class=&quot;math&quot;&gt;\(\beta = \tfrac{r}{K}\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(a = r\)&lt;/span&gt;, we can write &lt;span class=&quot;math&quot;&gt;\(M_t\)&lt;/span&gt; as above,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[M_t := \log X_{t+1} - \log X_t + \beta X_t\]&lt;/span&gt;&lt;/p&gt;
&lt;h4 id=&quot;myers&quot;&gt;Myers&lt;/h4&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ X_{t+1} = \frac{ r X_t^{\theta} }{1 + \frac{X_t^{\theta}}{K} } Z_t\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;For &lt;span class=&quot;math&quot;&gt;\(Z_t\)&lt;/span&gt; lognormal with log-mean zero and log-standard-deviation &lt;span class=&quot;math&quot;&gt;\(\sigma\)&lt;/span&gt;, The log-likelihood takes the form&lt;/p&gt;
&lt;p&gt;and thus we can write &lt;span class=&quot;math&quot;&gt;\(M_t\)&lt;/span&gt; as&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[M_t := \log X_{t+1} - \theta \log X_t + \log\left(1 +  \frac{X_t^{\theta}}{K} \right)\]&lt;/span&gt;&lt;/p&gt;
&lt;h4 id=&quot;allen&quot;&gt;Allen&lt;/h4&gt;
&lt;p&gt;The original parameterization&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ X_{t+1} = Z_t X_t e^{r \left( 1 - \frac{X_t}{K} \right) \frac{\left(X_t - \theta\right)}{K}} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;does not let us isolate an additive constant (log-mean term) as we did in the example above. Writing the argument of the exponent in standard quadratic form,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ X_{t+1} = Z_t X_t e^{c + b X+t + a X_t^2} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Where&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[c = \tfrac{-rC}{K}\]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[b = \tfrac{r}{K}\left(\tfrac{C}{K} + 1\right)\]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[a = \tfrac{r}{K^2}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;then&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[M_t := \log X_{t+1} - \log X_t - b X_t + a X_t^2 \]&lt;/span&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>DOI != citable</title>
	 <link href="/2013/06/03/DOI-citable.html"/>
   <updated>2013-06-03T00:00:00+00:00</updated>
   <id>/06/03/DOI-citable</id>
   <content type="html">&lt;p&gt;I feel I see this kind of comment almost daily:&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-partner=&quot;tweetdeck&quot;&gt;
&lt;p&gt;
Is there a way to obtain DOI for a &lt;a href=&quot;https://twitter.com/github&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;github&quot;&gt;@github&lt;/span&gt;&lt;/a&gt; repository? (for citing &lt;a href=&quot;https://twitter.com/search?q=%23opensource&amp;amp;src=hash&quot;&gt;#opensource&lt;/a&gt; software packages, similar to &lt;a href=&quot;https://twitter.com/figshare&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;figshare&quot;&gt;@figshare&lt;/span&gt;&lt;/a&gt; objects) &lt;a href=&quot;https://twitter.com/search?q=%23git&amp;amp;src=hash&quot;&gt;#git&lt;/a&gt;
&lt;/p&gt;
— Ahmed Moustafa (&lt;span class=&quot;citation&quot; data-cites=&quot;AhmedMoustafa&quot;&gt;@AhmedMoustafa&lt;/span&gt;) &lt;a href=&quot;https://twitter.com/AhmedMoustafa/statuses/339727912896954369&quot;&gt;May 29, 2013&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;p&gt;Again and again, researchers suggest that DOI to makes something “citable”. And this &lt;a href=&quot;https://twitter.com/cboettig/status/337986074624282624&quot;&gt;frustrates me&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Don’t get me wrong. I love DOIs, and I love CrossRef. And I bang on the table when I have some old journal article that doesn’t yet have a DOI. I use DOIs every day in many ways. I use CrossRef’s APIs all the time to draw in metadata for citations in my notebook (through my &lt;a href=&quot;http://github.com/cboettig/knitcitations&quot;&gt;knitcitations&lt;/a&gt; package), and to import metadata into my reference manager, Mendeley. I’ve written my own implementations in R and ruby, and keep an eye on their exciting new tools on the &lt;a href=&quot;https://github.com/crossref&quot;&gt;Crossref Github page&lt;/a&gt;. I wrote to bibsonomy when I realized they were not using the CrossRef API to look up metadata by DOIs, and they have now implemented this feature. I use DOIs to look up papers I’ve come across, and to share content I am reading. (Crossref’s &lt;a href=&quot;http://shortdoi.org/&quot;&gt;DOI shortener&lt;/a&gt; is great for this). I even use DOI-based links to &lt;a href=&quot;http://carlboettiger.info/2013/02/22/semantic-citations-for-the-notebook-and-knitr.html&quot;&gt;embed semantic information&lt;/a&gt; into links and citations of articles.&lt;/p&gt;
&lt;p&gt;But I still have no idea what researchers mean when they suggest that this makes something &lt;em&gt;citable&lt;/em&gt;.&lt;/p&gt;
&lt;h3 id=&quot;some-background-on-dois&quot;&gt;Some background on DOIs&lt;/h3&gt;
&lt;p&gt;At its heart, a DOI is a very simple concept. It is a “permanent identifier”. All this means is that is is really just a URL redirect. Type http://dx.doi.org/mnn into any browser and get redirected to where the article actually lives. Why does that make it permanent? Because if the journal decides to change their URL structure, the DOI’s redirect can just be mapped to the new address and voila, it still works. That is, a DOI is simply a tool to fight &lt;a href=&quot;https://en.wikipedia.org/wiki/Link_rot&quot;&gt;link-rot&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;So you might ask, why does the ability to remap the address have anything to do with being “permanent?” It doesn’t, really. The permanence comes not so much from the technology as from the social contract that goes with it. As CrossRef’s &lt;a href=&quot;http://blogs.plos.org/mfenner/2009/02/17/interview_with_geoffrey_bilder/&quot;&gt;Geoffery Bilder eloquently explains&lt;/a&gt;, a publisher can only receive DOIs if they promise to keep these redirects up-to-date. A publisher who fails to maintain this responsibility would presumably lose their right to receive DOIs. A brilliant, simple, social incentive.&lt;/p&gt;
&lt;p&gt;This still does not guarantee permanence – e.g. what would happen to the content if the publisher disappears. That problem is not addressed by the DOI technology itself, but by a robust backup archiving solution, such as &lt;a href=&quot;http://clockss.org&quot;&gt;CLOCKSS&lt;/a&gt;, which provides a geo-politically distributed network of backup copies for many journals. Again the social contract comes into play – presumably CrossRef would not provide a publisher with DOIs if they did not have such a robust archival solution in place.&lt;/p&gt;
&lt;p&gt;So far we have seen two crucial functions of the DOI – as a permanent identifier that can be used to reach the content despite link rot, and as an incentive to maintain good archival backups of the content and the links to it.&lt;/p&gt;
&lt;h3 id=&quot;what-do-we-mean-by-citations-anyway&quot;&gt;What do we mean by citations, anyway?&lt;/h3&gt;
&lt;p&gt;So what does this have to do with being citable? Obviously these are nice properties to have for things we cite – but they are by no means a requirement. (As &lt;a href=&quot;https://twitter.com/noamross/status/337987521243918337&quot;&gt;Noam Ross observes&lt;/a&gt;, try finding a permanent identifier for “Personal Communication”). Books, reports, and other grey literature frequently appear in citations, as do links to websites. MLA even has guidelines on the proper format to &lt;a href=&quot;http://www.mla.org/style/handbook_faq/cite_a_tweet&quot;&gt;cite a tweet&lt;/a&gt; (which, incidentally, come closer to having a permanent identifier and an archival strategy than most other things in this list). So what do we mean by citable anyway?&lt;/p&gt;
&lt;p&gt;But what about the reference list? While a publisher may be just fine including some link to your software, is it really cited if it isn’t in the reference list? Journals restrict what appears in the reference list because these references are indexed by the infamous citation counters like Thompson-Reuters. (A frequent complaint is that many journals do not similarly index citations appearing in the reference list of the supplementary materials, making it difficult or impossible to give appropriate attribution to large numbers of data providers, for instance). Does having a DOI address this problem?&lt;/p&gt;
&lt;h4 id=&quot;citation-counts-in-dois&quot;&gt;Citation counts in DOIs&lt;/h4&gt;
&lt;p&gt;Counting citations depends on who is counting them. The most well-known is Thompson-Reuters, which has their own process for deciding what gets counted (based on publisher), so no guarantee there. Meanwhile Google Scholar counts anything meeting it’s &lt;a href=&quot;http://carlboettiger.info/2012/11/23/citing-lab-notebook-entries.html&quot;&gt;indexing requirements &amp;amp; arbitrary selection&lt;/a&gt;. I have recently learned that CrossRef just launched it’s own &lt;a href=&quot;https://github.com/articlemetrics/alm/wiki/Crossref&quot;&gt;internal citation counting&lt;/a&gt;, which is available from the CrossRef metadata (totals only for the public, publishers can resolve which articles did the citing…). However, most proposals to make some alternative research product “citable” by giving it a DOI use DataCite DOIs (e.g. fig&lt;strong&gt;share&lt;/strong&gt;, PeerJ Preprints), which lag behind in this feature. Moving the control of citation data beyond the grasp of particular publishing companies like TR is undoubtedly an important step forward. The &lt;a href=&quot;http://www.jisc.ac.uk/whatwedo/programmes/inf11/jiscexpo/jiscopencitation.aspx&quot;&gt;Open Citation Project&lt;/a&gt; is a more comprehensive, if very young, move in this direct. (Hat tip to Martin Fenner for explaining CrossRef citations to me).&lt;/p&gt;
&lt;h3 id=&quot;additional-metadata&quot;&gt;Additional Metadata&lt;/h3&gt;
&lt;p&gt;In addition to resolving links, DOI providers also serve a rich collection of metadata about the publication that can be &lt;a href=&quot;http://www.crosscite.org/cn/&quot;&gt;queried by DOI&lt;/a&gt; or by &lt;a href=&quot;https://github.com/CrossRef/cr-search&quot;&gt;other elements&lt;/a&gt; like author and title. Rich semantic formats and disambiguation of author names by connections to ORCID IDs are among the many advantages of this. Because many of these tools are publicly accessible by through their APIs, it is easy for other developers to build services upon them.&lt;/p&gt;
&lt;h2 id=&quot;conclusions&quot;&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;While DOI providers have done an excellent job in ensuring persistent URLs, archived content, and valuable metadata, these things are largely the product of the social contract between publisher and the DOI provider. It is not possible for an author or organization to simply “get DOIs” for all their content. But it is not the only way to provide these features, either. While I understand the value in providing a simple and reliable way to encapsulate each of these concepts as “has a DOI,” it also appears to put these features beyond the reach of individual researchers. If issues of persistent URLs, archived content, and rich metadata tools are always reduced to “has a DOI,” publishers become the only path to achieve these ends. On the contrary, a rich collection of tools is available to researchers.&lt;/p&gt;
&lt;p&gt;So what do we mean when we say a DOI makes something ‘citable?’ If this is shorthand for the properties we would want in something citable: persistent identifier, archival content, machine-readable metadata, than we should start to recognize other things that share these features. Further innovation requires valuing the features the DOI provides, not simply a “brand name” researchers recognize.&lt;/p&gt;
&lt;h2 id=&quot;alternative-tools&quot;&gt;Alternative tools&lt;/h2&gt;
&lt;p&gt;In a &lt;a href=&quot;http://purl.org/cboettig/2013/05/31/notebook-features-digital-archiving&quot;&gt;recent post&lt;/a&gt; in a series on technical features of my open notebook, I discuss some of the tools available to address these challenges. In particular:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The use of &lt;a href=&quot;http://en.wikipedia.org/wiki/Persistent_uniform_resource_locator&quot;&gt;PURLs&lt;/a&gt; for persistent identifiers&lt;/li&gt;
&lt;li&gt;Git for archival redundancy&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://greycite.knowledgeblog.org&quot;&gt;Greycite&lt;/a&gt; for metadata extraction&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Of course, if you ever need a DOI for a research product, there is always &lt;a href=&quot;http://figshare.com&quot;&gt;figshare&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Admb Basic Example</title>
	 <link href="/2013/06/03/ADMB-basic-example.html"/>
   <updated>2013-06-03T00:00:00+00:00</updated>
   <id>/06/03/ADMB-basic-example</id>
   <content type="html">&lt;p&gt;After a few &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commits/b4576cfc0b5a0c87701348976875c8657f0fd048/inst/examples/admb-example.md&quot;&gt;iterations&lt;/a&gt; I have a working minimal example (below). Hoping that ADMB is a bit more robust than vanilla &lt;code&gt;optim&lt;/code&gt; out of R as I loop over data sets for the sensitivity analysis (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/32&quot;&gt;#32&lt;/a&gt;). Does not seem to hold in simple example here, not sure why.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;These notes correspond to script &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/84a1025854987ef659b4ef17e172933d72547f6d/inst/examples/admb-example.md&quot;&gt;84a102/admb-example.md&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;learning-admb&quot;&gt;Learning ADMB&lt;/h1&gt;
&lt;p&gt;Plotting and knitr options, (can generally be ignored)&lt;/p&gt;
&lt;h3 id=&quot;model-and-parameters&quot;&gt;Model and parameters&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x,h,p)  x *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(x -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;]) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] ) 
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# approx, a li&amp;#39;l&amp;#39; less&lt;/span&gt;
Xo &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# approx, a li&amp;#39;l&amp;#39; less&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Various parameters defining noise dynamics, grid, and policy costs.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;
z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)
x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;)
Tobs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;123&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;sample-data&quot;&gt;Sample Data&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(Tobs)
x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Xo
for(t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(Tobs&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;))
  x[t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;z_g&lt;/span&gt;() *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x[t], &lt;span class=&quot;dt&quot;&gt;h=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p=&lt;/span&gt;p)
&lt;span class=&quot;kw&quot;&gt;qplot&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:Tobs, x)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm3.staticflickr.com/2807/8956942302_0d7d47ea49_o.png&quot; alt=&quot;plot of chunk obs&quot; /&gt;&lt;figcaption&gt;plot of chunk obs&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;maximum-likelihood-by-hand&quot;&gt;Maximum Likelihood “by hand”&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;STABLIZE =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e-10&lt;/span&gt;
n =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x)
mloglik &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(pars){ 
  r =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pars[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]; k =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pars[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]; c =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pars[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;]; s =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pars[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;];
  mu =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(x+STABLIZE) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;( r *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(k+STABLIZE)) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(x -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;c) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(k +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;STABLIZE));
  mu =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;pmin&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e100&lt;/span&gt;, mu) &lt;span class=&quot;co&quot;&gt;# avoid infinite values &lt;/span&gt;
  f =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pi) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(s +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;STABLIZE) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(x -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;mu +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;STABLIZE)^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;/&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(s +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;STABLIZE)^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;;

  f
  }&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Starting from the true values we mostly just shrink the noise parameter:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;init &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(p, sigma_g)
&lt;span class=&quot;kw&quot;&gt;mloglik&lt;/span&gt;(init) &lt;span class=&quot;co&quot;&gt;#true minus loglik&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] -35.72&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;o &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim&lt;/span&gt;(init, mloglik, &lt;span class=&quot;dt&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;L&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lower=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e-5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;upper=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e5&lt;/span&gt;)
o$value&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] -247.6&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;o$par&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 0.9967297 9.9813554 5.1742699 0.0008183&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;While starting from arbitrary values we still find the optim.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;init &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)  
init &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(p, sigma_g)
&lt;span class=&quot;kw&quot;&gt;mloglik&lt;/span&gt;(init) &lt;span class=&quot;co&quot;&gt;#true minus loglik&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] -35.72&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;o &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim&lt;/span&gt;(init, mloglik, &lt;span class=&quot;dt&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;L&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lower=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e-5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;upper=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e5&lt;/span&gt;)
o$value&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] -247.6&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;o$par&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 0.9967297 9.9813554 5.1742699 0.0008183&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Okay, now lets try admb. We use R2admb which is just a convenient way to write our data and parameters into an admb file.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;# install_github(&amp;quot;R2admb&amp;quot;, &amp;quot;bbolker&amp;quot;, subdir=&amp;quot;R2admb&amp;quot;) # dev version&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(R2admb)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;admb-definition&quot;&gt;ADMB definition&lt;/h2&gt;
&lt;p&gt;We still need to define the model using ADMB notation in the procedure section. This is mostly like R or C++, with the exception of special functions like &lt;code&gt;square&lt;/code&gt; in place of &lt;code&gt;^2&lt;/code&gt;, &lt;code&gt;norm2&lt;/code&gt; for the sum of squares, and &lt;code&gt;elem_prod&lt;/code&gt; istead of &lt;code&gt;*&lt;/code&gt; for the element-wise product of two arrays. The constant &lt;code&gt;pi&lt;/code&gt; is given as &lt;code&gt;M_PI&lt;/code&gt;, as typical of C/C++ libraries. Where these other functions are defined I’m not sure, but some useful guides to &lt;a href=&quot;http://fish.washington.edu/research/MPAM/resources/ADMB_Minte-Vera.pdf&quot;&gt;ADMB vector/matrix operations&lt;/a&gt; or an (undefined) list of &lt;a href=&quot;http://www.admb-project.org/developers/contribute-documentation/functions/keywords.txt/view&quot;&gt;keywords&lt;/a&gt;…&lt;/p&gt;
&lt;p&gt;The equivalent model&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;model &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;PARAMETER_SECTION&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  vector mu(1,n) // per capita mort prob&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;      &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;PROCEDURE_SECTION&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  mu = log(x) + r * elem_prod((1 - x / k), (x - c) / k);&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  f = 0.5 * n * log(2 * M_PI) + n * log(s) + 0.5 * norm2(x - exp(mu)) / square(s);&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;writeLines&lt;/span&gt;(model, &lt;span class=&quot;st&quot;&gt;&amp;quot;model.tpl&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Without explicit handling of the overflow errors, ADMB does not give us reliable estimates with arbitrary starting conditions&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;setup_admb&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;/var/admb&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] &amp;quot;/var/admb&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x)
params &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;k =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;c =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;s =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) ## starting parameters
bounds &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e-10&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1e3&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;k=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e-10&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1e3&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;c=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e-10&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1e3&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;s =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e-5&lt;/span&gt;,&lt;span class=&quot;fl&quot;&gt;1e3&lt;/span&gt;)) ## bounds
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;n =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;nrow&lt;/span&gt;(df)), df)
m1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;do_admb&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;model&amp;quot;&lt;/span&gt;,
              &lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; dat,
              &lt;span class=&quot;dt&quot;&gt;params =&lt;/span&gt; params,
              &lt;span class=&quot;dt&quot;&gt;bounds =&lt;/span&gt; bounds,
              &lt;span class=&quot;dt&quot;&gt;run.opts =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;run.control&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;checkparam=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;write&amp;quot;&lt;/span&gt;,
                                     &lt;span class=&quot;dt&quot;&gt;checkdata=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;write&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;clean=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;))
m1&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Model file: model_gen 
Negative log-likelihood: 146.5 
Coefficients:
     r      k      c      s 
0.9992 1.0023 1.0004 9.4369 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But does fine with good starting values. Hmm.. thought that was supposed to be the other way around…&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;params &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;k =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;c =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;s =&lt;/span&gt; .&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) ## starting parameters

m1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;do_admb&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;model&amp;quot;&lt;/span&gt;,
              &lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; dat,
              &lt;span class=&quot;dt&quot;&gt;params =&lt;/span&gt; params,
              &lt;span class=&quot;dt&quot;&gt;bounds =&lt;/span&gt; bounds,
              &lt;span class=&quot;dt&quot;&gt;run.opts =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;run.control&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;checkparam=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;write&amp;quot;&lt;/span&gt;,
                                     &lt;span class=&quot;dt&quot;&gt;checkdata=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;write&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Warning: running command &amp;#39;./model_gen &amp;gt; model_gen.out&amp;#39; had status 1&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;m1&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Model file: model_gen 
Negative log-likelihood: -423.8 
Coefficients:
        r         k         c         s 
2.025e-10 9.498e+00 1.051e+01 1.000e-05 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which finds a better optim (though substantailly overfit in reality)&lt;/p&gt;
&lt;p&gt;Hans suggests adding an error term in the function definitions rather than in limiting the bounds or log transforming the variables:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The most common plase where this goes wrong is 1/0, log(0), sqrt(0), pow(0,1) etc. Your suggestion is OK, but usually I prefer to put in log(1e-10+my_expression), sqrt(1e-10+my_expression), pow(1e-10+my_expression,1)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Finished off posts regarding DOIs and digital archiving. A shorter version appears in my answer to &lt;a href=&quot;http://opendata.stackexchange.com/questions/694/preservation-of-blog-posts-articles-and-essays/719#719&quot;&gt;opendata.stackexchange&lt;/a&gt; on blog archiving.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Interesting discussion on using PURL redirects with SHA hash to link to repositories. For instance, the commit matching our arXiv submission of the ews-review paper is found at &lt;a href=&quot;http://purl.org/cboettig/ews-review/33dfb58e24ceb5861dad7cf756cffe2c5d66a655&quot;&gt;cboettig/ews-review/33dfb58e24ceb5861dad7cf756cffe2c5d66a655&lt;/a&gt;. If the hash shown in the PURL doesn’t match the one at the repository then we know something has gone wrong, since it is impossible to change the contents without changing the hash. This gives us a version-stable identifier that can always be remapped to this commit, even if Github should disappear. Of course nothing guarentees that the PURL maintainer / package author does this updating, but in principle the system is more robust than simply linking to Github.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In other news, I should add some &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/94&quot;&gt;automatic link checking, #94&lt;/a&gt; to the notebook.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notebook features: digital archiving</title>
	 <link href="/2013/05/31/notebook-features-digital-archiving.html"/>
   <updated>2013-05-31T00:00:00+00:00</updated>
   <id>/05/31/notebook-features-digital-archiving</id>
   <content type="html">&lt;p&gt;Note: this entry is part of a &lt;a href=&quot;http://carlboettiger.info/2013/04/26/notebook-features-introduction.html&quot;&gt;series of posts&lt;/a&gt; which explain some of the technical features of my lab notebook.&lt;/p&gt;
&lt;p&gt;Archival preservation of digital scholarly content is an important challenge throughout the research community. As the notebook is the permanent record of my regular scholarly endeavors, this provides the opportunity to experiment with tools and techniques for digital archiving while also better preserving the notebook. In the experimental spirit that drives all my exploration here, I am testing several ways to accomplish this. In so doing, I learn which approaches are easiest to implement, to use, and gather feedback from, while also hedging my bets in the event that any given strategy should fail.&lt;/p&gt;
&lt;p&gt;Archiving digital content involves two fundamental challenges that can be difficult to satisfy simultaneously: providing a robust backup copy of the &lt;em&gt;content&lt;/em&gt;, and providing a consistent location (such as a URL) where the content can be retrieved.&lt;/p&gt;
&lt;h2 id=&quot;a-custom-domain&quot;&gt;A custom domain&lt;/h2&gt;
&lt;p&gt;The simplest archival measure employed in the notebook comes from hosting through my own domain, &lt;a href=&quot;http://carlboettiger.info&quot;&gt;carlboettiger.info&lt;/a&gt; rather than an external server. By controlling the domain structure myself, I am not tied to a University server that can be altered by an IT department without my knowledge, thereby breaking my links. When I choose to move platforms, as I did in migrating from &lt;a href=&quot;/2012/09/19/migrating-from-wordpress-to-jekyll.html&quot;&gt;Wordpress to Jekyll&lt;/a&gt;, I could ensure that links would be appropriately mapped. This was not the case when I started my open notebook on the OpenWetWare platform, since links are all mapped to the &lt;a href=&quot;http://openwetware.org&quot;&gt;openwetware.org&lt;/a&gt; domain which I obviously cannot control, even though I could at least migrate my content. &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/8481569132142c850e585a2fc8c12a671527cd4f/_plugins/redirects.rb&quot;&gt;HTML redirects&lt;/a&gt; make sure links still resolve when I change structure (e.g. &lt;a href=&quot;/archives/211&quot;&gt;carlboettiger.info/archives/211&lt;/a&gt;). I don’t have to worry about moving my domain when I change institutions, and can seamlessly migrate to a different server or DNS provider to get better rates or uptime performance.&lt;/p&gt;
&lt;p&gt;Of course these advantages are also the greatest weaknesses of this approach – they all depend entirely on me. I could make or forget to make any number of changes that could cause this all to break. Time has shown that even the best-intentioned researchers are not the best curators of there own data, and no doubt I am no exception. How can the content and its identifying addresses outlive me or my interest in it?&lt;/p&gt;
&lt;h2 id=&quot;purls-preserving-identifiers&quot;&gt;PURLs: preserving identifiers&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://purl.org&quot;&gt;PURLs&lt;/a&gt;, or Persistent Uniform Resource Locators, provide a DOI-like mechanism for addressing the challenge of link-rot. As &lt;a href=&quot;http://blogs.plos.org/mfenner/2009/02/17/interview_with_geoffrey_bilder/&quot;&gt;Geoffrey Bilder eloquently argues&lt;/a&gt;, the technological solution is quite simple, the real challenge lies on the social side of the implementation – a social contract that promises content providers will maintain their identifiers if they want to continue to receive identifiers. Though users must register to be able to create PURLs, PURL does not provide such enforcement.&lt;/p&gt;
&lt;p&gt;The PURLs solution is a bit more web-native solution than DOIs, in being more democratic, using a URL structure, and being built upon widely distributed servers and open-source web technology. Not surprisingly, other web-native systems such as most of the major semantic web ontology providers rely on PURLs, e.g. Dublin Core uses &lt;a href=&quot;http://purl.org/dc/terms/&quot;&gt;purl.org/dc/terms/&lt;/a&gt;. The PURL &lt;a href=&quot;http://purl.oclc.org/docs/faq.html&quot;&gt;FAQ&lt;/a&gt; provides a great overview.&lt;/p&gt;
&lt;p&gt;Implementing PURLs for the notebook was very straight-forward. After registering as a user at &lt;a href=&quot;http://purl.org&quot;&gt;purl.org&lt;/a&gt; I applied for my own top-level domain: &lt;code&gt;cboettig&lt;/code&gt;, which I then mapped to my current domain, &lt;a href=&quot;http://carlboettiger.info&quot;&gt;carlboettiger.info&lt;/a&gt; By enabling partial redirects, each page on my site will also be resolved using this top-level domain followed by my existing page structure. Following my existing structure is not necessary – I could map each page to an arbitrary path in my domain, but would have to enter these somewhat manually. While the partial redirect is simpler to implement, it does require that I maintain the rest of the link structure.&lt;/p&gt;
&lt;p&gt;In this way, &lt;a href=&quot;http://purl.org/cboettig/lab-notebook.html&quot;&gt;purl.org/cboettig/lab-notebook.html&lt;/a&gt; now resolves to &lt;a href=&quot;http://carlboettiger.info/lab-notebook.html&quot;&gt;carlboettiger.info/lab-notebook.html&lt;/a&gt;. Likewise, each page in the notebook can be similarly resolved from the purl.org domain instead of my personal carlboettiger.info domain. Should I ever somehow lose control of carlboettiger.info, I could re-assign my PURL to redirect to my new domain URL. This provides DOI-like technology of permanent identifiers for every page in the notebook.&lt;/p&gt;
&lt;h2 id=&quot;github-preserving-content-and-versions&quot;&gt;GitHub: preserving content and versions&lt;/h2&gt;
&lt;p&gt;Committing content to an external repository is the recommended way to avoid link-rot from the user errors and website changes that so frequently plague self-archiving of scholarly content. Keeping multiple copies of content in geographically distinct locations is the time-honored approach of digital archiving. Git and GitHub make this easy. Not only does this mean that a backup copy is publicly available and forkable online, but it is also easy to clone copies on each of the machines I work on and rely on git to keep them in sync. Should Github disappear, a little &lt;code&gt;git remote add&lt;/code&gt; and everything will be effortlessly deployed with complete history elsewhere.&lt;/p&gt;
&lt;p&gt;The notebook has two Github repositories: the “source-code” consisting of plain-text (markdown) content and Jekyll-based templates on &lt;a href=&quot;http://github.com/cboettig/labnotebook&quot;&gt;labnotebook&lt;/a&gt;, and a second for the rendered HTML &lt;a href=&quot;http://github.com/cboettig/cboettig.github.com&quot;&gt;cboettig.github.com&lt;/a&gt; (which also now hosts the website).&lt;/p&gt;
&lt;p&gt;While a custom domain and PURLs provide persistent &lt;em&gt;locators&lt;/em&gt; for the content, distributed copies on Git help archive the content itself. Should my domain vanish or Github disappear, copies of the content, complete with version history, would remain distributed across various machines with a copy of the repository. Links to Github would break in that process, unless we had remapped all links from the notebook to Github using PURLs.&lt;/p&gt;
&lt;h2 id=&quot;greycite-programmatic-access-and-indexing-of-metadata&quot;&gt;Greycite: Programmatic access and indexing of metadata&lt;/h2&gt;
&lt;p&gt;I think of good metadata as the third leg to proper digital archiving, in addition to permanent identifiers and backup of content. We want to be able to point a tool at the permanent identifier / URL of an entry and extract reliable information on the author, time published and last modified, title, author, key words, etc. that might be useful in citing or categorizing the content. Providing this information is really the subject of adding &lt;a href=&quot;http://carlboettiger.info/2012/10/23/semantic-markup-examples-for-the-lab-notebook.html&quot;&gt;Semantic metadata&lt;/a&gt; to the site, and is covered in another entry in this series. Meanwhile, the &lt;a href=&quot;http://greycite.knowledgeblog.org&quot;&gt;Greycite&lt;/a&gt; tool and it’s API are an excellent way to extract this metadata into a variety of useful formats, working much the same way that CrossRef’s tool does using DOIs. Here is an &lt;a href=&quot;http://greycite.knowledgeblog.org/?uri=http%3A%2F%2Fpurl.org%2Fcboettig%2F2012%2F10%2F23%2Fsemantic-markup-examples-for-the-lab-notebook.html&quot;&gt;example query&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm6.staticflickr.com/5325/8940923396_fcf4941197.jpg&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;robust-archiving-with-figshare&quot;&gt;&lt;strong&gt;Robust archiving&lt;/strong&gt; with fig&lt;strong&gt;share&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Depositing a copy of the notebook on fig&lt;strong&gt;share&lt;/strong&gt; is one of the most robust archival solutions of which I am currently aware. Not so much because it has the coveted DOI solution to the permanent identifier problem but because it has the promise of &lt;a href=&quot;http://clocks.org&quot;&gt;CLOCKSS&lt;/a&gt; archiving, should anything ever happen to fig&lt;strong&gt;share&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Nevertheless, it raises several challenges. The native home for the content is as rendered HTML at my domain, not as raw HTML on an archive completely unassociated with that domain, difficult to view, and divorced from my usual workflow, unlike my usual publishing source-code to Github and website to my domain. It also raises questions of just what to archive and when. I discuss some of these strengths and challenges as a separate post, &lt;a href=&quot;http://purl.org/cboettig/2013/05/31/notebook-features-archiving-with-figshare&quot;&gt;archiving the lab notebook on figshare: advantages and challenges&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;conclusions&quot;&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;Digital archiving is a challenging problem that is not completely addressed by any one of these approaches. In the end, robust archiving will be best left in the hands of its experts. Unfortunately, the best examples currently available (such as CLOCKSS, national libraries, etc.) will not archive a researcher’s web page directly. The solutions explored here are not perfect, but they are free and simple to implement. I’d love to hear what others think.&lt;/p&gt;
&lt;h3 id=&quot;see-also&quot;&gt;See also&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.digitalpreservation.gov/ndsa/&quot;&gt;DigitalPreservation.gov&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://internetarchive.org&quot;&gt;The Internet Archive&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Archiving the lab notebook on figshare</title>
	 <link href="/2013/05/31/notebook-features-archiving-with-figshare.html"/>
   <updated>2013-05-31T00:00:00+00:00</updated>
   <id>/05/31/notebook-features-archiving-with-figshare</id>
   <content type="html">&lt;h2 id=&quot;robust-archiving-through-clockss&quot;&gt;Robust archiving through CLOCKSS&lt;/h2&gt;
&lt;p&gt;One of the most comprehensive approaches I have come across so far uses fig&lt;strong&gt;share&lt;/strong&gt;. This offers the most promising avenue for content preservation, but is weakest in managing the URIs and associating them with the original content. All fig&lt;strong&gt;share&lt;/strong&gt; content is archived by &lt;a href=&quot;http://clockss.org&quot;&gt;CLOCKSS&lt;/a&gt;, an international library cooperation providing redundant and geopolitically distributed backup of the archives around the world (and used by many academic journals, both subscription based &amp;amp; open access). Should fig&lt;strong&gt;share&lt;/strong&gt; vanish from the face of the planet, it will trigger the release of all of its content to resolve through the CLOCKSS servers, with the same appearance and resolving at the same URLs as the original figshare content. Presumably the DOIs provided to figshare content will also continue to resolve there.&lt;/p&gt;
&lt;h2 id=&quot;challenges&quot;&gt;Challenges&lt;/h2&gt;
&lt;p&gt;It would certainly be preferable to have the notebook archived by CLOCKSS directly, since the association between the original online content at carlboettiger.info is lost in archiving the entries on figshare. More problematically, the content as archived on fig&lt;strong&gt;share&lt;/strong&gt; is not recognized by search engines, etc., as a separate HTML pages to index, but merely as a bundle of attached text files. On the upside, the content becomes part of the global scientific datasets preserved and indexed by fig&lt;strong&gt;share&lt;/strong&gt; with appropriate metadata, etc., increasing the chances for discovery through that venue. Also, fig&lt;strong&gt;share&lt;/strong&gt; provides a convenient API that can help automate deposition.&lt;/p&gt;
&lt;h3 id=&quot;what-content-what-format&quot;&gt;What content? What format?&lt;/h3&gt;
&lt;p&gt;Deciding just what to archive in the fig&lt;strong&gt;share&lt;/strong&gt; database is also less straight forward than it may seem. I have gone through a few iterations:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Archiving the markdown.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Archiving external images with Data URIs.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Archiving the HTML versions of pages alone&lt;/li&gt;
&lt;li&gt;Archiving the whole git repository, &lt;code&gt;_site&lt;/code&gt; HTML included (?)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I began by archiving the markdown files that I write to create each entry. These are plain-text files that can be easily read in any text editor, even if the conventions for rendering them as HTML are lost. Like HTML, figures are linked to external files, and are thus not captured by this solution. To work around this, I adopted the trick of using &lt;a href=&quot;http://carlboettiger.info/2013/01/24/Data-URIs-for-image-archives.html&quot;&gt;Data URIs&lt;/a&gt; to embed images. This places a binary encoding of the image in the text itself, which can be rendered by almost any browser as the appropriate image. While this keeps the content together, the long data URI strings are rather out-of-place inside a plain text document. Further, the markdown loses all of the valuable semantics that are automatically added to each page when Jekyll renders them to HTML. As Phil Lord argues, if there’s any format that future archivists can read successfully – it will be HTML. Consequently I’ve settled on archiving the HTML versions of each notebook entry, with images embedded as Data URIs. Each HTML file contains rich metadata in the header, sidebar, and footer, that give more information about the content and its context in the notebook (relative path, categories and tags, timestamps and SHA hashes, etc). I have archived these entries in annual chunks following the year/month/day directory structure already employed on the site.&lt;/p&gt;
&lt;h3 id=&quot;how-about-site-assets&quot;&gt;How about site assets?&lt;/h3&gt;
&lt;p&gt;There is still additional external content used to render the site – CSS and javascript files – that are not captured in this approach. Though entries actually render &lt;a href=&quot;http://stackoverflow.com/questions/14046738&quot;&gt;just fine without the css&lt;/a&gt;, it would certainly be possible to include this material in the archive (though some Javascript comes from external CDNs). This does make for a bit larger and more cluttered archive, and more to the point is a rather crude solution to a problem already solved by Internet archiving programs such as CLOCKSS or internetarchive.org.&lt;/p&gt;
&lt;h3 id=&quot;versioning&quot;&gt;Versioning?&lt;/h3&gt;
&lt;p&gt;Lastly there is the concern of preserving the version history of entries. Though fig&lt;strong&gt;share&lt;/strong&gt; provides versioning of its content, this doesn’t capture finer resolution of individual page changes available through the Github repository. At the expense of creating an ever more cumbersome archival object, one could include the &lt;code&gt;.git&lt;/code&gt; history, either for the HTML rendered version (which lives at &lt;a href=&quot;https://github.com/cboettig/cboettig.github.com/&quot;&gt;cboettig.github.com&lt;/a&gt;) or the source files used to create it (&lt;a href=&quot;https://github.com/cboettig/labnotebook&quot;&gt;labnotebook&lt;/a&gt;).&lt;/p&gt;
&lt;h3 id=&quot;connecting-to-the-original-instances&quot;&gt;Connecting to the original instances?&lt;/h3&gt;
&lt;p&gt;Of course this fails to address the preservation of externally linked content. The most frequent outbound links point to other publications through, usually their DOIs, which we hope will take care of themselves. The most important externally linked content in the notebook entries are the links to scripts, functions, and manuscripts in the various project repositories on Github. The simplest solution is to embed the most important scripts in the notebook entries themselves. Archiving the project repositories is an additional challenge, but if a user can recover a copy of the project repository (along with it’s &lt;code&gt;.git&lt;/code&gt; history) then it would be possible to identify the linked file using the SHA hash from these links (by matching it against the SHAs in the log). See my entry on &lt;a href=&quot;/2013/05/03/notebook-features-hashes-providing-an-immutable-and-verifiable-research-record.html&quot;&gt;SHA hashes&lt;/a&gt; for more on this topic.&lt;/p&gt;
&lt;h2 id=&quot;links-to-the-archives&quot;&gt;Links to the archives&lt;/h2&gt;
&lt;p&gt;Current and previous archives of my lab notebook can be found on figshare by year. Older versions of these archives have taken a different approach, including just archiving the markdown files. The links use the DOI and point to the most recent version. (At this time linking to explicit versions with FigShare’s DataCite DOI links doesn’t appear to be working)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://dx.doi.org/10.6084/m9.figshare.96916&quot;&gt;Lab Notebook, 2010&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://dx.doi.org/10.6084/m9.figshare.96919&quot;&gt;Lab Notebook, 2011&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://dx.doi.org/10.6084/m9.figshare.106620&quot;&gt;Lab Notebook, 2012&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/05/29/notes.html"/>
   <updated>2013-05-29T00:00:00+00:00</updated>
   <id>/05/29/notes</id>
   <content type="html">&lt;h2 id=&quot;nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/h2&gt;
&lt;p&gt;Not getting good convergence from jags models with uniformative priors without observation noise and arbitary starting postions. See examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;fixed myers_jags run, loads knitr_defaults &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/783ed119848772dcc3ee26d9e1dbe10b1e1afbbc&quot;&gt;11:18 am 2013/05/29&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;trouble with MCMC convergence for process-noise-only: Now with longer runs and better posterior estimator. Set for run on zero. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/5e3f3f5b00dbd6085e6cddee03ad03151a759b22&quot;&gt;11:01 am 2013/05/29&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also a few updates:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;slides for adp section of group meeting &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/094b44822abb47b1145f0a0bb0ae2c8364bbee25&quot;&gt;11:44 am 2013/05/29&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;updated adp-intro &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/4eb6a30441f28e9cbe87690d9e098b0e068cc395&quot;&gt;11:43 am 2013/05/29&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;prosecutor&quot;&gt;prosecutor&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Combine comment code into single file for both models: &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/resubmission/inst/examples/comment_reply.Rmd&quot;&gt;comment_reply.Rmd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Comment resubmitted. (repository tag: &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/resubmission&quot;&gt;&lt;code&gt;resubmission&lt;/code&gt;&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Ooh: tags provide a convenient way to make readable version-stable links (e.g. as opposed to linking by the hash.)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;handling-scripts&quot;&gt;handling scripts&lt;/h2&gt;
&lt;p&gt;Separated out my common knitr settings that usually take up space in my first code chunk.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;# My preferred defaults (may be changed in individual chunks)&lt;/span&gt;
opts_chunk$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;tidy=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;warning=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;message=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;cache=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, 
               &lt;span class=&quot;dt&quot;&gt;comment=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;verbose=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;fig.width=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;fig.height=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;)
 
&lt;span class=&quot;co&quot;&gt;# Name the cache path and fig.path based on filename...&lt;/span&gt;
 opts_chunk$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fig.path =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;figure/&amp;quot;&lt;/span&gt;,
                                 &lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;.Rmd&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, knitr:::knit_concord$&lt;span class=&quot;kw&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;infile&amp;#39;&lt;/span&gt;)),
                                 &lt;span class=&quot;st&quot;&gt;&amp;quot;-&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;),
                                 &lt;span class=&quot;dt&quot;&gt;cache.path =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;.Rmd&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, knitr:::knit_concord$&lt;span class=&quot;kw&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;infile&amp;#39;&lt;/span&gt;) ), 
                                 &lt;span class=&quot;st&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;))
  
&lt;span class=&quot;co&quot;&gt;# Set plotting to bw plot default, but with transparent background elements.  &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# Note transparency requires the panel.background, plot.background, and device background all be set!&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(ggplot2) 
  &lt;span class=&quot;kw&quot;&gt;theme_set&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;theme_bw&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;base_size=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;12&lt;/span&gt;))
  &lt;span class=&quot;kw&quot;&gt;theme_update&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;panel.background =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;element_rect&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;colour =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;),
               &lt;span class=&quot;dt&quot;&gt;plot.background =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;element_rect&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;colour =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;))
  opts_chunk$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;dev.args=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;bg=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;))
   
&lt;span class=&quot;co&quot;&gt;# Set a color-blind friendly pallette&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# adapted from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/&lt;/span&gt;
   cbPalette &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;#000000&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#E69F00&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#56B4E9&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#009E73&amp;quot;&lt;/span&gt;, 
                  &lt;span class=&quot;st&quot;&gt;&amp;quot;#F0E442&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#0072B2&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#D55E00&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#CC79A7&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;also appears as &lt;a href=&quot;https://gist.github.com/cboettig/5600558&quot;&gt;gist:5600558&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Saved script as &lt;code&gt;~/.knit_defaults.R&lt;/code&gt; and is sourced in by the first chunk instead.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/05/28/notes.html"/>
   <updated>2013-05-28T00:00:00+00:00</updated>
   <id>/05/28/notes</id>
   <content type="html">&lt;h2 id=&quot;mangel-group-talk&quot;&gt;Mangel group talk&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Presented nonparametric-bayes slides&lt;/li&gt;
&lt;li&gt;ADP introduction / trouble-shooting (see yesterday’s entry), &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/094b44822abb47b1145f0a0bb0ae2c8364bbee25/inst/mydeck/slides.html&quot;&gt;html5 slides&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;notes&quot;&gt;Notes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Decent convergence in the forward algorithm is hard. Consider basis function representation of value function to decrease the search space in the backwards-algorithm first. Also consider searching for policy function (under appropriate piecewise constraints).&lt;/li&gt;
&lt;li&gt;Starts to sound more and more similar to POMDP&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Trouble with equations in &lt;a href=&quot;https://github.com/ramnathv/slidify/issues/214&quot;&gt;slidify/214&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Finishing up posts from last week&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;http://osswatch.jiscinvolve.org/wp/2013/05/21/unlicensed-code-movement-or-madness/&quot;&gt;On the lack of licenses on Github&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;R packages state licenses in the DESCRIPTION file, which automatically recognizes standard licenses rather than distributing a copy of the license. This seems sensible but it’s not like we don’t have a few bits to spare for a million duplicate copies of license files, so I suppose I could add this in explicitly.&lt;/p&gt;
&lt;p&gt;Clearly my own thinking on licenses has evolved ahead of my adaptation:&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;$ &lt;span class=&quot;kw&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;License&amp;quot;&lt;/span&gt; code/*/DESCRIPTION

&lt;span class=&quot;kw&quot;&gt;AdaptiveDynamics&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: GPL (&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;= 2)
&lt;span class=&quot;kw&quot;&gt;earlywarning&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: BSD
&lt;span class=&quot;kw&quot;&gt;fluctuationDomains&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: CC ZERO 1.0 + file LICENSE
&lt;span class=&quot;kw&quot;&gt;knitcitations&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: CC0
&lt;span class=&quot;kw&quot;&gt;mcmcTools&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: BSD
&lt;span class=&quot;kw&quot;&gt;multiple_uncertainty&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: BSD
&lt;span class=&quot;kw&quot;&gt;nonparametric-bayes&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: BSD
&lt;span class=&quot;kw&quot;&gt;OUwie&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: GPL (&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;= 2)
&lt;span class=&quot;kw&quot;&gt;pdg_control&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: BSD
&lt;span class=&quot;kw&quot;&gt;pmc&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: CC0
&lt;span class=&quot;kw&quot;&gt;populationdynamics&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: BSD
&lt;span class=&quot;kw&quot;&gt;prosecutors-fallacy&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: BSD
&lt;span class=&quot;kw&quot;&gt;socialR&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: GPL (&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;= 2)
&lt;span class=&quot;kw&quot;&gt;structured-populations&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: GPL (&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;= 3)
&lt;span class=&quot;kw&quot;&gt;warningsignals&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: GPL (&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;= 2)
&lt;span class=&quot;kw&quot;&gt;wrightscape&lt;/span&gt;/DESCRIPTION:&lt;span class=&quot;kw&quot;&gt;License&lt;/span&gt;: GPL-2&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Looks like it’s time for a little&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sed -i &amp;quot;s/License: .*/License: CC0/&amp;quot; */DESCRIPTION&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Yeehaw!&lt;/p&gt;
&lt;p&gt;Just for the sake of being pendantic,&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;wget&lt;/span&gt; http://creativecommons.org/publicdomain/zero/1.0/legalcode.txt
&lt;span class=&quot;kw&quot;&gt;mv&lt;/span&gt; legalcode.txt LICENSE
&lt;span class=&quot;kw&quot;&gt;echo&lt;/span&gt; */R/.. &lt;span class=&quot;kw&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;xargs&lt;/span&gt; -n 1 cp LICENSE &lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;rcurl-query-from-scott&quot;&gt;RCurl query from Scott&lt;/h3&gt;
&lt;p&gt;Translate a cURL command’s &lt;code&gt;-d&lt;/code&gt; flag to RCurl, e.g.&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;curl&lt;/span&gt; -H &lt;span class=&quot;st&quot;&gt;&amp;quot;X-Gauges-Token: &amp;lt;token&amp;gt;&amp;quot;&lt;/span&gt; \
     -d &lt;span class=&quot;st&quot;&gt;&amp;quot;title=Example&amp;quot;&lt;/span&gt; \
     -d &lt;span class=&quot;st&quot;&gt;&amp;quot;tz=Eastern Time (US %26 Canada)&amp;quot;&lt;/span&gt; \
     https://secure.gaug.es/gauges&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I proposed&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;httpPOST&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;https://secure.gaug.es/gauges&amp;quot;&lt;/span&gt;, 
         &lt;span class=&quot;dt&quot;&gt;postfields=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;title=Example&amp;amp;tz=Eastern Time (US %26 Canada)&amp;quot;&lt;/span&gt;, 
         &lt;span class=&quot;dt&quot;&gt;httpHeader=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;X-Gauges-Token&amp;quot;&lt;/span&gt;=&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;lt;token&amp;gt;&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;verbose=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Though here is an &lt;a href=&quot;http://stackoverflow.com/questions/12302941/&quot;&gt;SO example&lt;/a&gt; with slightly more elegant construction of postfields.&lt;/p&gt;
&lt;h2 id=&quot;two-column-layout-with-longtable&quot;&gt;Two column layout with &lt;code&gt;longtable&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;Pandoc now uses the &lt;code&gt;longtable&lt;/code&gt; package to generate tables. Annoyingly, these insist on being single-column objects and are not handled properly by &lt;code&gt;elsarticle&lt;/code&gt; two-column layouts. To get around this, I edit the latex Pandoc creates, wrapping the table in a float environment (&lt;code&gt;\begin{figure}&lt;/code&gt;), followed by a toggle to &lt;code&gt;\onecolumn&lt;/code&gt;. After the &lt;code&gt;longtable&lt;/code&gt; envirnoment block ends, I include the caption, then toggle back to &lt;code&gt;\twocolumn&lt;/code&gt; layout. I also have to tune the width of the &lt;code&gt;minipage&lt;/code&gt; objects used by &lt;code&gt;longtable&lt;/code&gt;, and change its alignment option to left-align (&lt;code&gt;\begin{longtable}[l]&lt;/code&gt;). After these modifications I have a nice floating table in the width of a single column, embedded in my two-column layout.&lt;/p&gt;
&lt;p&gt;Brilliantly, arXiv has no trouble with the scores of extra package dependencies introduced by pandoc, as long as the document is pdflatex compatible (no xelatex, hence non-ascii UTF-8, or custom fonts, sorry). Still far ahead of my experience submitting the same document to the acutal journal…&lt;/p&gt;
&lt;p&gt;This nicely formatted tex is in the repository as &lt;a href=&quot;&quot;&gt;arxiv-copy.tex&lt;/a&gt;. Should be generated from source with &lt;code&gt;make fancy&lt;/code&gt;, since default &lt;code&gt;make&lt;/code&gt; builds the 1980s plaintex format for the journal. I need to add make commands to automatically wrap the longtable as described above, hopefully a few lines of &lt;code&gt;sed&lt;/code&gt; should do this…&lt;/p&gt;
&lt;p&gt;So, arXiv copy sumbmitted… stay tuned on Thursday.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Approximate Dynamic Programming Approaches</title>
	 <link href="/2013/05/27/exploring-approximate-dynamic-programming-approaches.html"/>
   <updated>2013-05-27T00:00:00+00:00</updated>
   <id>/05/27/exploring-approximate-dynamic-programming-approaches</id>
   <content type="html">&lt;h2 id=&quot;introductory-examples-in-approximate-dynamic-programming&quot;&gt;Introductory examples in approximate dynamic programming&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;Based on Powell 2006, page 97. I try to conform to that notation throughout&lt;/em&gt;. Haven’t really figured this out yet, so this is more a walk through of me thinking this out then a tutorial. My active copy of this analysis can be found in the &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/4eb6a30441f28e9cbe87690d9e098b0e068cc395/inst/examples/adp-intro.md&quot;&gt;adp-intro&lt;/a&gt; file of my nonparametric-bayes repo, see there for the &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/master/inst/examples/adp-intro.md&quot;&gt;most recent&lt;/a&gt; (or earlier) versions.&lt;/p&gt;
&lt;h2 id=&quot;setup-my-sample-problem&quot;&gt;Setup my sample problem&lt;/h2&gt;
&lt;p&gt;First we define the Beverton-Holt stock-recruitment relationship as a function of stock size &lt;code&gt;x&lt;/code&gt;, harvest &lt;code&gt;h&lt;/code&gt; and parameters &lt;code&gt;p&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, h, p){
    A &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] 
    B &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] 
    s &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;pmax&lt;/span&gt;(x-h, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
    A *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;s/(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;B *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;s)
}
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;)
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)/p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]
sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We begin with a simulation method &lt;span class=&quot;math&quot;&gt;\(X_{t+1} = f(X_t, Z_t)\)&lt;/span&gt;. For illustration, let us consider &lt;span class=&quot;math&quot;&gt;\(f(X_t, Z_t) = Z_t \frac{a X_t}{b + X_t}\)&lt;/span&gt; with a = 1.5 and b = 0.5. We define a statespace &lt;span class=&quot;math&quot;&gt;\(S\)&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;S &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;11&lt;/span&gt;) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;as a uniform grid of 11 points from 0 to 1.&lt;br /&gt;We also need a value function on the state space, &lt;span class=&quot;math&quot;&gt;\(C_t(S_t)\)&lt;/span&gt;. For simplicity, we set the price of harvest at unity and the cost of harvesting at zero, so that &lt;span class=&quot;math&quot;&gt;\(C_t(S_t, x_t) = \min(x_t, S_t)\)&lt;/span&gt;.&lt;br /&gt;(&lt;span class=&quot;math&quot;&gt;\(C_t\)&lt;/span&gt; is sometimes denoted &lt;span class=&quot;math&quot;&gt;\(\mathbb{\Pi}\)&lt;/span&gt;).&lt;br /&gt;We also need an action space &lt;span class=&quot;math&quot;&gt;\(\chi_t\)&lt;/span&gt; of possible harvest values.&lt;br /&gt;Again for simplicity we assume that harvest can be set to any possible state size, &lt;span class=&quot;math&quot;&gt;\(\chi_t \equiv S_t\)&lt;/span&gt;,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;chi &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;S&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;T &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;
N &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The approximate dynamic programming algorithm will perform a finite number &lt;span class=&quot;math&quot;&gt;\(N\)&lt;/span&gt; = 10 iterations over a window of time &lt;span class=&quot;math&quot;&gt;\(T\)&lt;/span&gt; =10 in our example. The algorithm can then be described as follows:&lt;/p&gt;
&lt;h2 id=&quot;algorithm-1&quot;&gt;Algorithm (1)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Step 0&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Initialize some value &lt;span class=&quot;math&quot;&gt;\(\tilde V_t^0(S_t)\)&lt;/span&gt; for all states &lt;span class=&quot;math&quot;&gt;\(S_t\)&lt;/span&gt;, where the superscripts denote iterations in the forward approximation.&lt;br /&gt; As we know absolutely nothing yet to base our initial guess on, we just arbitrarily set this to zero.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(S))&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Choose some initial state &lt;span class=&quot;math&quot;&gt;\(S_0^1\)&lt;/span&gt; We start at some initial state for &lt;span class=&quot;math&quot;&gt;\(n = 1\)&lt;/span&gt; (superscript) and &lt;span class=&quot;math&quot;&gt;\(t = 0\)&lt;/span&gt; (subscript). The choice of initial condition may come from the problem itself, otherwise we choose something arbitrarily.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;S_0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Set &lt;span class=&quot;math&quot;&gt;\(n = 1\)&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Step 1&lt;/strong&gt;: Choose a sample path, &lt;span class=&quot;math&quot;&gt;\(\omega^n\)&lt;/span&gt; (a vector of random draws)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.2&lt;/span&gt;
omega_n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(T, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma)&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;** Step 2**: For &lt;span class=&quot;math&quot;&gt;\(t = 0, 1, 2, \ldots, T\)&lt;/span&gt;, do:&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Solve:&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[V_t(S_t) = \max_{x_t \in \chi_t} \left(C(S_t, x_t) + \gamma \sum_{s^{\prime} \in \mathcal{S}} \mathbb{P}(s^{\prime} | S_t^n, x_t) V_{t+1}^{n-1} s^{\prime} \right)\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;That is, choose action &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt; that maximizes the value of the next step.&lt;/p&gt;
&lt;p&gt;Let’s start with &lt;span class=&quot;math&quot;&gt;\(t=0\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(n=1\)&lt;/span&gt; and fix an &lt;span class=&quot;math&quot;&gt;\(x_0\)&lt;/span&gt; from the set of &lt;span class=&quot;math&quot;&gt;\(\chi\)&lt;/span&gt; (allowing the action space to be the same in each period, we can omit the subscript on &lt;span class=&quot;math&quot;&gt;\(\chi\)&lt;/span&gt;) to get started. We first compute &lt;span class=&quot;math&quot;&gt;\(C(S_0, x_0)\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\(S_0 = S_0^1\)&lt;/span&gt; which we fixed in step &lt;strong&gt;0b&lt;/strong&gt; arbitrarily at 0.5.&lt;/p&gt;
&lt;p&gt;The profits/costs &lt;span class=&quot;math&quot;&gt;\(C(S_t, x_t)\)&lt;/span&gt; are the value derived by action (harvest) &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt; at state (stock) &lt;span class=&quot;math&quot;&gt;\(S_t\)&lt;/span&gt;. Assuming a fixed price and no costs to harvesting, this is just whichever number is smaller (since we cannot harvest more than the available stock,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;C &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(S, X) &lt;span class=&quot;kw&quot;&gt;pmin&lt;/span&gt;(S, X)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(where we have used R’s vectorized form of the min function).&lt;/p&gt;
&lt;p&gt;This forward dynamic programming will still rely on the one-step transition matrix, &lt;span class=&quot;math&quot;&gt;\(\mathbb{P}\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Let’s get the transition matrices for this problem, assuming log-normal noise,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sdp_matrix &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;determine_SDP_matrix&lt;/span&gt;(f, p, &lt;span class=&quot;dt&quot;&gt;x_grid=&lt;/span&gt;S, &lt;span class=&quot;dt&quot;&gt;h_grid=&lt;/span&gt;chi, sigma_g)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which is a list of matrices, one for each harvest (action) &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Then we want to consider a fixed &lt;span class=&quot;math&quot;&gt;\(S_t^n\)&lt;/span&gt; and fixed &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt;, and take the sum of &lt;span class=&quot;math&quot;&gt;\(\mathbb{P}(s^{\prime} | S_t^n, x_t)\)&lt;/span&gt; over the &lt;span class=&quot;math&quot;&gt;\(s^{\prime}\)&lt;/span&gt;, which means we want the &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt; element from the list, and then we need sum over the distribution of future states given the current state &lt;span class=&quot;math&quot;&gt;\(S_t^n\)&lt;/span&gt;, e.g. a row of the matrix, e.g. &lt;code&gt;sdp_matrix[[x]][s,]&lt;/code&gt;, which we (vector) multiply by &lt;span class=&quot;math&quot;&gt;\(V_{t+1}^{n-1}(s^{\prime})\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;This value &lt;span class=&quot;math&quot;&gt;\(V\)&lt;/span&gt; is of course unknown, other than our initial random guess &lt;span class=&quot;math&quot;&gt;\(V_{t}^0\)&lt;/span&gt;.&lt;br /&gt;As we step through the iterations &lt;span class=&quot;math&quot;&gt;\(V_t^1\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(V_t^2\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(V_t^3\)&lt;/span&gt;, etc., this should convgerge to something meaningful.&lt;/p&gt;
&lt;p&gt;Note that the index along &lt;span class=&quot;math&quot;&gt;\(S\)&lt;/span&gt; corresponding to &lt;span class=&quot;math&quot;&gt;\(S_t^n\)&lt;/span&gt; is given by&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;s &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;which.min&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(S-S_0))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So our maximization across &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; just involves:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;values &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(chi), function(x)
    &lt;span class=&quot;kw&quot;&gt;C&lt;/span&gt;(S[s], chi[x]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sdp_matrix[[x]][s,] %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;V
)

max_x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;which.max&lt;/span&gt;(values)
v_hat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(values)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Trivially, this is just the harvest level that maximizes &lt;span class=&quot;math&quot;&gt;\(C\)&lt;/span&gt; so far (which is just harvesting the &lt;span class=&quot;math&quot;&gt;\(S_0\)&lt;/span&gt;, since &lt;span class=&quot;math&quot;&gt;\(\bar V^0_t\)&lt;/span&gt; begins at zero:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;chi[max_x]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 0.5&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;step &lt;strong&gt;2b&lt;/strong&gt; We can now update our &lt;span class=&quot;math&quot;&gt;\(\bar V^0_t\)&lt;/span&gt; to get &lt;span class=&quot;math&quot;&gt;\(\bar V^1_t\)&lt;/span&gt;, using the rule:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[V_t^n(S_t) = \begin{cases} 
\hat v_t^n &amp;amp; S_t = S_t^n \\
\bar V_t^{n-1}(S_t) &amp;amp; \textrm{otherwise} 
\end{cases}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;e.g. use our maximum value for the case of the state we just considered &lt;span class=&quot;math&quot;&gt;\(S_t = S_t^n\)&lt;/span&gt;, otherwise leave &lt;span class=&quot;math&quot;&gt;\(V_t\)&lt;/span&gt; unchanged. Our new &lt;span class=&quot;math&quot;&gt;\(V\)&lt;/span&gt; is thus:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;V[s] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;v_hat&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;step &lt;strong&gt;2c&lt;/strong&gt; Compute &lt;span class=&quot;math&quot;&gt;\(S^n_{t+1} = S^M(S_t^n, x^n_t, W_{t+1}(\omega^n))\)&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We compute the next state using our &lt;code&gt;max_x&lt;/code&gt; for &lt;span class=&quot;math&quot;&gt;\(x^n_t\)&lt;/span&gt;, our random samples and the transition function…&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;S_1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;omega_n[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(S_0, chi[hat[&lt;span class=&quot;st&quot;&gt;&amp;quot;x_nt&amp;quot;&lt;/span&gt;]], p)&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Step 3&lt;/strong&gt; Let &lt;span class=&quot;math&quot;&gt;\(n = n+1\)&lt;/span&gt;. if &lt;span class=&quot;math&quot;&gt;\(n &amp;lt; N\)&lt;/span&gt;, go to step 1&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;putting-this-all-together-as-a-recursive-algorithm&quot;&gt;Putting this all together as a recursive algorithm&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;N &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;5000&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# iterations&lt;/span&gt;
M &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# gridsize &lt;/span&gt;
Tmax &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# Time horizon&lt;/span&gt;

gamma &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.95&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# Discount&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# f (defined above) &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# p  (defined above)&lt;/span&gt;

sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# larger variation in random draws helps&lt;/span&gt;
chi &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length.out =&lt;/span&gt; M)
S &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length.out =&lt;/span&gt; M)

sdp_matrix &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;determine_SDP_matrix&lt;/span&gt;(f, p, &lt;span class=&quot;dt&quot;&gt;x_grid=&lt;/span&gt;S, &lt;span class=&quot;dt&quot;&gt;h_grid=&lt;/span&gt;chi, sigma_g)

V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;matrix&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, M, Tmax)  &lt;span class=&quot;co&quot;&gt;# A* strategy&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# Fails to explore at matrix(0, M, Tmax)&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# consider: # V &amp;lt;- matrix(rep(chi, Tmax), nrow=M) # &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# V[,1] &amp;lt;- chi   # fails to explore if it doesn&amp;#39;t have at least some non-zero values&lt;/span&gt;

C &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(S, X) &lt;span class=&quot;kw&quot;&gt;pmin&lt;/span&gt;(S, X)
S_0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; 
alpha &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# learning rate&lt;/span&gt;


for(n in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:N){
  
  omega_n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(Tmax, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)
  S_current &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;S_0 &lt;span class=&quot;co&quot;&gt;#runif(1,0,1) # explores faster when this is random&lt;/span&gt;

  for(t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:Tmax){
    &lt;span class=&quot;co&quot;&gt;# index of the state we&amp;#39;re considering&lt;/span&gt;
    s &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;which.min&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(S-S_current)) 
    
    &lt;span class=&quot;co&quot;&gt;# Find the action maximizing the value&lt;/span&gt;
    values &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(chi), function(x)
      &lt;span class=&quot;kw&quot;&gt;C&lt;/span&gt;(S[s], chi[x]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;gamma *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sdp_matrix[[x]][s,] %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;V[,t])
    hat &amp;lt;-&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x_nt =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;which.max&lt;/span&gt;(values), &lt;span class=&quot;dt&quot;&gt;v_nt =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(values))

    &lt;span class=&quot;co&quot;&gt;# Update value V as mixture of new value and previous value&lt;/span&gt;
    V[hat[&lt;span class=&quot;st&quot;&gt;&amp;quot;x_nt&amp;quot;&lt;/span&gt;], t] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;alpha) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;V[hat[&lt;span class=&quot;st&quot;&gt;&amp;quot;x_nt&amp;quot;&lt;/span&gt;],t] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;alpha *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;hat[&lt;span class=&quot;st&quot;&gt;&amp;quot;v_nt&amp;quot;&lt;/span&gt;] 
    
    &lt;span class=&quot;co&quot;&gt;# Advance the state in time along random path  &lt;/span&gt;
    S_current &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;omega_n[t] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(S_current, chi[hat[&lt;span class=&quot;st&quot;&gt;&amp;quot;x_nt&amp;quot;&lt;/span&gt;]], p)

  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;for comparison: the SDP solution&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;opt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(sdp_matrix, S, chi, &lt;span class=&quot;dv&quot;&gt;70&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;, C, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;-gamma, &lt;span class=&quot;dt&quot;&gt;reward=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
opt$V&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt; [1] 0.000 7.173 7.375 7.496 7.584 7.653 7.710 7.760 7.810 7.860 7.910
[12] 7.960 8.010 8.060 8.110 8.160 8.210 8.260 8.310 8.360&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;problems-arising-from-the-discretization&quot;&gt;Problems arising from the discretization&lt;/h3&gt;
&lt;p&gt;Note that after the first iteration, &lt;span class=&quot;math&quot;&gt;\(n=1\)&lt;/span&gt;, the value matrix &lt;span class=&quot;math&quot;&gt;\(V\)&lt;/span&gt; is no longer all zeros. There is a single state, &lt;span class=&quot;math&quot;&gt;\(S = S_0 =\)&lt;/span&gt; 0.5, at which we have value. That value is lost if we set harvest &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; too high, since we know we will not then end up in that state – from whence comes the incentive to consider future value. Unfortunately, the value exists only if we hit that state exactly – all other states are assumed to have zero value still.&lt;/p&gt;
&lt;h3 id=&quot;additional-problems&quot;&gt;Additional problems&lt;/h3&gt;
&lt;p&gt;We no longer have the loop-over-all-states problem, but we face several new or remaining issues:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;We still require the use of the one-step transition matrix, with the equally troublesome sum over all states &lt;span class=&quot;math&quot;&gt;\(\sum_{s^{\prime}\in S} \mathbb{P}(s^{\prime} | S_t^n, x_t)\)&lt;/span&gt;.&lt;br /&gt;We will fix this by approximating the transitions in step 2b using random draws as well.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;We only update the values of states we visit. We still need a way to estimate the value of states we have not visited.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Worse, we might not visit states that seem bad relative to states we have visited. This is particularly atrocious in this example. Since we initialize the value of all states at 0, the algorithm prefers to harvest all stock from the current state rather than risk a transition into a state starting at 0. There is no convergence guarentee that we will ever escape this cycle of avoiding states we have not seen. We can alter the initial guess of the value of course, and we could alter the starting condition to better explore.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;extensions&quot;&gt;Extensions&lt;/h2&gt;
&lt;p&gt;The rest of the ADP development is designed to tackle each of these issues. This algorithm gives very poor performance, but very flexible skeleton on which to extend features that have made ADP such a successful approach for impossibly large problems.&lt;/p&gt;
&lt;h3 id=&quot;stochastic-value-function-sampling&quot;&gt;Stochastic value function sampling&lt;/h3&gt;
&lt;p&gt;Dealing with problem 1:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[V_t(S_t) = \max_{x_t \in \chi_t} \left(C(S_t, x_t) + \gamma \sum_{\hat \omega \in \hat \Omega^n_{t+1}} p_t+1(\hat \omega) \bar V_{t+1}^{n-1} (S_{t+1}) \right)\]&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;    V[hat[&lt;span class=&quot;st&quot;&gt;&amp;quot;x_nt&amp;quot;&lt;/span&gt;], t] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;alpha) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;                         &lt;/span&gt;V[hat[&lt;span class=&quot;st&quot;&gt;&amp;quot;x_nt&amp;quot;&lt;/span&gt;],t] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;                          &lt;/span&gt;alpha *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;hat[&lt;span class=&quot;st&quot;&gt;&amp;quot;v_nt&amp;quot;&lt;/span&gt;] &lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;decreasing-the-state-space-size&quot;&gt;Decreasing the state space size&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Aggregation&lt;/li&gt;
&lt;li&gt;Continuous Value function approximations&lt;/li&gt;
&lt;li&gt;Using the post-decision state variable (improves dealing with the expectation calc)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;initialization-problem&quot;&gt;Initialization problem&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;We do not explore if we are too pessimistic about value of visiting other states. Start optimisitc: AI’s A* alogrithm (synchronous)&lt;/li&gt;
&lt;li&gt;Asynchronous updating – randomly sampling starting variables&lt;/li&gt;
&lt;li&gt;RTDP (Real Time Dynamic Programming – not necessarily what it sounds like) external rule determines which states we visit&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;learning&quot;&gt;Learning&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;The concepts of learning and the trade-off between exploration and exploitation are already built-in to the forward algorithm.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;using-non-stochastic-transition-information-only-step-2b-can-be-written-as&quot;&gt;Using Non-stochastic transition information only, step &lt;strong&gt;2b&lt;/strong&gt; can be written as:&lt;/h3&gt;
&lt;p&gt;Taking &lt;span class=&quot;math&quot;&gt;\(x_0\)&lt;/span&gt; as the smallest harvest, &lt;span class=&quot;math&quot;&gt;\(\min(\chi)\)&lt;/span&gt; = 0 and evaluating &lt;span class=&quot;math&quot;&gt;\(C(S_0,X_0) = \min(S_0, X_0)\)&lt;/span&gt; gives us 0, rather trivially.&lt;br /&gt;The next terms depend on the value &lt;span class=&quot;math&quot;&gt;\(\tilde V^0_1(s^{\prime})\)&lt;/span&gt; for all &lt;span class=&quot;math&quot;&gt;\(s^{\prime} \in S\)&lt;/span&gt;, which we have no idea about. Fortunately we have assumed a value for each of these in step 0a.&lt;/p&gt;
&lt;p&gt;We must also come up with some values for the probability &lt;span class=&quot;math&quot;&gt;\(\mathbb{P}(s^{\prime} | S_1^0, x_1)\)&lt;/span&gt; for each state, given our current state &lt;span class=&quot;math&quot;&gt;\(S_1^0\)&lt;/span&gt; and considered action &lt;span class=&quot;math&quot;&gt;\(x_1\)&lt;/span&gt;. This is more straight forward, since it is determined by our one-step transition function (without simulation - recall that the single step transition is given exactly).&lt;/p&gt;
&lt;p&gt;To do so, we evaluate the argument for each value in our action space, &lt;span class=&quot;math&quot;&gt;\(x_t \in \chi_t\)&lt;/span&gt;,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;s &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;S_0
C &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(S, X) &lt;span class=&quot;kw&quot;&gt;pmin&lt;/span&gt;(S, X)
arg &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(chi, function(x) &lt;span class=&quot;kw&quot;&gt;C&lt;/span&gt;(s, x) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(S, x, p) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;V)
x_nt =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;which.max&lt;/span&gt;(arg)
v_nt =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(arg)
V[x_nt] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;v_nt&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/05/24/notes.html"/>
   <updated>2013-05-24T00:00:00+00:00</updated>
   <id>/05/24/notes</id>
   <content type="html">&lt;h3 id=&quot;prosecutor&quot;&gt;prosecutor&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Bit more writing on comment reply. Sent to Alex and Alan for feedback.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/h3&gt;
&lt;p&gt;Demonstrating robustness of the GP approach is remarkably difficult ironically because the comparison methods are not particularly robust; most often due to poor initial conditions. Doing all I can to make the MLE and parametric Bayesian cases suitably automated such that the can give reasonable performance as I loop over various simulation parameters and models without much hand-holding of each of the estimators.&lt;/p&gt;
&lt;p&gt;Also an automatic sensitivity analysis gets pretty computationally intensive and generates a lot of different outputs to keep track of, trying to improve this through cleaner code, parallelization, caching, chunk dependencies, and namespaces for scripts.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Playing with mcmc convergence over initial conditions&lt;/li&gt;
&lt;li&gt;Running case without measurement error for parametric bayesian models&lt;/li&gt;
&lt;li&gt;Adaptuing runs for parallel and for execution on farm cluster&lt;/li&gt;
&lt;li&gt;Consider ADMB for the MLE estimate to be a bit more robust for automated cases.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;log&quot;&gt;Log&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;process noise only example (first attempt) &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/be4d986b46f98d27f19add3ac42e536ee4ef5805&quot;&gt;04:50 pm 2013/05/24&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Consider the case of process noise only in the parametric bayesian versions &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/bbeaf4fc6b5f999e04d02b3487151c982bcf6771&quot;&gt;03:38 pm 2013/05/24&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;parallel jags &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/29db77699a8ff6b9041f45a952a548b6cd255af3&quot;&gt;03:31 pm 2013/05/24&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/05/23/notes.html"/>
   <updated>2013-05-23T00:00:00+00:00</updated>
   <id>/05/23/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Added multiple chains, randomized starting points for each chain, and confirming Gelman-Rubin convergence criteron via &lt;code&gt;autojags&lt;/code&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Some edits to adapt the extraction of posteriors from the multiple chains.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Stange behavior in &lt;code&gt;jags.parallel&lt;/code&gt; &lt;a href=&quot;http://stackoverflow.com/questions/16723036&quot;&gt;SO/16723036&lt;/a&gt;, looks like an annoying bug.&lt;/li&gt;
&lt;li&gt;Ah-ha, and now a nice solution to this problem via &lt;code&gt;do.call&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When running on farm, try to remember: (yes it’s in the run.sh script already).&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;module&lt;/span&gt; load gcc R jags&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This appears to result in greater uncertainty:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm4.staticflickr.com/3826/8797217705_c75548ffa7_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Suggesting the earlier appearance of convergence occurs only thanks to starting conditions close to the optimum?&lt;/p&gt;
&lt;h2 id=&quot;log&quot;&gt;Log&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;parallel jags working now &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/92a1d8d6a1fba819f419d069b0a089da891041e7&quot;&gt;05:53 pm 2013/05/23&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;cleanup &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/e5d76a0718997c215521beb4cbba740b42ff3791&quot;&gt;04:50 pm 2013/05/23&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;generic version of allen &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/669245f2e39839e06cdf58e290b22b783eb08aad&quot;&gt;04:09 pm 2013/05/23&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Revising MCMC iterations&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Added multiple chains, randomized starting points for each chain, and confirming Gelman-Rubin convergence criteron via &lt;code&gt;autojags&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Some edits to adapt the extraction of posteriors from the multiple chains.&lt;/li&gt;
&lt;li&gt;Stange behavior in &lt;code&gt;jags.parallel&lt;/code&gt; &lt;a href=&quot;http://stackoverflow.com/questions/16723036&quot;&gt;SO/16723036&lt;/a&gt;, looks like an annoying bug. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/98b6a58bca43fe25ab0224d582f18a820ac5c57e&quot;&gt;04:05 pm 2013/05/23&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;No reply from query to package maintainer, but the SO link now has a clever work-around to said annoying bug.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Grr, why is &lt;code&gt;dcast&lt;/code&gt; not more intuitive to me. Thank you SO folks. &lt;a href=&quot;http://stackoverflow.com/questions/16722117&quot;&gt;SO/16722117&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/05/22/notes.html"/>
   <updated>2013-05-22T00:00:00+00:00</updated>
   <id>/05/22/notes</id>
   <content type="html">&lt;h2 id=&quot;nonparametric-bayes&quot;&gt;Nonparametric-bayes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Establishing chunck dependencies, simplifying and abstracting code.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;still need to fix up Allen MCMC convergence when underlying model is Myers &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/dce19f44d6dec779ba5a1a3e245365cdca4bb034&quot;&gt;10:18 am 2013/05/22&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;replicate runs on data from allen and myers model &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/f8a241c677583ef3b324f274f3846b08243ddacb&quot;&gt;08:39 pm 2013/05/21&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;clean-code-for-complicated-scripts&quot;&gt;Clean code for complicated scripts&lt;/h3&gt;
&lt;p&gt;Pseudo-code somewhat captured by the chuncks. Ideal would be:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Define models&lt;/li&gt;
&lt;li&gt;Define parameters&lt;/li&gt;
&lt;li&gt;Simulate data&lt;/li&gt;
&lt;li&gt;Estimate MLE&lt;/li&gt;
&lt;li&gt;Estimate under GPP&lt;/li&gt;
&lt;li&gt;Allen MCMC&lt;/li&gt;
&lt;li&gt;Ricker MCMC&lt;/li&gt;
&lt;li&gt;Myers MCMC&lt;/li&gt;
&lt;li&gt;Determine optimal policy for each…&lt;/li&gt;
&lt;li&gt;Simulation&lt;/li&gt;
&lt;li&gt;Graphs&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;a-preponderance-of-preprint-servers&quot;&gt;A preponderance of preprint servers&lt;/h2&gt;
&lt;p&gt;Having sent in my review for IEE, do I also post it on the peerJ preprint? File each complaint or suggestion as issue on the paper’s Github repository? Post a comment on the corresponding author’s blogpost on the paper? In my own online notebook? Oh, the reviewer’s plight! From review-recognition poverty to an embarassment of riches!&lt;/p&gt;
&lt;h2 id=&quot;other-writing-and-thoughts&quot;&gt;Other writing and thoughts&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Open Science cover letters?&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://plus.google.com/112929796403983408632/posts/8whV6rtvsuw&quot;&gt;In which I rant about scientific software&lt;/a&gt; again&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ews-review&quot;&gt;ews-review&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;re-submitted. &lt;a href=&quot;https://github.com/cboettig/ews-review/tags&quot;&gt;submmitted_revisions tag&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;showtooltip&quot; title=&quot;Joppa L, McInerny G, Harper R, Salido L, Takeda K, O&amp;#39;Hara K,
Gavaghan D and Emmott S (2013). Troubling Trends in Scientific
Software Use. _Science_, *340*. ISSN 0036-8075, 
http://dx.doi.org/10.1126/science.1231535.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1126/science.1231535&quot; rel=&quot;http://purl.org/spar/cito/critiques&quot; &gt;Joppa &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; utoh… I rant about software again&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://theseamonster.net/2013/05/are-unreasonably-harsh-reviewers-retarding-the-pace-of-coral-reef-science/&quot;&gt;Are unreasonably harsh reviews retarding the pace of coral reef science?&lt;/a&gt; I applaud the spirit of this piece. When I saw the article, &lt;span class=&quot;showtooltip&quot; title=&quot;Coral reef baselines: how much macroalgae is natural?.  https://peerj.com/preprints/19/.&quot;&gt;&lt;a href=&quot;https://peerj.com/preprints/19/&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Bruno &lt;em&gt;et al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; appear on PeerJ last week I thought to myself, “Ooh, looks like controversial stuff! Bravo for using a preprint server,” so it is quite delightful to read the back story and confirm my guess. Though I am a proponent of open peer review, I find the practice of posting anonymous peer reviews a bit ethically murky still.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Trying to submit &lt;a href=&quot;https://github.com/cboettig/knitcitations&quot;&gt;knitcitations&lt;/a&gt; to CRAN; R-devel has updated linewrapping requirements that brake roxygen2 &lt;a href=&quot;https://github.com/klutometis/roxygen/issues/125&quot;&gt;roxygen/125&lt;/a&gt;, so have to correct &lt;code&gt;.Rd&lt;/code&gt; files after the fact.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;My ans: &lt;a href=&quot;http://opendata.stackexchange.com/questions/522&quot;&gt;Open data vs Linked data&lt;/a&gt; on opendata.stackexchange opendata SO launches public beta&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/1312087/&quot;&gt;Why people don’t use WADL&lt;/a&gt; Basically we can accomplish structure much better by having well-defined media types. We can define the schema of the json or xml file we return, &lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; and then the application knows what to expect and what it can do with the data. This is far more useful than just having a programmatic version of the API calls in the native language (“client objects”). Seems like REST was supposed to make such things obsolete, and to make deploying the API far simpler than it was in SOAP (which provides WSDL).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;An interesting discussion on &lt;a href=&quot;http://barelyenough.org/blog/2008/05/versioning-rest-web-services/&quot;&gt;using mediatypes for REST APIs&lt;/a&gt;, which might be referred to as the &lt;a href=&quot;http://barelyenough.org/blog/2007/05/hypermedia-as-the-engine-of-application-state/&quot;&gt;HATEOAS&lt;/a&gt; approach:&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;which basically means that responses from the server will be documents that include URIs to everything you can do next&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;hmm, a powerful idea.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;L. N. Joppa, G. McInerny, R. Harper, L. Salido, K. Takeda, K. O’Hara, D. Gavaghan, S. Emmott, (2013) Troubling Trends in Scientific Software Use. &lt;em&gt;Science&lt;/em&gt; &lt;strong&gt;340&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1126/science.1231535&quot;&gt;10.1126/science.1231535&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Bruno et al. (2013) &lt;a href=&quot;https://peerj.com/preprints/19/&quot; class=&quot;uri&quot;&gt;https://peerj.com/preprints/19/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;yes, JSON has schemas too. wow.&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
 </entry>
 
 <entry>
   <title>Comforting Trends In Scientific Software Use</title>
	 <link href="/2013/05/21/comforting-trends-in-scientific-software-use.html"/>
   <updated>2013-05-21T00:00:00+00:00</updated>
   <id>/05/21/comforting-trends-in-scientific-software-use</id>
   <content type="html">&lt;p&gt;&lt;strong&gt;Author’s Note&lt;/strong&gt;: Having refrained from actually posting this for 8 months, as I think I have quite mellowed more my critique. I do believe that education and peer review are the best way forward in tackling these issues, but cannot overstate how much of a long and rocky road that process will be. The Mozilla Science Foundation is really leading these efforts with their code review pilots (as I have discussed in posts since writing this), and through their work with Software Carpentry training. Still, I leave this post as a bookmark of my intial thoughts and a reminder of these challenges.&lt;/p&gt;
&lt;p&gt;Consider reading these other posts on software review and training:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://carlboettiger.info/2013/09/25/mozilla-software-review.html&quot;&gt;Reflections on the Mozilla Code Review Pilot&lt;/a&gt; (phase 1)&lt;/li&gt;
&lt;li&gt;ISEES Meeting software lifecycle: &lt;a href=&quot;http://carlboettiger.info/2013/08/13/ISEES-Day-1.html&quot;&gt;Day 1&lt;/a&gt;, &lt;a href=&quot;http://carlboettiger.info/2013/08/14/ISEES-day-2.html&quot;&gt;Day 2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ISEES Software training &lt;a href=&quot;http://carlboettiger.info/2013/09/10/ISEES-training-workshop-day-1.html&quot;&gt;Day 1&lt;/a&gt;, &lt;a href=&quot;http://carlboettiger.info/2013/09/11/ISEES-Workforce-Development-Day-2.html&quot;&gt;Day 2&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://carlboettiger.info/2013/07/09/reviewing-software-revisited.html&quot;&gt;Reviewing Software, revisited&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://carlboettiger.info/2013/06/13/what-I-look-for-in-software-papers.html&quot;&gt;What I look for in software papers&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;I have just been reading through &lt;code&gt;r citet(&amp;quot;10.1126/science.1231535&amp;quot;, &amp;quot;critiques&amp;quot;)&lt;/code&gt;. While I agree with a lot of the sentiment in this article, (we place way too little emphasis on good coding practices, validation, etc.), I actually found this article incredibly frustrating. Following a little &lt;a href=&quot;https://plus.google.com/112929796403983408632/posts/8whV6rtvsuw&quot;&gt;rant on Google+&lt;/a&gt; (G+ has to be good for something, right?) and subsequent discussion, I’ve tried formulating my thoughts into a blog post here.&lt;/p&gt;
&lt;p&gt;What first got my goat were the proposed “solutions” to the problem. I think it is hopelessly naive to write that the solution is “better computational education” and “peer review of code”.&lt;/p&gt;
&lt;h3 id=&quot;calling-for-better-education-is-a-cop-out&quot;&gt;Calling for better education is a cop-out&lt;/h3&gt;
&lt;p&gt;I completely agree that better education is sorely needed, and am delighted to see the authors cite the &lt;a href=&quot;http://softwarecarpentry.org&quot;&gt;Sofware Carpentry&lt;/a&gt; project (Though couldn’t they have made this a proper citations with a link?). However, this is an all too common cop-out of an answer that will do little to address the real problem. For decades such position papers have called for better education to address all our weaknesses – biologists should learn better mathematics, better statistics, better programming skills. They should also learn proper data management and archiving skills no doubt. While we’re at it, they should learn more about communicating science and public speaking too. What these calls to “raise standards” have in common is a &lt;strong&gt;dearth of incentives&lt;/strong&gt;. Reward these talents with jobs and advancement (publications and grants, after all, are just a means to such ends, are they not?) and the education will follow. Economics teaches us that if we want to change behavior, we change incentives. Unless this education translates into the currency of academia, we will only do our students a disservice by forcing it upon them. (I do note that Software Carpentry rightly claims that the kind of training it offers does promise to pay off in the current currency through time savings that will be realized down the line…)&lt;/p&gt;
&lt;h3 id=&quot;peer-review-of-code-is-not-the-answer&quot;&gt;Peer review of code is not the answer&lt;/h3&gt;
&lt;p&gt;If “peer review” were the ultimate solution to good code, we’d see that standard in the software industry too, wouldn’t we? Peer review actually is used in the software industry, if perhaps more the way we treat “friendly review” then with the black-and-white view we attach to peer review in the scientific literature. Peer review would never guarantee the validity of code, though it would certainly help. The real bugbear with peer review of code is just how difficult it would be to establish as a practice. The authors are silent on these challenges: organizing, incentivising, transitioning to, and paying for such a system would all be major hurdles to overcome.&lt;/p&gt;
&lt;p&gt;I would trust software that has a long and active development history with an engaged user base much more than anything that has simply been “peer reviewed”. I suspect that instituting peer review of code in the sciences would be a huge challenge for a potentially limited payoff. If open source taught us nothing else, it is that “with many eyes all bugs are shallow”. Robust software must ultimately rely on bug report feedback cycle of users (and developers following the &lt;a href=&quot;&quot;&gt;“dog food” rule&lt;/a&gt;).&lt;/p&gt;
&lt;h2 id=&quot;so-what-is-the-problem-exactly&quot;&gt;So what is the problem, exactly?&lt;/h2&gt;
&lt;p&gt;If the proposed solutions are weak, the statement of the problem is not actually much more convincing. What, exactly, is the “troubling trend” alluded to in the title? The primary concern from their survey appears to be that scientists rely on personal recommendations, ease of use, and frequency of use in published studies when choosing what software to use. This approach is only “dangerous” if we assume that a scientist has a choice of N potential software applications to perform a task, of which some fraction F are faulty. (And that a “worrying” 80% want to become better programmers…)&lt;/p&gt;
&lt;p&gt;But does this study argue any of the software there users approached was faulty? No. Do they provide evidence that the metrics a researcher uses (popularity, trust, ease of use) are not good predictors of decent software? No! They just assume this can’t possibly be a good criterion to evaluate software.&lt;/p&gt;
&lt;p&gt;Suggesting that this criterion is to blame misses the underlying problem entirely. Researchers will always prefer software that has been used in published studies, is easy to use, and recommended by people they trust. If this is leading to problems, we must fix the software, not the people.&lt;/p&gt;
&lt;p&gt;Reliance on common software is replacing reliance on undisclosed software written from scratch by each researcher. It is much easier to identify and correct errors when the community all uses a common piece of software then when everything is done from scratch. Crucially, this shows the emergence of a common code base – a shared software infrastructure, emerging in many fields. This development is to be celebrated and taken advantage of rather than something to fret over. A shared infrastructure is a powerful thing.&lt;/p&gt;
&lt;h2 id=&quot;real-solutions-changing-incentives&quot;&gt;Real solutions: changing incentives&lt;/h2&gt;
&lt;p&gt;Of course there are some real gems in the paper that should have recieved more emphasis.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Current models for how scientists and journals are rewarded must change, as the would-be editors of the Open Research Computation journal (now a series of the journal Source Code for Biology and Medicine) discovered during efforts to establish a journal for publishing peer-reviewed software ( 27).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Reward software the way we reward papers. Github model of contributions.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/05/20/notes.html"/>
   <updated>2013-05-20T00:00:00+00:00</updated>
   <id>/05/20/notes</id>
   <content type="html">&lt;h2 id=&quot;ews-te-revisions&quot;&gt;EWS TE revisions&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Finalized manuscript(?) Checking references, reply letter, closing remaining &lt;a href=&quot;https://github.com/cboettig/ews-review/issues&quot;&gt;issues&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Very annoying to submit to a journal system that takes LaTeX but not any external style or class file dependencies. For instance, how does one add two footnotes to the same author without adding any such dependencies (oh, and writing macros that do not involve pairs of &lt;code&gt;$&lt;/code&gt; which pandoc mistakes for its own macros…) Reasonable author affiliations done otherwise using &lt;code&gt;\and&lt;/code&gt;, &lt;code&gt;\thanks&lt;/code&gt;, and &lt;code&gt;\footnotemark&lt;/code&gt;; see &lt;a href=&quot;&quot;&gt;simple.latex&lt;/a&gt; pandoc template.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Final edits from Alan.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;prosecutor-comment-revisions&quot;&gt;prosecutor comment revisions&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;added Figure for Allee model into reply document.&lt;/li&gt;
&lt;li&gt;added code for generating figures &lt;a href=&quot;https://raw.github.com/cboettig/earlywarning/68f7bba05586d425f1bbfcdb1fe66f0597a3d35b/inst/doc/Figure1.Rmd&quot;&gt;Figure1.Rmd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;combined all four data files into a single tidy data.frame as &lt;a href=&quot;https://raw.github.com/cboettig/earlywarning/68f7bba05586d425f1bbfcdb1fe66f0597a3d35b/inst/doc/Figure1.csv&quot;&gt;csv&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ropensci&quot;&gt;ropensci&lt;/h2&gt;
&lt;p&gt;Example API queries using Whitehouse Open Data &lt;a href=&quot;https://github.com/project-open-data/csv-to-api&quot;&gt;CSV-API&lt;/a&gt; tool.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://ropensci.org/csv-to-api/index.php?source=https://explore.data.gov/download/7tag-iwnu/CSV&amp;amp;source_format=csv&amp;amp;format=html&quot;&gt;CSV file&lt;/a&gt; (as displayed from the API)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://ropensci.org/csv-to-api/index.php?source=https://explore.data.gov/download/7tag-iwnu/CSV&amp;amp;source_format=csv&amp;amp;format=xml&amp;amp;Magnitude=1.6&quot;&gt;XML query&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://ropensci.org/csv-to-api/index.php?source=https://explore.data.gov/download/7tag-iwnu/CSV&amp;amp;source_format=csv&amp;amp;format=json&amp;amp;callback=parse_results&quot;&gt;JSON query&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;rfishbase-queries&quot;&gt;rfishbase queries&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Continue to get questions about performing queries on fishbase that are just not possible with their current awful data model. This time: how can one extract the 400 natural mortality rate estimates mentioned on &lt;a href=&quot;http://www.fishbase.org/manual/fishbasenatural_mortality00002689.htm&quot;&gt;this page&lt;/a&gt;. No, the page entitled &lt;a href=&quot;http://www.fishbase.org/manual/fishbasethe_popgrowth_table.htm&quot;&gt;popgrowth&lt;/a&gt; doesn’t actually show you the table.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;pdg-control-policycosts&quot;&gt;pdg-control: policycosts&lt;/h3&gt;
&lt;p&gt;Over the weekend, re-ran the policy costs analysis with the simpler apples-to-apples comparison (after stream-lining the code a bit more). General patterns remain the same. Also added a block for showing how well we are doing on our grid sampling at getting to a shared npv0 level.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Comparison when adjustment costs reduce net present value by 50% &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/582cc266eeda686ac42c9e1e652cc809b2f861f0/inst/examples/policycosts/writeup.md&quot;&gt;pdg_control/582cc26&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;The original 25% reduction (e.g. to 75% of the NPV) &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/59dca5fc085b93c4f9f833562267b6bdc5a10a55/inst/examples/policycosts/writeup.md&quot;&gt;pdg_control/59dca5f&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;h3 id=&quot;notebook&quot;&gt;Notebook&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;obfuscated email via &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/36b4cd8bdf2f9c943619631dc17e867c0c951d38/assets/js/obfuscate-email.js&quot;&gt;javascript&lt;/a&gt;, copy-paste and mailto: should still work. (Of course a scraper could use the very javascript code to access the email addresses, but I find this preferable to a solution that intenionally burdens the user). Spam filters should handle the rest.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Interesting reading about &lt;a href=&quot;http://mikegerwitz.com/docs/git-horror-story.html&quot;&gt;signing individual Git commits&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Null Distribution Width Minor Puzzle</title>
	 <link href="/2013/05/17/null-distribution-width-minor-puzzle.html"/>
   <updated>2013-05-17T00:00:00+00:00</updated>
   <id>/05/17/null-distribution-width-minor-puzzle</id>
   <content type="html">&lt;p&gt;A quick foray into trying to understand why I see the wider distribution (though still symmetric) in the null of the OU model then in the null from the Allee model in the Prosecutor’s fallacy.&lt;/p&gt;
&lt;p&gt;Load the original run of the &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/712b63d2719839b6bbf4188d9affb34d7cec68ce/inst/examples/beer.md&quot;&gt;ou model&lt;/a&gt; and increase the &lt;code&gt;nulldt&lt;/code&gt; data frame to use all points instead of a sample of length 5000&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;load&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;beer_run.rda&amp;quot;&lt;/span&gt;)

ou_dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dat
ou_null &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;nulldat
&lt;span class=&quot;co&quot;&gt;#ou_null_ts &amp;lt;- nulldt&lt;/span&gt;

null &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;timeseries &lt;span class=&quot;co&quot;&gt;#[1000:6010,]&lt;/span&gt;
null &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.data.frame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;dim&lt;/span&gt;(null)[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], null))
ndf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(null, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(ndf) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;levels&lt;/span&gt;(ndf$reps) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;levels&lt;/span&gt;(ndf$reps)) &lt;span class=&quot;co&quot;&gt;# use numbers for reps instead of V1, V2, etc&lt;/span&gt;
nulldt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(ndf)
ou_null_ts &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;nulldt&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Plot the final distribution of indicator statistics, showing the width of the null,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_histogram&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;..density..), &lt;span class=&quot;dt&quot;&gt;binwidth=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.3&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlim&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;nulldat, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value), &lt;span class=&quot;dt&quot;&gt;adjust=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Kendall&amp;#39;s tau&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_bw&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8558/8747591959_9944ea987d_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-4&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-4&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Load the &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/712b63d2719839b6bbf4188d9affb34d7cec68ce/inst/examples/comment.md&quot;&gt;allee model&lt;/a&gt; and rename variables appropriately,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;load&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;comment_run.rda&amp;quot;&lt;/span&gt;)
allee_dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dat
allee_null &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;nulldat
allee_null_ts &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;nulldt&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For the Allee model, also plot the final distribution of indicator statistics, showing the width of the null,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_histogram&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;..density..), &lt;span class=&quot;dt&quot;&gt;binwidth=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.3&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlim&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;nulldat, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value), &lt;span class=&quot;dt&quot;&gt;adjust=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Kendall&amp;#39;s tau&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_bw&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7315/8748715116_c9440843f1_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-6&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-6&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Tidy the data and plot a single replicate from each. Note the OU process has the correspondingly much wider null distribution due to&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;allee_x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(allee_null_ts, reps==&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
ou_x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(ou_null_ts, reps==&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
allee_x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; allee_x$time, &lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; allee_x$value)
ou_x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; ou_x$time, &lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; ou_x$value)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(allee_x, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7323/8747593003_dfbd94b355_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-7&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-7&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(ou_x, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7295/8747593115_4320618635_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-7&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-7&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Note that subsampling the data at coarser interval doesn’t matter&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(ou_x[&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(ou_x$value),&lt;span class=&quot;dt&quot;&gt;by=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;),], window_var)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;    tau 
-0.5527 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Nor does scaling matter (recall Kendall’s &lt;span class=&quot;math&quot;&gt;\(tau\)&lt;/span&gt; is a rank-correlation test)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time=&lt;/span&gt;ou_x$time, &lt;span class=&quot;dt&quot;&gt;value=&lt;/span&gt;(ou_x$value&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;)*&lt;span class=&quot;dv&quot;&gt;500&lt;/span&gt;), window_var)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;    tau 
-0.5516 &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time=&lt;/span&gt;ou_x$time, &lt;span class=&quot;dt&quot;&gt;value=&lt;/span&gt;ou_x$value), window_var)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;    tau 
-0.5516 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Lengthening the sample suggests the sampling is not long enough to have converged in distribution of this statistic. Computing on this fine sampling resolution over adequate length of time quickly becomes prohibitive.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;20000&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;by=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;), function(i) &lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(ou_x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:i,], window_var))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;       tau        tau        tau        tau        tau        tau 
 0.1802475 -0.0832527  0.6365570  0.1787726 -0.1747774 -0.5295226 
       tau        tau        tau        tau        tau        tau 
-0.5403782 -0.6790710 -0.6114706 -0.2950858 -0.0444861  0.0006919 
       tau        tau        tau        tau        tau        tau 
-0.2579410 -0.5220490 -0.6439519 -0.6221482 -0.5545048 -0.5134236 
       tau        tau 
-0.5265975 -0.5515807 &lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/05/16/notes.html"/>
   <updated>2013-05-16T00:00:00+00:00</updated>
   <id>/05/16/notes</id>
   <content type="html">&lt;h2 id=&quot;prosecutor&quot;&gt;Prosecutor&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Add figures for both examples with and without ASS&lt;/li&gt;
&lt;li&gt;text to accomidate both examples&lt;/li&gt;
&lt;li&gt;ROC curves?&lt;/li&gt;
&lt;li&gt;proof-reading&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ews-review&quot;&gt;ews-review&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;looking over revisions, touch-ups&lt;/li&gt;
&lt;li&gt;See issues log for details&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;links&quot;&gt;Links&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Impressive set of tools provided by the Whitehouse &lt;a href=&quot;http://project-open-data.github.io/&quot;&gt;open data project&lt;/a&gt; In particular, see the &lt;a href=&quot;https://github.com/project-open-data/csv-to-api&quot;&gt;tool&lt;/a&gt; for generating a RESTful API from CSV files and the “common core” &lt;a href=&quot;http://project-open-data.github.io/metadata-resources/#common_core_required_fields_equivalents&quot;&gt;metadata definitions&lt;/a&gt;. Notebook complies with many of these (throught the Dublin core RDFa), but looks like I could benefit from adding some more terms from the &lt;a href=&quot;http://www.w3.org/TR/vocab-dcat/#property--access-download&quot;&gt;Data Catalog Vocabulary&lt;/a&gt;. Awesome that this site is built with Twitter-Bootstrap and Jekyll, hosted on Github, and licenced as CC-BY (content) and MIT (code). See for example, the &lt;a href=&quot;https://github.com/project-open-data/project-open-data.github.io/issues&quot;&gt;issues log&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;notebook&quot;&gt;Notebook&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;added black-white theme for readers that prefer higher contrast / more traditional appearance. Otherwise matches the orginal feel reasonably well. (&lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/70&quot;&gt;#70&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Dropped the local javascript based search using the stemming engine (&lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/7&quot;&gt;#7&lt;/a&gt;). The stemming search was reasonably fast, but only matches words instead of phrases (and adds considerable overhead to generating the site).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/05/14/notes.html"/>
   <updated>2013-05-14T00:00:00+00:00</updated>
   <id>/05/14/notes</id>
   <content type="html">&lt;p&gt;Exploring potential plots that would allow for some visualization of the uncertainty in each of the models. Example follows up on analysis of &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/e97043d690b81e1fdd777e7d2f927cdee8fba653/inst/examples/BUGS/allen.md&quot;&gt;e97043d/allen.md&lt;/a&gt;, as also in the script from &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/b5d78b9bca5dbf08828f1882eda1676e29958df3/inst/examples/BUGS/step_ahead_plots.md&quot;&gt;b5d78b9/step_ahead_plots.md&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;one-step-ahead-predictor-plots-and-forecasting-plots&quot;&gt;One-step ahead predictor plots and forecasting plots&lt;/h2&gt;
&lt;p&gt;Set our usual plotting options for the notebook&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;opts_chunk$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;tidy =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;warning =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;message =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;cache =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;comment =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;fig.width =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;fig.height =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(ggplot2)
opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;upload.fun =&lt;/span&gt; socialR::flickr.url)
&lt;span class=&quot;kw&quot;&gt;theme_set&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;theme_bw&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;base_size =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;12&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;theme_update&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;panel.background =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;element_rect&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;colour =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;), 
    &lt;span class=&quot;dt&quot;&gt;plot.background =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;element_rect&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;colour =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;))
cbPalette &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;#000000&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#E69F00&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#56B4E9&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#009E73&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#F0E442&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#0072B2&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;st&quot;&gt;&amp;quot;#D55E00&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#CC79A7&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now we show how each of the fitted models performs on the training data (e.g. plot of the step-ahead predictors). For the GP, we need to predict on the training data first:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gp_f_at_obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_predict&lt;/span&gt;(gp, x, &lt;span class=&quot;dt&quot;&gt;burnin=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e4&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;thin=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;300&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For the parametric models, prediction is a matter of feeding in each of the observed data points to the fitted parameters, like so&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;step_ahead &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, f, p){
  h =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
  x_predict &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x, f, h, p)
  n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x_predict) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
  y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], x_predict[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:n])
  y
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which we apply over each of the fitted models, including the GP, organizing the “expected” transition points (given the previous point) into a data frame.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x), &lt;span class=&quot;dt&quot;&gt;stock =&lt;/span&gt; x, 
                &lt;span class=&quot;dt&quot;&gt;GP =&lt;/span&gt; gp_f_at_obs$E_Ef,
                &lt;span class=&quot;dt&quot;&gt;True =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x,f,p),  
                &lt;span class=&quot;dt&quot;&gt;MLE =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x,f,est$p), 
                &lt;span class=&quot;dt&quot;&gt;Parametric.Bayes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x, f, bayes_pars), 
                &lt;span class=&quot;dt&quot;&gt;Ricker =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x,alt$f, ricker_bayes_pars), 
                &lt;span class=&quot;dt&quot;&gt;Myers =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x, Myer_harvest, myers_bayes_pars)
                 ), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;))

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, stock)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value, &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;variable)) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7294/8743766846_a5d6b20f15_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;posterior-predictive-curves&quot;&gt;Posterior predictive curves&lt;/h2&gt;
&lt;p&gt;This shows only the mean predictions. For the Bayesian cases, we can instead loop over the posteriors of the parameters (or samples from the GP posterior) to get the distribution of such curves in each case.&lt;/p&gt;
&lt;p&gt;We will need a vector version (&lt;code&gt;pmin&lt;/code&gt; in place of &lt;code&gt;min&lt;/code&gt;) of this function that can operate on the posteriors, others are vectorized already.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;ricker_f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x,h,p){
  &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x, function(x){ 
    x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;pmax&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, x-h) 
    &lt;span class=&quot;kw&quot;&gt;pmax&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, x *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] )) )
  })
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then we proceed as before, now looping over 100 random samples from the posterior for each Bayesian estimate. We write this as a function for easy reuse.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(MASS)

step_ahead_posteriors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x){
gp_f_at_obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_predict&lt;/span&gt;(gp, x, &lt;span class=&quot;dt&quot;&gt;burnin=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e4&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;thin=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;300&lt;/span&gt;)
df_post &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sample&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;), 
  function(i){
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x), &lt;span class=&quot;dt&quot;&gt;stock =&lt;/span&gt; x, 
                &lt;span class=&quot;dt&quot;&gt;GP =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;mvrnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, gp_f_at_obs$Ef_posterior[,i], gp_f_at_obs$Cf_posterior[[i]]),
                &lt;span class=&quot;dt&quot;&gt;True =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x,f,p),  
                &lt;span class=&quot;dt&quot;&gt;MLE =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x,f,est$p), 
                &lt;span class=&quot;dt&quot;&gt;Parametric.Bayes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x, allen_f, pardist[i,]), 
                &lt;span class=&quot;dt&quot;&gt;Ricker =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x, ricker_f, ricker_pardist[i,]), 
                &lt;span class=&quot;dt&quot;&gt;Myers =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;step_ahead&lt;/span&gt;(x, myers_f, myers_pardist[i,]))
  }), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;))

}


df_post &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;step_ahead_posteriors&lt;/span&gt;(x)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df_post) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, stock)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value, &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(L1,variable)), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey, &lt;span class=&quot;dt&quot;&gt;guide =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;guide_legend&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;override.aes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;))) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7290/8742650211_92d087672b_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;alternately, try the plot without facets&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df_post) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, stock)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value, &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(L1,variable)), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey, &lt;span class=&quot;dt&quot;&gt;guide =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;guide_legend&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;override.aes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;))) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7284/8743767710_17a0bc6428_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;performance-on-data-outside-of-observations&quot;&gt;Performance on data outside of observations&lt;/h2&gt;
&lt;p&gt;Of course it is hardly suprising that all models do reasonably well on the data on which they were trained. A crux of the problem is the model performance on data outside the observed range. (Though we might also wish to repeat the above plot on data in the observed range but a different sequence from the observed data).&lt;/p&gt;
&lt;p&gt;First we generate some data from the underlying model coming from below the tipping point:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Tobs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt;
y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(Tobs)
y[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;4.5&lt;/span&gt;
for(t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(Tobs&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;))
    y[t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;z_g&lt;/span&gt;() *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(y[t], &lt;span class=&quot;dt&quot;&gt;h=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p=&lt;/span&gt;p)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Proceed as before on this data:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;crash_data &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;step_ahead_posteriors&lt;/span&gt;(y)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(crash_data) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, stock)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value, &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(L1,variable)), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey, &lt;span class=&quot;dt&quot;&gt;guide =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;guide_legend&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;override.aes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;))) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7282/8742650625_efd126ef62_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Note that the GP is doing remarkably well even outside the observed range, though with greater uncertainty as well. Other models tend to be overly optimistic, often predicting an increase instead of a decline, hence the many trajectories that continually float above the data.&lt;/p&gt;
&lt;h2 id=&quot;forecast-distributions&quot;&gt;Forecast Distributions&lt;/h2&gt;
&lt;p&gt;Another way to visualize this is to look directly at the distribution predicted under each model, one step and several steps into the future (say, at a fixed harvest level). Here we have a simple function that will look one step ahead of the given &lt;code&gt;x&lt;/code&gt; (given as index &lt;code&gt;i&lt;/code&gt;), then &lt;code&gt;Tobs&lt;/code&gt; steps ahead, then &lt;code&gt;2*Tobs&lt;/code&gt; steps ahead, each at a fixed harvest. This lets us compare both the expected outcome over short and long term under a given harvest policy, as well as seeing how the distribution of possible outcomes evolves.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(expm)
get_forecasts &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(i, Tobs, h_i){

df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(
  &lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x_grid,  
  &lt;span class=&quot;dt&quot;&gt;GP =&lt;/span&gt; matrices_gp[[h_i]][i,], 
  &lt;span class=&quot;dt&quot;&gt;True =&lt;/span&gt; matrices_true[[h_i]][i,], 
  &lt;span class=&quot;dt&quot;&gt;MLE =&lt;/span&gt; matrices_estimated[[h_i]][i,], 
  &lt;span class=&quot;dt&quot;&gt;Parametric.Bayes =&lt;/span&gt; matrices_par_bayes[[h_i]][i,], 
  &lt;span class=&quot;dt&quot;&gt;Ricker =&lt;/span&gt; matrices_alt[[h_i]][i,],
  &lt;span class=&quot;dt&quot;&gt;Myers =&lt;/span&gt; matrices_myers[[h_i]][i,])

df2 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(
  &lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x_grid,
  &lt;span class=&quot;dt&quot;&gt;GP =&lt;/span&gt; (matrices_gp[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Tobs)[i,], 
  &lt;span class=&quot;dt&quot;&gt;True =&lt;/span&gt; (matrices_true[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Tobs)[i,], 
  &lt;span class=&quot;dt&quot;&gt;MLE =&lt;/span&gt; (matrices_estimated[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Tobs)[i,],
  &lt;span class=&quot;dt&quot;&gt;Parametric.Bayes =&lt;/span&gt; (matrices_par_bayes[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Tobs)[i,], 
  &lt;span class=&quot;dt&quot;&gt;Ricker =&lt;/span&gt; (matrices_alt[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Tobs)[i,], 
  &lt;span class=&quot;dt&quot;&gt;Myers =&lt;/span&gt; (matrices_myers[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Tobs)[i,])

T2 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Tobs

df4 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(
  &lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x_grid,
  &lt;span class=&quot;dt&quot;&gt;GP =&lt;/span&gt; (matrices_gp[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;T2)[i,], 
  &lt;span class=&quot;dt&quot;&gt;True =&lt;/span&gt; (matrices_true[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;T2)[i,], 
  &lt;span class=&quot;dt&quot;&gt;MLE =&lt;/span&gt; (matrices_estimated[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;T2)[i,],
  &lt;span class=&quot;dt&quot;&gt;Parametric.Bayes =&lt;/span&gt; (matrices_par_bayes[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;T2)[i,], 
  &lt;span class=&quot;dt&quot;&gt;Ricker =&lt;/span&gt; (matrices_alt[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;T2)[i,], 
  &lt;span class=&quot;dt&quot;&gt;Myers =&lt;/span&gt; (matrices_myers[[h_i]] %^%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;T2)[i,])

forecasts &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;T_start =&lt;/span&gt; df, &lt;span class=&quot;dt&quot;&gt;T_mid =&lt;/span&gt; df2, &lt;span class=&quot;dt&quot;&gt;T_end =&lt;/span&gt; df4), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;)

}

i =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;15&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This takes &lt;code&gt;i&lt;/code&gt;, an index to &lt;code&gt;x_grid&lt;/code&gt; value (e.g. for &lt;code&gt;i&lt;/code&gt;=15 corresponds to a starting postion &lt;code&gt;x&lt;/code&gt; = 3.4286)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;forecasts &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;get_forecasts&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;i =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;15&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Tobs =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;h_i =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(forecasts) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, value, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(variable, L1), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;lty=&lt;/span&gt;L1)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free_y&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7283/8743768066_ae4cb1a63d_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-10&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-10&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;We can compare to a better starting stock,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;i&amp;lt;-&lt;span class=&quot;dv&quot;&gt;30&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;where &lt;code&gt;i&lt;/code&gt;=30 corresponds to a starting postion &lt;code&gt;x&lt;/code&gt; = 7.102&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;forecasts &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;get_forecasts&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;i =&lt;/span&gt; i, &lt;span class=&quot;dt&quot;&gt;Tobs =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;h_i =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(forecasts) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, value, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(variable, L1), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;lty=&lt;/span&gt;L1)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free_y&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7289/8743768174_106af587ce_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Note the greater uncertainty in both the positive and negative outcomes under the parametric Bayesian models (of correct and incorrect structure).&lt;/p&gt;
&lt;h2 id=&quot;misc-reading&quot;&gt;Misc reading&lt;/h2&gt;
&lt;p&gt;Apparently I am catching up on my C. Titus Brown reading… Achiving comments for my records &amp;amp; to keep them in my local search index.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://ivory.idyll.org/blog/blog-practicing-open-science.html&quot;&gt;Titus Brown on if he really practices Open Science?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Methinks:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I think you undersell your Github practices regarding Open Science. While I agree entirely that anyone reading through your source-code to scoop you is incredibly unlikely; I imagine many researchers would still fear the practice of using a public, Google-indexed repository, particularly if they also practice reasonable literate programming documentation, provide test cases, and use issue tracking that could allow some close rival to scoop them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;It sounds like you are talking more about not marketing your work before it is “finished”, rather not being open. (When you say “to really open up about what we’re doing” I assume you mean advertising the results, rather than something like simply putting your notebook or publication drafts on github). Though “Open Science” is used in in both contexts, marketing your pre-publication science takes additional time that exposing your workflow on Github does not. The latter practice provides transparency, provenance machine-discoverability, (and cool graphs of research contributions like https://github.com/ctb/khmer/c… etc. Perhaps you are too hard on yourself here.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Meanwhile, I think suggesting that being open prematurely would “waste other people’s time, energy, and attention” is misleading and damaging here. Sure, I understand you mean that marketing unfinished results (blog, tweet, present at conferences) would do these things, but when the same reason is frequently given for not sharing data, code, etc this becomes very damaging. Some people may find it useful to blog/tweet/present unfinished work (with appropriate disclaimer) to get feedback, build audience, or for all the same reasons one would do so with published work, but to me that is really just a question of timing &amp;amp; marketing, not a question of “openness”.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://ivory.idyll.org/blog/research-software-reuse.html&quot;&gt;On Research Software Reuse&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://ivory.idyll.org/blog/the-cost-of-open-science.html&quot;&gt;On the Costs of Open Science&lt;/a&gt;, which I refute:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Great post and important question. I certainly agree that it is all about incentives, but I think an important missing part of that discussion is in the timescales. Certainly there is a cost to not writing up the low-lying fruit following up on your work, but surely such exercises would take non-trivial time away from doing whatever (presumably more interesting) stuff you did instead. Perhaps the it is the benefits, not the costs, that are hidden:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;It sounds like you may have forgone a short-term cost in not publishing these easy follow-ups while gaining a benefit both of time to work on other interesting things and of getting other researchers invested in your work, who might not have taken it up at all if there was no low-hanging fruit to entice them in. Once invested in it, no doubt they can continue to be a multiplier of impact. Meanwhile you break new ground rather than appearing to continue to wring every ounce from one good idea, right? (If I read this correctly, both you and George Gey appear to regard these other publications as not particularly exciting work; the regret comes only because they are intrinsically valued publications)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;It sounds like the difficulty with these benefits is that they pay off only on a longer timescale than the gristmill publication strategy. On the longest timescales, e.g. career lifetime, it seems clear that at least in a statistical sense, researchers who keep breaking new ground while allowing others to pick the low-hanging follow-up work will be much more likely to end up as the most distinguished researchers, etc. When the relevant timescale is a tenure clock rather than a career, the perhaps the calculus is different?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Without open science, moving on to other exciting stuff is far less effective, since it leaves both unfinished work and less impact. Perhaps this a somewhat idealized view, and perhaps the timescales for tenure etc work against this strategy. You and others could no doubt better speak to whether the candidate who says “look at all the papers I wrote about X” or the one who says “look at all the papers others have built upon my method X while I break ground in hard problem Y” has the stronger case.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://gist.github.com/hadley/5576263&quot;&gt;Partial implementation of R to Latex equation converter&lt;/a&gt; from &lt;span class=&quot;citation&quot; data-cites=&quot;hadleywickam&quot;&gt;@hadleywickam&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ah ha! &lt;a href=&quot;http://stackoverflow.com/questions/14041601/documenting-equations-with-deqn-and-roxygen&quot;&gt;Documenting equations in ROxygen&lt;/a&gt;. Guess one day I (or devtools) will move to Roxygen3.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/05/13/notes.html"/>
   <updated>2013-05-13T00:00:00+00:00</updated>
   <id>/05/13/notes</id>
   <content type="html">&lt;h3 id=&quot;prosecutors-fallacy-comment&quot;&gt;Prosecutor’s Fallacy comment&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fallacy comment revisions&lt;/li&gt;
&lt;li&gt;Comment reply letter (draft)&lt;/li&gt;
&lt;li&gt;ROC curves instead? (&lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/abcc1cd727f2a45ee7cbb2220135a6ebfc3e4277/inst/doc/roc_curves.md&quot;&gt;examples&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add example of system with an alternative stable state?&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;policy-costs-pdg-control&quot;&gt;Policy costs (pdg-control)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;touched up &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/doc/policycosts/policycosts_PRA.tex&quot;&gt;tex document&lt;/a&gt; following Paul’s edits (mostly reflects comments and decisions from Meeting 3). Reminder of why collaborating on TeX documents can be annoying even when co-authors are tex-literate. Attempted quick conversion to markdown but mapping is troublesome.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Some &lt;a href=&quot;https://github.com/coolwanglu/pdf2htmlEX&quot;&gt;software&lt;/a&gt; providing rather impressive/high fidelity pdf to html conversion… Not just rendering as images – the text is searchable, though in the html source it just looks like a bunch of binary data URIs.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Scathingly honest review of the classical ecological statistics text by Sokal and Rohlf (&lt;a href=&quot;http://t.co/5IioNf1p1y&quot;&gt;pdf&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.steinsaltz.me.uk/pnas.html&quot;&gt;PNAS hates mathematics&lt;/a&gt; Not really, but a depressing example of poor reviewing.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Prep for ERE talk</title>
	 <link href="/2013/05/09/notes.html"/>
   <updated>2013-05-09T00:00:00+00:00</updated>
   <id>/05/09/notes</id>
   <content type="html">&lt;h2 id=&quot;talk-prep&quot;&gt;Talk prep&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Finished preparing slides for Environmental Resources Economics talk&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Toying around with animations for final plots. Building up plot by subsetting progressively more of the data each time is a bit of a nuciance (both in coding and efficiency). Can convert replicates to characters and assign as a data.table &lt;code&gt;key&lt;/code&gt; for fast join subsetting, but straight-forward subsetting seems best (e.g. once we want reps 1:5 from both “True” and “Ricker” models, &lt;code&gt;dt[J(c(&amp;quot;True&amp;quot;, &amp;quot;Ricker&amp;quot;), as.character(1:5)]&lt;/code&gt; doesn’t quite do this. (Can you guess what it gives? Actually alternates “True”+rep1, “Ricker”+rep2, “True”+rep3, …)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(animation)
&lt;span class=&quot;kw&quot;&gt;ani.options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;loop=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;saveMovie&lt;/span&gt;({    
    for (i in &lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, OptTime, &lt;span class=&quot;dt&quot;&gt;by=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)) {
      &lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(
        &lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(dt, method %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;True&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Ricker&amp;quot;&lt;/span&gt;) &amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;reps &amp;lt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt; &amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;time &amp;lt;=&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;i), 
               &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(reps,method), &lt;span class=&quot;dt&quot;&gt;color =&lt;/span&gt; method), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;9&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;          &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;() +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlim&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, OptTime)
        )
    }
}, &lt;span class=&quot;dt&quot;&gt;interval =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;movie.name =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;wrong-model.gif&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ani.width =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;600&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ani.height =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;600&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Added plots of one-step-ahead predictors, e.g.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7317/8736417226_03129480a9_c.jpg&quot; alt=&quot;One-step ahead predictions on orginal (training) data by each model&quot; /&gt;&lt;figcaption&gt;One-step ahead predictions on orginal (training) data by each model&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;All plots for slides also archived in &lt;a href=&quot;http://www.flickr.com/photos/cboettig/tags/ere2013&quot;&gt;flickr/ere2013&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Which were quickly converted from vector pdfs into decent resolution pngs with a few commands:&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt; in *.pdf &lt;span class=&quot;kw&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;convert&lt;/span&gt; -density 300 &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;$f&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;${f/&lt;/span&gt;.pdf&lt;span class=&quot;ot&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;.png &lt;span class=&quot;kw&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;done&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;flickr_upload&lt;/span&gt; --tag=&lt;span class=&quot;st&quot;&gt;&amp;quot;nonparametric-bayes ere2013 talk&amp;quot;&lt;/span&gt; *.png&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;(&lt;span class=&quot;showtooltip&quot; title=&quot;Sirota J, Baiser B, Gotelli N and Ellison A (2013). &amp;#39;Organic-Matter Loading Determines Regime Shifts And Alternative States in an Aquatic Ecosystem.&amp;#39; Proceedings of The National Academy of Sciences, 110, pp. 7742-7747. ISSN 0027-8424.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1221037110&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Sirota et al. 2013&lt;/a&gt;&lt;/span&gt; ) provide a cute example of a system that can be manipulated through a tipping point of eutrophication in the tiny pools forming inside pitcher plants by adding ground-up dead insects. A nice natural system that provides a more realistic setting than lab manipulations of single species micro-organisms while also being more accessible to replication that the whole-lake experiments in Wisconsin. I do note they critique retrospective analyses on the basis of length, but don’t mention the prosecutor’s fallacy. Five stars for archiving the raw data very nicely (see below) along with the mathematica notebook file used for the analysis. Also notable that the first author is an undergrad at North Dakota State.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Wow, Harvard Forest provides a data repository with EML files for each data entry (&lt;a href=&quot;http://t.co/G2sgd2n5L9&quot;&gt;example&lt;/a&gt;). EML file serves more as a metadata description, raw data provided as an 8.8 MB .csv file in tidy (long) format. Very nice.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;From the Whitehouse, executive order: &lt;a href=&quot;http://t.co/4mtDCuNoIG&quot;&gt;The default state of new and modernized Government information resources shall be open and machine readable&lt;/a&gt; I can’t really express just how incredible that is. May it impact government funded science appropriately. Whitehouse Chief technology officer and chief information officer explain the policy in &lt;a href=&quot;http://www.youtube.com/watch?v=n603rEnEGXA&quot;&gt;one minute&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;J. Sirota, B. Baiser, N. J. Gotelli, A. M. Ellison, (2013) Organic-Matter Loading Determines Regime Shifts And Alternative States in an Aquatic Ecosystem. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;110&lt;/strong&gt; 7742-7747 &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1221037110&quot;&gt;10.1073/pnas.1221037110&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/05/07/notes.html"/>
   <updated>2013-05-07T00:00:00+00:00</updated>
   <id>/05/07/notes</id>
   <content type="html">&lt;h2 id=&quot;monday&quot;&gt;Monday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;MacKenzie meeting&lt;/li&gt;
&lt;li&gt;paperwork to Marc&lt;/li&gt;
&lt;li&gt;paperwork to Karthik&lt;/li&gt;
&lt;li&gt;Writing&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;tuesday&quot;&gt;Tuesday&lt;/h2&gt;
&lt;h3 id=&quot;log&quot;&gt;Log&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Weak thresholds example – no cost but no profit if stocks are reduced below a certain threshold &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/6bdc9535f0def3c5f2ed168bfac9c86517d48466&quot;&gt;09:31 pm 2013/05/07&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;example using short (20 pts) observation period &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/ac225715a20a0628d84d33d240bced834228424c&quot;&gt;02:00 pm 2013/05/07&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;subset plotting of simulations (for slides potentially) &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/04ddf0d5022ed66d214d58232224dc618f7fa898&quot;&gt;02:00 pm 2013/05/07&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;script for the parallel analysis based on policy thresholds &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/ca0219bd833cae278aa855fc42c1c07b6aaf850f&quot;&gt;01:59 pm 2013/05/07&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;short vs long observation time runs &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/d420c0578e8c77906b4d4e7f94fa4c4dcdfefeee&quot;&gt;12:54 pm 2013/05/07&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;online example of replicates comparing all models &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/0f682028113e42355f811793c915252d40ac45bb&quot;&gt;12:28 pm 2013/05/07&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/sandbox/blob/c319b983535be2e79ea8987d68ad6d21f7bc5381/tex-pandoc-tricks/ucscletter.cls&quot;&gt;latex templates for UCSC AMS dept&lt;/a&gt; Gosh sometimes it’s nice to be officially in a department that understands tex.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://news.harvard.edu/gazette/story/2013/04/understanding-student-weaknesses/&quot;&gt;Best teacher’s know student’s misconceptions&lt;/a&gt; Hmm, our misconceptions are probably a bigger barrier than lack of knowledge for most scientists too…&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ohh, &lt;a href=&quot;http://jekyllrb.com/docs/upgrading/&quot;&gt;Jekyll 1.0 released&lt;/a&gt;, &lt;a href=&quot;https://github.com/mojombo/jekyll/blob/v1.0.0/History.txt&quot;&gt;changelog&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=pFJtwSXC6qA&quot;&gt;#openoxford’s debate&lt;/a&gt; Elseiver rep says that if they disclose prices, prices would be driven so low that they’d go out of buisness. Yikes, what would the economists say!&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Finally, you can &lt;a href=&quot;https://github.com/blog/1492-repository-search-on-all-repositories&quot;&gt;search within a git repositories&lt;/a&gt; (without cloning first and using grep obviously. Before one was had global search options only, albeit filtered by language, etc).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;showtooltip&quot; title=&quot;Callaway E (2013). &amp;#39;Biomedical Journal And Publisher Hope to Bring Preprints to Life.&amp;#39; Nature Medicine, 19, pp. 512-512. ISSN 1078-8956.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1038/nm0513-512&quot; rel=&quot;http://purl.org/spar/cito/critiques&quot; &gt;Callaway (2013)&lt;/a&gt;&lt;/span&gt; Ironic that they quote &lt;span class=&quot;citation&quot; data-cites=&quot;mfenner&quot;&gt;@mfenner&lt;/span&gt; saying that peerJ preprints are too like Nature Preceedings while also pointing out the role of archiving things like slides and posters (as these were categories of objects in Preceedings, but not in arXiv or PeerJ). Of course I agree with Martin about diverse outputs, but there appears to be something about the concept of preprint server that carries more meaning for people. Clearly figshare is a viable preprint server that is both the most discipline agonstic (arXiv isn’t interesting in expanding its scope, and peerJ’s stated scope does not cover earth science / climate science / physical oceanography side of things) and content-type agnostic (paper, poster, data, code, or anything else), and has a rich API that is absent or minimal in the other platforms.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;esa-schedule&quot;&gt;ESA schedule&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Sun Aug 4 noon-5pm &lt;a href=&quot;http://eco.confex.com/eco/2013/webprogrampreliminary/Session9030.html&quot;&gt;Conducting Open Science Using R and DataOne&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Tues Aug 6 8-10 pm &lt;a href=&quot;http://eco.confex.com/eco/2013/webprogrampreliminary/Session8911.html&quot;&gt;Open Science and Ecology&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ewen Callaway, (2013) Biomedical Journal And Publisher Hope to Bring Preprints to Life. &lt;em&gt;Nature Medicine&lt;/em&gt; &lt;strong&gt;19&lt;/strong&gt; 512-512 &lt;a href=&quot;http://dx.doi.org/10.1038/nm0513-512&quot;&gt;10.1038/nm0513-512&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Reading and potential examples for talk to ERE next week</title>
	 <link href="/2013/05/03/notes.html"/>
   <updated>2013-05-03T00:00:00+00:00</updated>
   <id>/05/03/notes</id>
   <content type="html">&lt;h2 id=&quot;parametric-bayesian-comparisons&quot;&gt;Parametric Bayesian comparisons&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Added parameteric Bayesian version of Ricker to the set of comparisons, see &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/ee4467c8defe81a27aadfbc4359cd0695339de6b/inst/examples/BUGS/allen.md&quot;&gt;allen.Rmd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Adjusted thinning of posterior sample before determining optimum of GP&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading-examples&quot;&gt;Reading / Examples&lt;/h2&gt;
&lt;p&gt;Need a nice set of basic fisheries examples involving potential tipping points for ERE talk. hmm.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;As mentioned in &lt;span class=&quot;showtooltip&quot; title=&quot;Worm B, Hilborn R, Baum J, Branch T, Collie J, Costello C, Fogarty M, Fulton E, Hutchings J, Jennings S, Jensen O, Lotze H, Mace P, McClanahan T, Minto C, Palumbi S, Parma A, Ricard D, Rosenberg A, Watson R and Zeller D (2009). &amp;#39;Rebuilding Global Fisheries.&amp;#39; Science, 325, pp. 578-585. ISSN 0036-8075.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1126/science.1173146&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Worm et al. (2009)&lt;/a&gt;&lt;/span&gt; .&lt;/li&gt;
&lt;li&gt;Algal-reef example from &lt;span class=&quot;showtooltip&quot; title=&quot;Aronson R and Precht W (2000). &amp;#39;Herbivory And Algal Dynamics on The Coral Reef at Discovery Bay, Jamaica.&amp;#39; Limnology And Oceanography, 45, pp. 251-255. .&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.4319/lo.2000.45.1.0251&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Aronson &amp;amp; Precht (2000)&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Fish collapse following reef distruction &lt;span class=&quot;showtooltip&quot; title=&quot;Paddack M, Reynolds J, Aguilar C, Appeldoorn R, Beets J, Burkett E, Chittaro P, Clarke K, Esteves R, Fonseca A, Forrester G, Friedlander A, García-Sais J, González-Sansón G, Jordan L, McClellan D, Miller M, Molloy P, Mumby P, Nagelkerken I, Nemeth M, Navas-Camacho R, Pitt J, Polunin N, Reyes-Nivia M, Robertson D, Rodríguez-Ramírez A, Salas E, Smith S, Spieler R, Steele M, Williams I, Wormald C, Watkinson A and Côté I (2009). &amp;#39;Recent Region-Wide Declines in Caribbean Reef Fish Abundance.&amp;#39; Current Biology, 19, pp. 590-595. ISSN 09609822.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.cub.2009.02.041&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Paddack et al. (2009)&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Alt stable states in marine systems &lt;span class=&quot;showtooltip&quot; title=&quot;Petraitis P and Dudgeon S (2004). &amp;#39;Detection of Alternative Stable States in Marine Communities.&amp;#39; Journal of Experimental Marine Biology And Ecology, 300, pp. 343-371. ISSN 00220981.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.jembe.2003.12.026&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Petraitis &amp;amp; Dudgeon (2004)&lt;/a&gt;&lt;/span&gt; , &lt;span class=&quot;showtooltip&quot; title=&quot;Osman R, Munguia P and Zajac R (2010). &amp;#39;Ecological Thresholds in Marine Communities: Theory, Experiments And Management.&amp;#39; Marine Ecology Progress Series, 413, pp. 185-187. ISSN 0171-8630.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.3354/meps08765&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Osman et al. (2010)&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Cod examples? Forage fish? Peruvian Anchovy. Overfishing vs climate variability.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;And more examples from marine systems in &lt;span class=&quot;showtooltip&quot; title=&quot;Oguz T and Velikova V (2010). &amp;#39;Abrupt Transition of The Northwestern Black Sea Shelf Ecosystem From A Eutrophic to an Alternative Pristine State.&amp;#39; Marine Ecology Progress Series, 405, pp. 231-242. ISSN 0171-8630.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.3354/meps08538&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Oguz &amp;amp; Velikova (2010)&lt;/a&gt;&lt;/span&gt; , &lt;span class=&quot;showtooltip&quot; title=&quot;Lindegren M, Diekmann R and Möllmann C (2010). &amp;#39;Regime Shifts, Resilience And Recovery of A Cod Stock.&amp;#39; Marine Ecology Progress Series, 402, pp. 239-253. ISSN 0171-8630.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.3354/meps08454&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Lindegren et al. (2010)&lt;/a&gt;&lt;/span&gt; , &lt;span class=&quot;showtooltip&quot; title=&quot;deYoung B, Barange M, Beaugrand G, Harris R, Perry R, Scheffer M and Werner F (2008). &amp;#39;Regime Shifts in Marine Ecosystems: Detection, Prediction And Management.&amp;#39; Trends in Ecology &amp;amp; Evolution, 23, pp. 402-409. ISSN 01695347.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2008.03.008&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;deYoung et al. (2008)&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Beyond tipping points: avoiding policy-based thresholds. &lt;span class=&quot;showtooltip&quot; title=&quot;Pikitch E (2012). &amp;#39;The Risks of Overfishing.&amp;#39; Science, 338, pp. 474-475. ISSN 0036-8075.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1126/science.1229965&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Pikitch (2012)&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;http://www.ecotippingpoints.org/our-stories/indepth/usa-hawaii-hanauma-environmental-management.html ?&lt;/li&gt;
&lt;li&gt;&lt;p&gt;http://www.ecotippingpoints.org/our-stories/indepth/philippines-apo-marine-sanctuary-coral-reef-fishery.html&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Richard B. Aronson, William F. Precht, (2000) Herbivory And Algal Dynamics on The Coral Reef at Discovery Bay, Jamaica. &lt;em&gt;Limnology And Oceanography&lt;/em&gt; &lt;strong&gt;45&lt;/strong&gt; 251-255 &lt;a href=&quot;http://dx.doi.org/10.4319/lo.2000.45.1.0251&quot;&gt;10.4319/lo.2000.45.1.0251&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;M Lindegren, R Diekmann, C Möllmann, (2010) Regime Shifts, Resilience And Recovery of A Cod Stock. &lt;em&gt;Marine Ecology Progress Series&lt;/em&gt; &lt;strong&gt;402&lt;/strong&gt; 239-253 &lt;a href=&quot;http://dx.doi.org/10.3354/meps08454&quot;&gt;10.3354/meps08454&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;T Oguz, V Velikova, (2010) Abrupt Transition of The Northwestern Black Sea Shelf Ecosystem From A Eutrophic to an Alternative Pristine State. &lt;em&gt;Marine Ecology Progress Series&lt;/em&gt; &lt;strong&gt;405&lt;/strong&gt; 231-242 &lt;a href=&quot;http://dx.doi.org/10.3354/meps08538&quot;&gt;10.3354/meps08538&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;RW Osman, P Munguia, RN Zajac, (2010) Ecological Thresholds in Marine Communities: Theory, Experiments And Management. &lt;em&gt;Marine Ecology Progress Series&lt;/em&gt; &lt;strong&gt;413&lt;/strong&gt; 185-187 &lt;a href=&quot;http://dx.doi.org/10.3354/meps08765&quot;&gt;10.3354/meps08765&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Michelle J. Paddack, John D. Reynolds, Consuelo Aguilar, Richard S. Appeldoorn, Jim Beets, Edward W. Burkett, Paul M. Chittaro, Kristen Clarke, Rene Esteves, Ana C. Fonseca, Graham E. Forrester, Alan M. Friedlander, Jorge García-Sais, Gaspar González-Sansón, Lance K.B. Jordan, David B. McClellan, Margaret W. Miller, Philip P. Molloy, Peter J. Mumby, Ivan Nagelkerken, Michael Nemeth, Raúl Navas-Camacho, Joanna Pitt, Nicholas V.C. Polunin, Maria Catalina Reyes-Nivia, D. Ross Robertson, Alberto Rodríguez-Ramírez, Eva Salas, Struan R. Smith, Richard E. Spieler, Mark A. Steele, Ivor D. Williams, Clare L. Wormald, Andrew R. Watkinson, Isabelle M. Côté, (2009) Recent Region-Wide Declines in Caribbean Reef Fish Abundance. &lt;em&gt;Current Biology&lt;/em&gt; &lt;strong&gt;19&lt;/strong&gt; 590-595 &lt;a href=&quot;http://dx.doi.org/10.1016/j.cub.2009.02.041&quot;&gt;10.1016/j.cub.2009.02.041&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Peter S. Petraitis, Steve R. Dudgeon, (2004) Detection of Alternative Stable States in Marine Communities. &lt;em&gt;Journal of Experimental Marine Biology And Ecology&lt;/em&gt; &lt;strong&gt;300&lt;/strong&gt; 343-371 &lt;a href=&quot;http://dx.doi.org/10.1016/j.jembe.2003.12.026&quot;&gt;10.1016/j.jembe.2003.12.026&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;E. K. Pikitch, (2012) The Risks of Overfishing. &lt;em&gt;Science&lt;/em&gt; &lt;strong&gt;338&lt;/strong&gt; 474-475 &lt;a href=&quot;http://dx.doi.org/10.1126/science.1229965&quot;&gt;10.1126/science.1229965&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;B. Worm, R. Hilborn, J. K. Baum, T. A. Branch, J. S. Collie, C. Costello, M. J. Fogarty, E. A. Fulton, J. A. Hutchings, S. Jennings, O. P. Jensen, H. K. Lotze, P. M. Mace, T. R. McClanahan, C. Minto, S. R. Palumbi, A. M. Parma, D. Ricard, A. A. Rosenberg, R. Watson, D. Zeller, (2009) Rebuilding Global Fisheries. &lt;em&gt;Science&lt;/em&gt; &lt;strong&gt;325&lt;/strong&gt; 578-585 &lt;a href=&quot;http://dx.doi.org/10.1126/science.1173146&quot;&gt;10.1126/science.1173146&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Brad deYoung, Manuel Barange, Gregory Beaugrand, Roger Harris, R. Ian Perry, Marten Scheffer, Francisco Werner, (2008) Regime Shifts in Marine Ecosystems: Detection, Prediction And Management. &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt; &lt;strong&gt;23&lt;/strong&gt; 402-409 &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2008.03.008&quot;&gt;10.1016/j.tree.2008.03.008&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notebook features: SHA Hashes</title>
	 <link href="/2013/05/03/notebook-features-hashes-providing-an-immutable-and-verifiable-research-record.html"/>
   <updated>2013-05-03T00:00:00+00:00</updated>
   <id>/05/03/notebook-features-hashes-providing-an-immutable-and-verifiable-research-record</id>
   <content type="html">&lt;p&gt;Note: this entry is part of a &lt;a href=&quot;http://carlboettiger.info/2013/04/26/notebook-features-introduction.html&quot;&gt;series of posts&lt;/a&gt; which explain some of the technical features of my lab notebook.&lt;/p&gt;
&lt;p&gt;I version manage all changes to my entry using git. Each page is linked to its source history on Github, which will display a list of all previous edits to the post with an easy-to-read commit log and highlighted diffs. A version history is often considered an essential part of an open lab notebook, where changes to the notebook are documented and preserved. While wikis, Google docs, Dropbox, Wordpress plugins, or just regular backups can provide version history of pages, none come close to comparison with a full version management system such as git. This is because git’s underlying architecture is based on&lt;br /&gt;&lt;a href=&quot;http://www-cs-students.stanford.edu/~blynn/gitmagic/ch08.html&quot;&gt;The magic of cryptographic SHA hashes&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Hashes provide an immutable and verifiable record of any all changes I make. Because the hash is generated by the cryptographic SHA1 algorithm from the contents of the site, it is impossible to make changes without causing the hash to update. By referencing the content’s hash value we can be sure to link to a constant version of the entry. These can be verified by re-generating the hash (requiring the previous state of the repository in this case, see note below). Unlike publication timestamps, versions, or DOIs, this provides a way not only to reference particular versions of a file, but a cryptographically secure way to &lt;em&gt;verify&lt;/em&gt; that the version is what it claims to be. &lt;a href=&quot;http://www.tkuhn.ch/&quot;&gt;Tobias Kuhn&lt;/a&gt; has &lt;a href=&quot;http://www.force11.org/node/4301&quot;&gt;observed&lt;/a&gt; that this is a valuable feature we should want to see for all scientific publishing. Each of my posts now displays its SHA hash on the sidebar along with other metadata. While the &lt;code&gt;history&lt;/code&gt; button already provides a convenient way to browse all previous versions of a post, I chose to display the SHA hash directly so that the hash value would be part of the document metadata, while also highlighting this feature.&lt;/p&gt;
&lt;p&gt;In addition to the GitHub repository for my lab notebook, My research code, analyses, and manuscripts are collected into Github repositories by project. This allows my analysis and paper writing to benefit from this same immutable and verifiable record. Because GitHub uses the SHA hashes in its link structure, this also provides a convenient way to link to a particular version of code in a given entry. This way, I can be sure the contents of the file displayed at that link never change, even as I continue to update that file. Even if the file or containing directory is later deleted or moved, the link will still resolve. Only if the entire project repo were deleted or if Github itself dissolved would the link be lost. Even then, using the SHA hash given in the link we could determine the contents of the file from some other copy of the repository (such as a local or figshare archive).&lt;/p&gt;
&lt;p&gt;Tobias is actually working on his own SHA hash approach which is somewhat superior to the simpler method of using git. The Github hash corresponds to the state of the entire repository/notebook at the time of the commit, rather than the contents of an individual file. Consequently, one would need a snapshot of the entire repository, available on Github, to perform the verification. Tobias is looking into generating hashes based on the contents of the file directly – so far, only RDF data – that could provide a unique and verifiable reference for any scholarly data or publication.&lt;/p&gt;
&lt;p&gt;Version managing the notebook and code has many more practical day-to-day benefits, such as recovering from a mistaken deleted or corrupted file, merging changes made on different machines or by collaborators, or creating branches to test new features without disrupting current version, and comparing differences as a file evolves.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Scholarly Infrastructure Thoughts</title>
	 <link href="/2013/05/02/scholarly-infrastructure-thoughts.html"/>
   <updated>2013-05-02T00:00:00+00:00</updated>
   <id>/05/02/scholarly-infrastructure-thoughts</id>
   <content type="html">&lt;h2 id=&quot;sustainable-research&quot;&gt;Sustainable Research&lt;/h2&gt;
&lt;p&gt;Happened across a provocative &lt;a href=&quot;http://cran.r-project.org/web/packages/mcmc/ChangeLog&quot;&gt;example&lt;/a&gt; of why we need a software ecosystem, though it was certainly not intended to be one, which led me to ask myself:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;How complex does an algorithm have to be before a talented researcher with expertise in both the relevant mathematics and computer science will make a significant mistake in their first release of the software?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As a corollary we might also ask, “How much less care do we put into research code not destined for release?”&lt;/p&gt;
&lt;p&gt;This changelog clearly reflects these difficulties face well-established researchers with long publication records on these very methods. If such individuals can make mistakes in packages, are we supposed to trust the myriad personal implementations of this and more complex algorithms that bulwark our literature today?&lt;/p&gt;
&lt;p&gt;Academic knowledge is currently built in the mortar and bricks of publication and citation. Publications advance new claims built up on existing claims (and very occasionally replacing them) through citations. It an approach that does not scale well on many fronts. To verify information we must trace the citation chain, which grows far to quickly to for human processing and is not usually amenable to computer processing. Yet here it is the statistical scaling that concerns me more – a paper advances that a claim is true with a certain probability, given that the methods are implemented without error. The more publications we string together, the higher the probability that we observe false positives, but also that we observe implementation errors. For much of research today, we need not construct the scientific argument in this manner.&lt;/p&gt;
&lt;p&gt;Thanks to computational advances of the last several decades, public repositories of the data and the methods (such as can be implemented as software anyway), we can build on existing work by direct analysis of the data and methods, rather than treating the conclusions as given. Evidence would no longer come primarily in the highly circumstantial manner of citations to previous claims, but to direct analysis of data. Using a common pool of data and methods would align incentives better to maintain and improve upon this infrastructure (the way major companies contribute to the underlying ‘plumbing’ provided by shared open source infrastructure), while there is no incentive for the literature to work in such a way.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://cameronneylon.net/blog/whats-the-right-model-for-shared-scholarly-communications-infrastructure&quot;&gt;Cameron Neylon&lt;/a&gt;, and link in my comment.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Musings On Conservation Literature</title>
	 <link href="/2013/05/02/musings-on-conservation-literature.html"/>
   <updated>2013-05-02T00:00:00+00:00</updated>
   <id>/05/02/musings-on-conservation-literature</id>
   <content type="html">&lt;p&gt;Just because I’m a theorist deeply entrenched in methodological concerns about uncertainty and decision making doesn’t mean I don’t think about practical conservation from time to time. Some musings from my &lt;a href=&quot;http://dynamicecology.wordpress.com/2013/04/29/the-implementation-gap-in-conservation-biology-is-math-contributing-to-the-problem&quot;&gt;comment here&lt;/a&gt;, copied over for my own reference.&lt;/p&gt;
&lt;p&gt;Though I would like to believe the gap stems from the problems you discuss, I think that differing objectives between research and application may play a much larger role. I suspect that scientific papers that are most useful and influential for conservation practitioners and policymakers are those which confirm what they already believe, or whatever the interests opposed to them least want to hear. Let’s call these “Cassandra” papers, since in this context they usually forecast disaster. For the practitioner it may matters little whether the math is simple or complex, clearly explained or impenetrable, or even right or not so right. Worm et al 2006 paper which the media quickly decided predicted the end of global fisheries within 50 years is perhaps a good example.&lt;/p&gt;
&lt;p&gt;Okay, so beyond bolstering arguments already being made by those who propose, implement or legislate conservation against their opposition, there are certainly unknowns that they might turn to research to answer. Resource allocation might be an example of this; e.g. do we prioritize purchasing pristine areas that are not likely to be threatened or less pristine areas in more immediate danger (a la Pfaff). Let’s call these “rule of thumb” papers, where the conclusion is an easily applied guide-line. It seems doubtful that the practitioners would be inhibited by their access and understanding of the math in this case, since they want the research to provide an answer they can trust, and not worry so much about what math justifies it. They are more likely to use proxies of quality (journal, researcher, affiliation, popularity of the method), then working through the assumptions to see if they like them; no?&lt;/p&gt;
&lt;p&gt;So there is a third case in which the conclusion is of the sort “apply my method and it will tell you what to do”, as opposed to “here’s what to do”. I think only this case falls at risk to the mathematics being a barrier, though when accompanied by user-friendly software tools perhaps that can be dismissed as well. These “methods” papers are probably the favorite option of many researchers, as they seem the most rigorous, accurate way, reflecting the details of the problem at hand. Scientists are probably least fond of the first example, where even the paper’s authors may feel the conclusions are being overstated, while others feel such work is wrong and counterproductive. I’d guess many researchers are lukewarm towards the middle case, as better than a coin flip. I imagine from the conservation practitioner’s ranking is reversed. To what extent would you agree with this classification? If so, how is the conservation literature distributed across these categories, and how might we want it to be distributed? Do we indeed have the greatest impact writing Cassandra papers rather than writing nice clear methods, and if so, what are the implications?&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Integrating Over Posterior Gp</title>
	 <link href="/2013/05/01/integrating-over-posterior-gp.html"/>
   <updated>2013-05-01T00:00:00+00:00</updated>
   <id>/05/01/integrating-over-posterior-gp</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Added integration over the posterior distribution of the GP&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Added example of parametric Bayesian inference based on Ricker&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;log&quot;&gt;Log&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;varying parameters &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/eecb2c12c33a522fb8dcbe588d7cf4fcbb0269eb&quot;&gt;06:07 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;example based on gp means &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/68004b28ab15e89c6f6e05cd2953a4844385dca2&quot;&gt;03:44 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;run means example as separate script &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/91a21b655f6fadeb8daf364c87bcd87d5069c2e7&quot;&gt;02:55 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;compare against just using means &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/ba4e491d6ecd0fd3fae533337e099d522d5a6b8d&quot;&gt;02:52 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Merge branch ‘master’ of github.com:cboettig/nonparametric-bayes &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/9a58d0f9c73f85dee5b7010d895f024cd3f6dbb5&quot;&gt;02:26 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Merge branch ‘master’ of github.com:cboettig/nonparametric-bayes &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/eb9ee9f76f6638d8300132a4830e39a052cb223f&quot;&gt;02:23 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;add gp posteriors to package &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/e32361cdc39e7902d9374b303d9474f0f26a860c&quot;&gt;02:16 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;staging run for integrating over GP posterior (large memory reqs) &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/50c0bc655f8d71f98f7b144f6d51d2e269d878fc&quot;&gt;02:13 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;updated example of gp basics includes mcmc and shows influence of the prior &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/e6c9b3048fd0cc50d0ec7eb00ac7cb9b00591618&quot;&gt;01:15 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;example testing new routine &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/331a441ca8bdf83ce660e9fc35c58bb9fb5e2a47&quot;&gt;01:14 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;tidying repo &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/2b33ab0323778dfc7a60c18fc62acb98486d9c72&quot;&gt;01:07 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;merge analyses back into allen.Rmd &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/27f4db239583bd861d58d9a2e63a9e3c2907a943&quot;&gt;12:48 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;adapted to the custom version &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/368456178edc571bb4d48b1c5952f40c1224f187&quot;&gt;12:37 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Test examples demonstrating the custom mcmc GP &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/a1a2c37aae225005193029d19d6a9b435cbf3921&quot;&gt;12:36 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;package updates with the custom gp method &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/61508484713958d00dc8072fb9d224749f1a9915&quot;&gt;12:35 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Example using custom GP routine. In this case, both MLE methods fail, while the GP does fine and the parametric Bayesian method performs best. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/ff33c9b6f78ffa1e135204789e730e65e82951b5&quot;&gt;12:34 pm 2013/05/01&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Bayesian Gp Regression By Metropolis Hastings</title>
	 <link href="/2013/05/01/bayesian-GP-regression-by-metropolis-hastings.html"/>
   <updated>2013-05-01T00:00:00+00:00</updated>
   <id>/05/01/bayesian-GP-regression-by-metropolis-hastings</id>
   <content type="html">&lt;p&gt;(Development version for reference; code functions now in &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/331a441ca8bdf83ce660e9fc35c58bb9fb5e2a47/R/gp_mcmc.R&quot;&gt;R/gp_mcmc.R&lt;/a&gt;)&lt;/p&gt;
&lt;h3 id=&quot;function-definitions&quot;&gt;Function definitions&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(mcmc)
&lt;span class=&quot;co&quot;&gt;#&amp;#39; Basic regression in Gaussian processes  &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @param x Observed x values, (vector or matrix with columns for each dimension of data)&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @param y Vector of observed y values in the training data&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @param init_pars the initial guesses for lengthscale l and process noise sigma_n&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @param n iterations of the metropolis algorithm&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @details Currently assumes the covariance function.  By default we will use &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; the squared exponential (also called radial basis or Gaussian, &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; though it is not this that gives Gaussian process it&amp;#39;s name; &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; any covariance function would do) as the covariance function, &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; $\operatorname{cov}(X_i, X_j) = \exp\left(-\frac{(X_i - X_j)^2}{2 \ell ^ 2}\right)$&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @return the MCMC output, as constructed by \link{metrop} from the mcmc package.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @export&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @import mcmc  &lt;/span&gt;
gp_mcmc &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, y, &lt;span class=&quot;dt&quot;&gt;init_pars =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;l=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sigma.n=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;n =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;1e4&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;d.p =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;s2.p =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)){

  lpriors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(pars){
    prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(
      &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]), d.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; d.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) *
&lt;span class=&quot;st&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]), s2.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], s2.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) 
    )
    &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(prior)
  }
  posterior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(pars, x, y){ 
    l &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;])
    sigma.n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
    
    cov &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X, Y) &lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(X, Y, SE, l)
    I &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x))
    K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x, x) 
    
    loglik &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(y) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;solve&lt;/span&gt;(K +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma.n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;I) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;y -
&lt;span class=&quot;st&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;det&lt;/span&gt;(K +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma.n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*I)) -
&lt;span class=&quot;st&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(y) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pi) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;
    
    loglik +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lpriors&lt;/span&gt;(pars)
  }
  
  out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;metrop&lt;/span&gt;(posterior, &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(init_pars), n, &lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; obs$x, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; obs$y)  
  out$d.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;d.p
  out$s2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;s2.p
  
  out
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;#&amp;#39; predict the expected values and posterior distributions of the Gaussian Process&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @param x_predict the values at which we desire predictions&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @param covs if TRUE, return covariances instead of variances (set high thinning as this is memory intensive)&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @import reshape2&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @export&lt;/span&gt;
gp_predict &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(gp, x_predict, &lt;span class=&quot;dt&quot;&gt;burnin=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;thin=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;covs=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;){

  postdist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;index=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:gp$nbatch, &lt;span class=&quot;kw&quot;&gt;as.data.frame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(gp$batch)))
  s &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(burnin&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;, gp$nbatch, &lt;span class=&quot;dt&quot;&gt;by=&lt;/span&gt;thin)
  postdist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;postdist[s,]
  &lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(postdist) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(gp$initial))
  
  indices &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;dim&lt;/span&gt;(postdist)[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]
  
  out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(indices, function(i){
    l &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;postdist[i, &lt;span class=&quot;st&quot;&gt;&amp;quot;l&amp;quot;&lt;/span&gt;]
    sigma.n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;postdist[i, &lt;span class=&quot;st&quot;&gt;&amp;quot;sigma.n&amp;quot;&lt;/span&gt;]
    
    cov &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X, Y) &lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(X, Y, SE, l)
    cov_xx_inv &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;solve&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(obs$x, obs$x) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma.n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(obs$x)))
    Ef &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x_predict, obs$x) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;obs$y
    Cf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x_predict, x_predict) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x_predict, obs$x)  %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(obs$x, x_predict)
    &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Ef =&lt;/span&gt; Ef, &lt;span class=&quot;dt&quot;&gt;Cf =&lt;/span&gt; Cf, &lt;span class=&quot;dt&quot;&gt;Vf =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(Cf))
  })
  
  Ef_posterior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(out, &lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Ef&amp;quot;&lt;/span&gt;)
  Cf_posterior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(out, &lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Cf&amp;quot;&lt;/span&gt;)
  Vf_posterior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(out, &lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Vf&amp;quot;&lt;/span&gt;)
  
  
  E_Ef &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rowMeans&lt;/span&gt;(Ef_posterior)
  E_Cf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;matrix&lt;/span&gt;( &lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(Cf_posterior, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, sum) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dim&lt;/span&gt;(Cf_posterior)[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;ncol =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;dim&lt;/span&gt;(Cf_posterior)[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]) )
  E_Vf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(E_Cf) &lt;span class=&quot;co&quot;&gt;# same as rowMeans(Vf_posterior)&lt;/span&gt;
  
  &lt;span class=&quot;co&quot;&gt;# list format better for return&lt;/span&gt;
  Cf_posterior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(out, &lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Cf&amp;quot;&lt;/span&gt;)
  
  &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Ef_posterior =&lt;/span&gt; Ef_posterior, 
       &lt;span class=&quot;dt&quot;&gt;Vf_posterior =&lt;/span&gt; Vf_posterior,
       &lt;span class=&quot;dt&quot;&gt;Cf_posterior =&lt;/span&gt; Cf_posterior,
       &lt;span class=&quot;dt&quot;&gt;E_Ef =&lt;/span&gt; E_Ef, &lt;span class=&quot;dt&quot;&gt;E_Cf =&lt;/span&gt; E_Cf, &lt;span class=&quot;dt&quot;&gt;E_Vf =&lt;/span&gt; E_Vf)
  
}  &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(reshape2)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(plyr)
&lt;span class=&quot;co&quot;&gt;#&amp;#39; Summary plots showing the trace and posteriors for the gp_mcmc estimates&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @param gp a fit of the gaussian process from gp_mcmc&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @param burnin length of sequence to discard as a transient&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @param thin frequency of sub-sampling (make posterior distribution smaller if necessary)&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @return two ggplot2 objects, one plotting the trace and one &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; plotting the posteriors in black with priors overlaid in red.  &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @import reshape2&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @import ggplot2&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @import plyr&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#&amp;#39; @export&lt;/span&gt;
summary_gp_mcmc &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(gp, &lt;span class=&quot;dt&quot;&gt;burnin=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;thin=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;){

  postdist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;index=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:gp$nbatch, &lt;span class=&quot;kw&quot;&gt;as.data.frame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(gp$batch)))
  s &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(burnin&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;, gp$nbatch, &lt;span class=&quot;dt&quot;&gt;by=&lt;/span&gt;thin)
  postdist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;postdist[s,]
  &lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(postdist) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(gp$initial))
  
  &lt;span class=&quot;co&quot;&gt;# TRACES&lt;/span&gt;
  df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(postdist, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;)
  traces_plot &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(index, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
  
  s2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;gp$s2.p
  d.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;gp$d.p
  s2_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, s2.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], s2.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
  d_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, d.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; d.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
  prior_fns &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;l =&lt;/span&gt; d_prior, &lt;span class=&quot;dt&quot;&gt;sigma.n =&lt;/span&gt; s2_prior)
  
  prior_curves &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(df, &lt;span class=&quot;st&quot;&gt;&amp;quot;variable&amp;quot;&lt;/span&gt;, function(dd){
    grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(dd$value), &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(dd$value), &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; grid, &lt;span class=&quot;dt&quot;&gt;density =&lt;/span&gt; prior_fns[[dd$variable[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]](grid))
  })
  
  &lt;span class=&quot;co&quot;&gt;# Posteriors (easier to read than histograms)&lt;/span&gt;
  posteriors_plot &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;geom=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;path&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;position=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;identity&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.7&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;prior_curves, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;density), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
  
  &lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(traces_plot)
  &lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(posteriors_plot)
  
  out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;traces_plot =&lt;/span&gt; traces_plot, &lt;span class=&quot;dt&quot;&gt;posteriors_plot =&lt;/span&gt; posteriors_plot)
  &lt;span class=&quot;kw&quot;&gt;invisible&lt;/span&gt;(out)
}

&lt;span class=&quot;co&quot;&gt;# Helper function: The default covariance function&lt;/span&gt;
SE &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(Xi,Xj, l) &lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(-&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(Xi -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Xj) ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;l ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;example&quot;&gt;Example&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x_predict &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dt&quot;&gt;len=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;)
obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;),
                  &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_mcmc&lt;/span&gt;(obs$x, obs$y, &lt;span class=&quot;dt&quot;&gt;d.p =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;s2.p =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;summary_gp_mcmc&lt;/span&gt;(gp)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7285/8739390350_c4c06db5ab_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-6&quot; /&gt; &lt;img src=&quot;http://farm8.staticflickr.com/7285/8739390438_50350c1a38_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-6&quot; /&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gp_dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_predict&lt;/span&gt;(gp, x_predict)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;tgp_dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(  &lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x_predict, 
                 &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; gp_dat$E_Ef, 
                 &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; gp_dat$E_Ef -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(gp_dat$E_Vf), 
                 &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; gp_dat$E_Ef +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(gp_dat$E_Vf) )

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(tgp_dat) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x,y,&lt;span class=&quot;dt&quot;&gt;ymin=&lt;/span&gt;ymin,&lt;span class=&quot;dt&quot;&gt;ymax=&lt;/span&gt;ymax), &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;gray80&amp;quot;&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y), &lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;obs, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x,y), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;expression&lt;/span&gt;(X[t])) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;expression&lt;/span&gt;(X[t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;])) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7282/8738272607_d913f04a10_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-8&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-8&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Difficulties with tgp; taking custom mcmc approach for GPs</title>
	 <link href="/2013/04/30/tgp-difficulties-and-custom-mcmc-for-gp.html"/>
   <updated>2013-04-30T00:00:00+00:00</updated>
   <id>/04/30/tgp-difficulties-and-custom-mcmc-for-gp</id>
   <content type="html">&lt;p&gt;Running into some unpredictable and not consistently replicable memory errors in the tgp function calls. Also rather troublesome that return object provides only posterior means for the process mean and covariance matrix.&lt;/p&gt;
&lt;h2 id=&quot;generic-gp-methods&quot;&gt;Generic GP methods&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Implemented MCMC sampler. Excerpt below based on my &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/e6c9b3048fd0cc50d0ec7eb00ac7cb9b00591618/inst/examples/gaussian-process-basics.md&quot;&gt;gaussian-process-basics.md&lt;/a&gt; script, as updated to include this case.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Define some example priors&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;lpriors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(pars){
   d.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)
  s2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)  
   
  prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(
    &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]), d.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; d.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) *
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]), s2.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], s2.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) 
  )
  
  &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(prior)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Define the posterior function for our metropolis sampler&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;posterior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(pars, x, y){
  
  l &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;])
  sigma.n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
  
  cov &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X, Y) &lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(X, Y, SE, l)
  I &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x))
  K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x, x) 
  
  loglik &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(y) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;solve&lt;/span&gt;(K +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma.n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;I) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;y -
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;det&lt;/span&gt;(K +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma.n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*I)) -
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(y) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pi) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;

  loglik +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lpriors&lt;/span&gt;(pars)
}
  &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I do not think we have good conjugate priors we can use in this situation to accomplish Gibbs sampling. Instead we simply MCMC by the Metropolis-Hastings alogrithm,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(mcmc)
n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1e4&lt;/span&gt;
out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;metrop&lt;/span&gt;(posterior, &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(pars), n, &lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; obs$x, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; obs$y)
out$accept&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 0.1509&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Very good, we want an acceptance rate around 20%, if the literature can be trusted on this account. We then plot transformed and untransformed traces.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;postdist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;index=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:n, &lt;span class=&quot;kw&quot;&gt;as.data.frame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(out$batch)))
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(postdist) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(pars))
df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(postdist, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;co&quot;&gt;# TRACES&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(index, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8395/8699032953_76e91621c7_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(index, &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(value))) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8265/8699033067_631d27e6f7_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Generate a plot to compare priors and posteriors&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;d.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)
s2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)  
   
s2_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, s2.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], s2.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
d_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, d.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; d.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
prior_fns &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;l =&lt;/span&gt; d_prior, &lt;span class=&quot;dt&quot;&gt;sigma.n =&lt;/span&gt; s2_prior)


&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(plyr)
prior_curves &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(df, &lt;span class=&quot;st&quot;&gt;&amp;quot;variable&amp;quot;&lt;/span&gt;, function(dd){
    grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(dd$value), &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(dd$value), &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; grid, &lt;span class=&quot;dt&quot;&gt;density =&lt;/span&gt; prior_fns[[dd$variable[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]](grid))
})

&lt;span class=&quot;co&quot;&gt;# Posteriors (easier to read than histograms)&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;geom=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;path&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;position=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;identity&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.7&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;prior_curves, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;density), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8405/8700155554_67aa26e564_o.png&quot; alt=&quot;Note that posteriors closely match our priors, as we have only 4 data points in this toy example and our priors are reasonably informative.&quot; /&gt;&lt;figcaption&gt;Note that posteriors closely match our priors, as we have only 4 data points in this toy example and our priors are reasonably informative.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;steve-chat&quot;&gt;Steve chat&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;integrate over posteriors in GP case&lt;/li&gt;
&lt;li&gt;Ignore measurement uncertainty for the moment&lt;/li&gt;
&lt;li&gt;General status updates, etc.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;marc-meeting&quot;&gt;Marc meeting&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Ricker case, but with constraint (e.g. maintain above n%)&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Consider Ricker model with external management constraint $ (Y / Y_opt) + (1 - ) Pr(  )$&lt;/li&gt;
&lt;li&gt;Consider time horizon of learning vs implementing; see diagram&lt;/li&gt;
&lt;/ol&gt;
&lt;figure&gt;
&lt;img src=&quot;https://lh3.googleusercontent.com/-56MSu3YuJsI/UYFrPQmvR3I/AAAAAAAADYg/_fSPs0czpCA/w548-h731/IMG_20130501_122021.jpg&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;simone-talk&quot;&gt;Simone talk&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;General interests: adaptive potential of small pops, demography of small pops, extinction processes in communities, evol life histories &amp;amp; enviroment, ML for species distribution models.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Marble trout system under the influence of regular catastrophic floods&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;misc&quot;&gt;Misc&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;6 hours on trains, 2 hours on buses, 1.25 hours on bicycle, 6 hours in lab.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Interesting reading in &lt;a href=&quot;http://www.wired.com/wiredenterprise/2012/04/openstack/&quot;&gt;The Secret History of OpenStack, the Free Cloud Software That’s Changing Everything&lt;/a&gt;. Sounds just like the unlikely collaboration we need to emerge for a more robust and sustainable underlying scientific infrastructure.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Finishing Comparison Parametric And Nonparametric</title>
	 <link href="/2013/04/29/finishing-comparison-parametric-and-nonparametric.html"/>
   <updated>2013-04-29T00:00:00+00:00</updated>
   <id>/04/29/finishing-comparison-parametric-and-nonparametric</id>
   <content type="html">&lt;p&gt;Implemented in &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/75df9413c016480f935867d88345ddaa36d07a82/inst/examples/BUGS/allen.md&quot;&gt;BUGS/allen.md&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;[x] Inverse gamma priors on variances &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/36888da01d7e36e58fc15c671e858be6fcf8a02d&quot;&gt;36888da&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[x] Uniform prior on standard deviations &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/75df9413c016480f935867d88345ddaa36d07a82&quot;&gt;75df941&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[x] Mean plot for parametric fit &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/75df9413c016480f935867d88345ddaa36d07a82&quot;&gt;75df941&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;[x] Convergence diagnostics for both parametric and nonparametric MCMC, using similar visual layout &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/75df9413c016480f935867d88345ddaa36d07a82&quot;&gt;75df941&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Oh, Jeromy Anglim has a rather nice collection of &lt;a href=&quot;http://jeromyanglim.blogspot.com/2012/04/getting-started-with-jags-rjags-and.html&quot;&gt;jags links&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;on-variance-priors-for-the-parametric-mcmc&quot;&gt;On Variance Priors for the Parametric MCMC&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Gelman recommends uniform priors on standard deviations for the noise terms: in the &lt;code&gt;.bugs&lt;/code&gt; file we have&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;stdQ ~ dunif(0,100)
stdR ~ dunif(0,100)
# as &amp;quot;precision&amp;quot; tau instead of stdev sigma
iQ &amp;lt;- 1/(stdQ*stdQ);
iR &amp;lt;- 1/(stdR*stdR);&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Where these enter the model as&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;for(t in 1:(N-1)){
    mu[t] &amp;lt;- x[t] + exp(r0 * (1 - x[t]/K)* (x[t] - theta) )
      x[t+1] ~ dnorm(mu[t],iQ)
}


for(t in 1:(N)){
    y[t] ~ dnorm(x[t],iR)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that &lt;code&gt;dnorm&lt;/code&gt; in JAGS notation is defined in terms of the mean and the precision (reciprocal of the variance), rather than standard deviation (e.g. in R’s &lt;code&gt;dnorm&lt;/code&gt; function), see the &lt;a href=&quot;http://ftp.iinet.net.au/pub/FreeBSD/distfiles/mcmc-jags/jags_user_manual.pdf&quot;&gt;JAGS manual&lt;/a&gt;, particularly Table 6.1 pg 29, below. Note that the standard deviation has the uniform prior, not the precision.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Also try inverse gamma priors,&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;iQ ~ dgamma(0.0001,0.0001)
iR ~ dgamma(0.0001,0.0001)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(Precision is Gamma distributed when the variances are inverse-gamma distributed.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Both are quite uniformative, results appear quite comparable.&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8119/8692697741_fa2dfb83b1_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;markov-chain-monte-carlo-convergence-analysis&quot;&gt;Markov Chain Monte Carlo Convergence Analysis&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Add for both parametric and non-parametric cases&lt;/li&gt;
&lt;li&gt;Extra long runs before finalizing analysis&lt;/li&gt;
&lt;li&gt;Some &lt;a href=&quot;http://www.people.fas.harvard.edu/~plam/teaching/methods/convergence/convergence_print.pdf&quot;&gt;examples&lt;/a&gt; with R code&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A variety of tools from &lt;code&gt;coda&lt;/code&gt; package. Of course these methods are designed from toy problems and cannot guarentee convergence.&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Traceplots, density plots&lt;/li&gt;
&lt;li&gt;Running mean, autocorrelation plots &lt;code&gt;autocorr.plot&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Metropolis acceptance/rejection rate &lt;code&gt;rejectionRate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Multiple chain diagonostics: Gelman-Rubin &lt;code&gt;gelman.diag&lt;/code&gt;, &lt;code&gt;gelman.plot&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Geweke (compare means between different sections) &lt;code&gt;geweke.diag&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Raferty-Lewis &lt;code&gt;raferty.diag&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Heidelberg and Welch &lt;code&gt;heidel.diag&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>A comparison of nonparametric Bayesian Gaussian process estimates to standard the parametric Bayesian approach</title>
	 <link href="/2013/04/27/comparison-of-nonparametric-and-parametric-approaches.html"/>
   <updated>2013-04-27T00:00:00+00:00</updated>
   <id>/04/27/comparison-of-nonparametric-and-parametric-approaches</id>
   <content type="html">&lt;p&gt;Load necessary libraries,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(pdgControl)  &lt;span class=&quot;co&quot;&gt;# custom SDP functions&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(nonparametricbayes)  &lt;span class=&quot;co&quot;&gt;# custom&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(reshape2)  &lt;span class=&quot;co&quot;&gt;# data manipulation&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(data.table)  &lt;span class=&quot;co&quot;&gt;# data manipulation&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(plyr)  &lt;span class=&quot;co&quot;&gt;# data manipulation&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(ggplot2)  &lt;span class=&quot;co&quot;&gt;# plotting&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(tgp)  &lt;span class=&quot;co&quot;&gt;# Gaussian Processes&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(MCMCpack)  &lt;span class=&quot;co&quot;&gt;# Markov Chain Monte Carlo tools&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(R2jags)  &lt;span class=&quot;co&quot;&gt;# Markov Chain Monte Carlo tools&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(emdbook)  &lt;span class=&quot;co&quot;&gt;# Markov Chain Monte Carlo tools&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(coda)  &lt;span class=&quot;co&quot;&gt;# Markov Chain Monte Carlo tools&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Plotting and knitr options, (can generally be ignored)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(knitcitations)
opts_chunk$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;tidy =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;warning =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;message =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;cache =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)
opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;upload.fun =&lt;/span&gt; socialR::flickr.url)
&lt;span class=&quot;kw&quot;&gt;theme_set&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;theme_bw&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;base_size =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;theme_update&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;panel.background =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;element_rect&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;colour =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;plot.background =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;element_rect&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;colour =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;))
cbPalette &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;#000000&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#E69F00&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#56B4E9&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#009E73&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#F0E442&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;st&quot;&gt;&amp;quot;#0072B2&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#D55E00&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;#CC79A7&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;model-and-parameters&quot;&gt;Model and parameters&lt;/h3&gt;
&lt;p&gt;Uses the model derived in Allen et al, of a Ricker-like growth curve with an allee effect, defined in the pdgControl package,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;RickerAllee
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;) 
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]
allee &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Various parameters defining noise dynamics, grid, and policy costs.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;
sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.0&lt;/span&gt;
z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)
z_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;+(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;runif&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_m
x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;101&lt;/span&gt;)
h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid
profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x,h) &lt;span class=&quot;kw&quot;&gt;pmin&lt;/span&gt;(x, h)
delta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;
OptTime &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# stationarity with unstable models is tricky thing&lt;/span&gt;
reward &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
xT &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
seed_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;111&lt;/span&gt;
Xo &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K &lt;span class=&quot;co&quot;&gt;# observations start from&lt;/span&gt;
x0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Xo &lt;span class=&quot;co&quot;&gt;# simulation under policy starts from&lt;/span&gt;
Tobs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;35&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;sample-data&quot;&gt;Sample Data&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sim_obs&lt;/span&gt;(Xo, z_g, f, p, &lt;span class=&quot;dt&quot;&gt;Tobs=&lt;/span&gt;Tobs, &lt;span class=&quot;dt&quot;&gt;nz=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;15&lt;/span&gt;, 
                &lt;span class=&quot;dt&quot;&gt;harvest =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;sort&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, .&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;7&lt;/span&gt;), &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)), &lt;span class=&quot;dt&quot;&gt;seed =&lt;/span&gt; seed_i)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;maximum-likelihood&quot;&gt;Maximum Likelihood&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;alt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;par_est&lt;/span&gt;(obs,  &lt;span class=&quot;dt&quot;&gt;init =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], 
                              &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(obs$x[obs$x&amp;gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;]), 
                              &lt;span class=&quot;dt&quot;&gt;s =&lt;/span&gt; sigma_g))
est &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;par_est_allee&lt;/span&gt;(obs, f, p,  
                     &lt;span class=&quot;dt&quot;&gt;init =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, 
                              &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, 
                              &lt;span class=&quot;dt&quot;&gt;C =&lt;/span&gt; p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, 
                              &lt;span class=&quot;dt&quot;&gt;s =&lt;/span&gt; sigma_g))&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;non-parametric-bayes&quot;&gt;Non-parametric Bayes&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;#inv gamma has mean b / (a - 1) (assuming a&amp;gt;1) and variance b ^ 2 / ((a - 2) * (a - 1) ^ 2) (assuming a&amp;gt;2)&lt;/span&gt;
s2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)  
tau2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
d.p =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;)
nug.p =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;) &lt;span class=&quot;co&quot;&gt;# gamma mean&lt;/span&gt;
s2_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dinvgamma&lt;/span&gt;(x, s2.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], s2.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
tau2_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dinvgamma&lt;/span&gt;(x, tau2.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], tau2.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
d_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, d.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; d.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, d.p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; d.p[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;])
nug_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, nug.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; nug.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, nug.p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; nug.p[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;])
beta0_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, tau) &lt;span class=&quot;kw&quot;&gt;dnorm&lt;/span&gt;(x, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, tau)
beta =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
priors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;s2 =&lt;/span&gt; s2_prior, &lt;span class=&quot;dt&quot;&gt;tau2 =&lt;/span&gt; tau2_prior, &lt;span class=&quot;dt&quot;&gt;beta0 =&lt;/span&gt; dnorm, &lt;span class=&quot;dt&quot;&gt;nug =&lt;/span&gt; nug_prior, &lt;span class=&quot;dt&quot;&gt;d =&lt;/span&gt; d_prior, &lt;span class=&quot;dt&quot;&gt;ldetK =&lt;/span&gt; function(x) &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;bgp&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;X=&lt;/span&gt;obs$x, &lt;span class=&quot;dt&quot;&gt;XX=&lt;/span&gt;x_grid, &lt;span class=&quot;dt&quot;&gt;Z=&lt;/span&gt;obs$y, &lt;span class=&quot;dt&quot;&gt;verb=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,
          &lt;span class=&quot;dt&quot;&gt;meanfn=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;constant&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;bprior=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;b0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;BTE=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2000&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;20000&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;),
          &lt;span class=&quot;dt&quot;&gt;m0r1=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;corr=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;exp&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;trace=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, 
          &lt;span class=&quot;dt&quot;&gt;beta =&lt;/span&gt; beta, &lt;span class=&quot;dt&quot;&gt;s2.p =&lt;/span&gt; s2.p, &lt;span class=&quot;dt&quot;&gt;d.p =&lt;/span&gt; d.p, &lt;span class=&quot;dt&quot;&gt;nug.p =&lt;/span&gt; nug.p, &lt;span class=&quot;dt&quot;&gt;tau2.p =&lt;/span&gt; tau2.p,
          &lt;span class=&quot;dt&quot;&gt;s2.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;d.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;nug.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;tau2.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;)      &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;hyperparameters &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;s2&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;tau2&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;beta0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;nug&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;d&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;ldetK&amp;quot;&lt;/span&gt;)
posteriors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(gp$trace$XX[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]][,hyperparameters], &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;)

&lt;span class=&quot;co&quot;&gt;# Traces &lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(posteriors) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(index, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8261/8685360238_353dbc5894_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-3&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-3&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;

prior_curves &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(posteriors, &lt;span class=&quot;st&quot;&gt;&amp;quot;variable&amp;quot;&lt;/span&gt;, function(dd){
    grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(dd$value), &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(dd$value), &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; grid, &lt;span class=&quot;dt&quot;&gt;density =&lt;/span&gt; priors[[dd$variable[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]](grid))
})

&lt;span class=&quot;co&quot;&gt;# &lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(posteriors) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_histogram&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;..density..), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.7&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;prior_curves, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;density), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8521/8685360484_e2ce943ebd_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-3&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-3&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(posteriors, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;geom=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;path&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;position=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;identity&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.7&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;prior_curves, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;density), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8398/8685360552_d9ba680ff7_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-3&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-3&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h4 id=&quot;parametric-bayes&quot;&gt;Parametric Bayes&lt;/h4&gt;
&lt;p&gt;We initiate the MCMC chain (&lt;code&gt;init_p&lt;/code&gt;) using the true values of the parameters &lt;code&gt;p&lt;/code&gt; from the simulation. While impossible in real data, this gives the parametric Bayesian approach the best chance at succeeding. &lt;code&gt;y&lt;/code&gt; is the timeseries (recall &lt;code&gt;obs&lt;/code&gt; has the &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(x_{t+1}\)&lt;/span&gt; pairs)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;# a bit unfair to start with the correct values, but anyhow...&lt;/span&gt;
init_p =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(init_p) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;r0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;theta&amp;quot;&lt;/span&gt;)
y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;obs$y[-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] 
N=&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(y);&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We’ll be using the JAGS Gibbs sampler, a recent open source BUGS implementation with an R interface that works on most platforms. We initialize the usual MCMC parameters; see &lt;code&gt;?jags&lt;/code&gt; for details.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;jags.data &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;N&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;y&amp;quot;&lt;/span&gt;)
n.chains =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
n.iter =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;20000&lt;/span&gt;
n.burnin =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;floor&lt;/span&gt;(n.iter/&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
n.thin =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;floor&lt;/span&gt;(n.chains *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(n.iter -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n.burnin)/&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The actual model is defined in a &lt;code&gt;model.file&lt;/code&gt; that contains an R function that is automatically translated into BUGS code by &lt;em&gt;R2WinBUGS&lt;/em&gt;. The file defines the priors and the model, as seen when read in here&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;cat&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;readLines&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;con=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;bugmodel-GammaPrior.txt&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # Allen&amp;#39;s Allee model based on a Ricker
## 
## model{
## 
## # Define prior densities for parameters
## K     ~ dunif(1.0, 22000.0)
## logr0    ~ dunif(-4.0, 2.0)
## logtheta ~ dunif(-4.0, 2.0)
## iQ ~ dgamma(0.0001,0.0001)
## iR ~ dgamma(0.0001,0.0001)
## 
## # Transform parameters to fit in the model
## r0 &amp;lt;- exp(logr0)
## theta &amp;lt;- exp(logtheta)
## 
## # Initial state
## x[1] ~ dunif(0,10)
## 
## # Loop over all states, 
## for(t in 1:(N-1)){
##   mu[t] &amp;lt;- x[t] + exp(r0 * (1 - x[t] / K) * (x[t] - theta) )
##   x[t+1] ~ dnorm(mu[t],iQ)
## }
## 
## # Loop over all observations, 
## for(t in 1:(N)){
##   y[t] ~ dnorm(x[t],iR)
## }
## 
## }&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We define which parameters to keep track of, and set the initial values of parameters in the transformed space used by the MCMC. We use logarithms to maintain strictly positive values of parameters where appropriate. Because our priors on the noise parameters are inverse gamma distributed.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;jags.params=&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;iR&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;iQ&amp;quot;&lt;/span&gt;) &lt;span class=&quot;co&quot;&gt;# Don&amp;#39;t need to save &amp;quot;x&amp;quot;&lt;/span&gt;
jags.inits &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(){
  &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;=init_p[&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;],&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(init_p[&lt;span class=&quot;st&quot;&gt;&amp;quot;r0&amp;quot;&lt;/span&gt;]),&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(init_p[&lt;span class=&quot;st&quot;&gt;&amp;quot;theta&amp;quot;&lt;/span&gt;]),&lt;span class=&quot;st&quot;&gt;&amp;quot;iQ&amp;quot;&lt;/span&gt;=&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;iR&amp;quot;&lt;/span&gt;=&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;=y,&lt;span class=&quot;dt&quot;&gt;.RNG.name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;base::Wichmann-Hill&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;.RNG.seed=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;123&lt;/span&gt;)
}
&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;12345&lt;/span&gt;)
time&amp;lt;-&lt;span class=&quot;kw&quot;&gt;system.time&lt;/span&gt;(       
  jagsfit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;jags&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;jags.data, &lt;span class=&quot;dt&quot;&gt;inits=&lt;/span&gt;jags.inits, jags.params, &lt;span class=&quot;dt&quot;&gt;n.chains=&lt;/span&gt;n.chains, 
                  &lt;span class=&quot;dt&quot;&gt;n.iter=&lt;/span&gt;n.iter, &lt;span class=&quot;dt&quot;&gt;n.thin=&lt;/span&gt;n.thin, &lt;span class=&quot;dt&quot;&gt;n.burnin=&lt;/span&gt;n.burnin,&lt;span class=&quot;dt&quot;&gt;model.file=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;bugmodel-GammaPrior.txt&amp;quot;&lt;/span&gt;)
)         &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Compiling model graph
##    Resolving undeclared variables
##    Allocating nodes
##    Graph Size: 394
## 
## Initializing model&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;time &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(time[&lt;span class=&quot;st&quot;&gt;&amp;quot;elapsed&amp;quot;&lt;/span&gt;]);&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;convergence-diagnostics-for-parametric-bayes&quot;&gt;Convergence diagnostics for parametric bayes&lt;/h4&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;jags_matrix &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.data.frame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.mcmc.bugs&lt;/span&gt;(jagsfit$BUGSoutput))
par_posteriors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;index =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;dim&lt;/span&gt;(jags_matrix)[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], jags_matrix), &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;)

&lt;span class=&quot;co&quot;&gt;# Traces&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(par_posteriors) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(index, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8401/8684242957_c1958f5a03_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-8&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-8&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;co&quot;&gt;# posterior distributiosn&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(par_posteriors, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;geom=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;path&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;position=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;identity&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.7&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8255/8684243073_7a0daf0466_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-8&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-8&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;mcmc &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.mcmc&lt;/span&gt;(jagsfit)
mcmcall &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;mcmc[,-&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]
who &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(mcmcall)
who &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;K&amp;quot;        &amp;quot;iQ&amp;quot;       &amp;quot;iR&amp;quot;       &amp;quot;logr0&amp;quot;    &amp;quot;logtheta&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;mcmcall &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(mcmcall[,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;],mcmcall[,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;],mcmcall[,&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;],mcmcall[,&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;],mcmcall[,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;])
&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(mcmcall) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;who&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;phase-space-diagram-of-the-expected-dynamics&quot;&gt;Phase-space diagram of the expected dynamics&lt;/h4&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  &lt;span class=&quot;kw&quot;&gt;gp_plot&lt;/span&gt;(gp, f, p, est$f, est$p, alt$f, alt$p, x_grid, obs, seed_i)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8535/8684243227_41391fdd48_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-10&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-10&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;optimal-policies-by-value-iteration&quot;&gt;Optimal policies by value iteration&lt;/h2&gt;
&lt;p&gt;Compute the optimal policy under each model using stochastic dynamic programming.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;MaxT =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;
matrices_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_transition_matrix&lt;/span&gt;(gp$ZZ.km, gp$ZZ.ks2, x_grid, h_grid)
opt_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_gp, x_grid, h_grid, MaxT, xT, profit, delta, reward)

matrices_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f_transition_matrix&lt;/span&gt;(f, p, x_grid, h_grid, sigma_g)
opt_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_true, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;MaxT, xT, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;delta)

matrices_estimated &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f_transition_matrix&lt;/span&gt;(est$f, est$p, x_grid, h_grid, est$sigma_g)
opt_estimated &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_estimated, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;MaxT, xT, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;delta)

matrices_alt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f_transition_matrix&lt;/span&gt;(alt$f, alt$p, x_grid, h_grid, alt$sigma_g)
opt_alt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_alt, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;MaxT, xT, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;delta)


pardist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;mcmcall
pardist[,&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pardist[,&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;]) &lt;span class=&quot;co&quot;&gt;# transform model parameters back first&lt;/span&gt;
pardist[,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pardist[,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;])


matrices_par_bayes &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;parameter_uncertainty_SDP&lt;/span&gt;(f, p, x_grid, h_grid, pardist)
opt_par_bayes &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(matrices_par_bayes, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;MaxT, xT, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;delta)


OPT =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;GP =&lt;/span&gt; opt_gp$D, &lt;span class=&quot;dt&quot;&gt;True =&lt;/span&gt; opt_true$D, &lt;span class=&quot;dt&quot;&gt;MLE =&lt;/span&gt; opt_estimated$D, &lt;span class=&quot;dt&quot;&gt;Ricker.MLE =&lt;/span&gt; opt_alt$D, &lt;span class=&quot;dt&quot;&gt;Parametric.Bayes =&lt;/span&gt; opt_par_bayes$D)
colorkey=cbPalette
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(colorkey) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(OPT) &lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;graph-of-the-optimal-policies&quot;&gt;Graph of the optimal policies&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;policies &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stock=&lt;/span&gt;x_grid, &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(OPT, function(x) x_grid[x])), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(policies) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;method&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policies, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, stock -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;method)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1.2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;stock size&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;escapement&amp;quot;&lt;/span&gt;)  +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8542/8685372902_e8719a0c51_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-12&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-12&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;simulate-100-realizations-managed-under-each-of-the-policies&quot;&gt;Simulate 100 realizations managed under each of the policies&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;

sims &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(OPT, function(D){
  &lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
  &lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, function(i) 
    &lt;span class=&quot;kw&quot;&gt;ForwardSimulate&lt;/span&gt;(f, p, x_grid, h_grid, x0, D, z_g, &lt;span class=&quot;dt&quot;&gt;profit=&lt;/span&gt;profit, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;OptTime)
  )
})

  
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(sims, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(sims[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]][[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]))
dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(dat)
&lt;span class=&quot;kw&quot;&gt;setnames&lt;/span&gt;(dt, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;L1&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;L2&amp;quot;&lt;/span&gt;), &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;method&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;)) 
&lt;span class=&quot;co&quot;&gt;# Legend in original ordering please, not alphabetical: &lt;/span&gt;
dt$method =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;factor&lt;/span&gt;(dt$method, &lt;span class=&quot;dt&quot;&gt;ordered=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;levels=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(OPT))

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dt) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(reps,method), &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;method), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey, &lt;span class=&quot;dt&quot;&gt;guide =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;guide_legend&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;override.aes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8400/8685373300_18931d5055_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-13&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-13&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dt) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, harvest, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(reps,method), &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;method), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey, &lt;span class=&quot;dt&quot;&gt;guide =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;guide_legend&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;override.aes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8535/8685373378_da45da3cbd_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-13&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-13&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  &lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Notebook features: reproducible code</title>
	 <link href="/2013/04/26/notebook-features-reproducible-code.html"/>
   <updated>2013-04-26T00:00:00+00:00</updated>
   <id>/04/26/notebook-features-reproducible-code</id>
   <content type="html">&lt;p&gt;I now use the dynamic documentation software called &lt;a href=&quot;http://yihui.name/knitr&quot;&gt;knitr&lt;/a&gt; to write most entries that shore results and figures. The code to replicate the results is included automatically, ensuring that what I say I did and what code I actually ran to get the results are consistent. Though I have written about knitr before, both regarding its &lt;a href=&quot;http://carlboettiger.info/2012/03/21/knitr-github-and-a-new-phase-for-the-lab-notebook.html&quot;&gt;use in my notebook&lt;/a&gt; and &lt;a href=&quot;http://carlboettiger.info/2012/04/07/writing-reproducibly-in-the-open-with-knitr.html&quot;&gt;in my manuscripts&lt;/a&gt;, here I provide a quick summary of how a reader might actually reproduce a figure or result they come across in the notebook, as well as some of the possible problems involved.&lt;/p&gt;
&lt;p&gt;As the code required for any given analysis can be quite involved, it is not pratical to provide free-standing scripts in this way. Instead, I write the algorithms as functions provided by an R package dedicated to the project, e.g. &lt;a href=&quot;http://github.com/cboettig/nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/a&gt;, &lt;a href=&quot;http://github.com/cboettig/multiple_uncertainty&quot;&gt;multiple-uncertainty&lt;/a&gt;, or &lt;a href=&quot;http://github.com/cboettig/earlywarning&quot;&gt;warning-signals&lt;/a&gt;, which is version-managed on Github. The code displayed in the post can then be limited to the specific calls to analysis, data manipulation, and plotting functions unique to the exploration shown, without repeating the code for all algorithms involved.&lt;/p&gt;
&lt;p&gt;The code for the analyses is also stored on github using the same dynamic documentation approach with knitr. These scripts are found in the &lt;code&gt;inst/examples&lt;/code&gt; directory of my packages. This approach allows a given analysis to evolve with my research in a more tractable way than simply pasting updated copies as successive notebook entries. The notebook entries then become a place for me to synthesize the results of a script.&lt;/p&gt;
&lt;p&gt;Though the package functions are usually backwards-compatible, proper reproducibility is only attained by having the version of the package from time of the result. This is easily accomplished by the seemless integration of Github and R using the devtools package. Consider a figure from a page of the notebook, such as the final histogram plot from &lt;a href=&quot;http://www.carlboettiger.info/2012/12/20/results-comparing-gp-to-parametric.html&quot;&gt;this entry&lt;/a&gt;. The entry links to the script responsible for the figure, &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/9d5cd1f027bdfe5f356dce83756726c95a6fcdd8/inst/examples/myers-exploration.md&quot; class=&quot;uri&quot;&gt;https://github.com/cboettig/nonparametric-bayes/blob/9d5cd1f027bdfe5f356dce83756726c95a6fcdd8/inst/examples/myers-exploration.md&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;We can install the entire research compendium at exactly the state it was at the time of the analysis using the hash (long chain of seemingly random characters, see the (upcoming) entry on &lt;a href=&quot;&quot;&gt;hashes&lt;/a&gt;) using the clever &lt;code&gt;devtools&lt;/code&gt; R package,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;nonparametric-bayes&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;cboettig&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;9d5cd1f027bdfe5f356dce83756726c95a6fcdd8&amp;quot;&lt;/span&gt;) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can then copy and paste the code linked from the figure to replicate the results. This provides a fast and effective way replicate the work appearing in or linked to any entry. More importantly perhaps, this approach also allows one to repeat any given analysis with the most recent version of an algorithm and compare the results, since the package structure provides a logical seperation between algorithm and analysis. In practice such fine-grained control and invistigation is more important than simply being able to regenerate what has already been done without any further input.&lt;/p&gt;
&lt;p&gt;This is not entirely failsafe. The package may depend on other packages, which themselves may have changed. For my use cases, it is a deal more reliable than running the current version of a package that is actively changing during my research. Readers interested in even more robust replication and verification should take a look at Roger Peng’s package &lt;code&gt;stashR&lt;/code&gt; package and associated publications &lt;span class=&quot;showtooltip&quot; data-html=&quot;true&quot; title=&quot;&lt;p&gt;Eckel S and Peng RD (2012). stashR: A Set of Tools for Administering SHared Repositories. R package version 0.3-5.“&amp;gt;&lt;a href=&quot;http://CRAN.R-project.org/package=stashR&quot;&gt;Eckel &amp;amp; Peng (2012)&lt;/a&gt;&lt;/span&gt; .&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Sandy Eckel, Roger Peng, (2012) stashR: A Set of Tools for Administering SHared Repositories. &lt;a href=&quot;http://CRAN.R-project.org/package=stashR&quot; class=&quot;uri&quot;&gt;http://CRAN.R-project.org/package=stashR&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notebook features: an introduction</title>
	 <link href="/2013/04/26/notebook-features-introduction.html"/>
   <updated>2013-04-26T00:00:00+00:00</updated>
   <id>/04/26/notebook-features-introduction</id>
   <content type="html">&lt;p&gt;In keeping this open lab notebook, I have sought to address three goals (in addition to all the traditional reasons for keeping a lab notebook)&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Provide an educational resource&lt;/li&gt;
&lt;li&gt;Experiment with scientific infrastructure and tools for sharing and replicating research&lt;/li&gt;
&lt;li&gt;Facilitate the rapid and open dissemination of scientific research&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;which are coincidentally evocative of &lt;a href=&quot;http://www.nsf.gov/pubs/2007/nsf07046/nsf07046.jsp&quot;&gt;NSF’s Broader Impacts&lt;/a&gt; areas. In this series of posts I plan to explore and illustrate some of my experiments to address these goals through various web-based tools available for an open notebook platform. Many of these have been documented in the notebook itself as I experiment with them (see &lt;a href=&quot;http://www.carlboettiger.info/tags.html#notebook-technology&quot;&gt;#notebook-technology&lt;/a&gt;). Not all of those experiments pan out and older tools and techniques are often replaced with newer ones as I explore, and these posts are usually more technical notes written to help me think through and remember what I’m trying out. In order to provide a more accessible snapshot of notebook features, I thought it might be helpful to write a series of posts describing these tools and techniques.&lt;/p&gt;
&lt;p&gt;Below is an index of posts in this theme that I will continue to update as I have a chance to finish them. If there’s anything about the notebook that you’d like to hear more about, feel free to suggest it in the comments.&lt;/p&gt;
&lt;h3 id=&quot;written&quot;&gt;Written&lt;/h3&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;http://carlboettiger.info/2013/04/26/notebook-features-reproducible-code.html&quot;&gt;Reproducible code: embedding code and dynamic documents&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://carlboettiger.info/2013/04/04/notebook-parsing.html&quot;&gt;Parsing linked data in the semantic notebook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://carlboettiger.info/2013/05/03/notebook-features-hashes-providing-an-immutable-and-verifiable-research-record.html&quot;&gt;Hashes: An immutable and verifiable record of research&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://carlboettiger.info/2013/05/31/notebook-features-digital-archiving.html&quot;&gt;Digital archiving&lt;/a&gt;. See also a separate entry on &lt;a href=&quot;http://purl.org/cboettig/2013/05/31/notebook-features-archiving-with-figshare&quot;&gt;advantages and challenges in archiving with figshare&lt;/a&gt;, and some &lt;a href=&quot;/2013/06/03/DOI-citable.html&quot;&gt;comments about DOIs&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;planned&quot;&gt;Planned&lt;/h3&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;&quot;&gt;Readable, multi-device typography&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;&quot;&gt;Notebook analytics: Who reads this stuff anyway?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;&quot;&gt;A fast, inexpensive, and scalable online platform&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;&quot;&gt;Online notebook essentials: link, tag, search&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;&quot;&gt;Integrating social networks with the notebook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/04/25/notes.html"/>
   <updated>2013-04-25T00:00:00+00:00</updated>
   <id>/04/25/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;finish pmc post from Tuesday (done).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Submit comment reply (done).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;nonparametric-bayes&quot;&gt;Nonparametric-bayes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Finishing up parametric vs nonparametric Bayes comparison runs&lt;/li&gt;
&lt;li&gt;Need to add parametric Bayesian mean to the state-space diagram, fig 1&lt;/li&gt;
&lt;li&gt;Compare with uniform priors on inverse standard deviations (precision)&lt;/li&gt;
&lt;li&gt;Sensitivity analysis&lt;/li&gt;
&lt;li&gt;mcmc convergence analysis for both Bayesian approaches&lt;/li&gt;
&lt;li&gt;See allen.md example scripts in BUGS/, adapted to post soon&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;code-tricks&quot;&gt;Code tricks&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Plotting tricks&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Selecting the order in the simulation legend requires declaring the model types as an ordered factor instead of a character,&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dt$method =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;factor&lt;/span&gt;(dt$method, &lt;span class=&quot;dt&quot;&gt;ordered=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;levels=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(OPT))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and then set custom colors and match colors to the desired factor labels with &lt;code&gt;scale_colour_manual&lt;/code&gt;, and override &lt;code&gt;alpha&lt;/code&gt; for legends,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dt) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;interaction&lt;/span&gt;(reps,method), &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;method), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_manual&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;values=&lt;/span&gt;colorkey, &lt;span class=&quot;dt&quot;&gt;guide =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;guide_legend&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;override.aes =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)))&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Avoid having density plots appear as crude polygons using &lt;code&gt;stat_density&lt;/code&gt; instead of &lt;code&gt;geom_density&lt;/code&gt; and set &lt;code&gt;geom&lt;/code&gt; to path. Need a ymax (not clear why?) or set &lt;code&gt;position=&amp;quot;identity&amp;quot;&lt;/code&gt; as shown,:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(posteriors, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;geom=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;path&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;position=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;identity&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.7&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://gist.github.com/bluegraybox/1998129&quot;&gt;initialize ssh-agent in .bashrc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Or for single session: &lt;code&gt;ssh-agent bash&lt;/code&gt;, &lt;code&gt;ssh-add ~/.ssh/id_rda&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;misc&quot;&gt;Misc&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;whoops, got into discussion of a fictional world of data publishing in the &lt;a href=&quot;http://dynamicecology.wordpress.com/2013/04/08/selective-journals-vs-social-networks-alternative-ways-of-filtering-the-literature-or-po-tay-to-po-tah-to/#comment-15439&quot;&gt;comments at dynamicecology&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Speaking of &lt;a href=&quot;http://dynamicecology.wordpress.com/2013/04/16/prioritizing-manuscripts-and-having-data-go-unpublished-for-lack-of-time&quot;&gt;data publishing issues on dynamicecology&lt;/a&gt;…&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Empirical Demonstration Of That Clever Derivation</title>
	 <link href="/2013/04/24/empirical-demonstration-of-that-clever-derivation.html"/>
   <updated>2013-04-24T00:00:00+00:00</updated>
   <id>/04/24/empirical-demonstration-of-that-clever-derivation</id>
   <content type="html">&lt;p&gt;Another unexpected gem from keeping an online notebook: Empirical evidence for the expected escape time problem! Getting to that in a moment….&lt;/p&gt;
&lt;p&gt;After Marc pointed out to me that there is a clever analytic demonstration to back my claims about realized exit times being fast (posted earlier in my notebook under the title, &lt;a href=&quot;http://carlboettiger.info/2013/04/05/a-clever-derivation-on-realized-escape-times.html&quot;&gt;a clever derivation of realized escape times&lt;/a&gt;, I’ve enjoyed a bit of a tangent in understanding this result that has long since been worked out by mathematicians but appears to be periodically rediscovered in ecological and evolutionary work in the most delightful ways.&lt;/p&gt;
&lt;p&gt;For instance, &lt;span class=&quot;showtooltip&quot; data-html=&quot;true&quot; title=&quot;Lande R (1985). “Expected time for random genetic drift of a population between stable phenotypic states.” .&quot;&gt;&lt;a href=&quot;http://www.pnas.org/content/82/22/7641.short&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Lande (1985)&lt;/a&gt;&lt;/span&gt; shows how this result can explain a pattern of punctuated equilibrium, such as sudden rapid jumps such as illustrated below in a simulation example from &lt;a href=&quot;http://www.amazon.com/Perturbations-Dynamical-Grundlehren-mathematischen-Wissenschaften/dp/0387983627&quot; rel=&quot;http://purl.org/spar/cito/citesAsAuthority&quot; &gt;Freidlin &lt;em&gt;et. al.&lt;/em&gt; (1998)&lt;/a&gt;, need not result from some external process but are in fact the most likely trajectories to be seen in a purely stochastic transition.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8258/8684251521_124e51b5d3_o.png&quot; alt=&quot;from Mangel 2006, Theoretical Biologist’s toolbox&quot; /&gt;&lt;figcaption&gt;from Mangel 2006, Theoretical Biologist’s toolbox&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Ludwig (1975) considered this result in a more ecological context, addressing a variety of questions about persistence and coexistence that are naturally represented as hitting time problems as well. Note that the this result is interesting precisely in its contrast from the more familiar hitting time problems in that we focus on the time the realized trajectory actually takes to exit, rather than the waiting time until that exit occurs (e.g. the frequency of the transtions shown in the figure above).&lt;/p&gt;
&lt;p&gt;These examples appear to be rediscoveries of particular cases that result more generally from the large deviation theory of Fiedlin and Wentzell, which states that the most likely path can be found by minimizing a variation equation (Hamiltonian, analgous to the minimizing action along paths in classical mechanics or the optimization under constraint of Jacobi-Bellman). For a system of discrete steps (e.g. births and deaths) in one dimension this is particularly trivial: the most likely path is the monotonic one (this should be easy to see by considering the likelihood of &lt;span class=&quot;math&quot;&gt;\(N\)&lt;/span&gt; death events occuring in sequence vs that of &lt;span class=&quot;math&quot;&gt;\(N-1\)&lt;/span&gt; death events interrupted by 1 birth and followed by 2 deaths.)&lt;/p&gt;
&lt;h2 id=&quot;empirical-demonstrations&quot;&gt;Empirical demonstrations?&lt;/h2&gt;
&lt;p&gt;Then an email to me earlier this week pointed out that perhaps an example of the phenomenon I discussed there had been demonstrated in &lt;span class=&quot;showtooltip&quot; data-html=&quot;true&quot; title=&quot;Drake J and Griffen B (2009). “Speed of Expansion And Extinction in Experimental Populations.” Ecology Letters, 12, pp. 772–778. ISSN 1461023X.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2009.01325.x&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Drake &amp;amp; Griffen (2009)&lt;/a&gt;&lt;/span&gt; :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A testable, counter-intuitive prediction of stochastic population theory is that, on average, for any interior interval of the domain of biologically attainable population sizes, the expected duration of increase equals the expected duration of decline. Here we report the first empirical tests of this hypothesis.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I do feel that this is an overstatement of the stochastic theory as I understand it – these times should only scale in a similar way, but can differ by an arbitrary coefficient. Indeed it is often the goal of the deviation theory analysis to determine this coefficent, see &lt;span class=&quot;showtooltip&quot; data-html=&quot;true&quot; title=&quot;Faure M and Schreiber SJ (2011). “Quasi-Stationary distributions for Randomly perturbed dynamical systems.” .&quot;&gt;&lt;a href=&quot;http://arxiv.org/abs/1101.3420&quot; rel=&quot;http://purl.org/spar/cito/citesAsAuthority&quot; &gt;Faure &amp;amp; Schreiber (2011)&lt;/a&gt;&lt;/span&gt; . The authors seem quite concerned that theory they refer to applies to continuously valued diffusion processes alone, whereas I’m quite certain the more general results of the deviation theory hold just as well in discrete systems. (Perhaps this explains why they do not confirm this prediction in some subset of the data). Nevertheless, the context is the same as we consider – comparing the return time to a stable point from some small population size with the time required to decline from that point to a small size, as clearly indicated in Figure 1 of the manuscript.&lt;/p&gt;
&lt;p&gt;Commendably, the authors make the data and code available (as an R script and .Rdata file). (According to the manuscript, this data is at &lt;a href=&quot;http://dragonfly.ecology.uga.edu/drakelab/data.html&quot; class=&quot;uri&quot;&gt;http://dragonfly.ecology.uga.edu/drakelab/data.html&lt;/a&gt;, but in an example of link rot and the risk of independent archiving the lab prefers daphnia to dragonfly, and the data can now be found: &lt;a href=&quot;http://daphnia.ecology.uga.edu/drakelab/datapage.html&quot; class=&quot;uri&quot;&gt;http://daphnia.ecology.uga.edu/drakelab/datapage.html&lt;/a&gt;). These data draw on work from earlier experiments that provide some of the nicest sources of time series leading up to stochastic extinctions. Unfortunately it appears that only the duration of growth and extinction times for the replicates are shown in the data provided for this paper, I don’t see the actual timeseries themselves (which would be interesting to look at more closely).&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;John M. Drake, Blaine D. Griffen, (2009) Speed of Expansion And Extinction in Experimental Populations. &lt;em&gt;Ecology Letters&lt;/em&gt; &lt;strong&gt;12&lt;/strong&gt; 772-778 &lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2009.01325.x&quot;&gt;10.1111/j.1461-0248.2009.01325.x&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Mark Freidlin, Alexander Wentzell, (1998) {Random Perturbations of Dynamical Systems (Grundlehren der mathematischen Wissenschaften)}. 429-NA &lt;a href=&quot;http://www.amazon.com/Perturbations-Dynamical-Grundlehren-mathematischen-Wissenschaften/dp/0387983627&quot; class=&quot;uri&quot;&gt;http://www.amazon.com/Perturbations-Dynamical-Grundlehren-mathematischen-Wissenschaften/dp/0387983627&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;R Lande, (1985) Expected time for random genetic drift of a population between stable phenotypic states. &lt;em&gt;Proceedings of the National Academy of Sciences&lt;/em&gt; &lt;a href=&quot;http://www.pnas.org/content/82/22/7641.short&quot; class=&quot;uri&quot;&gt;http://www.pnas.org/content/82/22/7641.short&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Mathieu Faure, Sebastian Schreiber, (2011) Quasi-Stationary distributions for Randomly perturbed dynamical systems. &lt;em&gt;arXiv.org&lt;/em&gt; &lt;a href=&quot;http://arxiv.org/abs/1101.3420&quot; class=&quot;uri&quot;&gt;http://arxiv.org/abs/1101.3420&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>We Need More Object Oriented Design In Comparative Methods</title>
	 <link href="/2013/04/23/we-need-more-object-oriented-design-in-comparative-methods.html"/>
   <updated>2013-04-23T00:00:00+00:00</updated>
   <id>/04/23/we-need-more-object-oriented-design-in-comparative-methods</id>
   <content type="html">&lt;p&gt;The bad news is that the latest &lt;a href=&quot;http://cran.r-project.org/web/packages/geiger/index.html&quot;&gt;Geiger&lt;/a&gt; version (which is much improved in all respects) breaks my little &lt;a href=&quot;http://cran.r-project.org/web/packages/pmc/index.html&quot;&gt;pmc&lt;/a&gt; package, owing to changes in how &lt;code&gt;fitContinuous&lt;/code&gt; output is structured. The good news is that the new geiger is much better than the old one, and that the pmc package is pretty trivial. So this should not be read as a complaint, but I think as a scientific developer community as a whole we could learn a few simple lessons here, which can help our code more reproducible and extensible.&lt;/p&gt;
&lt;p&gt;Functions define the API, or &lt;a href=&quot;http://en.wikipedia.org/wiki/Application_programming_interface&quot;&gt;application programming interface&lt;/a&gt;, of a package. Once a package has been released, developers are usually hesitant to change how a function call is made – what arguments it takes or what order they come in, since this would break any existing code. For the most part, the update is a good example of that, with minor exceptions – (for instance, a data.frame used to be a valid input to the &lt;code&gt;fitContinuous&lt;/code&gt; &lt;code&gt;dat&lt;/code&gt; argument, but now it must be a matrix). More problematic is the lack of an API in the original version of package for handling output objects. If you wanted to access the estimated value of the parameter &lt;code&gt;lambda&lt;/code&gt; after running &lt;code&gt;fit &amp;lt;- fitContinuous(phy, dat, model=&amp;quot;lambda&amp;quot;, ...)&lt;/code&gt;, you would have needed to use &lt;code&gt;fit[[1]]$lambda&lt;/code&gt;. Under the newer version of this function, such a call won’t work. Any code written to use the output of that function will not work either.&lt;/p&gt;
&lt;p&gt;To avoid this kind of problem in the future, Jon has written the function &lt;code&gt;coef&lt;/code&gt; which will extract the coefficients from the fit. For anyone starting to write packages, writing and using such extraction functions seems like an unnecessary hassle – after all it is often no faster to call the additional function than to just pull the data out of the return object yourself. But there is good reason to implement and use such methods. By drawing the data out using a function, it is possible to change the internal structure of the output without breaking the package API; without breaking code that depends on the package. In future, the &lt;code&gt;coef&lt;/code&gt; function can just be similarly updated to point to the correct location for the model coefficients.&lt;/p&gt;
&lt;p&gt;Better than providing just any function, the new &lt;code&gt;coef&lt;/code&gt; and &lt;code&gt;logLik&lt;/code&gt; functions are generic methods that can act on a wide range of model fits in R that return coefficients or log likelihoods. Just type &lt;code&gt;methods(&amp;quot;coef&amp;quot;)&lt;/code&gt; in your R terminal after loading your commonly used libraries to see how many of them define such a function. Following the basic principle of object-oriented design, these generic function calls identify the class of object they are given, and figure out what method to use on that class. For instance, the list of stuff returned by &lt;code&gt;fitContinous&lt;/code&gt; now has class &lt;code&gt;gcfit&lt;/code&gt;, and a function &lt;code&gt;coef.gcfit&lt;/code&gt; which the generic function &lt;code&gt;coef&lt;/code&gt; uses to know where to find the coefficients in a &lt;code&gt;gcfit&lt;/code&gt; object. Generic functions are particularly nice, since they allow us to write code that can deal with a wide variety of statistical fits without needing to know just how to perform those tasks. The pmc algorithm is a good example of this. Using the generics &lt;code&gt;simulate&lt;/code&gt;, &lt;code&gt;update&lt;/code&gt;, and &lt;code&gt;logLik&lt;/code&gt;, we can write the algorithm as:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;## Fit the original data using a function that returns an intelligent object &amp;quot;fit&amp;quot; which has methods &amp;quot;simulate&amp;quot;, &amp;quot;update&amp;quot;, and &amp;quot;logLik&amp;quot;
fit_A &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;my_fitting_function&lt;/span&gt;(data, phy, model_pars_A, fitting_pars ...)
fit_B &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;another_fitting_function&lt;/span&gt;(data, phy, model_pars_B, fitting_pars ...)

orig_LL &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;logLik&lt;/span&gt;(fit_B) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;logLik&lt;/span&gt;(fit_A)

## 1000 Simulations under each model
A_sims &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;simulate&lt;/span&gt;(fit_A, &lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;)
B_sims &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;simulate&lt;/span&gt;(fit_B, &lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;)

## here are the four fits
AA &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(A_sims, fit_A, update)
AB &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(A_sims, fit_B, update)
BA &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(B_sims, fit_A, update)
BB &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(B_sims, fit_B, update)

## which create 2 distributions
null_dist =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(AB, logLik) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(AA, logLik)
test_dist =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(BB, logLik) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(BA, logLik)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;in which the exact same code could be used regardless of whether &lt;code&gt;my_fitting_function&lt;/code&gt; was &lt;code&gt;brownie.lite&lt;/code&gt;, &lt;code&gt;fitContinuous&lt;/code&gt;, &lt;code&gt;fitDiscrete&lt;/code&gt;, &lt;code&gt;hansen&lt;/code&gt;, &lt;code&gt;OUwie&lt;/code&gt;, any of the laser fns, etc etc, and &lt;code&gt;another_fitting_function&lt;/code&gt; could be the same call with different parameters (e.g. call to &lt;code&gt;hansen&lt;/code&gt; with a different painting) or a call to some other function entirely (e.g. &lt;code&gt;brownie.lite&lt;/code&gt;). Instead, &lt;code&gt;OUCH&lt;/code&gt; is the only one that does this, and it insists on using a different format for “data” and “phy” which makes it annoying to have it play nicely with other fitting routines.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;pmc&lt;/code&gt; package simply writes wrappers that will provide these generic methods to some of these functions. Because different packages (e.g. ouch, geiger) handle data differently, the wrappers must also be able to convert back and forth between these formats if we want to compare methods across different packages in this way. Though straight forward, it is not good practice to have the methods such as &lt;code&gt;simulate&lt;/code&gt; and &lt;code&gt;update&lt;/code&gt; provided in a different package than the actual fitting routines, but the number of package fitting methods continues to grow and I haven’t persuaded anyone to consider including such routines. With my postdoctoral work outside the area of phylogenetics, updating pmc each time is impractical. If packages provided such generic routines, code such as the above would work out of the box without the need for a specialized &lt;code&gt;pmc&lt;/code&gt; package, which appears to make this very intuitive technique more opaque then necessary.&lt;/p&gt;
&lt;p&gt;There are many other good statistical tests that could benefit from such methods (particularly simulation methods which could assist in many ways). I hope one day they may be more popular in our phylogenetics community.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Bayesian Parametric Uncertainty Sdp</title>
	 <link href="/2013/04/19/bayesian-parametric-uncertainty-sdp.html"/>
   <updated>2013-04-19T00:00:00+00:00</updated>
   <id>/04/19/bayesian-parametric-uncertainty-sdp</id>
   <content type="html">&lt;p&gt;Adapting the parametric uncertainty represented by the posterior distributions of the Bayesian estimate (see &lt;a href=&quot;http://carlboettiger.info/2013/04/12/parametric-bayesian-example.html&quot;&gt;earlier notes&lt;/a&gt;) to the stochastic dynamic programming solution for the optimal policy. Simply requires evaluating the expectation over the distribution, but is computationally intensive given the spread and the three parameters.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f_transition_matrix &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(f, p, x_grid, h_grid, sigma_g, pardist){
  &lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(h_grid, par_F, f, p, x_grid, sigma_g, pardist)
}


par_F &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(h, f, p, x_grid, sigma_g, pardist, &lt;span class=&quot;dt&quot;&gt;n_mc =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;){
  
  &lt;span class=&quot;co&quot;&gt;# Set up monte carlo sampling &lt;/span&gt;
  d &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dim&lt;/span&gt;(pardist)
  indices &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;round&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;runif&lt;/span&gt;(n_mc,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, d[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]))
  
  &lt;span class=&quot;co&quot;&gt;# Compute the matrix&lt;/span&gt;
  F_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, function(x_t){           &lt;span class=&quot;co&quot;&gt;# For each x_t  &lt;/span&gt;

      bypar &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(indices, function(i){ &lt;span class=&quot;co&quot;&gt;# For each parameter value&lt;/span&gt;
        p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(pardist[i,&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)])    &lt;span class=&quot;co&quot;&gt;# parameters for the mean, at current sample &lt;/span&gt;
        mu &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x_t,h,p)
        est_sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pardist[i,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]         &lt;span class=&quot;co&quot;&gt;# Variance parameter &lt;/span&gt;

        if(&lt;span class=&quot;kw&quot;&gt;snap_to_grid&lt;/span&gt;(mu,x_grid) &amp;lt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]){ &lt;span class=&quot;co&quot;&gt;# handle the degenerate case &lt;/span&gt;
          out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x_grid))
          out[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
          out
        } else {
          out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dlnorm&lt;/span&gt;(x_grid/mu, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, est_sigma_g) 
        }
      })  
      ave_over_pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(bypar, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, sum) &lt;span class=&quot;co&quot;&gt;# collapse by weighted average over possible parameters    &lt;/span&gt;
      ave_over_pars /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(ave_over_pars)
      })
  F_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(F_true)
        
}


snap_to_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, grid) &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x, function(x) grid[&lt;span class=&quot;kw&quot;&gt;which.min&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(grid -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x))])   


&lt;span class=&quot;co&quot;&gt;# internal helper function&lt;/span&gt;
rownorm &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(M) 
  &lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(M, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, function(x){ 
    if(&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(x)&amp;gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;){
      x/&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(x)
    } else {
      out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x))
      out[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
      out
    }
  }))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Run the Bayesian analysis to obtain posterior distributions for parameters.&lt;/p&gt;
&lt;h2 id=&quot;test-case-using-perturbed-parameters&quot;&gt;Test case using perturbed parameters&lt;/h2&gt;
&lt;p&gt;First, sanity test. Use the correct parameter values (slightly perturbed).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pardist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;mcmcall
pardist[,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.000001&lt;/span&gt;)
pardist[,&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.000001&lt;/span&gt;)
pardist[,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_g +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.000001&lt;/span&gt;)
pardist[,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.000001&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Compute optimal policy&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sdp =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f_transition_matrix&lt;/span&gt;(f, p, x_grid, h_grid, sigma_g, pardist)
s_opt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(sdp, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, xT, profit, delta)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Compare to the case without parameter uncertainty (growth noise only)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;SDP_Mat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;determine_SDP_matrix&lt;/span&gt;(f, p, x_grid, h_grid, sigma_g)
pars_fixed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(SDP_Mat, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, xT, profit, delta)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Plot results&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)
policies &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stock=&lt;/span&gt;x_grid, &lt;span class=&quot;dt&quot;&gt;pars.uncert =&lt;/span&gt; x_grid[s_opt$D], &lt;span class=&quot;dt&quot;&gt;pars.fixed =&lt;/span&gt; x_grid[pars_fixed$D]), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policies, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, stock -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;stock size&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;escapement&amp;quot;&lt;/span&gt;) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8247/8664808783_af5240ec6e_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-6&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-6&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;using-actual-estimates&quot;&gt;Using actual estimates&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pardist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;mcmcall&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Transform parameters back&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pardist[,&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pardist[,&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;])
pardist[,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(pardist[,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Compute optimal policy&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sdp =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f_transition_matrix&lt;/span&gt;(f, p, x_grid, h_grid, sigma_g, pardist)
s_opt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(sdp, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, xT, profit, delta)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Compare to the case without parameter uncertainty (growth noise only)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;SDP_Mat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;determine_SDP_matrix&lt;/span&gt;(f, p, x_grid, h_grid, sigma_g)
pars_fixed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;value_iteration&lt;/span&gt;(SDP_Mat, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, xT, profit, delta)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Plot results&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)
policies &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stock=&lt;/span&gt;x_grid, &lt;span class=&quot;dt&quot;&gt;pars.uncert =&lt;/span&gt; x_grid[s_opt$D], &lt;span class=&quot;dt&quot;&gt;pars.fixed =&lt;/span&gt; x_grid[pars_fixed$D]), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policies, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, stock -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;stock size&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;escapement&amp;quot;&lt;/span&gt;) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8264/8664820975_f29cc8d3be_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-11&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-11&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;to-do&quot;&gt;To Do&lt;/h2&gt;
&lt;p&gt;So far this is just a proof of principle example.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Needs to be adjusted to account for uncertainty in the estimates of the noise processes as well.&lt;/li&gt;
&lt;li&gt;Needs to be written as generic and documented functions, add to nonparametric-bayes package routines.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/04/18/notes.html"/>
   <updated>2013-04-18T00:00:00+00:00</updated>
   <id>/04/18/notes</id>
   <content type="html">&lt;h2 id=&quot;misc-coding&quot;&gt;Misc coding&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;knitcitations handling of html formatting in tooltip: html inside the tag must needs be escaped. &lt;a href=&quot;https://github.com/cboettig/knitcitations/issues/37&quot;&gt;knitcitations/#37&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;pmc functions&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;hmm.. how do we easily wrap a function such that it returns its arguments (given and default) in a named list (appropriate for &lt;code&gt;do.call(function_name, args_list)&lt;/code&gt;)? &lt;code&gt;match.call()&lt;/code&gt; inside the function will give the literal string of how the function was called, which, if evaluated in the same environment with same variables in working space, will return the same results, but doesn’t lend itself to updating any one of those arguments. Hoped to extract variable values with some combination of &lt;code&gt;formals&lt;/code&gt; and &lt;code&gt;match.arg()&lt;/code&gt; but no luck.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mendeley API authentication solved using &lt;a href=&quot;https://github.com/michalboo/mendeley-oapi/blob/master/authorise.rb&quot;&gt;Michal’s clever implementation for OAuth&lt;/a&gt;, see my original query on &lt;a href=&quot;http://stackoverflow.com/questions/15887366/obtaining-an-oauth-token-in-ruby-for-the-mendeley-api&quot;&gt;SO&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Implement the SDP calculation for the posterior distributions returned in the parametric comparison case &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/795bf96ed92a708b44978610da7db3b49ebb4dce/inst/examples/BUGS/allen.Rmd&quot;&gt;nonparametric-bayes/allen.Rmd&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Working out the integration over uncertainty for the parameter distribution. Brute force approach clearly doesn’t scale, even on coarse grid, to many parameters. After discussion with Marc, implementing as Monte Carlo instead. As we get samples from the posterior out of the BUGs fit in the first place, this is much more efficient. Should of tried that the first time. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/34922e969e984b5d695a5b53aee01aac1ea3b38e/inst/examples/BUGS/par_uncertainty_sdp.md&quot;&gt;nonparametric-bayes/par_uncertainty_sdp.Rmd&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;warning-signals&quot;&gt;warning-signals&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Analytic calculation of eigenvalues for managed vs unmanaged system&lt;/li&gt;
&lt;li&gt;finish fallacy reply&lt;/li&gt;
&lt;li&gt;finish ews-review reply&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;geospatial-coordinates-from-plain-text&quot;&gt;Geospatial coordinates from plain text&lt;/h2&gt;
&lt;p&gt;Discussed the problem of geolocation from plain text discriptions with Simon a few days ago. I’ve written a simple i&lt;a href=&quot;https://github.com/cboettig/sandbox/blob/29ab32342e9c07272b4796778cd86d518368b3b2/R-tricks/fishphotos.R&quot;&gt;R function to query place names against the Google Map API&lt;/a&gt;, but as Simon has demonstrated, this will often return the coordinates of a cafe in San Fransisco rather than the lake in Italy you meant to get. At DataCite 2011 I had met some folks who mentioned developing a machine learning algorithm for this, though stupidly it looks like I did not record this in my &lt;a href=&quot;http://carlboettiger.info/2011/08/24/datacite-day-1.html&quot;&gt;notes&lt;/a&gt;. Oh well, Google turned up the following interface: &lt;a href=&quot;http://geoparser.digmap.eu/advanced.jsp&quot; class=&quot;uri&quot;&gt;http://geoparser.digmap.eu/advanced.jsp&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Click the geoparse example and scroll down in the XML; they assign probabilities of possible spatial matches. For instance, Hiroshima as the name of a “railroad station” gets 0.05 probability, whereas the majority of the weight falls on “populated place” in Japan.&lt;/p&gt;
&lt;p&gt;It looks like you could query against the service directly, haven’t really explored.&lt;/p&gt;
&lt;p&gt;They have a paper out on this too, &lt;a href=&quot;http://oa.upm.es/4367/1/INVE_MEM_2008_60075.pdf&quot; class=&quot;uri&quot;&gt;http://oa.upm.es/4367/1/INVE_MEM_2008_60075.pdf&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class=&quot;showtooltip&quot; data-html=&quot;true&quot; title=&quot;&lt;p&gt;Shelton A, Satterthwaite W, Beakes M, Munch S, Sogard S and Mangel M (2013). “Separating Intrinsic And Environmental Contributions to Growth And Their Population Consequences.” The American Naturalist, pp. 000–000. ISSN 00030147.“&amp;gt;&lt;a href=&quot;http://dx.doi.org/10.1086/670198&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Shelton &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; provide a rather elegant example of how accounting for individual variation improves modeling efforts in growth dynamics.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Measurement error is important but difficult to deal with; a proper state-space model should use all the replicates to estimate the measurement error process. &lt;span class=&quot;showtooltip&quot; data-html=&quot;true&quot; title=&quot;&lt;p&gt;Knape J, Besbeas P and de Valpine P (2013). “Using Uncertainty Estimates in Analyses of Population Time Series.” Ecology, pp. 130417174952006–. ISSN 0012-9658.“&amp;gt;&lt;a href=&quot;http://dx.doi.org/10.1890/12-0712.1&quot; rel=&quot;http://purl.org/spar/cito/critiques&quot; &gt;Knape &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; argue that you can do pretty well with just the standard errors from the replicates. – Um, but don’t we know this? We expect the central limit theorem to be pretty good a lot of the time. The demonstration that it can work is not quite as useful as a demonstration of when we might expect it not to; but my quick read may be missing something. Certainly an interesting point to wrestle with before going off the deep end with the state-space modeling each time…&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Looking over an early draft of Duncan and Deborah’s “XML and Web Technologies for Data Sciences with R”. Looks fantastic – where was this 3 years ago?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Just launched: http://bison.usgs.ornl.gov (US only). Individual sample occurances, but no morphological measurements available.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Jonas Knape, Panagiotis Besbeas, Perry de Valpine, (2013) Using Uncertainty Estimates in Analyses of Population Time Series. &lt;em&gt;Ecology&lt;/em&gt; 130417174952006-NA &lt;a href=&quot;http://dx.doi.org/10.1890/12-0712.1&quot;&gt;10.1890/12-0712.1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Andrew O. Shelton, William H. Satterthwaite, Michael P. Beakes, Stephan B. Munch, Susan M. Sogard, Marc Mangel, (2013) Separating Intrinsic And Environmental Contributions to Growth And Their Population Consequences. &lt;em&gt;The American Naturalist&lt;/em&gt; 000-000 &lt;a href=&quot;http://dx.doi.org/10.1086/670198&quot;&gt;10.1086/670198&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/04/17/notes.html"/>
   <updated>2013-04-17T00:00:00+00:00</updated>
   <id>/04/17/notes</id>
   <content type="html">&lt;h2 id=&quot;warning-signals&quot;&gt;warning-signals&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Finishing up edits.&lt;/li&gt;
&lt;li&gt;Writing PRSB reply&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;logistics&quot;&gt;Logistics&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;In tomorrow’s Marc meeting, check in about what to include for the CSTAR report&lt;/li&gt;
&lt;li&gt;manuscript / analysis updates&lt;/li&gt;
&lt;li&gt;Comments on recent lit?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ropensci&quot;&gt;ropensci&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/ropensci/treeBASE/issues/4&quot;&gt;treebase/#4&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class=&quot;showtooltip&quot; title=&quot;Dai L, Korolev K and Gore J (2013). “Slower Recovery in Space Before Collapse of Connected Populations.” Nature. ISSN 0028-0836, http://dx.doi.org/10.1038/nature12071.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1038/nature12071&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Dai &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; , with introductory piece by &lt;span class=&quot;showtooltip&quot; title=&quot;Carpenter S (2013).
“Complex Systems: Spatial Signatures of Resilience.” Nature. ISSN 0028-0836&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1038/nature12092&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Carpenter (2013)&lt;/a&gt;&lt;/span&gt; . In this they look only at the spatial extent of a perturbation. Presumbably one might attempt to compare the spatial extent over time to establish a baseline, or otherwise identify a control system. Very difficult to see how this can be applied without appropriate references.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also provides an elegant and clear, if rather intuitive, demonstration that spatially connected / mixing populations will dampen out the signal. Perhaps the interpretation of this misplaces the emphasis – for the connectedness is allowing the insult (dilution of nutrients) to diffuse among neighbors may be strengthening the resilience relative to an isolated population, and therefore it is only appropriate that the signal would weaken.&lt;/p&gt;
&lt;p&gt;Hehe. Nice to see our Prosecutor’s Fallacy paper (&lt;span class=&quot;showtooltip&quot; title=&quot;Boettiger C and Hastings A (2012).
“Early Warning Signals And The Prosecutor&amp;#39;S Fallacy.”
Proceedings of The Royal Society B: Biological Sciences, 279, pp. 4734–4739.
ISSN 0962-8452&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1098/rspb.2012.2085&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Boettiger &amp;amp; Hastings, 2012&lt;/a&gt;&lt;/span&gt; ) being used as further evidence for the value of experimental confirmation: “tests of these indicators in replicated experiments, which avoid the bias intro- duced by selective sampling (23) are lacking.”&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class=&quot;showtooltip&quot; title=&quot;Glaser S, Fogarty M, Liu H, Altman I, Hsieh C, Kaufman L, MacCall A, Rosenberg A, Ye H and Sugihara G (2013).
“Complex Dynamics May Limit Prediction in Marine Fisheries.” Fish And Fisheries, pp. n/a–n/a.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/faf.12037&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Glaser &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; . Nonlinear forecasting doesn’t perform well across the board on these various fisheries data. Authors conclude that this suggests these systems are inherently unpredictable, though seems one could do more to rule out methodological weaknesses and make a more precise statement (perhaps a mutual information claim). Their approach having a large suite of data sets against which to test the performance of a method is nevertheless an interesting idea that’s had some popularity in the machine learning world. Hopefully more researchers will attempt a parallel analysis of these data.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;C. Boettiger, A. Hastings, (2012) Early Warning Signals And The Prosecutor’S Fallacy. &lt;em&gt;Proceedings of The Royal Society B: Biological Sciences&lt;/em&gt; &lt;strong&gt;279&lt;/strong&gt; 4734-4739 &lt;a href=&quot;http://dx.doi.org/10.1098/rspb.2012.2085&quot;&gt;10.1098/rspb.2012.2085&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Stephen R. Carpenter, (2013) Complex Systems: Spatial Signatures of Resilience. &lt;em&gt;Nature&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1038/nature12092&quot;&gt;10.1038/nature12092&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Lei Dai, Kirill S. Korolev, Jeff Gore, (2013) Slower Recovery in Space Before Collapse of Connected Populations. &lt;em&gt;Nature&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1038/nature12071&quot;&gt;10.1038/nature12071&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Sarah M Glaser, Michael J Fogarty, Hui Liu, Irit Altman, Chih-Hao Hsieh, Les Kaufman, Alec D MacCall, Andrew A Rosenberg, Hao Ye, George Sugihara, (2013) Complex Dynamics May Limit Prediction in Marine Fisheries. &lt;em&gt;Fish And Fisheries&lt;/em&gt; n/a-n/a &lt;a href=&quot;http://dx.doi.org/10.1111/faf.12037&quot;&gt;10.1111/faf.12037&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>a few notes on various projects</title>
	 <link href="/2013/04/16/notes.html"/>
   <updated>2013-04-16T00:00:00+00:00</updated>
   <id>/04/16/notes</id>
   <content type="html">&lt;h2 id=&quot;warning-signals&quot;&gt;warning-signals&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Working on revisions for &lt;a href=&quot;https://github.com/cboettig/ews-review/&quot;&gt;ews-review&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Grr, the challenges of open science – can’t stick confidential reviews in ews-review repo where they belong, or track them on the issues tracker, without disclosing their contents. What are the terms of use for these things anyhow&amp;gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;phylogentics-pmc&quot;&gt;phylogentics / pmc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Apparently pmc does have users – at least one recognized that my Vignette is broken following the latest Gieger update. Need to add simulate and update methods for the new fitContinuous, and then integrate these. &lt;a href=&quot;https://github.com/cboettig/pmc/issues/3&quot;&gt;pmc/#3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Another pmc request. Sounds like I should also add support for OUwie fits. See if I can get Jeremy to add &lt;code&gt;simulate&lt;/code&gt; and &lt;code&gt;update&lt;/code&gt; methods. &lt;a href=&quot;https://github.com/cboettig/pmc/issues/4&quot;&gt;pmc/#4&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Dear phylogeneticists&lt;/strong&gt;: please define a methods API for your functions. Accessing coefficients using something like &lt;code&gt;output[[1]][[2]]$somevar$name[4]&lt;/code&gt; is not only cumbersome, but bound to break when you modify your function, so provide a &lt;code&gt;coef&lt;/code&gt; method. Likewise provide &lt;code&gt;simulate&lt;/code&gt; and &lt;code&gt;update&lt;/code&gt; methods so we can all raise the bar on our statistics a little bit.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Alternatively put the code on Github, where sensible folks can fork it, add some common-sense classes and give you a pull request.&lt;/p&gt;
&lt;h2 id=&quot;code-tricks&quot;&gt;Code tricks&lt;/h2&gt;
&lt;p&gt;Because I’m always wondering how to do this one: let’s see what methods are defined for Geiger’s new &lt;code&gt;gfit&lt;/code&gt; class:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;methods&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;gfit&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Returns:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] coef.gfit*&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;logLik.gfit*

&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;Non-visible functions are asterisked&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ht Michael Hannon for that one, and a good way to confuse some folks on &lt;a href=&quot;http://stackoverflow.com/questions/16048949&quot;&gt;SO&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;knitcitations&quot;&gt;knitcitations&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Fixed a minor issue in tooltip formatting, &lt;a href=&quot;https://github.com/cboettig/knitcitations/issues/37&quot;&gt;knitcitations/#37&lt;/a&gt;. Unfortunately not updated in earlier notebook entires, but should be fixed from here on).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Interesting ideas from some folks about adding CSL support, and thinking about being able to pull data into knitcitations from personal zotero libraries, &lt;a href=&quot;https://github.com/cboettig/knitcitations/issues/38&quot;&gt;knitcitations/#38&lt;/a&gt;. Zotero API seems to have some nice features for listing entries of a collection in a variety of file formats, including CSL styling for the returns.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Nearly a month since last push (0.4-4). Should update CRAN to current development version (0.4-6) sometime this week…&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;The debates continue: &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1301759110&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Szuwalski (2013)&lt;/a&gt; , and the reply &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1302181110&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Vert-pre &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt; , reflecting confusion over the article earlier this year, &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1214879110&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Vert-pre &lt;em&gt;et. al.&lt;/em&gt; (2013b)&lt;/a&gt; .&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Disupting the claim of &lt;a href=&quot;http://dx.doi.org/10.1029/2010GL044486&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Ditlevsen &amp;amp; Johnsen (2010)&lt;/a&gt; and others, &lt;a href=&quot;http://dx.doi.org/10.5194/cp-9-323-2013&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Cimatoribus &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt; argue that DO events do show warning signals. But are they chance transitions then?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Looking over &lt;a href=&quot;http://dx.doi.org/10.1038/nclimate1143&quot; rel=&quot;http://purl.org/spar/cito/citesAsAuthority&quot; &gt;Lenton (2011)&lt;/a&gt; , which has a review of some of the evidence against warning signals for noise-induced transitions.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;An even earlier result from Ludwig, in &lt;a href=&quot;http://dx.doi.org/10.1137/1017070&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Ludwig (1975)&lt;/a&gt; .&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;A. A. Cimatoribus, S. S. Drijfhout, V. Livina, G. van der Schrier, (2013) Dansgaard-Oeschger Events: Bifurcation Points in The Climate System. &lt;em&gt;Climate of The Past&lt;/em&gt; &lt;strong&gt;9&lt;/strong&gt; 323-333 &lt;a href=&quot;http://dx.doi.org/10.5194/cp-9-323-2013&quot;&gt;10.5194/cp-9-323-2013&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Peter D. Ditlevsen, Sigfus J. Johnsen, (2010) Tipping Points: Early Warning And Wishful Thinking. &lt;em&gt;Geophysical Research Letters&lt;/em&gt; &lt;strong&gt;37&lt;/strong&gt; n/a-n/a &lt;a href=&quot;http://dx.doi.org/10.1029/2010GL044486&quot;&gt;10.1029/2010GL044486&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Timothy M. Lenton, (2011) Early Warning of Climate Tipping Points. &lt;em&gt;Nature Climate Change&lt;/em&gt; &lt;strong&gt;1&lt;/strong&gt; 201-209 &lt;a href=&quot;http://dx.doi.org/10.1038/nclimate1143&quot;&gt;10.1038/nclimate1143&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Donald Ludwig, (1975) Persistence of Dynamical Systems Under Random Perturbations. &lt;em&gt;Siam Review&lt;/em&gt; &lt;strong&gt;17&lt;/strong&gt; 605-640 &lt;a href=&quot;http://dx.doi.org/10.1137/1017070&quot;&gt;10.1137/1017070&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;C. Szuwalski, (2013) Production is A Poor Metric For Identifying Regime-Like Behavior in Marine Stocks. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;110&lt;/strong&gt; E1436-E1436 &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1301759110&quot;&gt;10.1073/pnas.1301759110&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;K. A. Vert-pre, R. O. Amoroso, O. P. Jensen, R. Hilborn, (2013) Reply to Szuwalski: Policies Robust to Uncertainty in Causes of Productivity Changes Are Needed. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;110&lt;/strong&gt; E1437-E1437 &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1302181110&quot;&gt;10.1073/pnas.1302181110&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;K. A. Vert-pre, R. O. Amoroso, O. P. Jensen, R. Hilborn, (2013) Frequency And Intensity of Productivity Regime Shifts in Marine Fish Stocks. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;110&lt;/strong&gt; 1779-1784 &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1214879110&quot;&gt;10.1073/pnas.1214879110&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/04/15/notes.html"/>
   <updated>2013-04-15T00:00:00+00:00</updated>
   <id>/04/15/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;[x] TE revisions&lt;/li&gt;
&lt;li&gt;&lt;p&gt;[x] PRSB reply&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;[x] Finish bayes parametric example&lt;/li&gt;
&lt;li&gt;&lt;p&gt;[x] Ideas in Ecology &amp;amp; Evolution Review&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;[x] Finish recent posts for this week&lt;/li&gt;
&lt;li&gt;[x] Finish tutorial post for Vasilis&lt;/li&gt;
&lt;li&gt;[x] Move the Bayesian parametric example into project repo&lt;/li&gt;
&lt;li&gt;[x] Update CV for Susan for processing appt (see list)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;[x] Alistair review&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;[ ] PMC update&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Parametric Bayesian Example</title>
	 <link href="/2013/04/12/parametric-bayesian-example.html"/>
   <updated>2013-04-12T00:00:00+00:00</updated>
   <id>/04/12/parametric-bayesian-example</id>
   <content type="html">&lt;p&gt;As discussed with Marc in yesterday’s meeting, it would be useful to compare the Gaussian process, as a nonparametric Bayesian estimate, to the optimal management solution under a &lt;em&gt;parametric&lt;/em&gt; Bayesian case, e.g. with the correct underlying model. This is implemented in BUGS (jags) through the R interface as described in &lt;span class=&quot;showtooltip&quot; data-html=&quot;true&quot; title=&quot;&amp;lt;p&amp;gt;Bolker B, Gardner B, Maunder M, Berg C, Brooks M, Comita L, Crone E, Cubaynes S, Davies T, de Valpine P, Ford J, Gimenez O, Kery M, Kim E, Lennert-Cody C, Magnusson A, Martell S, Nash J, Nielsen A, Regetz J, Skaug H and Zipkin E (2013). “Strategies For Fitting Nonlinear Ecological Models in R, ad Model Builder, And Bugs.” Methods in Ecology And Evolution, pp. n/a–n/a. .&quot;&gt;Bolker B, Gardner B, Maunder M, Berg C, Brooks M, Comita L, Crone E, Cubaynes S, Davies T, de Valpine P, Ford J, Gimenez O, Kery M, Kim E, Lennert-Cody C, Magnusson A, Martell S, Nash J, Nielsen A, Regetz J, Skaug H and Zipkin E (2013). “Strategies For Fitting Nonlinear Ecological Models in R, ad Model Builder, And Bugs.” Methods in Ecology And Evolution, pp. n/a–n/a. .“&amp;gt;&lt;a href=&quot;http://dx.doi.org/10.1111/2041-210X.12044&quot; rel=&quot;http://purl.org/spar/cito/usesMethodIn&quot; &gt;Bolker &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; , and follows the state-space model analysis along the lines outlined in &lt;span class=&quot;showtooltip&quot; data-html=&quot;true&quot; title=&quot;&lt;p&gt;Pedersen M, Berg C, Thygesen U, Nielsen A and Madsen H (2011). “Estimation Methods For Nonlinear State-Space Models in Ecology.” Ecological Modelling, 222, pp. 1394–1400. ISSN 03043800.”&amp;gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.ecolmodel.2011.01.007&quot; rel=&quot;http://purl.org/spar/cito/usesMethodIn&quot; &gt;Pedersen &lt;em&gt;et. al.&lt;/em&gt; (2011)&lt;/a&gt;&lt;/span&gt; .&lt;/p&gt;
&lt;p&gt;We base the estimate on the same simulated data as for the GP and MLE approaches,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;RickerAllee
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;
allee &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;with the same parameters (many of which we won’t need until the SDP value iteration),&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;
sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)
z_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;runif&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_m
x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;101&lt;/span&gt;)
h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid
profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, h) &lt;span class=&quot;kw&quot;&gt;pmin&lt;/span&gt;(x, h)
delta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;
OptTime &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# stationarity with unstable models is tricky thing&lt;/span&gt;
reward &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
xT &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
seed_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
Xo &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K  &lt;span class=&quot;co&quot;&gt;# observations start from&lt;/span&gt;
x0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Xo  &lt;span class=&quot;co&quot;&gt;# simulation under policy starts from&lt;/span&gt;
Tobs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;35&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Generate the simulated data&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sim_obs&lt;/span&gt;(Xo, z_g, f, p, &lt;span class=&quot;dt&quot;&gt;Tobs =&lt;/span&gt; Tobs, &lt;span class=&quot;dt&quot;&gt;nz =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;harvest =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;sort&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, 
    &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;7&lt;/span&gt;), &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)), &lt;span class=&quot;dt&quot;&gt;seed =&lt;/span&gt; seed_i)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And fit the MLE models as before&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;alt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;par_est&lt;/span&gt;(obs, &lt;span class=&quot;dt&quot;&gt;init =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(obs$x[obs$x &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;]), 
    &lt;span class=&quot;dt&quot;&gt;s =&lt;/span&gt; sigma_g))
est &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;par_est_allee&lt;/span&gt;(obs, f, p, &lt;span class=&quot;dt&quot;&gt;init =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;C =&lt;/span&gt; p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;s =&lt;/span&gt; sigma_g))&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;parametric-bayesian-model-fit&quot;&gt;Parametric Bayesian model fit&lt;/h2&gt;
&lt;p&gt;We will use the jags interface from R,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(R2jags)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;initialize parameters. The parametric equation (in this case, matching the true dynamics) and priors are defined &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/795bf96ed92a708b44978610da7db3b49ebb4dce/inst/examples/BUGS/bugmodel-GammaPrior.txt&quot;&gt;in BUGS notation in text file&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;init_p =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;est$p
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(init_p) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;r0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;theta&amp;quot;&lt;/span&gt;)
y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;obs$y[-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]
N =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(y)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;jags.data &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;N&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;y&amp;quot;&lt;/span&gt;)
n.chains =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
n.iter =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;20000&lt;/span&gt;
n.burnin =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;floor&lt;/span&gt;(n.iter/&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
n.thin =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;floor&lt;/span&gt;(n.chains *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(n.iter -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n.burnin)/&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;jags-using-gamma-priors-on-precision&quot;&gt;JAGS using gamma priors on precision&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;jags.params=&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;iR&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;iQ&amp;quot;&lt;/span&gt;); &lt;span class=&quot;co&quot;&gt;# Don&amp;#39;t need to save &amp;quot;x&amp;quot;&lt;/span&gt;
jags.inits &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(){
  &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;=init_p[&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;],&lt;span class=&quot;st&quot;&gt;&amp;quot;logr0&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(init_p[&lt;span class=&quot;st&quot;&gt;&amp;quot;r0&amp;quot;&lt;/span&gt;]),&lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;=&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(init_p[&lt;span class=&quot;st&quot;&gt;&amp;quot;theta&amp;quot;&lt;/span&gt;]),&lt;span class=&quot;st&quot;&gt;&amp;quot;iQ&amp;quot;&lt;/span&gt;=&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;iR&amp;quot;&lt;/span&gt;=&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;=y,&lt;span class=&quot;dt&quot;&gt;.RNG.name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;base::Wichmann-Hill&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;.RNG.seed=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;123&lt;/span&gt;)
}
&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;12345&lt;/span&gt;)
time&amp;lt;-&lt;span class=&quot;kw&quot;&gt;system.time&lt;/span&gt;(       
  jagsfit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;jags&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;jags.data, &lt;span class=&quot;dt&quot;&gt;inits=&lt;/span&gt;jags.inits, jags.params, &lt;span class=&quot;dt&quot;&gt;n.chains=&lt;/span&gt;n.chains, 
                  &lt;span class=&quot;dt&quot;&gt;n.iter=&lt;/span&gt;n.iter, &lt;span class=&quot;dt&quot;&gt;n.thin=&lt;/span&gt;n.thin, &lt;span class=&quot;dt&quot;&gt;n.burnin=&lt;/span&gt;n.burnin,&lt;span class=&quot;dt&quot;&gt;model.file=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;bugmodel-GammaPrior.txt&amp;quot;&lt;/span&gt;)
)         &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;time &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(time[&lt;span class=&quot;st&quot;&gt;&amp;quot;elapsed&amp;quot;&lt;/span&gt;]);&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;summarize-the-results&quot;&gt;Summarize the results&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(emdbook)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(coda)
tfit_jags_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.mcmc.bugs&lt;/span&gt;(jagsfit$BUGSoutput)
&lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;xyplot&lt;/span&gt;(tfit_jags_m))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8258/8662939943_0e5faa9dc0_o.png&quot; alt=&quot;Parameter traces provide a visual tool to assess performance and convergence of the MCMC routine&quot; /&gt;&lt;figcaption&gt;Parameter traces provide a visual tool to assess performance and convergence of the MCMC routine&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;densityplot&lt;/span&gt;(tfit_jags_m))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8261/8662940039_3f5dbeee9d_o.png&quot; alt=&quot;The resulting posterior distributions for the model parameters inferred&quot; /&gt;&lt;figcaption&gt;The resulting posterior distributions for the model parameters inferred&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;We collect model parameters over the replicate runs,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;mcmc &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.mcmc&lt;/span&gt;(jagsfit)
mcmcall &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;mcmc[, -&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]
who &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(mcmcall)
mcmcall &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(mcmcall[, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], mcmcall[, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;], mcmcall[, &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;], mcmcall[, 
    &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;], mcmcall[, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;])
&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(mcmcall) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;who&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;further-parameter-exploration&quot;&gt;Further parameter exploration&lt;/h2&gt;
&lt;p&gt;We will need to integrate over parameter uncertainty. Can consider the discritized binning&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;theta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(mcmcall[, &lt;span class=&quot;st&quot;&gt;&amp;quot;logtheta&amp;quot;&lt;/span&gt;])
theta_dist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;hist&lt;/span&gt;(theta, &lt;span class=&quot;dt&quot;&gt;freq =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8255/8662940161_6cfebf6a91_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;theta_dist$mids&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] 0.25 0.75 1.25 1.75 2.25 2.75 3.25 3.75 4.25 4.75 5.25 5.75 6.25 6.75
## [15] 7.25&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;theta_dist$density&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] 1.154 0.256 0.130 0.092 0.068 0.058 0.044 0.042 0.042 0.018 0.022
## [12] 0.026 0.022 0.014 0.012&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;delta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;theta_dist$mids[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;theta_dist$mids[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Evaluating the value function given &lt;span class=&quot;math&quot;&gt;\(f\)&lt;/span&gt; fixed at each of &lt;code&gt;theta_dist$mids&lt;/code&gt; multiplied by &lt;code&gt;theta_dist$density * delta&lt;/code&gt; and summed over each &lt;span class=&quot;math&quot;&gt;\(\theta\)&lt;/span&gt; is going to be slow for a single parameter but simply unrealistic for higher dimensions.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Benjamin M. Bolker, Beth Gardner, Mark Maunder, Casper W. Berg, Mollie Brooks, Liza Comita, Elizabeth Crone, Sarah Cubaynes, Trevor Davies, Perry de Valpine, Jessica Ford, Olivier Gimenez, Marc Kery, Eun Jung Kim, Cleridy Lennert-Cody, Arni Magnusson, Steve Martell, John Nash, Anders Nielsen, Jim Regetz, Hans Skaug, Elise Zipkin, (2013) Strategies For Fitting Nonlinear Ecological Models in R, ad Model Builder, And Bugs. &lt;em&gt;Methods in Ecology And Evolution&lt;/em&gt; n/a-n/a &lt;a href=&quot;http://dx.doi.org/10.1111/2041-210X.12044&quot;&gt;10.1111/2041-210X.12044&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;M.W. Pedersen, C.W. Berg, U.H. Thygesen, A. Nielsen, H. Madsen, (2011) Estimation Methods For Nonlinear State-Space Models in Ecology. &lt;em&gt;Ecological Modelling&lt;/em&gt; &lt;strong&gt;222&lt;/strong&gt; 1394-1400 &lt;a href=&quot;http://dx.doi.org/10.1016/j.ecolmodel.2011.01.007&quot;&gt;10.1016/j.ecolmodel.2011.01.007&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Tutorial On Likelihood And Roc Methods For Early Warning Signals</title>
	 <link href="/2013/04/11/tutorial-on-likelihood-and-roc-methods-for-early-warning-signals.html"/>
   <updated>2013-04-11T00:00:00+00:00</updated>
   <id>/04/11/tutorial-on-likelihood-and-roc-methods-for-early-warning-signals</id>
   <content type="html">&lt;p&gt;In this tutorial we walk through how to use the likelihood-based approach of &lt;span class=&quot;showtooltip&quot; title=&quot;Boettiger C and Hastings A (2012). Quantifying Limits to
Detection of Early Warning For Critical Transitions. _Journal of
The Royal Society Interface_, *9*, pp. 2527-2539. ISSN 1742-5689,
 http://dx.doi.org/10.1098/rsif.2012.0125.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1098/rsif.2012.0125&quot; rel=&quot;http://purl.org/spar/cito/usesMethodFrom&quot; &gt;Boettiger &amp;amp; Hastings (2012)&lt;/a&gt;&lt;/span&gt; to provide an early warning signal for a critical transition, and how to generate ROC curves discussed in the same paper for comparing different early warning signals. Context and details about the methodology are presented in the paper; here we focus on using the methodology provided in the accompanying R package. All of the examples shown here can be reproduced by pasting the code provided into an R terminal. We will need the following libraries to run this example. If you don’t have them, they can be installed from CRAN using the &lt;code&gt;install.packages&lt;/code&gt; function.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(reshape2)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(multicore)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(devtools)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We will be using custom functions provided in the R package Boettiger, (2012) that accompanies Boettiger &amp;amp; Hastings, (2012), which can be installed directly from the development repository on GitHub:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;earlywarning&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;cboettig&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(earlywarning)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We begin by loading the &lt;code&gt;ibm_critical&lt;/code&gt; data provided in the package (from an individual-based model simulation of a critical transition). We plot the raw data to take a look at it.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;data&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;ibms&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(ibm_critical, &lt;span class=&quot;dt&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;b&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8261/8641108753_956f179a1d_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Fit both models to the original data, record the observed likelihood ratio of the original data&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;A &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stability_model&lt;/span&gt;(ibm_critical, &lt;span class=&quot;st&quot;&gt;&amp;quot;OU&amp;quot;&lt;/span&gt;)
B &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stability_model&lt;/span&gt;(ibm_critical, &lt;span class=&quot;st&quot;&gt;&amp;quot;LSN&amp;quot;&lt;/span&gt;)
observed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;-&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;logLik&lt;/span&gt;(A) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;logLik&lt;/span&gt;(B))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Perform the bootstrapped model comparison on the parallel cluster.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;runtime &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;system.time&lt;/span&gt;(
reps &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mclapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;200&lt;/span&gt;, function(i) &lt;span class=&quot;kw&quot;&gt;compare&lt;/span&gt;(A, B)))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which took 4176.78 seconds to run for the example shown here.&lt;/p&gt;
&lt;p&gt;A helper function extracts the likelihood ratios under each of the pairwise comparisons (The null distribution: -2 times the log likelihood of data fit under A that had been simulated under A, minus the log likelihood of fits under A simulated under B; and the test distribution: fit under B when simulated under A, minus the loglikehood of being fit under B, simulated under B) as a data frame. we show the top of the data frame as output below.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;lr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lik_ratios&lt;/span&gt;(reps)
&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(lr)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   simulation rep     value
## 1       null   1  0.001659
## 2       test   1  2.255139
## 3       null   2  1.892615
## 4       test   2  9.804084
## 5       null   3  4.795269
## 6       test   3 22.696982&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We use this data to generate the overlapping distributions shown in Boettiger &amp;amp; Hastings, (2012),&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(lr) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_density&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value, &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;simulation), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.6&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_vline&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;xintercept=&lt;/span&gt;observed))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8245/8642325058_d70eaee962_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;A second helper function generates the ROC curve from the likelihood ratio data, providing an alternative way to visualize this overlap:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;roc &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;roc_data&lt;/span&gt;(lr)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(roc) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(False.positives, True.positives))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8402/8641224925_83a045afbb_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;ROC curves are particularly useful in comparing the power of a variety of approaches. For instance, we can compare the performance of the likelihood-based signal shown above to the traditional approach of using a correlation coefficient to detect the increase in some summary statistic such as variance or autocorrelation. To obtain replicates, we will still simulate under the null (OU) and test (LSN) models estimated above, but instead of computing the likelihood of these data, we will estimate the commonly used rank correlation coefficient, Kendall’s tau, to quantify the increase in variance, autcorrelation, and skew observed in a moving window over the data.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;var &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;bootstrap_trend&lt;/span&gt;(ibm_critical, window_var, &lt;span class=&quot;dt&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;kendall&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;rep=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;200&lt;/span&gt;)
acor &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;bootstrap_trend&lt;/span&gt;(ibm_critical, window_autocorr, &lt;span class=&quot;dt&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;kendall&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;rep=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;200&lt;/span&gt;)
skew &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;bootstrap_trend&lt;/span&gt;(ibm_critical, window_skew, &lt;span class=&quot;dt&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;kendall&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;rep=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;200&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;These data are formatted like the likeihood ratio data above, only that the statistic is now Kendall’s tau.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(var) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_density&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value, &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;simulation), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.6&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_vline&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;xintercept=&lt;/span&gt;observed))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8265/8642341382_1d87080d5c_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;We can combine the data for the ROC curves of each indicator to compare:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;indicators &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;var =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;roc_data&lt;/span&gt;(var), &lt;span class=&quot;dt&quot;&gt;acor =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;roc_data&lt;/span&gt;(acor), &lt;span class=&quot;dt&quot;&gt;skew =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;roc_data&lt;/span&gt;(skew), &lt;span class=&quot;dt&quot;&gt;lr =&lt;/span&gt; roc), &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Threshold&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;False.positives&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;True.positives&amp;quot;&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(indicators) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(False.positives, True.positives, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;L1)) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8122/8641241253_4c3704523e_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;C. Boettiger, A. Hastings, (2012) Quantifying Limits to Detection of Early Warning For Critical Transitions. &lt;em&gt;Journal of The Royal Society Interface&lt;/em&gt; &lt;strong&gt;9&lt;/strong&gt; 2527-2539 &lt;a href=&quot;http://dx.doi.org/10.1098/rsif.2012.0125&quot;&gt;10.1098/rsif.2012.0125&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>nonparametric-bayes: framing the issues for the manuscript</title>
	 <link href="/2013/04/11/nonparametric-bayes-framing-the-issues.html"/>
   <updated>2013-04-11T00:00:00+00:00</updated>
   <id>/04/11/nonparametric-bayes-framing-the-issues</id>
   <content type="html">&lt;h2 id=&quot;marc-meeting-nonparametric-bayes-manuscript&quot;&gt;Marc meeting: nonparametric-bayes manuscript&lt;/h2&gt;
&lt;p&gt;Very good meeting today going over some big picture considerations in the presentation of the nonparametric-bayes manuscript with Marc. (Also see new entries in issues log on nonparametric-bayes.) Make it clear that we are making a point rather than providing a tool. Focus on the tipping point context rather than the general management context.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Comparison against a parametric Bayesian model (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/40&quot;&gt;40&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Comparison against an active learning parametric model facing a tipping point (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/41&quot;&gt;41&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;parametric-bayesian-model&quot;&gt;Parametric Bayesian model&lt;/h2&gt;
&lt;p&gt;Drafting parametric Bayesian case for comparison, following Marc’s suggestion. So far, &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/795bf96ed92a708b44978610da7db3b49ebb4dce&quot;&gt;code as implemented in BUGS&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;more-on-the-exit-time-problem&quot;&gt;More on the exit time problem&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Alan pointed me to earlier work of &lt;span class=&quot;showtooltip&quot; title=&quot;Schuss Z and Matkowsky B (1979). The Exit Problem: A New Approach
to Diffusion Across Potential Barriers. _Siam Journal on Applied
Mathematics_, *36*, pp. 604-623. ISSN 0036-1399, 
http://dx.doi.org/10.1137/0136043.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1137/0136043&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Schuss &amp;amp; Matkowsky (1979)&lt;/a&gt;&lt;/span&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Also, an electronic version of Don Ludwig’s article: &lt;span class=&quot;showtooltip&quot; title=&quot;Donald Ludwig, (1981). Escape from Domains of Attraction for Systems Perturbed by Noise, Nonlinear Phenomena in Physics and Biology.&quot;&gt;&lt;a href=&quot;http://link.springer.com/chapter/10.1007/978-1-4684-4106-2_14&quot; rel=&quot;http://purl.org/spar/cito/usesMethodFrom&quot; &gt;Ludwig (1981)&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;warning-signals-reading&quot;&gt;Warning signals Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Alan pointed out &lt;span class=&quot;showtooltip&quot; title=&quot;Boerlijst M, Oudman T, de Roos A and Solé R (2013). Catastrophic
Collapse Can Occur Without Early Warning: Examples of Silent
Catastrophes in Structured Ecological Models. _Plos One_, *8*,
pp. e62033-. 
http://dx.doi.org/10.1371/journal.pone.0062033.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1371/journal.pone.0062033&quot; rel=&quot;http://purl.org/spar/cito/reviews&quot; &gt;Boerlijst &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; on warning signals in PLoS ONE today. A very nice piece! It’s quite useful how it show that the early warning signal can appear in unmonitored variables (e.g. juvenile dynamics) or in variables without adequate noise to provide a signal. Kind of funny that they pitch it as a counterexample to the conjecture that early warning signals are universal, since even Scheffer has avoided that word, and it’s not really a counterexample given the caveat of some process noise and complete observability of the system people have so far assumed (while your work with Derin is a more conclusive counter-example by going beyond fold bifurcations)… Anyway, good examples. We need a better understanding of warning signals in this multi-dimensional context at large.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Recently Noam pointed out &lt;span class=&quot;showtooltip&quot; title=&quot;Streeter R and Dugmore A (2013). Anticipating Land Surface
Change. _Proceedings of The National Academy of Sciences_, *110*,
pp. 5779-5784. ISSN 0027-8424, 
http://dx.doi.org/10.1073/pnas.1220161110.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1220161110&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Streeter &amp;amp; Dugmore (2013)&lt;/a&gt;&lt;/span&gt; , which looks like a nice spatial warning signal example (with the classic patterns, rather than the &lt;span class=&quot;showtooltip&quot; title=&quot;Bel G, Hagberg A and Meron E (2012). Gradual Regime Shifts in
Spatially Extended Ecosystems. _Theoretical Ecology_, *5*, pp.
591-604. ISSN 1874-1738, 
http://dx.doi.org/10.1007/s12080-011-0149-6.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1007/s12080-011-0149-6&quot; rel=&quot;http://purl.org/spar/cito/containsAssertionFrom&quot; &gt;Bel &lt;em&gt;et. al.&lt;/em&gt; (2012)&lt;/a&gt;&lt;/span&gt; pattern), but haven’t had time for a closer read yet.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;other-reading&quot;&gt;Other reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Trying to get a hold of &lt;span class=&quot;showtooltip&quot; title=&quot;Ludwig D and Walters C (1981). Measurement Errors And Uncertainty
in Parameter Estimates For Stock And Recruitment. _Canadian
Journal of Fisheries And Aquatic Sciences_, *38*, pp. 711-720.
ISSN 0706-652X,  http://dx.doi.org/10.1139/f81-094.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1139/f81-094&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Ludwig &amp;amp; Walters (1981)&lt;/a&gt;&lt;/span&gt; as well. A tough day for reading with the UCSC subscription access down due to “power outages”&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Interesting preprint on advice for data reuse, &lt;span class=&quot;showtooltip&quot; title=&quot;White EP, Baldridge E, Brym ZT, Locey KJ, McGlinn DJ and Supp SR
(2013). Nine simple ways to make it easier to (re)use your data.
 https://peerj.com/preprints/7 [Online. last-accessed:
2013-04-15 21:19:41].  http://peerj.com/preprints/7.&quot;&gt;&lt;a href=&quot;http://peerj.com/preprints/7&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;White &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;misc-and-code-tricks&quot;&gt;Misc and code-tricks&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;My knitr scripts are not executing in parallel with snow/snowfall packages(?) Parallelizes fine when run chunk by chunk. (e.g. &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/8bf907c21f8eb0f69f6995a94d21ab0eac6e214a/inst/examples/example.Rmd&quot;&gt;example with snowfall&lt;/a&gt;). Knitr runs parallel fine with &lt;code&gt;multicore&lt;/code&gt;. Weird.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;An interesting puzzle on knitr list today: wrangling crazy ascii tables in &lt;code&gt;Hmisc::summary.function&lt;/code&gt;. A good solution would just rewrite the class’s &lt;code&gt;print&lt;/code&gt; method to be a table object (e.g. compatible with &lt;code&gt;xtable&lt;/code&gt; and &lt;code&gt;pander::pandoc_table&lt;/code&gt;), but instead we can hack the ascii, adjusting the options that are passed to &lt;code&gt;print.char.matrix&lt;/code&gt;:&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Created a &lt;a href=&quot;http://purl.org&quot;&gt;PURL&lt;/a&gt; persistent identifier for the notebook &lt;a href=&quot;http://purl.org/globalecology/lab-notebook&quot;&gt;purl.org/globalecology/lab-notebook&lt;/a&gt;. Existing public top level domain. Waiting for approval for my own top-level domain (cboettig).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(Hmisc)
df =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Age =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;round&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;15&lt;/span&gt;)), &lt;span class=&quot;dt&quot;&gt;Sex =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;M&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;W&amp;quot;&lt;/span&gt;)))
out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;summary.formula&lt;/span&gt;( ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Age +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Sex, &lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; df, &lt;span class=&quot;dt&quot;&gt;method =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;reverse&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(out, &lt;span class=&quot;dt&quot;&gt;hsep=&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;#39;|&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;csep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;|&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vsep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;-&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;left.border=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;top.border=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Golan Bel, Aric Hagberg, Ehud Meron, (2012) Gradual Regime Shifts in Spatially Extended Ecosystems. &lt;em&gt;Theoretical Ecology&lt;/em&gt; &lt;strong&gt;5&lt;/strong&gt; 591-604 &lt;a href=&quot;http://dx.doi.org/10.1007/s12080-011-0149-6&quot;&gt;10.1007/s12080-011-0149-6&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Maarten C. Boerlijst, Thomas Oudman, André M. de Roos, Ricard V. Solé, (2013) Catastrophic Collapse Can Occur Without Early Warning: Examples of Silent Catastrophes in Structured Ecological Models. &lt;em&gt;Plos One&lt;/em&gt; &lt;strong&gt;8&lt;/strong&gt; e62033-NA &lt;a href=&quot;http://dx.doi.org/10.1371/journal.pone.0062033&quot;&gt;10.1371/journal.pone.0062033&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Donald Ludwig, Carl J. Walters, (1981) Measurement Errors And Uncertainty in Parameter Estimates For Stock And Recruitment. &lt;em&gt;Canadian Journal of Fisheries And Aquatic Sciences&lt;/em&gt; &lt;strong&gt;38&lt;/strong&gt; 711-720 &lt;a href=&quot;http://dx.doi.org/10.1139/f81-094&quot;&gt;10.1139/f81-094&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Zeev Schuss, Bernard J. Matkowsky, (1979) The Exit Problem: A New Approach to Diffusion Across Potential Barriers. &lt;em&gt;Siam Journal on Applied Mathematics&lt;/em&gt; &lt;strong&gt;36&lt;/strong&gt; 604-623 &lt;a href=&quot;http://dx.doi.org/10.1137/0136043&quot;&gt;10.1137/0136043&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;R. Streeter, A. J. Dugmore, (2013) Anticipating Land Surface Change. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;110&lt;/strong&gt; 5779-5784 &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1220161110&quot;&gt;10.1073/pnas.1220161110&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Ethan White, Elita Baldridge, Zachary Brym, Kenneth Locey, Daniel McGlinn, Sarah Supp, (2013) Nine simple ways to make it easier to (re)use your data. &lt;em&gt;PeerJ PrePrints&lt;/em&gt; &lt;a href=&quot;http://peerj.com/preprints/7&quot; class=&quot;uri&quot;&gt;http://peerj.com/preprints/7&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Donald Ludwig, (1981). Escape from Domains of Attraction for Systems Perturbed by Noise, Nonlinear Phenomena in Physics and Biology.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notebook tweaks: APIs in Ruby, Github hosting</title>
	 <link href="/2013/04/10/fun-and-not-so-fun-with-bibliographic-APIs.html"/>
   <updated>2013-04-10T00:00:00+00:00</updated>
   <id>/04/10/fun-and-not-so-fun-with-bibliographic-APIs</id>
   <content type="html">&lt;h3 id=&quot;crossref-api-and-faraday&quot;&gt;Crossref API and Faraday&lt;/h3&gt;
&lt;p&gt;Looking at automating vita entries. The faraday gem looks like a nice general tool for API queries in Ruby (ht Martin Fenner)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/sandbox/blob/b2351f4bb211d8aff8f87440d7f6064a1ebbde98/ruby-scripts/crossref.rb&quot;&gt;Example exploration&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;mendeley-api-and-omniauth&quot;&gt;Mendeley API and omniauth&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Omniauth appears to be a solution for Rails apps only? Not clear if it can be used in vanilla Ruby. Still stumped by this case; question on &lt;a href=&quot;http://stackoverflow.com/questions/15887366&quot;&gt;SO&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;bisonomy-and-its-api&quot;&gt;Bisonomy and its API&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;RSS feeds too, e.g. &lt;a href=&quot;http://www.bibsonomy.org/publrss/user/carl-boettiger/warning-signals&quot;&gt;&lt;i class=&quot;icon-rss&quot;&gt;&lt;/i&gt; warning-signals&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/sandbox/blob/b2351f4bb211d8aff8f87440d7f6064a1ebbde98/ruby-scripts/bibsonomy.rb&quot;&gt;Example exploration&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;bisonomy-impressions&quot;&gt;Bisonomy impressions&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;The API is intuitive and simple; very nice&lt;/li&gt;
&lt;li&gt;The web interface leaves much to be desired. (Can I sort by date added instead of publication year? What about full text search? And the import by DOI follows the DOI to the publisher’s website and attempts to scrape it (often unsuccessfully) for goodness sakes, instead of looking up the metadata through the crossref API tool &lt;a href=&quot;http://crosscite.org/cn/&quot;&gt;crosscite/cn&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc-notebook-infrastructure&quot;&gt;Misc Notebook infrastructure&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Figshare submissions: Undergraduate thesis and JPs,&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Added vita links to pdfs (&lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/87&quot;&gt;#87&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Minor tweaks&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;github-hosting&quot;&gt;Github hosting&lt;/h3&gt;
&lt;p&gt;Migrated hosting to Github servers, see notes in &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/48&quot;&gt;#48&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>A Clever Derivation On Realized Escape Times</title>
	 <link href="/2013/04/05/a-clever-derivation-on-realized-escape-times.html"/>
   <updated>2013-04-05T00:00:00+00:00</updated>
   <id>/04/05/a-clever-derivation-on-realized-escape-times</id>
   <content type="html">&lt;p&gt;I have often observed (e.g. &lt;span class=&quot;showtooltip&quot; title=&quot;Boettiger C and Hastings A (2012). Early Warning Signals And The
Prosecutor&amp;#39;S Fallacy. _Proceedings of The Royal Society B:
Biological Sciences_, *279*, pp. 4734-4739. ISSN 0962-8452, 
http://dx.doi.org/10.1098/rspb.2012.2085.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1098/rspb.2012.2085&quot; rel=&quot;http://purl.org/spar/cito/citesAsEvidence&quot; &gt;Boettiger &amp;amp; Hastings (2012)&lt;/a&gt;&lt;/span&gt; ) that if purely stochastic transitions out of a potential well happen, then they happen fast (dispite the fact that waiting time for them to happen is very long). Yesterday Marc mentioned an interesting proof of this from Don Ludwig, who was able to show that the waiting time to reach a large deviation in a time &lt;span class=&quot;math&quot;&gt;\(t\)&lt;/span&gt;, given that it reaches it at all, is of the same order as the return time from the large deviation to the equilibrium, &lt;span class=&quot;math&quot;&gt;\(\log(L/\sigma)\)&lt;/span&gt;. That’s an absolutely fascinating conclusion, indeed a bit stronger than even I had expected (the waiting time until an escape is observed rather different! – of order &lt;span class=&quot;math&quot;&gt;\(\exp(L^2/\sigma^2)\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Don’s derivation is repeated in pages 302-311 Marc’s “Theoretical Biologist’s Toolbox,” rather delightfully too (e.g. the “Kumura Maneuver”, or sidenotes such as “it is also kind of fun to do a web search with key words ‘Dawson’s Integral’”). &lt;span class=&quot;showtooltip&quot; title=&quot;Lande R (1985). Expected time for random genetic drift of a
population between stable phenotypic states. 
http://www.pnas.org/content/82/22/7641.abstract [Online.
last-accessed: 2013-04-08 19:58:49]. 
http://www.pnas.org/content/82/22/7641.abstract.&quot;&gt;&lt;a href=&quot;http://www.pnas.org/content/82/22/7641.abstract&quot; rel=&quot;http://purl.org/spar/cito/citesForInformation&quot; &gt;Lande (1985)&lt;/a&gt;&lt;/span&gt; provides a somewhat different derivation of the same result.&lt;/p&gt;
&lt;h2 id=&quot;return-time&quot;&gt;Return time&lt;/h2&gt;
&lt;p&gt;The return time calculation is straight forward. Consider our OU model&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[dX = - X dt + \sigma dB_t\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;We ask for the return time into a neighborhood &lt;span class=&quot;math&quot;&gt;\(\sigma\)&lt;/span&gt; of the origin, starting at &lt;span class=&quot;math&quot;&gt;\(X_0 = L\)&lt;/span&gt; distant from the origin. The deterministic solution&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \tfrac{dx}{dt} = - x \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;implies $x_t = L (1 - e^{-t}) $, so setting &lt;span class=&quot;math&quot;&gt;\(x_t = \sigma_t\)&lt;/span&gt; and solving for &lt;span class=&quot;math&quot;&gt;\(t\)&lt;/span&gt;, we find that &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt; is within &lt;span class=&quot;math&quot;&gt;\(\sigma\)&lt;/span&gt; of &lt;span class=&quot;math&quot;&gt;\(t\)&lt;/span&gt; in time &lt;span class=&quot;math&quot;&gt;\(\log{L} - \log{\sigma}\)&lt;/span&gt;, or &lt;span class=&quot;math&quot;&gt;\(\log{L/\sigma}\)&lt;/span&gt;, as claimed.&lt;/p&gt;
&lt;h2 id=&quot;waiting-time&quot;&gt;Waiting time&lt;/h2&gt;
&lt;p&gt;The time we must wait before any trajectory can reach a given boundary is a classic hitting-time problem for the OU process that can be solved in several ways. Any of these basically start from PDE that must be satisfied for the hitting time (e.g. see Crispin Gardner, Stochastic Methods) for the OU process at stationary state (&lt;span class=&quot;math&quot;&gt;\(T_t = 0\)&lt;/span&gt;),&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \tfrac{\sigma^2}{2} T_{xx} - x T_x = -1 \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;With the appropriate boundary conditions &lt;span class=&quot;math&quot;&gt;\(T(L) = T(-L) = 0\)&lt;/span&gt;. A little integration (see Dynkin’s formula) shows this scales as &lt;span class=&quot;math&quot;&gt;\(\exp(L^2/\sigma^2)\)&lt;/span&gt; (Compare to the Brownian walk that doesn’t have to escape any pull, which escapes at rate &lt;span class=&quot;math&quot;&gt;\(L^2/\sigma^2\)&lt;/span&gt;.&lt;/p&gt;
&lt;h2 id=&quot;exit-time&quot;&gt;Exit time&lt;/h2&gt;
&lt;p&gt;Most trajectories will thus return many times to the origin (stable point) before finally escaping. But if we focus just on the part of the trajectory from some value near the origin, that eventually escapes without ever crossing the origin again,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[u_t(x,t) dt = Pr\left(\textrm{exit from }(0; L]\textrm{in the interval } (t, t + dt) \textrm{without having crossed} 0 | X(0) = x\right)\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;We are interested in comparing the average time taken by trajectories exiting by time &lt;span class=&quot;math&quot;&gt;\(t\)&lt;/span&gt; relative to the probability of exiting at all (i.e. as &lt;span class=&quot;math&quot;&gt;\(t \to \infty\)&lt;/span&gt;),&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ T_c(x) = \frac{\int^{\infty}_0 t u_t(x,t) dt }{\lim_{t \to \infty} u(x,t) }\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;From here we set up the classic hitting time solution for the OU for the &lt;em&gt;time-dependent&lt;/em&gt; PDE,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[u_t = \frac{\sigma^2}{2} u_{xx} = x u_x \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;and with initial condition &lt;span class=&quot;math&quot;&gt;\(u(x,t=0) = 0\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(u(0,t) = 0\)&lt;/span&gt;, and &lt;span class=&quot;math&quot;&gt;\(u(L, t) = 1\)&lt;/span&gt;. A bit of effort and an approximation to Dawson’s integral for &lt;span class=&quot;math&quot;&gt;\(L \gg x\)&lt;/span&gt; leads Don to bound the mean time to exit,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[T_c(x) &amp;lt; \frac{1}{\sigma} \log\left(\frac{L}{\sigma}\right)\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;as claimed.&lt;/p&gt;
&lt;h2 id=&quot;results-from-marcs-other-suggestion&quot;&gt;Results from Marc’s other suggestion&lt;/h2&gt;
&lt;p&gt;Marc also suggested exploring this by directly comparing steps left and right. A related way to measure the relative number of steps in the positive direction relative to the negative direction is Kendall’s tau rank correlation coefficient, which also looks at the number of increases relative to the number of decreases.&lt;/p&gt;
&lt;p&gt;I’ve computed this statistic for my sample trajectories and plotted as a histogram here. The negative skew shows the tendancy to decrease (which is the direction of the deviation I selected – smaller population sizes)&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8263/8621413072_3597b335fe_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;I’ve also computed the ratio of steps up to steps down and histogrammed that: like the above, it shows more steps down than up, though not as dramatic as I might think by any means. Have to think about the role of the step size between observations in formulating this perhaps.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8113/8621413020_5d779e8b1f_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;For the sake of completeness:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/8418a20cabf24786b54acc51eb508e9dbf3d1b37/inst/examples/trajectories.csv&quot;&gt;data for the trajectories is here&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/8418a20cabf24786b54acc51eb508e9dbf3d1b37/inst/examples/beer.md&quot;&gt;code for the analysis is here&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I may try and add a demonstration of Ludwig’s result above when I get some more free time to fiddle; will just need to add some additional simulations of return trajectories.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;C. Boettiger, A. Hastings, (2012) Early Warning Signals And The Prosecutor’S Fallacy. &lt;em&gt;Proceedings of The Royal Society B: Biological Sciences&lt;/em&gt; &lt;strong&gt;279&lt;/strong&gt; 4734-4739 &lt;a href=&quot;http://dx.doi.org/10.1098/rspb.2012.2085&quot;&gt;10.1098/rspb.2012.2085&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;R Lande, (1985) Expected time for random genetic drift of a population between stable phenotypic states. &lt;em&gt;Proceedings of the National Academy of Sciences&lt;/em&gt; &lt;a href=&quot;http://www.pnas.org/content/82/22/7641.abstract&quot; class=&quot;uri&quot;&gt;http://www.pnas.org/content/82/22/7641.abstract&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notebook Features: parsing linked data in the semantic notebook</title>
	 <link href="/2013/04/04/notebook-parsing.html"/>
   <updated>2013-04-04T00:00:00+00:00</updated>
   <id>/04/04/notebook-parsing</id>
   <content type="html">&lt;p&gt;In a &lt;a href=&quot;/2011/05/08/building-a-semantic-notebook.html&quot;&gt;post a while back&lt;/a&gt; I originally put forward the idea of a semantic lab notebook. Semantics, or linked data, are among the most powerful concepts to emerge in online science for scholarly data organization and communication. I have slowly been adding and exploring new ways to introduce semantic concepts into the notebook, which I have documented along the way under my &lt;a href=&quot;http://www.carlboettiger.info/tags.html#semantics&quot;&gt;#semantics&lt;/a&gt; tag. In this post, rather than discuss how to generate the semantic data, I try to focus on some of the things we can &lt;em&gt;do&lt;/em&gt; with it. This really just scratches the surface of possibilities, but should at least illustrate the general idea.&lt;/p&gt;
&lt;p&gt;We will start with some very simple examples exploiting the semantics inherent in HTML5. We can then work up to richer examples that rely on XML-based parsing. The richest potential of the semantic notebook lies in leveraging the RDFa content, whose terms are defined as ontologies over which a machine can apply reasoning and formal logic against other web content (see, e.g. &lt;span class=&quot;showtooltip&quot; title=&quot;Shadbolt N, Berners-Lee T and Hall W (2006). The Semantic Web
Revisited. _Ieee Intelligent Systems_, *21*, pp. 96-101. ISSN
1541-1672,  http://dx.doi.org/10.1109/MIS.2006.62.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1109/MIS.2006.62&quot; rel=&quot;http://purl.org/spar/cito/obtainsBackgroundFrom&quot; &gt;Shadbolt &lt;em&gt;et. al.&lt;/em&gt; (2006)&lt;/a&gt;&lt;/span&gt; for further unformation). Though we show how to extract the and parse the RDF here, exploiting the RDF in the last example must wait to a later post.&lt;/p&gt;
&lt;h2 id=&quot;parsing-semantic-html&quot;&gt;Parsing semantic HTML&lt;/h2&gt;
&lt;p&gt;Our first set of examples will address parsing the semantic HTML directly. For background on how these elements are added to the notebook, see &lt;a href=&quot;/2012/10/14/semantic-lab-notebook.html&quot;&gt;this entry&lt;/a&gt;. We will use R with it’s excellent collection of web, XML parsing, and text-mining tools to take advantage of the semantic structure. First we load the required packages,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(RCurl)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(XML)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(tm)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(wordcloud)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(RColorBrewer)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can get a list of pages to download from the sitemap&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pagelist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;readLines&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://carlboettiger.info/sitemap.txt&amp;quot;&lt;/span&gt;)
pagelist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pagelist[&lt;span class=&quot;kw&quot;&gt;grep&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;/201&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;d/&amp;quot;&lt;/span&gt;, pagelist)]  &lt;span class=&quot;co&quot;&gt;# drop non-posts)&lt;/span&gt;
pages &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(pagelist, getURLContent, &lt;span class=&quot;dt&quot;&gt;followlocation =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Or, if an archive is available locally, (e.g. from figshare cache), we can read the files in directly.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pages &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;system&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;ls ~/Documents/labnotebook/_site/2***/*/*/*.html&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;intern =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We parse each of the pages as HTML so that we can manipulate them with XML tools&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;html &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(pages, htmlParse)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For instance, we can easily get the content of all entries:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;text &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(html, xpathSApply, &lt;span class=&quot;st&quot;&gt;&amp;quot;//article&amp;quot;&lt;/span&gt;, xmlValue)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can also extract metadata based on the semantic markup.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;titles &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(html, xpathSApply, &lt;span class=&quot;st&quot;&gt;&amp;quot;//title&amp;quot;&lt;/span&gt;, xmlValue)
categories &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(html, xpathSApply, &lt;span class=&quot;st&quot;&gt;&amp;quot;//node()[@class=&amp;#39;category&amp;#39;]&amp;quot;&lt;/span&gt;, 
    xmlValue)
tags &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(html, xpathSApply, &lt;span class=&quot;st&quot;&gt;&amp;quot;//node()[@class=&amp;#39;tag&amp;#39;]&amp;quot;&lt;/span&gt;, xmlValue)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;R makes it easy to summarize this data, e.g. by generating a table of the number of entries in each category, or a wordcloud of the tags.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;table&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;unlist&lt;/span&gt;(categories))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;
 computation      ecology    evolution open-science     teaching 
          40          376          287           85           17 &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;wordcloud&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;Corpus&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;VectorSource&lt;/span&gt;(tags)))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8258/8620398951_0c2fd56e26_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;extracting-citations&quot;&gt;Extracting citations&lt;/h3&gt;
&lt;p&gt;Citation information can be encoded&lt;/p&gt;
&lt;p&gt;We can perform more direct text mining as well. For instance, we extract all DOIs found in the text:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;doi_pattern =&lt;span class=&quot;st&quot;&gt; &amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;b(10[.][0-9]{4,}(?:[.][0-9]+)*/(?:(?![&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;amp;&amp;#39;&amp;lt;&amp;gt;])&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;S)+)&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;b&amp;quot;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(gsubfn)
dois &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;strapply&lt;/span&gt;(text, doi_pattern, &lt;span class=&quot;dt&quot;&gt;perl =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)  &lt;span class=&quot;co&quot;&gt;#text[-462]&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sort&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;table&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;unlist&lt;/span&gt;(dois))))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;
10.1002/(SICI)1520-6602(1998)1:1                 10.1002/bjs.6880 
                               1                                1 
                10.1002/etc.2140           10.1006/jtbi.1998.0660 
                               1                                1 
          10.1006/jtbi.2000.1080           10.1006/jtbi.2001.2299 
                               1                                1 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Or generate a wordcloud of the full text&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
carl &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;Corpus&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;VectorSource&lt;/span&gt;(text))
carl &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;tm_map&lt;/span&gt;(carl, removePunctuation)
carl &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;tm_map&lt;/span&gt;(carl, tolower)
carl &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;tm_map&lt;/span&gt;(carl, function(x) &lt;span class=&quot;kw&quot;&gt;removeWords&lt;/span&gt;(x, &lt;span class=&quot;kw&quot;&gt;stopwords&lt;/span&gt;()))

carl.tdm &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;TermDocumentMatrix&lt;/span&gt;(carl)
carl.m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.matrix&lt;/span&gt;(carl.tdm)
carl.v &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sort&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rowSums&lt;/span&gt;(carl.m), &lt;span class=&quot;dt&quot;&gt;decreasing =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
carl.d &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;word =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(carl.v), &lt;span class=&quot;dt&quot;&gt;freq =&lt;/span&gt; carl.v)


&lt;span class=&quot;kw&quot;&gt;wordcloud&lt;/span&gt;(carl.d$word, carl.d$freq, &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.4&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;min.freq =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;max.words =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;random.order =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;rot.per =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.15&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;colors =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;brewer.pal&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt;, 
        &lt;span class=&quot;st&quot;&gt;&amp;quot;Dark2&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8385/8621498714_2fe3e04226_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;rdfa-parsing&quot;&gt;RDFa parsing&lt;/h2&gt;
&lt;p&gt;RDF triples are the mainstay of semantic, linked data. Unlike the more text-mining oriented examples above, data in this format follows a strict and universal standard which allows a machine to identify meaning rather precisely. Critically, this allows one to automatically link data appearing in the notebook to data elsewhere on the web without the ambiguities of natural language that for instance, might confuse the animal jaguar with the car.&lt;/p&gt;
&lt;p&gt;RDFa is a way of adding these precise statements to HTML, again see the &lt;a href=&quot;/2012/10/14/semantic-lab-notebook.html&quot;&gt;earlier entry&lt;/a&gt; on how this is done. The technically inclined will note that the namespaces of the RDFa itself are not accessible in the XML parsing we used above, since they do not correspond to nodes or attributes, but appear only in the values of attributes. Fortunately, there are many excellent tools to extract this RDFa data, turning it into the XML formatted RDF triples we need. e can perform this using the &lt;a href=&quot;http://any23.org&quot;&gt;Any23&lt;/a&gt; API&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;download.file&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://any23.org/rdfxml&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;http://carlboettiger.info&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;), &lt;span class=&quot;st&quot;&gt;&amp;quot;temp.xml&amp;quot;&lt;/span&gt;)
doc &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xmlParse&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;temp.xml&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which creates a beautiful RDF XML file of all linked data found in the entry.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;doc&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;rdf:RDF xmlns:xhtml=&amp;quot;http://www.w3.org/1999/xhtml/vocab#&amp;quot; xmlns:dcterms=&amp;quot;http://purl.org/dc/terms/&amp;quot; xmlns:rdf=&amp;quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&amp;quot;&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://www.carlboettiger.info/&amp;quot;&amp;gt;
    &amp;lt;dcterms:title xml:lang=&amp;quot;en&amp;quot;&amp;gt;Carl Boettiger&amp;lt;/dcterms:title&amp;gt;
    &amp;lt;xhtml:license rdf:resource=&amp;quot;http://creativecommons.org/publicdomain/zero/1.0/&amp;quot;/&amp;gt;
    &amp;lt;dcterms:title xml:lang=&amp;quot;en&amp;quot;&amp;gt;Carl Boettiger&amp;lt;/dcterms:title&amp;gt;
    &amp;lt;dcterms:creator xml:lang=&amp;quot;en&amp;quot;&amp;gt;Carl Boettiger&amp;lt;/dcterms:creator&amp;gt;
    &amp;lt;dcterms:date xml:lang=&amp;quot;en&amp;quot;&amp;gt;2013-04-04T11:07:14-07:00&amp;lt;/dcterms:date&amp;gt;
    &amp;lt;dcterms:format xml:lang=&amp;quot;en&amp;quot;&amp;gt;text/html&amp;lt;/dcterms:format&amp;gt;
    &amp;lt;dcterms:language xml:lang=&amp;quot;en&amp;quot;&amp;gt;en&amp;lt;/dcterms:language&amp;gt;
    &amp;lt;dcterms:identifier xml:lang=&amp;quot;en&amp;quot;&amp;gt;/index.html&amp;lt;/dcterms:identifier&amp;gt;
    &amp;lt;dcterms:rights xml:lang=&amp;quot;en&amp;quot;&amp;gt;CC0&amp;lt;/dcterms:rights&amp;gt;
    &amp;lt;dcterms:source xml:lang=&amp;quot;en&amp;quot;&amp;gt;Lab Notebook&amp;lt;/dcterms:source&amp;gt;
    &amp;lt;dcterms:subject xml:lang=&amp;quot;en&amp;quot;&amp;gt;Ecology&amp;lt;/dcterms:subject&amp;gt;
    &amp;lt;dcterms:type xml:lang=&amp;quot;en&amp;quot;&amp;gt;website&amp;lt;/dcterms:type&amp;gt;
    &amp;lt;title xmlns=&amp;quot;http://ogp.me/ns#&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;Carl Boettiger&amp;lt;/title&amp;gt;
    &amp;lt;author xmlns=&amp;quot;http://ogp.me/ns#&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;http://www.carlboettiger.info/index.html#me&amp;lt;/author&amp;gt;
    &amp;lt;first_name xmlns=&amp;quot;http://ogp.me/ns/profile#&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;Carl&amp;lt;/first_name&amp;gt;
    &amp;lt;last_name xmlns=&amp;quot;http://ogp.me/ns/profile#&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;Boettiger&amp;lt;/last_name&amp;gt;
    &amp;lt;published_time xmlns=&amp;quot;http://ogp.me/ns/article#&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;2013-04-04T11:07:14-07:00&amp;lt;/published_time&amp;gt;
    &amp;lt;site_name xmlns=&amp;quot;http://ogp.me/ns#&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;Lab Notebook&amp;lt;/site_name&amp;gt;
    &amp;lt;url xmlns=&amp;quot;http://ogp.me/ns#&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;http://www.carlboettiger.info/index.html&amp;lt;/url&amp;gt;
    &amp;lt;type xmlns=&amp;quot;http://ogp.me/ns#&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;website&amp;lt;/type&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://carlboettiger.info#me&amp;quot;&amp;gt;
    &amp;lt;rdf:type rdf:resource=&amp;quot;http://xmlns.com/foaf/0.1/Person&amp;quot;/&amp;gt;
    &amp;lt;rdf:type rdf:resource=&amp;quot;http://schema.org/Person#Person&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://www.carlboettiger.info/assets/img/carlboettiger.png&amp;quot;&amp;gt;
    &amp;lt;depiction xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; xml:lang=&amp;quot;en&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://carlboettiger.info&amp;quot;&amp;gt;
    &amp;lt;homepage xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; rdf:resource=&amp;quot;http://carlboettiger.info&amp;quot;/&amp;gt;
    &amp;lt;url xmlns=&amp;quot;http://schema.org/Person#&amp;quot; rdf:resource=&amp;quot;http://carlboettiger.info&amp;quot;/&amp;gt;
    &amp;lt;name xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;Carl Boettiger&amp;lt;/name&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://carlboettiger.info#me&amp;quot;&amp;gt;
    &amp;lt;jobTitle xmlns=&amp;quot;http://schema.org/Person#&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;a post-doctoral researcher&amp;lt;/jobTitle&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:nodeID=&amp;quot;node17eprp1n4x899515&amp;quot;&amp;gt;
    &amp;lt;rdf:type rdf:resource=&amp;quot;http://xmlns.com/foaf/0.1/Person&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://carlboettiger.info#me&amp;quot;&amp;gt;
    &amp;lt;knows xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; rdf:nodeID=&amp;quot;node17eprp1n4x899515&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:nodeID=&amp;quot;node17eprp1n4x899515&amp;quot;&amp;gt;
    &amp;lt;homepage xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; rdf:resource=&amp;quot;http://users.soe.ucsc.edu/~msmangel/&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://carlboettiger.info#me&amp;quot;&amp;gt;
    &amp;lt;knows xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; rdf:nodeID=&amp;quot;node17eprp1n4x899515&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://users.soe.ucsc.edu/~msmangel/&amp;quot;&amp;gt;
    &amp;lt;name xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;Marc Mangel&amp;lt;/name&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:nodeID=&amp;quot;node17eprp1n4x899516&amp;quot;&amp;gt;
    &amp;lt;rdf:type rdf:resource=&amp;quot;http://xmlns.com/foaf/0.1/Person&amp;quot;/&amp;gt;
    &amp;lt;homepage xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; rdf:resource=&amp;quot;http://swfsc.noaa.gov/staff.aspx?&amp;amp;amp;id=17294&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://swfsc.noaa.gov/staff.aspx?&amp;amp;amp;id=17294&amp;quot;&amp;gt;
    &amp;lt;name xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;Steve Munch&amp;lt;/name&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://carlboettiger.info#me&amp;quot;&amp;gt;
    &amp;lt;affiliation xmlns=&amp;quot;http://schema.org/Person#&amp;quot; rdf:resource=&amp;quot;http://boe.ucsc.edu/~msmangel/CSTAR.html&amp;quot;/&amp;gt;
    &amp;lt;workplaceHomepage xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; rdf:resource=&amp;quot;http://www.ucsc.edu/&amp;quot;/&amp;gt;
    &amp;lt;weblog xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; rdf:resource=&amp;quot;http://www.carlboettiger.info/lab-notebook.html&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:nodeID=&amp;quot;node17eprp1n4x899517&amp;quot;&amp;gt;
    &amp;lt;rdf:type rdf:resource=&amp;quot;http://schema.org/PostalAddress&amp;quot;/&amp;gt;
    &amp;lt;address xmlns=&amp;quot;http://schema.org/Person#&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;Center for Stock Assessment Research, 110 Shaffer Rd, Santa Cruz, CA 95050, USA&amp;lt;/address&amp;gt;
    &amp;lt;streetAddress xmlns=&amp;quot;http://schema.org/PostalAddress/&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;Center for Stock Assessment Research, 110 Shaffer Rd&amp;lt;/streetAddress&amp;gt;
    &amp;lt;addressLocality xmlns=&amp;quot;http://schema.org/PostalAddress/&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;Santa Cruz&amp;lt;/addressLocality&amp;gt;
    &amp;lt;addressRegion xmlns=&amp;quot;http://schema.org/PostalAddress/&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;CA&amp;lt;/addressRegion&amp;gt;
    &amp;lt;postalCode xmlns=&amp;quot;http://schema.org/PostalAddress/&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;95050&amp;lt;/postalCode&amp;gt;
    &amp;lt;addressCountry xmlns=&amp;quot;http://schema.org/PostalAddress/&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;USA&amp;lt;/addressCountry&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;https://orcid.org/0000-0002-1642-628X&amp;quot;&amp;gt;
    &amp;lt;orcid xmlns=&amp;quot;http://purl.org/spar/datacite/&amp;quot; rdf:resource=&amp;quot;https://orcid.org/0000-0002-1642-628X&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://www.carlboettiger.info#me&amp;quot;&amp;gt;
    &amp;lt;rdf:type rdf:resource=&amp;quot;http://xmlns.com/foaf/0.1/Person&amp;quot;/&amp;gt;
    &amp;lt;account xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; rdf:resource=&amp;quot;http://www.cloudflare.com/email-protection#f497969b9180809d93b49399959d98da979b99&amp;quot;/&amp;gt;
    &amp;lt;account xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; rdf:resource=&amp;quot;https://twitter.com/cboettig&amp;quot;/&amp;gt;
    &amp;lt;account xmlns=&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot; rdf:resource=&amp;quot;https://github.com/cboettig&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
  &amp;lt;rdf:Description rdf:about=&amp;quot;http://www.carlboettiger.info/&amp;quot;&amp;gt;
    &amp;lt;license xmlns=&amp;quot;http://www.carlboettiger.info/&amp;quot; rdf:resource=&amp;quot;http://creativecommons.org/publicdomain/zero/1.0/&amp;quot;/&amp;gt;
    &amp;lt;license xmlns=&amp;quot;http://creativecommons.org/ns#&amp;quot; rdf:resource=&amp;quot;http://creativecommons.org/publicdomain/zero/1.0/&amp;quot;/&amp;gt;
  &amp;lt;/rdf:Description&amp;gt;
&amp;lt;/rdf:RDF&amp;gt;
 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can now explore this data using the XML tools illustrated above. The rigidity of the XML rather than HTML parsing and the use of namespaces gives us greater precision.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Further Examples Managing Tipping Points With Gp</title>
	 <link href="/2013/04/03/further-examples-managing-tipping-points-with-gp.html"/>
   <updated>2013-04-03T00:00:00+00:00</updated>
   <id>/04/03/further-examples-managing-tipping-points-with-gp</id>
   <content type="html">&lt;p&gt;See also:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;http://www.carlboettiger.info/2012/12/20/results-comparing-gp-to-parametric.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Example with fixed priors on hyperparameters, fixed model type.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;#inv gamma has mean b / (a - 1) (assuming a&amp;gt;1) and variance b ^ 2 / ((a - 2) * (a - 1) ^ 2) (assuming a&amp;gt;2)&lt;/span&gt;
s2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)  
tau2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
d.p =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;)
nug.p =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;) &lt;span class=&quot;co&quot;&gt;# gamma mean&lt;/span&gt;
s2_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dinvgamma&lt;/span&gt;(x, s2.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], s2.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
tau2_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dinvgamma&lt;/span&gt;(x, tau2.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], tau2.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
d_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, d.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; d.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, d.p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; d.p[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;])
nug_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, nug.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; nug.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, nug.p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; nug.p[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;])
beta0_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, tau) &lt;span class=&quot;kw&quot;&gt;dnorm&lt;/span&gt;(x, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, tau)
beta =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
priors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;s2 =&lt;/span&gt; s2_prior, &lt;span class=&quot;dt&quot;&gt;tau2 =&lt;/span&gt; tau2_prior, &lt;span class=&quot;dt&quot;&gt;beta0 =&lt;/span&gt; dnorm, &lt;span class=&quot;dt&quot;&gt;nug =&lt;/span&gt; nug_prior, &lt;span class=&quot;dt&quot;&gt;d =&lt;/span&gt; d_prior, &lt;span class=&quot;dt&quot;&gt;ldetK =&lt;/span&gt; function(x) &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;profit =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x,h) &lt;span class=&quot;kw&quot;&gt;pmin&lt;/span&gt;(x, h)
delta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;
OptTime =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# stationarity with unstable models is tricky thing&lt;/span&gt;
reward =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
xT &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;RickerAllee
&lt;span class=&quot;co&quot;&gt;# c(5, 10, 5) is 2-cycle, c(5.5, 10, 5) is 6 cycle, 5.3 is about 4&lt;/span&gt;
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;) 
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;
allee &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;
sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.0&lt;/span&gt;
z_g =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)
z_m =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;+(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;runif&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_m
x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;101&lt;/span&gt;)
h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With parameters 2, 10, 5.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;seed_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
  Xo &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K &lt;span class=&quot;co&quot;&gt;# observations start from&lt;/span&gt;
  x0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Xo &lt;span class=&quot;co&quot;&gt;# simulation under policy starts from&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sim_obs&lt;/span&gt;(Xo, z_g, f, p, &lt;span class=&quot;dt&quot;&gt;Tobs=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;35&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;nz=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;15&lt;/span&gt;, 
                 &lt;span class=&quot;dt&quot;&gt;harvest =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;sort&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, .&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;7&lt;/span&gt;), &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)), &lt;span class=&quot;dt&quot;&gt;seed =&lt;/span&gt; seed_i)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  alt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;par_est&lt;/span&gt;(obs,  &lt;span class=&quot;dt&quot;&gt;init =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r=&lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;K=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(obs$x), &lt;span class=&quot;dt&quot;&gt;s=&lt;/span&gt;sigma_g))
  est &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;par_est_allee&lt;/span&gt;(obs, f, p,  &lt;span class=&quot;dt&quot;&gt;init =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(obs$x), &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;s =&lt;/span&gt; sigma_g))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which estimates a Ricker model with &lt;span class=&quot;math&quot;&gt;\(r =\)&lt;/span&gt; 2, &lt;span class=&quot;math&quot;&gt;\(K =\)&lt;/span&gt; 6.77, and the Allen allee model with &lt;span class=&quot;math&quot;&gt;\(r =\)&lt;/span&gt; 2, &lt;span class=&quot;math&quot;&gt;\(K =\)&lt;/span&gt; 6.77 and &lt;span class=&quot;math&quot;&gt;\(C =\)&lt;/span&gt; 2.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;bgp&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;X=&lt;/span&gt;obs$x, &lt;span class=&quot;dt&quot;&gt;XX=&lt;/span&gt;x_grid, &lt;span class=&quot;dt&quot;&gt;Z=&lt;/span&gt;obs$y, &lt;span class=&quot;dt&quot;&gt;verb=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,
          &lt;span class=&quot;dt&quot;&gt;meanfn=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;constant&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;bprior=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;b0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;BTE=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2000&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;16000&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;),
          &lt;span class=&quot;dt&quot;&gt;m0r1=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;corr=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;exp&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;trace=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, 
          &lt;span class=&quot;dt&quot;&gt;beta =&lt;/span&gt; beta, &lt;span class=&quot;dt&quot;&gt;s2.p =&lt;/span&gt; s2.p, &lt;span class=&quot;dt&quot;&gt;d.p =&lt;/span&gt; d.p, &lt;span class=&quot;dt&quot;&gt;nug.p =&lt;/span&gt; nug.p, &lt;span class=&quot;dt&quot;&gt;tau2.p =&lt;/span&gt; tau2.p,
          &lt;span class=&quot;dt&quot;&gt;s2.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;d.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;nug.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;tau2.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;)      
  &lt;span class=&quot;kw&quot;&gt;gp_plot&lt;/span&gt;(gp, f, p, est$f, est$p, alt$f, alt$p, x_grid, obs, seed_i)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8535/8617059578_b528a1e51c_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  &lt;span class=&quot;kw&quot;&gt;posteriors_plot&lt;/span&gt;(gp, priors) &lt;span class=&quot;co&quot;&gt;# needs trace=TRUE!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8540/8617059782_197bdf7edd_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  OPT &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optimal_policy&lt;/span&gt;(gp, f, est$f, alt$f,
                        p, est$p, alt$p,
                        x_grid, h_grid, sigma_g, 
                        sigma_g, sigma_g, &lt;span class=&quot;co&quot;&gt;# est$sigma_g, alt$sigma_g, but those ests are poor&lt;/span&gt;
                        delta, xT, profit, reward, OptTime)
  &lt;span class=&quot;kw&quot;&gt;plot_policies&lt;/span&gt;(x_grid, OPT$gp_D, OPT$est_D, OPT$true_D, OPT$alt_D)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8265/8617060456_71afc3e4eb_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;simulate_opt&lt;/span&gt;(OPT, f, p, x_grid, h_grid, x0, z_g, profit)
&lt;span class=&quot;kw&quot;&gt;sim_plots&lt;/span&gt;(dt, &lt;span class=&quot;dt&quot;&gt;seed=&lt;/span&gt;seed_i)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8113/8617060842_7c088c12d1_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;profits_stats&lt;/span&gt;(dt)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;       method     V1     sd
1:         GP 19.337 1.6314
2: Parametric  6.446 0.3384
3:       True 20.701 1.8012
4: Structural  7.650 0.0000&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Monday   Tuesday</title>
	 <link href="/2013/04/02/Monday---Tuesday.html"/>
   <updated>2013-04-02T00:00:00+00:00</updated>
   <id>/04/02/Monday---Tuesday</id>
   <content type="html">&lt;h2 id=&quot;writing&quot;&gt;Writing&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;still working on non-parametric bayes draft today..&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reviewing&quot;&gt;Reviewing&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;review sent to PRSB&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Came across this rather nice summary of big data in Ecology through some buzz in the twittersphere&lt;span class=&quot;showtooltip&quot; title=&quot;Hampton S, Strasser C, Tewksbury J, Gram W, Budden A, Batcheller
A, Duke C and Porter J (2013). Big Data And The Future of
Ecology. _Frontiers in Ecology And The Environment_, *11*, pp.
156-162. ISSN 1540-9295,  http://dx.doi.org/10.1890/120103.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1890/120103&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Hampton &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; .&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;More fishery managment controversy with &lt;span class=&quot;showtooltip&quot; title=&quot;Halpern B, Gaines S, Kleisner K, Longo C, Pauly D, Rosenberg A,
Samhouri J and Zeller D (2013). Halpern et al. Reply. _Nature_,
*495*, pp. E7-E7. ISSN 0028-0836, 
http://dx.doi.org/10.1038/nature11975.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1038/nature11975&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Halpern &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; critiquing the ‘ocean food provision index’ from Nature last year, and a subset of that team replying &lt;span class=&quot;showtooltip&quot; title=&quot;Halpern B, Gaines S, Kleisner K, Longo C, Pauly D, Rosenberg A,
Samhouri J and Zeller D (2013). Halpern et al. Reply. _Nature_,
*495*, pp. E7-E7. ISSN 0028-0836, 
http://dx.doi.org/10.1038/nature11975.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1038/nature11975&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Halpern &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; . Seems to fall along the usual divisions of whether to use or ignore imperfect data; no doubt the truth lies somewhere in between.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Looks like &lt;span class=&quot;showtooltip&quot; title=&quot;Cavanaugh K, Kendall B, Siegel D, Reed D, Alberto F and Assis J
(2013). Synchrony in Dynamics of Giant Kelp Forests is Driven by
Both Local Recruitment And Regional Environmental Controls.
_Ecology_, *94*, pp. 499-509. ISSN 0012-9658, 
http://dx.doi.org/10.1890/12-0268.1.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1890/12-0268.1&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Cavanaugh &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; have a nice synchrony paper in kelp forests which I’m looking forward to reading.&lt;/li&gt;
&lt;li&gt;Nonlinear forecasting strikes again in PNAS, &lt;span class=&quot;showtooltip&quot; title=&quot;Deyle E, Fogarty M, Hsieh C, Kaufman L, MacCall A, Munch S,
Perretti C, Ye H and Sugihara G (2013). Predicting Climate
Effects on Pacific Sardine. _Proceedings of The National Academy
of Sciences_. ISSN 0027-8424, 
http://dx.doi.org/10.1073/pnas.1215506110.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1215506110&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Deyle &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt; Predicting climate effects on sardine with the usual suspects. May disentangle physical forcing from ecological dynamics.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;showtooltip&quot; title=&quot;Halpern B, Klein C, Brown C, Beger M, Grantham H, Mangubhai S,
Ruckelshaus M, Tulloch V, Watts M, White C and Possingham H
(2013). Achieving The Triple Bottom Line in The Face of Inherent
Trade-Offs Among Social Equity, Economic Return, And
Conservation. _Proceedings of The National Academy of Sciences_.
ISSN 0027-8424,  http://dx.doi.org/10.1073/pnas.1217689110.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1217689110&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Halpern &lt;em&gt;et. al.&lt;/em&gt; (2013b)&lt;/a&gt;&lt;/span&gt; discuss the classic problem of optimization in conservation: balancing social equity, economic return and conservation needs.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ROpenSci is mentioned in a letter to the editor published in Ecotoxicology, (&lt;span class=&quot;showtooltip&quot; title=&quot;Schäfer R, Bundschuh M, Focks A and von der Ohe P (2013). to The
Editor. _Environmental Toxicology And Chemistry_, *32*, pp.
734-735.  http://dx.doi.org/10.1002/etc.2140.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1002/etc.2140&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Schäfer &lt;em&gt;et. al.&lt;/em&gt; 2013&lt;/a&gt;&lt;/span&gt; ).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Kyle C. Cavanaugh, Bruce E. Kendall, David A. Siegel, Daniel C. Reed, Filipe Alberto, Jorge Assis, (2013) Synchrony in Dynamics of Giant Kelp Forests is Driven by Both Local Recruitment And Regional Environmental Controls. &lt;em&gt;Ecology&lt;/em&gt; &lt;strong&gt;94&lt;/strong&gt; 499-509 &lt;a href=&quot;http://dx.doi.org/10.1890/12-0268.1&quot;&gt;10.1890/12-0268.1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;E. R. Deyle, M. Fogarty, C.-h. Hsieh, L. Kaufman, A. D. MacCall, S. B. Munch, C. T. Perretti, H. Ye, G. Sugihara, (2013) Predicting Climate Effects on Pacific Sardine. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1215506110&quot;&gt;10.1073/pnas.1215506110&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Benjamin S. Halpern, Steven D. Gaines, Kristin Kleisner, Catherine Longo, Daniel Pauly, Andrew A. Rosenberg, Jameal F. Samhouri, Dirk Zeller, (2013) Halpern et al. Reply. &lt;em&gt;Nature&lt;/em&gt; &lt;strong&gt;495&lt;/strong&gt; E7-E7 &lt;a href=&quot;http://dx.doi.org/10.1038/nature11975&quot;&gt;10.1038/nature11975&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;B. S. Halpern, C. J. Klein, C. J. Brown, M. Beger, H. S. Grantham, S. Mangubhai, M. Ruckelshaus, V. J. Tulloch, M. Watts, C. White, H. P. Possingham, (2013) Achieving The Triple Bottom Line in The Face of Inherent Trade-Offs Among Social Equity, Economic Return, And Conservation. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1217689110&quot;&gt;10.1073/pnas.1217689110&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Stephanie E Hampton, Carly A Strasser, Joshua J Tewksbury, Wendy K Gram, Amber E Budden, Archer L Batcheller, Clifford S Duke, John H Porter, (2013) Big Data And The Future of Ecology. &lt;em&gt;Frontiers in Ecology And The Environment&lt;/em&gt; &lt;strong&gt;11&lt;/strong&gt; 156-162 &lt;a href=&quot;http://dx.doi.org/10.1890/120103&quot;&gt;10.1890/120103&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ralf B. Schäfer, Mirco Bundschuh, Andreas Focks, Peter C. von der Ohe, (2013) to The Editor. &lt;em&gt;Environmental Toxicology And Chemistry&lt;/em&gt; &lt;strong&gt;32&lt;/strong&gt; 734-735 &lt;a href=&quot;http://dx.doi.org/10.1002/etc.2140&quot;&gt;10.1002/etc.2140&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Research</title>
	 <link href="/2013/03/26/research.html"/>
   <updated>2013-03-26T00:00:00+00:00</updated>
   <id>/03/26/research</id>
   <content type="html">&lt;h2 id=&quot;nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/h2&gt;
&lt;p&gt;writing writing …&lt;/p&gt;
&lt;h2 id=&quot;multiple-uncertainty&quot;&gt;multiple-uncertainty&lt;/h2&gt;
&lt;p&gt;Fixed matlab implementation. (Some fun with matrix transposes in translating from R. &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/issues/4&quot;&gt;#4&lt;/a&gt;) See:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/0706ffd2a32e12087a6160fa250e4f3446c6b882/inst/matlab/multiple_uncertainty.m&quot;&gt;multiple-uncertainty.m&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/6f772fb4309bfb24b29a5559551733743a23b738/inst/matlab/testing.m&quot;&gt;example&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Compare to&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/e3506f392ddbee8e33fb97bbe1d6699aee4eadea/R/multiple_uncertainty.R&quot;&gt;R algorithm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/e3506f392ddbee8e33fb97bbe1d6699aee4eadea/inst/tests/matrices.R&quot;&gt;example&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Matlab code shows the same pattern in which growth noise results in constant escapement, but either implementation or measurement noise cause deviations from this rule (most dramatic in the case of implementation uncertainty).&lt;/p&gt;
&lt;h2 id=&quot;notebook&quot;&gt;Notebook&lt;/h2&gt;
&lt;p&gt;Some feedback and ideas from Noam, such as landing pages &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/78&quot;&gt;#77&lt;/a&gt; and inline intro &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/78&quot;&gt;#78&lt;/a&gt;. Also fixed history links and SHA links are now unique to their pages &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/67&quot;&gt;#67&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Research</title>
	 <link href="/2013/03/25/research.html"/>
   <updated>2013-03-25T00:00:00+00:00</updated>
   <id>/03/25/research</id>
   <content type="html">&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;(&lt;span class=&quot;showtooltip&quot; title=&quot;Schreiber S and Killingback T (2013). Spatial Heterogeneity
Promotes Coexistence of Rock-Paper-Scissors Metacommunities.
_Theoretical Population Biology_. ISSN 00405809, 
http://dx.doi.org/10.1016/j.tpb.2013.02.004.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tpb.2013.02.004&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Schreiber &amp;amp; Killingback, 2013&lt;/a&gt;&lt;/span&gt; )&lt;/li&gt;
&lt;li&gt;(&lt;span class=&quot;showtooltip&quot; title=&quot;Warren D (2013). ‘Niche Modeling&amp;#39;: That Uncomfortable Sensation
Means it&amp;#39;S Working. A Reply to Mcinerny And Etienne. _Trends in
Ecology &amp;amp; Evolution_, *28*. ISSN 01695347, 
http://dx.doi.org/10.1016/j.tree.2013.02.003.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2013.02.003&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Warren, 2013&lt;/a&gt;&lt;/span&gt; )&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;notebook&quot;&gt;Notebook&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Added SHA hashes. See notebook Issues &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/67&quot;&gt;#67&lt;/a&gt; for details.&lt;/li&gt;
&lt;li&gt;modification date. &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/74&quot;&gt;#74&lt;/a&gt;, also involved resolving page path robustly, &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/73&quot;&gt;#73&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;analytics on history button, layout &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/72&quot;&gt;#72&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;push dreamhost-based images to flickr See &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/75&quot;&gt;#75&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;prosecutor&quot;&gt;prosecutor&lt;/h2&gt;
&lt;p&gt;Run with OU based data. Draw from sde package.&lt;/p&gt;
&lt;h2 id=&quot;packages&quot;&gt;Packages&lt;/h2&gt;
&lt;h3 id=&quot;knitcitations&quot;&gt;Knitcitations&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Feature request for additional markup for page ranges &lt;a href=&quot;https://github.com/cboettig/knitcitations/issues/32&quot;&gt;#32&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;rfigshare&quot;&gt;rfigshare&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Handle pull request for rfigshare&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;code-tricks-notes-on-merging-select-files-from-pull-request&quot;&gt;code-tricks: notes on merging select files from pull request&lt;/h4&gt;
&lt;p&gt;Pull request included changes to files we don’t want to change. To address this, we separate fetch and merge with &lt;code&gt;--no-commit&lt;/code&gt;. First, fetch the remote repository:&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;git&lt;/span&gt; fetch https://github.com/jcolomb/rfigshare master&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The fetch is at &lt;code&gt;FETCH_HEAD&lt;/code&gt; as it tells us in the console.&lt;/p&gt;
&lt;p&gt;Now we merge the changes without committing them,&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;git&lt;/span&gt; merge --no-commit FETCH_HEAD&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So the changes are all made, but not committed. We can simply unstage the changes we do not want. Since we only want one file, lets start by unstaging all commits&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;git&lt;/span&gt; reset --&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So all changes are in our working directory as if we had just made them, but not told git to do anything yet. We can now drop any of the files we did not want to change back to their state at last commit (HEAD), for instance,&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;git&lt;/span&gt; checkout HEAD inst/examples/tutorial.Rmd&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;while staging the changes to the file we want changed:&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;git&lt;/span&gt; add R/fs_update.R&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and finally commit and push the changes.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Sebastian J. Schreiber, Timothy P. Killingback, (2013) Spatial Heterogeneity Promotes Coexistence of Rock-Paper-Scissors Metacommunities. &lt;em&gt;Theoretical Population Biology&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/j.tpb.2013.02.004&quot;&gt;10.1016/j.tpb.2013.02.004&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Dan L. Warren, (2013) ‘Niche Modeling’: That Uncomfortable Sensation Means it’S Working. A Reply to Mcinerny And Etienne. &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt; &lt;strong&gt;28&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2013.02.003&quot;&gt;10.1016/j.tree.2013.02.003&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Research</title>
	 <link href="/2013/03/22/research.html"/>
   <updated>2013-03-22T00:00:00+00:00</updated>
   <id>/03/22/research</id>
   <content type="html">&lt;h2 id=&quot;multiple-uncertainty&quot;&gt;multiple-uncertainty&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Fixed issues with translation to matlab and &lt;code&gt;applyfun&lt;/code&gt;. Element-wise calls can use meshgrid arguments directly, and one can force functions to use element-wise operations with &lt;code&gt;bxfun&lt;/code&gt;. So the following are equivalent: :&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode matlab&quot;&gt;&lt;code class=&quot;sourceCode matlab&quot;&gt;[X, Y] = meshgrid(x,y)
applyfun(@min, X, Y)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;pre class=&quot;sourceCode matlab&quot;&gt;&lt;code class=&quot;sourceCode matlab&quot;&gt;function out = element_min(x,y) bxfun(@min, x, y)
element_min(X, Y)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Meanwhile my challenge with additional arguments to &lt;code&gt;applyfun&lt;/code&gt; can be circumvented with an inline function,&lt;/p&gt;
&lt;pre class=&quot;sourceCode matlab&quot;&gt;&lt;code class=&quot;sourceCode matlab&quot;&gt;applyfun(@(x,y) ssum(x,y, additional_arg), X, Y)&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;In other developments, may have missed a rownormalization on growth noise.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Time to run and compare R and matlab codes and send to Jim.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;prosecutors-fallacy&quot;&gt;prosecutors-fallacy&lt;/h2&gt;
&lt;p&gt;Check status of runs on farm. Appears that a type error blocked calculations of null distribution. Also, may need further threshold, a threshold of 220 for deviation occurs in 75% of (2000) runs (though depends on run length whether that is sufficiently rare). Threshold of 200 is reached in about 2%. re-running now.&lt;/p&gt;
&lt;p&gt;tweaked my original code a bit to run the case with a single stable state and condition on observing large deviations, and see if the observations prior to the deviation show the ‘spurious’ increase in autocorrelation and variance observed in the original paper.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/019d68ee4c6459d9c56f20c84af3a46c98bdbb03/inst/examples/beer.md&quot;&gt;Results/code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://raw.github.com/cboettig/earlywarning/05611419aeb254ed54a0bb0cd2974c5b328e86fe/inst/examples/beer_dat.csv&quot;&gt;Data for the conditional on deviation warning signal tau values (44 of the timeseries)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://raw.github.com/cboettig/earlywarning/05611419aeb254ed54a0bb0cd2974c5b328e86fe/inst/examples/beer_nulldat.csv&quot;&gt;tau values for unconditional set (2000 timeseries)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Looks like there is still a bias to me.&lt;/p&gt;
&lt;h3 id=&quot;ropensci&quot;&gt;ropensci&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;write coversheet&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://rd-alliance.org&quot;&gt;Research Data Alliance&lt;/a&gt; launch. Interesting &lt;a href=&quot;http://rd-alliance.org/working-groups/current-candidate-groups/&quot;&gt;working groups&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Research</title>
	 <link href="/2013/03/20/research.html"/>
   <updated>2013-03-20T00:00:00+00:00</updated>
   <id>/03/20/research</id>
   <content type="html">&lt;h2 id=&quot;pomp&quot;&gt;pomp&lt;/h2&gt;
&lt;p&gt;Exploring pomp for examples tomorrow. See &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/tree/master/inst/examples/pomp-example.md&quot;&gt;pomp-example&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;To access help on S4 methods&lt;/li&gt;
&lt;li&gt;print method source code: &lt;code&gt;getMethod(&amp;quot;simulate&amp;quot;, &amp;quot;pomp&amp;quot;)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;access help file on available methods: &lt;code&gt;method?show(&amp;quot;pomp&amp;quot;)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;pomp &lt;code&gt;simulate&lt;/code&gt; method returns object of class pomp with data in &lt;code&gt;object@data&lt;/code&gt;, unless user sets either/both of &lt;code&gt;obs=TRUE&lt;/code&gt; and &lt;code&gt;state=TRUE&lt;/code&gt; to return the observed and true state data (in list objects). Seems to be the only way to get the true state data out of the simulate routine (other than shortcutting the observation method &lt;code&gt;rmeasure&lt;/code&gt;). Poor form to change return type based on input options, but oh well.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;prosecutors-fallacy&quot;&gt;prosecutor’s fallacy&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;troubleshooting comment runs setup. Some replicates realize their extrema within the first 200 points, causing negative indexing (if not handled) and mismatched length of data objects (if not handled). Improve exception handling and restart runs.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/h2&gt;
&lt;p&gt;Writing writing writing. see repo.&lt;/p&gt;
&lt;h2 id=&quot;multiple-uncertainty&quot;&gt;multiple-uncertainty&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Troubleshooting the matlab translation&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Cannot seem to pass an array in place of a variable to matlab’s (okay, actually octave’s) &lt;code&gt;applyfun&lt;/code&gt; function:&lt;/p&gt;
&lt;pre class=&quot;sourceCode matlab&quot;&gt;&lt;code class=&quot;sourceCode matlab&quot;&gt;function out = ssum(x,y, a)
  out = (x + y);
end
[X, Y] = meshgrid([&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;fl&quot;&gt;5&lt;/span&gt;], [&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;fl&quot;&gt;5&lt;/span&gt;])
b = arrayfun(@ssum, X, Y, &lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;)  &lt;span class=&quot;co&quot;&gt;%Works fine&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But if the extra argument is a vector this fails.&lt;/p&gt;
&lt;pre class=&quot;sourceCode matlab&quot;&gt;&lt;code class=&quot;sourceCode matlab&quot;&gt;b = arrayfun(@ssum, X, Y, [&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;fl&quot;&gt;6&lt;/span&gt;])&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Need a convenient way to generate probability densities from continuous distributions in which parameter values and &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; values are restricted to a grid. Matlab translation of this didn’t work.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I want to get the probability density of value &lt;span class=&quot;math&quot;&gt;\(P\)&lt;/span&gt; from uniform distribution between &lt;span class=&quot;math&quot;&gt;\(\mu - \mu S\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(\mu + \mu S\)&lt;/span&gt;.  If &lt;span class=&quot;math&quot;&gt;\(S\)&lt;/span&gt; is zero, I want to return unity if &lt;span class=&quot;math&quot;&gt;\(P\)&lt;/span&gt; is equal to &lt;span class=&quot;math&quot;&gt;\(\mu\)&lt;/span&gt;.  The trick is that I want all values discretized to a grid, so P == mu really means if &lt;span class=&quot;math&quot;&gt;\(P\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(\mu\)&lt;/span&gt; fall in the same bin of the discrete grid.  &lt;/p&gt;
&lt;p&gt;I thought this function would do it:  &lt;/p&gt;
&lt;pre class=&quot;sourceCode matlab&quot;&gt;&lt;code class=&quot;sourceCode matlab&quot;&gt;    function out = snap_to_grid(x, grid)
      [v,i] = min(abs(grid-x));
      out = grid(i);  
    end
     
    &lt;span class=&quot;co&quot;&gt;%% generate various sources of noise, or delta fns if noise is zero&lt;/span&gt;
    function out = pdfn(P, mu, s)
      grid = [&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;fl&quot;&gt;5&lt;/span&gt;]; &lt;span class=&quot;co&quot;&gt;% dumb grid, ideally an argument to pdfn but doesn&amp;#39;t work&lt;/span&gt;
      if mu == &lt;span class=&quot;fl&quot;&gt;0&lt;/span&gt;
        out = (P == &lt;span class=&quot;fl&quot;&gt;0&lt;/span&gt;);
      elseif s &amp;gt; &lt;span class=&quot;fl&quot;&gt;0&lt;/span&gt;
        if mu &amp;gt; &lt;span class=&quot;fl&quot;&gt;0&lt;/span&gt;
          out = unifpdf(P, mu * (&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt; - s), mu * (&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt; + s));
        end
      else  &lt;span class=&quot;co&quot;&gt;% delta spike&lt;/span&gt;
        P = snap_to_grid(P, grid);
        mu = snap_to_grid(mu, grid);
        out = (P == mu);
      end
    end&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But clearly I’ve gone wrong somewhere.&lt;/p&gt;
&lt;h2 id=&quot;ropensci&quot;&gt;ropensci&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;final revisions, reread draft, close outstanding issues.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;troubleshooting SSOAP example. Added &lt;code&gt;checkCircular&lt;/code&gt; enables successful parsing, but now no luck generating functions:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(SSOAP)
wsdl =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;processWSDL&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.nbnws.net/ws_3_5/GatewayWebService?wsdl&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;checkCircular=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)
iface =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;genSOAPClientInterface&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;def =&lt;/span&gt; wsdl)&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Prosecutor Fallacy As Large Deviations</title>
	 <link href="/2013/03/19/prosecutor-fallacy-as-large-deviations.html"/>
   <updated>2013-03-19T00:00:00+00:00</updated>
   <id>/03/19/prosecutor-fallacy-as-large-deviations</id>
   <content type="html">&lt;p&gt;(Corresponds to commit &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/4bd84221078df738034e1611b23d7c5aca48de3f/inst/examples/comment.md&quot;&gt;4bd8422107&lt;/a&gt; in &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/prosecutor&quot;&gt;earlywarning&lt;/a&gt; repo)&lt;/p&gt;
&lt;p&gt;For the individual-based simulation, the population dynamics are given by&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[\begin{align}
  \frac{dP(n,t)}{dt} &amp;amp;= b_{n-1} P(n-1,t) + d_{n+1}P(n+1,t) - (b_n+d_n) P(n,t),  \\
    b_n &amp;amp;= \frac{e K n^2}{n^2 + h^2}, \\
    d_n &amp;amp;= e n + a,
\end{align}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;which is provided by the &lt;code&gt;saddle_node_ibm&lt;/code&gt; model in &lt;code&gt;populationdynamics&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For each of the warning signal statistics in question, we need to generate the distibution over all replicates and then over replicates which have been selected conditional on having experienced a crash.&lt;/p&gt;
&lt;p&gt;We begin by running the simulation of the process for all replicates.&lt;/p&gt;
&lt;p&gt;Load the required libraries&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(populationdynamics)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(earlywarning)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(reshape2)   &lt;span class=&quot;co&quot;&gt;# data manipulation&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(data.table) &lt;span class=&quot;co&quot;&gt;# data manipulation&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(ggplot2)    &lt;span class=&quot;co&quot;&gt;# graphics&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(snowfall)   &lt;span class=&quot;co&quot;&gt;# parallel&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;theme_publish &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_set&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;theme_bw&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;12&lt;/span&gt;))
theme_publish &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_update&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;legend.key=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_blank&lt;/span&gt;(),
        &lt;span class=&quot;dt&quot;&gt;panel.grid.major=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_blank&lt;/span&gt;(),&lt;span class=&quot;dt&quot;&gt;panel.grid.minor=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_blank&lt;/span&gt;(),
        &lt;span class=&quot;dt&quot;&gt;plot.background=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_blank&lt;/span&gt;(), &lt;span class=&quot;dt&quot;&gt;legend.title=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_blank&lt;/span&gt;())&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;conditional-distribution&quot;&gt;Conditional distribution&lt;/h3&gt;
&lt;p&gt;Then we fix a set of paramaters we will use for the simulation function. Since we will simulate 20,000 replicates with 50,000 pts a piece, we can save memory by performing the conditional selection on the ones that cross a threshold we go along and disgard the others. (We will create a null distribution in which we ignore this conditional selection later).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;threshold &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;250&lt;/span&gt;
select_crashes &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(n){
  T&amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;5000&lt;/span&gt;
  n_pts &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n
  pars =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Xo =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;500&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;e =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;a =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;180&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;h =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;200&lt;/span&gt;,
    &lt;span class=&quot;dt&quot;&gt;i =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Da =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Dt =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
  sn &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;saddle_node_ibm&lt;/span&gt;(pars, &lt;span class=&quot;dt&quot;&gt;times=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,T, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;n_pts), &lt;span class=&quot;dt&quot;&gt;reps=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;)
  d &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dim&lt;/span&gt;(sn$x1)
  crashed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;which&lt;/span&gt;(sn$x1[d[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;],] &amp;lt;=&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;threshold)
&lt;span class=&quot;co&quot;&gt;# crashed &amp;lt;- which(sn$x1[d[1],]==0)&lt;/span&gt;
  sn$x1[,crashed] 
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A few extra commands format the data into a table with columns of times, replicate id number, and population value at the given time.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;sfInit&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;parallel=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;sfLibrary&lt;/span&gt;(populationdynamics)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;sfExportAll&lt;/span&gt;()
examples &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sfLapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;, function(i) &lt;span class=&quot;kw&quot;&gt;select_crashes&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;50000&lt;/span&gt;))
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.matrix&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.data.frame&lt;/span&gt;(examples, &lt;span class=&quot;dt&quot;&gt;check.names=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)))
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(dat) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;levels&lt;/span&gt;(dat$reps) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;levels&lt;/span&gt;(dat$reps)) &lt;span class=&quot;co&quot;&gt;# use numbers for reps&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(dat, reps %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;levels&lt;/span&gt;(dat$reps)[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;9&lt;/span&gt;])) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~reps, &lt;span class=&quot;dt&quot;&gt;scales=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8100/8572282877_815dc4341d_o.png&quot; alt=&quot;plot of chunk testing&quot; /&gt;&lt;figcaption&gt;plot of chunk testing&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Zoom in on the relevant area of data near the crash&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(plyr)
zoom &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(dat, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, function(X){
    tip &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;which&lt;/span&gt;(X$value&amp;lt;threshold))
    index &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(tip&lt;span class=&quot;dv&quot;&gt;-200&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;):tip
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time=&lt;/span&gt;X$time[index], &lt;span class=&quot;dt&quot;&gt;value=&lt;/span&gt;X$value[index])
    })&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(zoom, reps %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;levels&lt;/span&gt;(zoom$reps)[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;9&lt;/span&gt;])) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~reps, &lt;span class=&quot;dt&quot;&gt;scales=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8243/8573375714_956b2721cf_o.png&quot; alt=&quot;plot of chunk example-trajectories&quot; /&gt;&lt;figcaption&gt;plot of chunk example-trajectories&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Compute model-based warning signals on all each of these.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(zoom, value&amp;gt;threshold))
var &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[, &lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time=&lt;/span&gt;time, &lt;span class=&quot;dt&quot;&gt;value=&lt;/span&gt;value), window_var), by=reps]$V1
acor &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[, &lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time=&lt;/span&gt;time, &lt;span class=&quot;dt&quot;&gt;value=&lt;/span&gt;value), window_autocorr), by=reps]$V1
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Variance=&lt;/span&gt;var, &lt;span class=&quot;dt&quot;&gt;Autocorrelation=&lt;/span&gt;acor))&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;null-distribution&quot;&gt;Null distribution&lt;/h3&gt;
&lt;p&gt;To compare against the expected distribution of these statistics, we create another set of simulations without conditioning on having experienced a chance transition, on which we perform the identical analysis.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;threshold &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;250&lt;/span&gt;
select_crashes &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(n){
  T&amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;5000&lt;/span&gt;
  n_pts &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n
  pars =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Xo =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;500&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;e =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;a =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;180&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;h =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;200&lt;/span&gt;,
    &lt;span class=&quot;dt&quot;&gt;i =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Da =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Dt =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
  sn &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;saddle_node_ibm&lt;/span&gt;(pars, &lt;span class=&quot;dt&quot;&gt;times=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,T, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;n_pts), &lt;span class=&quot;dt&quot;&gt;reps=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;500&lt;/span&gt;)
  d &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dim&lt;/span&gt;(sn$x1)
  sn$x1[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;501&lt;/span&gt;,]
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;sfExportAll&lt;/span&gt;()
examples &amp;lt;-&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sfLapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, function(i) &lt;span class=&quot;kw&quot;&gt;select_crashes&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;50000&lt;/span&gt;))
nulldat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.matrix&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.data.frame&lt;/span&gt;(examples, &lt;span class=&quot;dt&quot;&gt;check.names=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)))
nulldat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(examples)
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(nulldat) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;levels&lt;/span&gt;(nulldat$reps) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;levels&lt;/span&gt;(dat$reps)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Zoom in on the relevant area of data near the crash&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(plyr)
nullzoom &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(nulldat, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, function(X){
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time=&lt;/span&gt;X$time, &lt;span class=&quot;dt&quot;&gt;value=&lt;/span&gt;X$value)
    })&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;nulldt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(nullzoom)
nullvar &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;nulldt[, &lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time=&lt;/span&gt;time, &lt;span class=&quot;dt&quot;&gt;value=&lt;/span&gt;value), window_var), by=reps]$V1
nullacor &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;nulldt[, &lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time=&lt;/span&gt;time, &lt;span class=&quot;dt&quot;&gt;value=&lt;/span&gt;value), window_autocorr), by=reps]$V1
nulldat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Variance=&lt;/span&gt;nullvar, &lt;span class=&quot;dt&quot;&gt;Autocorrelation=&lt;/span&gt;nullacor))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_histogram&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;..density..), &lt;span class=&quot;dt&quot;&gt;binwidth=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.3&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlim&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_density&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;nulldat, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value), &lt;span class=&quot;dt&quot;&gt;adjust=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Kendall&amp;#39;s tau&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_bw&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8093/8572283195_496404332d_o.png&quot; alt=&quot;plot of chunk fig&quot; /&gt;&lt;figcaption&gt;plot of chunk fig&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Collected notes from past few days</title>
	 <link href="/2013/03/19/collected-notes.html"/>
   <updated>2013-03-19T00:00:00+00:00</updated>
   <id>/03/19/collected-notes</id>
   <content type="html">&lt;h2 id=&quot;friday&quot;&gt;Friday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;some ropensci coordination&lt;/li&gt;
&lt;li&gt;Adapt basic science abstract and broader impacts statement&lt;/li&gt;
&lt;li&gt;some writing on notebook features draft&lt;/li&gt;
&lt;li&gt;nonparametric writing!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;monday&quot;&gt;Monday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;nonparametric-bayes writing. Combining my generic position piece (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/tree/master/inst/doc/beyond-mechanistic-models.Rmd&quot;&gt;beyond-mechanistic-models.Rmd&lt;/a&gt;) with the technical nonparametric-bayes writeup (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/tree/master/inst/doc/nonparameteric-bayes.Rmd&quot;&gt;nonparametric-bayes.Rmd&lt;/a&gt;) to get a more general-audience paper.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;ropensci reviewing&lt;/li&gt;
&lt;li&gt;Note: annoying feature of knitr’s &lt;code&gt;purl&lt;/code&gt;: appears to generate valid “external” knitr code, but includes all options in comment headers instead of just the chunk names. This prevents “external” inclusion from identifying these chunks currectly. &lt;code&gt;tangle&lt;/code&gt; (option in &lt;code&gt;knit&lt;/code&gt;) appears not to generate any header at all. Maybe I’m missing something.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;prosecutors-fallacy-comments&quot;&gt;Prosecutor’s Fallacy Comments&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Further exchanges with John over prosecutors fallacy. Some scratch writing for a potential &lt;a href=&quot;&quot;&gt;reply piece&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Our discussion highlighted two potential test cases that would further demonstrate (or refute) that the critical slowing down we observed is an artifact – our ability to detect it in cases that do not transition (e.g. population of all cases reaching a certain excursion) in the original dynamics, and our ability to detect it in scenarios that do not involve transition dynamics at all. Running these two cases as&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/tree/prosecutor/inst/examples&quot;&gt;comment.Rmd&lt;/a&gt; – repeat the analysis using a generic threshold deviation rather than only populations that have crashed.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/tree/prosecutor/inst/examples&quot;&gt;beer.Rmd&lt;/a&gt; – repeat analysis in which there is only a single stable point.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ugh, looks like libraries on zero haven’t been kept up. Some delays before production code will be running.&lt;/p&gt;
&lt;h2 id=&quot;tuesday&quot;&gt;Tuesday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;More writing&lt;/li&gt;
&lt;li&gt;Assemble material for applied math club. Going with particle filtering (&lt;span rel=&quot;tooltip&quot; title=&quot;Ionides E, Breto C and King A (2006). Inference For Nonlinear Dynamical Systems. _Proceedings of The National Academy of Sciences_, *103*. ISSN 0027-8424, http://dx.doi.org/10.1073/pnas.0603181103.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.0603181103&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Ionides &lt;em&gt;et. al.&lt;/em&gt; 2006&lt;/a&gt;&lt;/span&gt;) and the &lt;code&gt;pomp&lt;/code&gt; vignette&lt;/li&gt;
&lt;li&gt;ropensci reviewing&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;misc&quot;&gt;Misc&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Sounds like exciting stuff happening a the #btpdf2 conference&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/03/14/notes.html"/>
   <updated>2013-03-14T00:00:00+00:00</updated>
   <id>/03/14/notes</id>
   <content type="html">&lt;h2 id=&quot;writing&quot;&gt;Writing&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Meeting with Steve over outline&lt;/li&gt;
&lt;li&gt;Writing on nonparametric-bayes manuscript&lt;/li&gt;
&lt;li&gt;A few notes on notebook-features draft&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;EasyABC by &lt;span rel=&quot;tooltip&quot; title=&quot;Jabot F, Faure T and Dumoulin N (2013). Easyabc: Performing
Efficient Approximate Bayesian Computation Sampling Schemes Using
R. _Methods in Ecology And Evolution_. 
http://dx.doi.org/10.1111/2041-210X.12050.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/2041-210X.12050&quot; rel=&quot;http://purl.org/spar/cito/critiques&quot; &gt;Jabot &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt;. While it’s great that MEE publishes this stuff, this is unique in that the authors are updating and improving upon an existing package published by MEE the year before, &lt;span rel=&quot;tooltip&quot; title=&quot;Brook B, Ellis E, Perring M, Mackay A and Blomqvist L (2013).
Does The Terrestrial Biosphere Have Planetary Tipping Points?
_Trends in Ecology &amp;amp; Evolution_. ISSN 01695347, 
http://dx.doi.org/10.1016/j.tree.2013.01.016.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2013.01.016&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Brook &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt;. The authors of the recent manuscript have certainly made an important contribution which deserves the traditional recognition provided by a separate publication, but one must wonder why we need another package instead of building on the existing one. Is that necessary for the publication? If only there was a way to fork the original package, make their additions, issue a pull request instead… Could more research follow such a model?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;The rise of MOOCs may be old news, but the Nature column has a pretty excellent write-up on them all the same &lt;span rel=&quot;tooltip&quot; title=&quot;Halpern B, Longo C, Hardy D, McLeod K, Samhouri J, Katona S,
Kleisner K, Lester S, O&amp;#39;Leary J, Ranelletti M, Rosenberg A,
Scarborough C, Selig E, Best B, Brumbaugh D, Chapin F, Crowder L,
Daly K, Doney S, Elfes C, Fogarty M, Gaines S, Jacobsen K, Karrer
L, Leslie H, Neeley E, Pauly D, Polasky S, Ris B, St Martin K,
Stone G, Sumaila U and Zeller D (2012). an Index to Assess The
Health And Benefits of The Global Ocean. _Nature_, *488*. ISSN
0028-0836,  http://dx.doi.org/10.1038/nature11397.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1038/nature11397&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Halpern &lt;em&gt;et. al.&lt;/em&gt; (2012)&lt;/a&gt;&lt;/span&gt;, including a discussion of the challenges they face (e.g. completion rates) and how they might address them. Only passingly addresses the challenges these pose for universities seeking to get on board – such as the substantial upfront costs in providing content in a different medium and structure (see this recent &lt;a href=&quot;http://www.insidehighered.com/blogs/technology-and-learning/why-moocs-may-drive-higher-ed-costs&quot;&gt;Inside HigherEd piece&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Nice column in &lt;em&gt;Nature&lt;/em&gt; on job opportunities in risk management, &lt;span rel=&quot;tooltip&quot; title=&quot;Nelson B (2013). Natural Disasters: A Calculated Risk. _Nature_,
*495*. ISSN 0028-0836, 
http://dx.doi.org/10.1038/nj7440-271a.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1038/nj7440-271a&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Nelson (2013)&lt;/a&gt;&lt;/span&gt; which highlights the interdisciplinary nature of the work. A pity they find the greatest market for jobs of this type in reinsurance companies and the smallest in academia…&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;TREE debates the existence and relevance of tipping points in global context and &lt;span rel=&quot;tooltip&quot; title=&quot;Hughes T, Linares C, Dakos V, van de Leemput I and van Nes E
(2013). Living Dangerously on Borrowed Time During Slow,
Unrecognized Regime Shifts. _Trends in Ecology &amp;amp; Evolution_,
*28*. ISSN 01695347, 
http://dx.doi.org/10.1016/j.tree.2012.08.022.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2012.08.022&quot; rel=&quot;http://purl.org/spar/cito/critiques&quot; &gt;Hughes &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt;, seemingly on the grounds that the globe isn’t a very connected place.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In the same issue, the usual suspects emphasize the idea that transitions due to saddle-node bifurcations need not be fast relative to the timescale of management &lt;span rel=&quot;tooltip&quot; title=&quot;Brook B, Ellis E, Perring M, Mackay A and Blomqvist L (2013).
Does The Terrestrial Biosphere Have Planetary Tipping Points?
_Trends in Ecology &amp;amp; Evolution_. ISSN 01695347, 
http://dx.doi.org/10.1016/j.tree.2013.01.016.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2013.01.016&quot; rel=&quot;http://purl.org/spar/cito/critiques&quot; &gt;Brook &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt;. The “fast” transition represents a return to equilibrium at the new laternative stable state. The authors remind us that this transient phase can take a long time (and amazingly failing to cite &lt;span rel=&quot;tooltip&quot; title=&quot;Hastings A and Higgins K (1994). Persistence of Transients in
Spatially Structured Ecological Models. _Science_, *263*. ISSN
0036-8075,  http://dx.doi.org/10.1126/science.263.5150.1133.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1126/science.263.5150.1133&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Hastings &amp;amp; Higgins (1994)&lt;/a&gt;&lt;/span&gt;, &lt;span rel=&quot;tooltip&quot; title=&quot;Hastings A (2001). Transient Dynamics And Persistence of
Ecological Systems. _Ecology Letters_, *4*. ISSN 1461-023X, 
http://dx.doi.org/10.1046/j.1461-0248.2001.00220.x.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1046/j.1461-0248.2001.00220.x&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Hastings (2001)&lt;/a&gt;&lt;/span&gt;, or &lt;span rel=&quot;tooltip&quot; title=&quot;Hastings A (2004). Transients: The Key to Long-Term Ecological
Understanding? _Trends in Ecology &amp;amp; Evolution_, *19*. ISSN
01695347,  http://dx.doi.org/10.1016/j.tree.2003.09.007.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2003.09.007&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Hastings (2004)&lt;/a&gt;&lt;/span&gt; in the process).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Barry W. Brook, Erle C. Ellis, Michael P. Perring, Anson W. Mackay, Linus Blomqvist, (2013) Does The Terrestrial Biosphere Have Planetary Tipping Points?. &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2013.01.016&quot;&gt;10.1016/j.tree.2013.01.016&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Benjamin S. Halpern, Catherine Longo, Darren Hardy, Karen L. McLeod, Jameal F. Samhouri, Steven K. Katona, Kristin Kleisner, Sarah E. Lester, Jennifer O’Leary, Marla Ranelletti, Andrew A. Rosenberg, Courtney Scarborough, Elizabeth R. Selig, Benjamin D. Best, Daniel R. Brumbaugh, F. Stuart Chapin, Larry B. Crowder, Kendra L. Daly, Scott C. Doney, Cristiane Elfes, Michael J. Fogarty, Steven D. Gaines, Kelsey I. Jacobsen, Leah Bunce Karrer, Heather M. Leslie, Elizabeth Neeley, Daniel Pauly, Stephen Polasky, Bud Ris, Kevin St Martin, Gregory S. Stone, U. Rashid Sumaila, Dirk Zeller, (2012) an Index to Assess The Health And Benefits of The Global Ocean. &lt;em&gt;Nature&lt;/em&gt; &lt;strong&gt;488&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1038/nature11397&quot;&gt;10.1038/nature11397&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;A. Hastings, K. Higgins, (1994) Persistence of Transients in Spatially Structured Ecological Models. &lt;em&gt;Science&lt;/em&gt; &lt;strong&gt;263&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1126/science.263.5150.1133&quot;&gt;10.1126/science.263.5150.1133&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Alan Hastings, (2001) Transient Dynamics And Persistence of Ecological Systems. &lt;em&gt;Ecology Letters&lt;/em&gt; &lt;strong&gt;4&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1046/j.1461-0248.2001.00220.x&quot;&gt;10.1046/j.1461-0248.2001.00220.x&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Alan Hastings, (2004) Transients: The Key to Long-Term Ecological Understanding?. &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt; &lt;strong&gt;19&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2003.09.007&quot;&gt;10.1016/j.tree.2003.09.007&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Terry P. Hughes, Cristina Linares, Vasilis Dakos, Ingrid A. van de Leemput, Egbert H. van Nes, (2013) Living Dangerously on Borrowed Time During Slow, Unrecognized Regime Shifts. &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt; &lt;strong&gt;28&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2012.08.022&quot;&gt;10.1016/j.tree.2012.08.022&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Franck Jabot, Thierry Faure, Nicolas Dumoulin, (2013) Easyabc: Performing Efficient Approximate Bayesian Computation Sampling Schemes Using R. &lt;em&gt;Methods in Ecology And Evolution&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1111/2041-210X.12050&quot;&gt;10.1111/2041-210X.12050&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Bryn Nelson, (2013) Natural Disasters: A Calculated Risk. &lt;em&gt;Nature&lt;/em&gt; &lt;strong&gt;495&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1038/nj7440-271a&quot;&gt;10.1038/nj7440-271a&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/03/13/notes.html"/>
   <updated>2013-03-13T00:00:00+00:00</updated>
   <id>/03/13/notes</id>
   <content type="html">&lt;h2 id=&quot;multiple-uncertainty&quot;&gt;Multiple-uncertainty&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Created smaller version of table to simplify comparisons&lt;/li&gt;
&lt;li&gt;Switched to stationary policy comparisons only. (Running out over longer time shifts total value a bit but doesn’t amplify scale of the differences much)&lt;/li&gt;
&lt;li&gt;Larger noise amplifies the effects (compare &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/commits/05637ec8845097c5059902a0f4f841343a44d9bc/inst/examples/smalltable.md&quot;&gt;0.3 levels&lt;/a&gt; to &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/05637ec8845097c5059902a0f4f841343a44d9bc/inst/examples/smalltable.mhttps://github.com/cboettig/multiple_uncertainty/blob/05637ec8845097c5059902a0f4f841343a44d9bc/inst/examples/smalltable.mdd&quot;&gt;0.5 levels&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;note that averaging over replicates gives rather consistent means. The differences between &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/05637ec8845097c5059902a0f4f841343a44d9bc/inst/examples/smalltable.md&quot;&gt;successive&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/bea28d918edccd7c7ab8b365cc12632166985e95/inst/examples/smalltable.md&quot;&gt;runs&lt;/a&gt; of the algorithm give results agreeing to the tenths place at least.&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8381/8555792236_227bdbb05b_o.png&quot; alt=&quot;Example escapement, code&quot; /&gt;&lt;figcaption&gt;Example escapement, &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/05637ec8845097c5059902a0f4f841343a44d9bc/inst/examples/smalltable.md&quot;&gt;code&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8526/8554683747_02d0cecfa6_o.png&quot; alt=&quot;the distribution of profits by scenario&quot; /&gt;&lt;figcaption&gt;the distribution of profits by scenario&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;tables-of-results&quot;&gt;Tables of results&lt;/h2&gt;
&lt;p&gt;Note that columns represent the decision-maker’s beliefs about uncertainty and rows represent the true uncertainty present in the simulation.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;det&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;g&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;m&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;all&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;det&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;19.11&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;19.11&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;18.81&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;18.81&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;g&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;18.92&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;18.63&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;18.74&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;18.56&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;m&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;16.17&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;16.76&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;17.38&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;18.08&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;all&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;15.54&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;14.65&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;16.50&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;17.15&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;det&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;g&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;m&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;all&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;det&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;0.00&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;0.00&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;0.00&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;0.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;g&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;4.41&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;4.31&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;3.59&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;3.28&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;m&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;3.10&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;2.96&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;1.60&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;1.12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;all&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;5.06&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;4.89&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;4.20&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;4.59&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;logistic-case&quot;&gt;logistic case&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Overcompensatory density dependence is tough on stock. With given discounting (5%) and finite horizon (15 cycles) strategies act &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/dc6fa3b8c1913cd771e72673083aa80ee733dc62/inst/examples/logistic_uniform.md&quot;&gt;conservatively&lt;/a&gt;. Hmm, strange that deterministic case is equally effected..&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;running with much weaker &lt;code&gt;r&lt;/code&gt; to reduce overcompensatory impacts…&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;coding&quot;&gt;Coding&lt;/h3&gt;
&lt;p&gt;Attempting to translate algorithm into Jim’s native tongue (matlab) for feedback. &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/fa4404e1719111b28aa23e388519db94c6f990db/R/multiple_uncertainty.R&quot;&gt;R version&lt;/a&gt; vs &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/blob/fa4404e1719111b28aa23e388519db94c6f990db/inst/matlab/multiple_uncertainty.m&quot;&gt;matlab&lt;/a&gt; not there yet…&lt;/p&gt;
&lt;h2 id=&quot;reviewing&quot;&gt;Reviewing&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Another review request, another review done.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;With Alistair, playing around with this HMM EM algorithm &lt;a href=&quot;https://github.com/gui11aume/HMMt/&quot;&gt;gui11aume/HMMt&lt;/a&gt;. Also threw in a pull request with documentation. grr, took a bit to understand what was going on with that paper.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/03/12/notes.html"/>
   <updated>2013-03-12T00:00:00+00:00</updated>
   <id>/03/12/notes</id>
   <content type="html">&lt;h3 id=&quot;monday&quot;&gt;Monday&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;multiple_uncertainty abstract&lt;/li&gt;
&lt;li&gt;Meeting with Robin Snyder&lt;/li&gt;
&lt;li&gt;application writing&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;tuesday&quot;&gt;Tuesday&lt;/h3&gt;
&lt;h4 id=&quot;morning&quot;&gt;Morning&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;applications&lt;/li&gt;
&lt;li&gt;Coordinating summer conference travel&lt;/li&gt;
&lt;li&gt;ropensci proposals&lt;/li&gt;
&lt;li&gt;EML is not an ontology, not analgous to Dublin Core, etc. Just an XML schema. see &lt;a href=&quot;https://semtools.ecoinformatics.org/oboe&quot;&gt;OBOE&lt;/a&gt; for an ecological ontology. to explore later.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;afternoon&quot;&gt;Afternoon&lt;/h3&gt;
&lt;h4 id=&quot;multiple-uncertainty&quot;&gt;multiple-uncertainty&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Revisiting multiple-uncertainty runs. Running smaller table example. Recoded script to allow arbitrary set of noise configurations to be consistently compared.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Some debugging. Shared-memory parallelization prohibitive at current memory requirements.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;See: small table example (for issue #3) &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty/commit/a2806b079faf60ac1537e3dc8f129b79aab826f0&quot;&gt;04:48 pm 2013/03/12&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Exploring options for approximate dynamic programming. For the moment, working through the basic ADP algorithm presented in Powell (2006).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;in-progress notes: &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/master/inst/examples/adp-intro.md&quot;&gt;latest version&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/dc45de162b057a1eb53846e030354a02305c9ea5/inst/examples/adp-intro.md&quot;&gt;version-stable link&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes From The Week</title>
	 <link href="/2013/03/08/notes-from-the-week.html"/>
   <updated>2013-03-08T00:00:00+00:00</updated>
   <id>/03/08/notes-from-the-week</id>
   <content type="html">&lt;p&gt;(Working from Galveston this week while at Louise’s conference, looking after little one. some progress below.)&lt;/p&gt;
&lt;h2 id=&quot;monday&quot;&gt;Monday&lt;/h2&gt;
&lt;h4 id=&quot;alan-skype-meeting&quot;&gt;Alan Skype meeting&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Comment piece / reply&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/ews-review&quot;&gt;ews-review&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Comments on TE review?&lt;/li&gt;
&lt;li&gt;IARPA Conference, funding options?&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;tasks&quot;&gt;Tasks&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;On Marc’s suggestion, writing comparison of pattern-based and mechanism based approaches to modeling, particularly in decision theory context. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/cb0f7d5f779bb424e5fb02b06463f946c360017d/inst/doc/beyond-mechanistic-models.md&quot;&gt;draft&lt;/a&gt; in nonparametric-bayes&lt;/li&gt;
&lt;li&gt;Review edits and writing on &lt;a href=&quot;https://github.com/cboettig/ews-review&quot;&gt;ews-review&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;tuesday&quot;&gt;Tuesday&lt;/h2&gt;
&lt;h4 id=&quot;kathy-skype&quot;&gt;Kathy Skype&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Decision theory in early warning signals?&lt;/li&gt;
&lt;li&gt;NCEAS / SESYNC working group?&lt;/li&gt;
&lt;li&gt;Long term lake monitoring data, including some sedimentary analysis (see &lt;span rel=&quot;tooltip&quot; title=&quot;Wang R, Dearing J, Langdon P, Zhang E, Yang X, Dakos V and
Scheffer M (2012). Flickering Gives Early Warning Signals of A
Critical Transition to A Eutrophic Lake State. _Nature_, *492*.
ISSN 0028-0836,  http://dx.doi.org/10.1038/nature11655.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1038/nature11655&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Wang &lt;em&gt;et. al.&lt;/em&gt; (2012)&lt;/a&gt;&lt;/span&gt;).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Send Kathy TREE articles: &lt;span rel=&quot;tooltip&quot; title=&quot;Polasky S, Carpenter S, Folke C and Keeler B (2011).
Decision-Making Under Great Uncertainty: Environmental Management
in an Era of Global Change. _Trends in Ecology &amp;amp; Evolution_,
*26*. ISSN 01695347, 
http://dx.doi.org/10.1016/j.tree.2011.04.007.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.04.007&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Polasky &lt;em&gt;et. al.&lt;/em&gt; (2011)&lt;/a&gt;&lt;/span&gt; and &lt;span rel=&quot;tooltip&quot; title=&quot;Fischer J, Peterson G, Gardner T, Gordon L, Fazey I, Elmqvist T,
Felton A, Folke C and Dovers S (2009). Integrating Resilience
Thinking And Optimisation For Conservation. _Trends in Ecology &amp;amp;
Evolution_, *24*. ISSN 01695347, 
http://dx.doi.org/10.1016/j.tree.2009.03.020.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2009.03.020&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Fischer &lt;em&gt;et. al.&lt;/em&gt; (2009)&lt;/a&gt;&lt;/span&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;tasks-1&quot;&gt;Tasks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Writing comparison of pattern-based and mechanism based approaches to modeling, particularly in decision theory context&lt;/li&gt;
&lt;li&gt;Review edits and writing on &lt;a href=&quot;https://github.com/cboettig/ews-review&quot;&gt;ews-review&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;wednesday&quot;&gt;Wednesday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;more of the same.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;friday&quot;&gt;Friday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Finished and submitted &lt;a href=&quot;https://github.com/cboettig/ews-review&quot;&gt;ews-review&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;See commit log and &lt;a href=&quot;https://github.com/cboettig/ews-review/issues&quot;&gt;issues&lt;/a&gt; tracker for details.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;notebook-semantics&quot;&gt;Notebook: Semantics,&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;stemming-based search seems to perform poorly – i.e. cannot find phrases, weight terms in titles, etc, just most frequently occuring terms in a post. Trying lunr, loads full text into memory but should do so only on selecting search bar? See issue &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/7&quot;&gt;#7&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Modified google-analytics plugin to make single call to the API see issue &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/66&quot;&gt;#66&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Tuning RDFa, primarily on vita. &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/22&quot;&gt;#22&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/63&quot;&gt;#63&lt;/a&gt;. Tuned FOAF referencing to common nodes. Note that &lt;code&gt;rel&lt;/code&gt; always applys to links while &lt;code&gt;property&lt;/code&gt; applies to the content of the tag (e.g. anchor text, span context). Use &lt;code&gt;rel&lt;/code&gt; in span and div elements, etc, to apply to multiple links.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Joern Fischer, Garry D. Peterson, Toby A. Gardner, Line J. Gordon, Ioan Fazey, Thomas Elmqvist, Adam Felton, Carl Folke, Stephen Dovers, (2009) Integrating Resilience Thinking And Optimisation For Conservation. &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt; &lt;strong&gt;24&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2009.03.020&quot;&gt;10.1016/j.tree.2009.03.020&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Stephen Polasky, Stephen R. Carpenter, Carl Folke, Bonnie Keeler, (2011) Decision-Making Under Great Uncertainty: Environmental Management in an Era of Global Change. &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt; &lt;strong&gt;26&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.04.007&quot;&gt;10.1016/j.tree.2011.04.007&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Rong Wang, John A. Dearing, Peter G. Langdon, Enlou Zhang, Xiangdong Yang, Vasilis Dakos, Marten Scheffer, (2012) Flickering Gives Early Warning Signals of A Critical Transition to A Eutrophic Lake State. &lt;em&gt;Nature&lt;/em&gt; &lt;strong&gt;492&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1038/nature11655&quot;&gt;10.1038/nature11655&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Delayed Release Archives</title>
	 <link href="/2013/03/02/delayed-release-archives.html"/>
   <updated>2013-03-02T00:00:00+00:00</updated>
   <id>/03/02/delayed-release-archives</id>
   <content type="html">&lt;p&gt;Today I dug out a handful (37) posts from the past two years that were published as &lt;a href=&quot;http://carlboettiger.info/tags.html#delayed-release&quot;&gt;#delayed-release&lt;/a&gt; content (and have all been tagged as such to indicate they were not public at their publication date). Many of these were connected to the &lt;a href=&quot;http://carlboettiger.info/tags.html#warning-signals&quot;&gt;#warning-signals&lt;/a&gt; project but involved results that I or Alan weren’t ready to provide ahead of publication, as I discussed in a post when I first began marking some posts for delayed release, &lt;a href=&quot;http://www.carlboettiger.info/2011/03/21/challenges-with-collaboration-in-open-science.html&quot;&gt;challenges with collaboration in open science&lt;/a&gt; These posts were created while on the Wordpress platform and had been marked private, so that they would be invisible to public browsing. Wordpress makes this easy to do, as I discuss in the earlier post. When I switched to a Jekyll platform, these posts all received the yaml header &lt;code&gt;published: false&lt;/code&gt; and were also excluded from the Github repository until I could revisit and decide which to release. Managing these posts for release in the Jekyll framework just requires a little command-line fu, &lt;code&gt;grep -l &#39;published: false&#39; *.md&lt;/code&gt; grabs the relevant posts for inspection and release.&lt;/p&gt;
&lt;p&gt;The notebook is currently back to an ONS All-content, immediate, as I have been able to okay the practice with all current major collaborations. (Sure, there’s always stuff that doesn’t make it into the notebook or is not appropriate for the notebook – the most common case of the latter being peer reviews I write for various journals. Though I make a practice of signing my reviews, I believe they still represent private communication unless the authors, editors and journals were to agree to publishing them.) All of these posts would have been released sooner but for finding a minute to remember to do so – perhaps a cautionary example for the delayed release practice.&lt;/p&gt;
&lt;p&gt;Looking back on these posts, I probably would not have delayed most of them today, as I have gotten more comfortable not only with the open notebook, but with discussing the practice with collaborators. My own feelings of not wanting to push my adviser in a discussion of the notebook was as much responsible for these delays as other factors that I discuss in the earlier post. One key thing I wondered about in writing delayed-release posts was whether I would (perhaps subconsciously) write in a different or more candid style than I do for my regular notes. I was glad not to notice any glaring examples (though perhaps a diligent or very bored reader might find some!) of expletives and insulting commentary in the delayed posts. I do notice the overall tone and volume of the textual content changes slightly. However, that trend is actually much more dominant in comparing my very early posts (mostly from the OWW days), which were quite discursive, to the current posts which tend to be much more terse.&lt;/p&gt;
&lt;p&gt;So have a look at the &lt;a href=&quot;http://carlboettiger.info/tags.html#delayed-release&quot;&gt;#delayed-release&lt;/a&gt; posts and let me know what you think!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/02/28/notes.html"/>
   <updated>2013-02-28T00:00:00+00:00</updated>
   <id>/02/28/notes</id>
   <content type="html">&lt;h2 id=&quot;meeting-with-marc&quot;&gt;Meeting with Marc&lt;/h2&gt;
&lt;p&gt;Selection of problem: consider simpler models only. Sep through complexity hierarchy at the beginning:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;classical approaches are to fix relationship of stock recruitment.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;parameter uncertainty&lt;/li&gt;
&lt;li&gt;Gaussian processes for model uncertainty&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The Discussion section can deal with model uncertainty model choice approaches.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A method where we don’t have to assume the stock recuritment relationship&lt;/li&gt;
&lt;li&gt;How well we can do with that.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;How much data we need.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;discussion of mathematical presentation, clarity&lt;/p&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Finished review. I should stop signing reviews, then I could write more careless quick impressions.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;discussed potential of a GSOC proposal for an R NEXML parser&lt;/li&gt;
&lt;li&gt;requested to consider presenting at &lt;a href=&quot;http://isiconference2013.org/pgs/specsessions.php&quot;&gt;ISI Conference&lt;/a&gt; session on early warning.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;some-reading-on-semantics&quot;&gt;some reading on semantics&lt;/h2&gt;
&lt;p&gt;David Shotton and Tanya Gray have release a CiTO tool for adding semantic data to many major publication platforms, taking a clever approach to annotation that I’ve never considered – croudsourcing to readers (&lt;span class=&quot;showtooltip&quot; title=&quot;davidshotton (2013). CiTO Reference Annotation Tools. 
http://semanticpublishing.wordpress.com/2013/02/26/cito-tools/
[Online. last-accessed: 2013-02-26 15:32:11]. 
http://semanticpublishing.wordpress.com/2013/02/26/cito-tools/.&quot;&gt;&lt;a href=&quot;http://semanticpublishing.wordpress.com/2013/02/26/cito-tools/&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;davidshotton, 2013&lt;/a&gt;&lt;/span&gt;). The tool isn’t perfect but is very intuitive. The clever part is that all annotations the reader adds are collated in a database and cand be retrieved through their &lt;a href=&quot;http://www.miidi.org/cito/api/&quot;&gt;API&lt;/a&gt;. Not sure if many readers will make use of this, but time will tell. Meanwhile authors or publishers might pay attention.&lt;/p&gt;
&lt;p&gt;In that vein, David has also written a call of Ten Next Steps for publishers, (&lt;span class=&quot;showtooltip&quot; title=&quot;davidshotton (2013). Ten next steps for semantic authors and
publishers. 
http://semanticpublishing.wordpress.com/2013/02/26/ten-next-steps/
[Online. last-accessed: 2013-02-28 22:40:01]. 
http://semanticpublishing.wordpress.com/2013/02/26/ten-next-steps/.&quot;&gt;&lt;a href=&quot;http://semanticpublishing.wordpress.com/2013/02/26/ten-next-steps/&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;davidshotton, 2013b&lt;/a&gt;&lt;/span&gt;). Some may be redundant, but certainly shows how publishers could go a lot further. If only there was more incentive for publishers to innovate like this instead of crafting clever and questionable strategies to boost impact factors.&lt;/p&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;p&gt;Very interesting paper on implementing/teaching nonlinear model inference to ecologists out today (&lt;span class=&quot;showtooltip&quot; title=&quot;Bolker B, Gardner B, Maunder M, Berg C, Brooks M, Comita L, Crone
E, Cubaynes S, Davies T, de Valpine P, Ford J, Gimenez O, Kery M,
Kim E, Lennert-Cody C, Magnusson A, Martell S, Nash J, Nielsen A,
Regetz J, Skaug H and Zipkin E (2013). Strategies For Fitting
Nonlinear Ecological Models in R, ad Model Builder, And Bugs.
_Methods in Ecology And Evolution_. 
http://dx.doi.org/10.1111/2041-210X.12044.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/2041-210X.12044&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Bolker &lt;em&gt;et. al.&lt;/em&gt; 2013&lt;/a&gt;&lt;/span&gt;), and the &lt;a href=&quot;https://groups.nceas.ucsb.edu/non-linear-modeling/projects&quot;&gt;code and data for each of the examples they discuss&lt;/a&gt;. Lessons in the mansucript may be familiar to many, but should still be taught more widely in ecology. Should be useful for teaching this stuff in graduate courses too.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Benjamin M. Bolker, Beth Gardner, Mark Maunder, Casper W. Berg, Mollie Brooks, Liza Comita, Elizabeth Crone, Sarah Cubaynes, Trevor Davies, Perry de Valpine, Jessica Ford, Olivier Gimenez, Marc Kery, Eun Jung Kim, Cleridy Lennert-Cody, Arni Magnusson, Steve Martell, John Nash, Anders Nielsen, Jim Regetz, Hans Skaug, Elise Zipkin, (2013) Strategies For Fitting Nonlinear Ecological Models in R, ad Model Builder, And Bugs. &lt;em&gt;Methods in Ecology And Evolution&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1111/2041-210X.12044&quot;&gt;10.1111/2041-210X.12044&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;davidshotton, (2013) CiTO Reference Annotation Tools. &lt;em&gt;Semantic Publishing&lt;/em&gt; &lt;a href=&quot;http://semanticpublishing.wordpress.com/2013/02/26/cito-tools/&quot; class=&quot;uri&quot;&gt;http://semanticpublishing.wordpress.com/2013/02/26/cito-tools/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;davidshotton, (2013) Ten next steps for semantic authors and publishers. &lt;em&gt;Semantic Publishing&lt;/em&gt; &lt;a href=&quot;http://semanticpublishing.wordpress.com/2013/02/26/ten-next-steps/&quot; class=&quot;uri&quot;&gt;http://semanticpublishing.wordpress.com/2013/02/26/ten-next-steps/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/02/27/notes.html"/>
   <updated>2013-02-27T00:00:00+00:00</updated>
   <id>/02/27/notes</id>
   <content type="html">&lt;h3 id=&quot;reviewing&quot;&gt;Reviewing&lt;/h3&gt;
&lt;p&gt;arg, reviewing. so much time.&lt;/p&gt;
&lt;h3 id=&quot;seminar&quot;&gt;Seminar&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://katericherson.wordpress.com/&quot;&gt;Kate Richerson&lt;/a&gt; gave a fanstastic presentation to mega group yesterday showing her integration of behavior and dispersal in krill dynamics. She derives the krill’s behavioral movement patterns through a stochastic dynamic programming solution rather than just dictate it to the dispersal model directly.&lt;/p&gt;
&lt;h3 id=&quot;reading&quot;&gt;Reading&lt;/h3&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Provicative stuff in PNAS &lt;span class=&quot;showtooltip&quot; title=&quot;Perretti C, Munch S and Sugihara G (2013). Model-Free Forecasting
Outperforms The Correct Mechanistic Model For Simulated And
Experimental Data. _Proceedings of The National Academy of
Sciences_. ISSN 0027-8424, 
http://dx.doi.org/10.1073/pnas.1216076110.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1216076110&quot;&gt;Perretti &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt;. It would be nice to see the comparison against the generating model.  The forecasting errors of the fully Bayesian inference using the correct model shouldn’t necessary be small, but they should be just as big as the Bayesian model expects them to be (e.g. over replicates, the Bayesian forecast error reflects the widths of the posteriors (modulo some statement about priors)).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My worry with any approach doing better than the expected error is that it does so by generating biased estimation – e.g. something in the forecasting method, rather than in the data, happens to be biased towards the ‘right answer’.  In this example I don’t think that is the case.&lt;/p&gt;
&lt;p&gt;We already know that the modes of the posteriors don’t recover the correct model parameters of the generating model from an MCMC of such a complex model with limited data (though perhaps it is good to remind folks of this!), so it is not surprising that a heuristic approach can outperform this in cases.  &lt;/p&gt;
&lt;p&gt;It certainly is good to wrestle with these examples in any case.  Steve’s one of my post-doc advisors now so no doubt I’m biased.  Noam also pointed out this earlier article in Ecology &lt;span class=&quot;showtooltip&quot; title=&quot;Perretti C, Sugihara G and Munch S (2012). Nonparametric
Forecasting Outperforms Parametric Methods For A Simulated
Multi-Species System. _Ecology_. ISSN 0012-9658, 
http://dx.doi.org/10.1890/12-0904.1.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1890/12-0904.1&quot;&gt;Perretti &lt;em&gt;et. al.&lt;/em&gt; (2012)&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;In seminar, Marc mentioned the great paper by &lt;span class=&quot;showtooltip&quot; title=&quot;Wiedenmann J, Cresswell K, Goldbogen J, Potvin J and Mangel M
(2011). Exploring The Effects of Reductions in Krill Biomass in
The Southern Ocean on Blue Whales Using A State-Dependent Foraging
Model. _Ecological Modelling_, *222*. ISSN 03043800, 
http://dx.doi.org/10.1016/j.ecolmodel.2011.07.013.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1016/j.ecolmodel.2011.07.013&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Wiedenmann &lt;em&gt;et. al.&lt;/em&gt; (2011)&lt;/a&gt;&lt;/span&gt; that uses the comparison of the optimal foraging strategy evolved by whales in their evolutionary environment to how that strategy performs today (similar spirit to the kinds of comparisons I am interested in with #multiple-uncertainty project.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Reading an old Schaffer paper &lt;span class=&quot;showtooltip&quot; title=&quot;Schaffer W (1984). Stretching And Folding in Lynx Fur Returns:
Evidence For A Strange Attractor in Nature? _The American
Naturalist_, *124*. ISSN 0003-0147, 
http://dx.doi.org/10.1086/284318.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1086/284318&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Schaffer (1984)&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Though &lt;em&gt;Nature&lt;/em&gt; says the National Academy of Sciences needs an overhaul to stay relevant. Probably true but they still do some excellent reports that could deserve more eyes, like this on model fitting (&lt;span class=&quot;showtooltip&quot; title=&quot;(????). Assessing the Reliability of Complex Models: Mathematical
and Statistical Foundations of Verification, Validation, and
Uncertainty Quantification. 
http://www.nap.edu/catalog.php?record_id=13395 [Online.
last-accessed: 2013-02-28 18:23:05]. 
http://www.nap.edu/catalog.php?record_id=13395.&quot;&gt;&lt;a href=&quot;http://www.nap.edu/catalog.php?record_id=13395&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;&lt;/a&gt;&lt;/span&gt;). We could do more VVUQ in ecology and evolution, and the value of presenting benchmark examples of this in simple (trivial) cases cannot be overstated, e.g. Fig 5.2.1.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;GP methods in Biometrika &lt;span class=&quot;showtooltip&quot; title=&quot;Banerjee A, Dunson D and Tokdar S (2012). Efficient Gaussian
Process Regression For Large Datasets. _Biometrika_, *100*. ISSN
0006-3444,  http://dx.doi.org/10.1093/biomet/ass068.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1093/biomet/ass068&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Banerjee &lt;em&gt;et. al.&lt;/em&gt; (2012)&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Luminaries of evolution forecast the future of the field, with an eye towards data and semantics in &lt;span class=&quot;showtooltip&quot; title=&quot;Losos J, Arnold S, Bejerano G, Brodie E, Hibbett D, Hoekstra H,
Mindell D, Monteiro A, Moritz C, Orr H, Petrov D, Renner S,
Ricklefs R, Soltis P and Turner T (2013). Evolutionary Biology
For The 21st Century. _Plos Biology_, *11*. 
http://dx.doi.org/10.1371/journal.pbio.1001466.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1371/journal.pbio.1001466&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Losos &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;misc&quot;&gt;Misc&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;wrote a quick CSL format for knitcitations. (Generate inline citations using the copy function in Mendeley library. A bit silly since normally that would already generate the entire bibliographic citation.)&lt;/li&gt;
&lt;li&gt;Should really make a CSL format for Mendeley to paste in a HTML citation (with full metadata in tooltip). Might then use an existing format to copy-paste bib info at end.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;bibliography&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;A. Banerjee, D. B. Dunson, S. T. Tokdar, (2012) Efficient Gaussian Process Regression For Large Datasets. &lt;em&gt;Biometrika&lt;/em&gt; &lt;strong&gt;100&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1093/biomet/ass068&quot;&gt;10.1093/biomet/ass068&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Jonathan B. Losos, Stevan J. Arnold, Gill Bejerano, E. D. Brodie, David Hibbett, Hopi E. Hoekstra, David P. Mindell, Antónia Monteiro, Craig Moritz, H. Allen Orr, Dmitri A. Petrov, Susanne S. Renner, Robert E. Ricklefs, Pamela S. Soltis, Thomas L. Turner, (2013) Evolutionary Biology For The 21st Century. &lt;em&gt;Plos Biology&lt;/em&gt; &lt;strong&gt;11&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1371/journal.pbio.1001466&quot;&gt;10.1371/journal.pbio.1001466&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Charles Thomas Perretti, George Sugihara, Stephan B. Munch, (2012) Nonparametric Forecasting Outperforms Parametric Methods For A Simulated Multi-Species System. &lt;em&gt;Ecology&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1890/12-0904.1&quot;&gt;10.1890/12-0904.1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;C. T. Perretti, S. B. Munch, G. Sugihara, (2013) Model-Free Forecasting Outperforms The Correct Mechanistic Model For Simulated And Experimental Data. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1216076110&quot;&gt;10.1073/pnas.1216076110&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;William M. Schaffer, (1984) Stretching And Folding in Lynx Fur Returns: Evidence For A Strange Attractor in Nature?. &lt;em&gt;The American Naturalist&lt;/em&gt; &lt;strong&gt;124&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1086/284318&quot;&gt;10.1086/284318&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;John Wiedenmann, Katherine A. Cresswell, Jeremy Goldbogen, Jean Potvin, Marc Mangel, (2011) Exploring The Effects of Reductions in Krill Biomass in The Southern Ocean on Blue Whales Using A State-Dependent Foraging Model. &lt;em&gt;Ecological Modelling&lt;/em&gt; &lt;strong&gt;222&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/j.ecolmodel.2011.07.013&quot;&gt;10.1016/j.ecolmodel.2011.07.013&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Assessing the Reliability of Complex Models: Mathematical and Statistical Foundations of Verification, Validation, and Uncertainty Quantification. &lt;a href=&quot;http://www.nap.edu/catalog.php?record_id=13395&quot; class=&quot;uri&quot;&gt;http://www.nap.edu/catalog.php?record_id=13395&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Semantic Citations For The Notebook And Knitr</title>
	 <link href="/2013/02/22/semantic-citations-for-the-notebook-and-knitr.html"/>
   <updated>2013-02-22T00:00:00+00:00</updated>
   <id>/02/22/semantic-citations-for-the-notebook-and-knitr</id>
   <content type="html">&lt;p&gt;I have on ocassion been exploring the use of &lt;a href=&quot;/tags.html/#semantics&quot;&gt;semantic&lt;/a&gt; markup in the notebook. In this post I illustrate how I am handling semantic citations. One of the more intriguing ideas is the ability to add semantic meaning to citations through the CITO ontology of &lt;span class=&quot;showtooltip&quot; title=&quot;Shotton D (2010). Cito, The Citation Typing Ontology. _Journal
of Biomedical Semantics_, *1*. ISSN 2041-1480, 
http://dx.doi.org/10.1186/2041-1480-1-S1-S6.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1186/2041-1480-1-S1-S6&quot; rel=&quot;http://purl.org/spar/cito/usesMethodIn&quot; &gt;Shotton (2010)&lt;/a&gt;&lt;/span&gt;. Citation counts form a central part of academic discourse, but contain very little information regarding the reason for the citation. Most notably, ‘negative’ citations refuting a claim carry just the same weight as those confirming or relying upon a claim. Given the scale and expansion of academic literature, it is rarely reasonable to explore this citation graph manually. CITO provides a language for embedding the meaning of the citation, such as “discusses”, “refutes”, or “usesMethodIn”, to the citation. (For instance, my earlier citation to Shotton identifies itself as “usesMethodIn”, as I will explain).&lt;/p&gt;
&lt;p&gt;The main barrier to this approach is a lack of adoption. One of the primary concerns is the burden it places on authors of adding the extra data. On one hand, authors already bother formatting and reformatting layout, spelling, and reference order to the arcane specifications of different journals, which suggests authors can be persuaded to do some pretty tedious tasks if the publishers would require it. After all, the task of adding citations is already much easier than it was in the days of paper journals. Still, it is much simpler to remove a tedious requirement than to add a new one. My hope is that intelligent tools can simplify this process, as they already have with other aspects of managing citations, and encourage the use of CITO. In this spirit, I have recently started trying to consistently use the CITO ontology in my notebook entries as a test case, using some tools of my own design.&lt;/p&gt;
&lt;h3 id=&quot;semantics-in-knitcitations&quot;&gt;Semantics in knitcitations&lt;/h3&gt;
&lt;p&gt;Several months ago I created the R package &lt;a href=&quot;https://github.com/cboettig/knitcitations&quot;&gt;knitcitations&lt;/a&gt; to provide a citation platform for &lt;a href=&quot;http://yihui.name/knitr&quot;&gt;knitr&lt;/a&gt; dynamic documents, which provide executable code and automatic inclusion of results inside plain-text (markdown) descriptions. I write most of my research scripts and many of my notebook entries in this manner. The package can generate citations by DOI, circumventing the need for maintaining bibtex or similar database of citation information, using commands such as&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citet&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;10.1186/2041-1480-1-S1-S6&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Extending the package to support CITO was rather straight forward. Using the latest version of knitcitations, one can generate in-line citations with CITO semantics simply by passing the reason for the citation as well, such as&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citet&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;10.1186/2041-1480-1-S1-S6&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;cito=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;usesMethodIn&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;which generates the following HTML:&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;http://dx.doi.org/10.1186/2041-1480-1-S1-S6&amp;#39;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;http://purl.org/spar/cito/usesMethodIn&amp;#39;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Shotton (2010)&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This provides a convient platform to generate semantic citations in this lab notebook. As before, knitcitations will also generate a complete reference list at the end of the document by calling the &lt;code&gt;bibliography&lt;/code&gt; function at the end.&lt;/p&gt;
&lt;h3 id=&quot;semantic-overkill&quot;&gt;Semantic overkill?&lt;/h3&gt;
&lt;p&gt;It is possible to add far more semantic data to this reference list at the end of an article. Invisible semantic markup can identify to a machine what value corresponds to the volume number or issue number, or journal name, e,g, using the BIBO ontology. I have added support for ths kind of markup to knitcitations as well, and &lt;a href=&quot;/2013/02/12/notes.html&quot;&gt;several&lt;/a&gt; &lt;a href=&quot;/2013/02/21/notes.html&quot;&gt;of&lt;/a&gt; my posts provide examples. The raw markup looks like this:&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;div&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; prefix=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc: http://purl.org/dc/terms/,&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;                      bibo: http://purl.org/ontology/bibo/,&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;                      foaf: http://xmlns.com/foaf/spec/,&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;                      biro: http://purl.org/spar/biro/&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;        rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://purl.org/spar/biro/ReferenceList&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;ul&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;bibliography&amp;#39;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; 
&lt;span class=&quot;kw&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:title&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Fisheries: Does Catch Reflect Abundance?.&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:creator&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:givenName&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Daniel&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:familyName&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Pauly&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:creator&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:givenName&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Ray&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:familyName&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Hilborn&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:creator&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:givenName&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Trevor A.&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:familyName&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Branch&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;  (&lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:date&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;2013&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)  &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://purl.org/dc/terms/isPartOf&amp;quot;&lt;/span&gt; 
&lt;span class=&quot;ot&quot;&gt;                            resource=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;[http://purl.org/dc/terms/journal]&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://purl.org/dc/terms/title&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;                                content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot; Nature &amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
                          &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;bibo:shortTitle&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; Nature &lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
               &lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;  &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;bibo:volume&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;494&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;    &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;bibo:doi&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://dx.doi.org/10.1038/494303a&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;10.1038/494303a&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:title&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Net Gains.&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:creator&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:givenName&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;unknown&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:familyName&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;unknown&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;  (&lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:date&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;2013&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;)  &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://purl.org/dc/terms/isPartOf&amp;quot;&lt;/span&gt; 
&lt;span class=&quot;ot&quot;&gt;                            resource=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;[http://purl.org/dc/terms/journal]&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://purl.org/dc/terms/title&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;                                content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot; Nature &amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
                          &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;bibo:shortTitle&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; Nature &lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
               &lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;  &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;bibo:volume&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;494&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;    &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;bibo:doi&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://dx.doi.org/10.1038/494282a&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;10.1038/494282a&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;kw&quot;&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;However, I have since decided that such markup is largely overkill. The DOI uniquely identifies the publication already, and allows us to programmatically retrieve the rest of the data (title, authors, journal, etc) from semantically identified XML by querying against services such as CrossRef. &lt;em&gt;This is the essential concept of linked data&lt;/em&gt;, by which both source and referer are enriched.&lt;/p&gt;
&lt;p&gt;Moreover, DOIs follows a specific construction that lets us reliably &lt;a href=&quot;http://stackoverflow.com/questions/27910/finding-a-doi-in-a-document-or-page&quot;&gt;identify them in plain text using regular expressions&lt;/a&gt;, making any futher semantics to declare that we are citing the article mostly irrelevant. This is convient for identifying all citations appearing in the notebook without any markup. The CITO example above has the advantage of providing a link and associating the DOI with the reason for the citation, by virtue of being inside the same html anchor element.&lt;/p&gt;
&lt;h3 id=&quot;replacing-the-reference-list&quot;&gt;Replacing the reference list?&lt;/h3&gt;
&lt;p&gt;If we are not going to semantically mark up the reference list, we could consider abolishing the reference list all together. After all, as a tool for the digital reader the concept is rather vestigal – I hate losing my place by scrolling to the end of an article just to see to what reference number 7 refers. With the method shown thus far, the reader can open the link to access this information, but that still interrupts the flow of reading. The digitally native solution is a mouse-over or tooltip effect that displays this information, as many professional publishers already use in their HTML versions.&lt;/p&gt;
&lt;p&gt;Once again, this is straight forward to support using the knitcitations package, at least for sites that include the popular &lt;a href=&quot;http://twitter.github.com/bootstrap&quot;&gt;bootstrap&lt;/a&gt; javascript libraries, such as this notebook. I have added an option to the in-text citation functions to provide such tooltips in a span element, such that calling the command&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;showtooltip&amp;#39;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; title=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Shotton D (2010). &amp;quot;Cito, The Citation Typing Ontology.&amp;quot; _Journal of&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;Biomedical Semantics_, *1*. ISSN 2041-1480, &lt;/span&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;URL:&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;http://dx.doi.org/10.1186/2041-1480-1-S1-S6&amp;gt;.&amp;#39;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;http://dx.doi.org/10.1186/2041-1480-1-S1-S6&amp;#39;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;http://purl.org/spar/cito/usesMethodIn&amp;#39;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Shotton (2010)&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;/span&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This behavior can be toggled on by calling&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;cite_options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;tooltip=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;after loading the knitcitations library. &lt;strong&gt;EDIT&lt;/strong&gt;: Note that this requires the javascript trigger on the class &lt;code&gt;showtooltip&lt;/code&gt;, which can be done by adding this to your header:&lt;/p&gt;
&lt;pre class=&quot;js&quot;&gt;&lt;code&gt;    &amp;lt;script type=&amp;quot;text/javascript&amp;quot;&amp;gt;
      $(document).ready(function (){
        $(&amp;quot;.showtooltip&amp;quot;).tooltip();
      });
    &amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;citing-without-dois&quot;&gt;Citing without DOIs&lt;/h3&gt;
&lt;p&gt;Not all the literature we may wish to cite includes DOIs, such as &lt;a href=&quot;http://arxiv.org&quot;&gt;arXiv&lt;/a&gt; preprints, Wikipedia pages, or other academic blogs. Even when a DOI is present it is not always trivial to locate. With version 0.4-0, knitcitations can produce citations given any URL using the &lt;a href=&quot;http://greycite.knowledgeblog.org&quot;&gt;Greycite API&lt;/a&gt; (&lt;span class=&quot;showtooltip&quot; title=&quot;Lord P (2012). Greycite. 
http://knowledgeblog.org/greycite [Online. last-accessed:
2012-10-10 13:36:24].  http://knowledgeblog.org/greycite.&quot;&gt;&lt;a href=&quot;http://knowledgeblog.org/greycite&quot; rel=&quot;http://purl.org/spar/cito/usesMethodIn&quot; &gt;Lord, 2012&lt;/a&gt;&lt;/span&gt;). For instance, this citation is created with the command &lt;code&gt;citep(&amp;quot;http://knowledgeblog.org/greycite&amp;quot;, cito=&amp;quot;usesMethodIn&amp;quot;)&lt;/code&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/02/21/notes.html"/>
   <updated>2013-02-21T00:00:00+00:00</updated>
   <id>/02/21/notes</id>
   <content type="html">&lt;h2 id=&quot;applied-math-club-meeting&quot;&gt;Applied Math Club meeting&lt;/h2&gt;
&lt;p&gt;(See reading material from &lt;a href=&quot;/2013/02/19/notes.html&quot;&gt;Tuesday&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Start with stable age distribtution (indep of stock-recrutiment)&lt;/li&gt;
&lt;li&gt;Consider the &lt;em&gt;Entropy&lt;/em&gt; of that probability distribution, as function of mortality, by max age&lt;/li&gt;
&lt;li&gt;Now consider the same for fecundity: the fraction/density of the population von Bertalanffy growth (fecundity)&lt;/li&gt;
&lt;li&gt;effective mortality rate - mortality rate in an unfished population, distributed with same entropy as the fished population,&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Kullback-Leibler distance to measure fishing influence?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Mutual information and the design of surveys?&lt;/li&gt;
&lt;li&gt;(information in catch data?)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Bonsall: Information content of global dynamics from individual patch dynamics?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.nceas.ucsb.edu/news/nceas-summer-institute-2013&quot;&gt;NCEAS Summer Institute&lt;/a&gt; for data synthesis. Intriguing.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Is there information in catch data: a comment piece highlighting the debate with Pauly on the affermative and Hilborn &amp;amp; Branch on the negative, (&lt;a href=&quot;http://dx.doi.org/10.1038/494303a&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Pauly &lt;em&gt;et. al.&lt;/em&gt; 2013&lt;/a&gt;) and editoral commentary (&lt;a href=&quot;http://dx.doi.org/10.1038/494282a&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;unknown, 2013&lt;/a&gt;).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Looking over this approximate dynamic programming (ADP) paper in MEE, &lt;a href=&quot;http://dx.doi.org/10.1111/j.2041-210X.2012.00242.x&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Schapaugh &lt;em&gt;et. al.&lt;/em&gt; (2012)&lt;/a&gt;. Possibly promising. I need to map out the space of ADP approaches and advantages/disadvantages a little more to get a better impression.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/j.2041-210X.2012.00242.x&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Schapaugh &lt;em&gt;et. al.&lt;/em&gt; (2012)&lt;/a&gt;: A new method for ADP? Or maybe not so new? see: &lt;a href=&quot;http://www.cs.rutgers.edu/~lihong/pub/Li06Towards.pdf&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;&lt;/a&gt;, &lt;em&gt;Towards a unified theory of state abstraction for MDPs&lt;/em&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Cute analysis on malaria as branching process in policy forum piece in Science (with Alex’s mentor) &lt;a href=&quot;http://dx.doi.org/10.1126/science.1229509&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Chiyaka &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;And following up on today’s chats about information theory, a neat paper from Marc &lt;a href=&quot;http://dx.doi.org/10.1111/jeb.12010&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Frank (2012)&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;and making the rounds on the blogosphere bashing MAXENT, &lt;a href=&quot;http://dx.doi.org/10.1111/j.1541-0420.2012.01824.x&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Renner &amp;amp; Warton (2013)&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div prefix=&quot;dc: http://purl.org/dc/terms/,
                      bibo: http://purl.org/ontology/bibo/,
                      foaf: http://xmlns.com/foaf/spec/,
                      biro: http://purl.org/spar/biro/&quot; rel=&quot;http://purl.org/spar/biro/ReferenceList&quot;&gt;
&lt;ul class=&quot;bibliography&quot;&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;The Stability of Malaria Elimination.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;C.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Chiyaka&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;A. J.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Tatem&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;J. M.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Cohen&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;P. W.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Gething&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;G.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Johnston&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;R.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Gosling&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;R.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Laxminarayan&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;S. I.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Hay&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;D. L.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Smith&lt;/span&gt;, &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;2013&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot; Science &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; Science &lt;/span&gt; &lt;/span&gt; &lt;span property=&quot;bibo:volume&quot;&gt;339&lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/10.1126/science.1229509&quot;&gt;10.1126/science.1229509&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;Natural Selection. V. How to Read The Fundamental Equations of Evolutionary Change in Terms of Information Theory.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;S. A.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Frank&lt;/span&gt;, &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;2012&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot; Journal of Evolutionary Biology &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; Journal of Evolutionary Biology &lt;/span&gt; &lt;/span&gt; &lt;span property=&quot;bibo:volume&quot;&gt;25&lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/10.1111/jeb.12010&quot;&gt;10.1111/jeb.12010&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;Fisheries: Does Catch Reflect Abundance?.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;Daniel&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Pauly&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;Ray&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Hilborn&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;Trevor A.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Branch&lt;/span&gt;, &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;2013&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot; Nature &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; Nature &lt;/span&gt; &lt;/span&gt; &lt;span property=&quot;bibo:volume&quot;&gt;494&lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/10.1038/494303a&quot;&gt;10.1038/494303a&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;Equivalence of Maxent And Poisson Point Process Models For Species Distribution Modeling in Ecology.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;Ian W.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Renner&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;David I.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Warton&lt;/span&gt;, &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;2013&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot; Biometrics &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; Biometrics &lt;/span&gt; &lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/10.1111/j.1541-0420.2012.01824.x&quot;&gt;10.1111/j.1541-0420.2012.01824.x&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;A Simple Method For Dealing With Large State Spaces.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;Adam W.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Schapaugh&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;Andrew J.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Tyre&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;Robert&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Freckleton&lt;/span&gt;, &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;2012&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot; Methods in Ecology And Evolution &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; Methods in Ecology And Evolution &lt;/span&gt; &lt;/span&gt; &lt;span property=&quot;bibo:volume&quot;&gt;3&lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/10.1111/j.2041-210X.2012.00242.x&quot;&gt;10.1111/j.2041-210X.2012.00242.x&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot;  &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; &lt;/span&gt; &lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/&quot;&gt;&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;Net Gains.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;unknown&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;unknown&lt;/span&gt;, &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;2013&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot; Nature &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; Nature &lt;/span&gt; &lt;/span&gt; &lt;span property=&quot;bibo:volume&quot;&gt;494&lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/10.1038/494282a&quot;&gt;10.1038/494282a&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;NULL&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Seminar Notes</title>
	 <link href="/2013/02/20/seminar-notes.html"/>
   <updated>2013-02-20T00:00:00+00:00</updated>
   <id>/02/20/seminar-notes</id>
   <content type="html">&lt;h2 id=&quot;leo-polansky-seminar&quot;&gt;Leo Polansky Seminar&lt;/h2&gt;
&lt;p&gt;(all notes cover published results only)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Wavelet analysis does a nice trick of seeing frequency-domain spectra change over time, rather than being entirely in frequency space or entirely in time space.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;higher rank elephants decrease their movement more in dry, resource-poor season than low rank. Guarding the good territory? I wonder if this is a stochastic effect - asset protection, where you take more risk when you have low assets than when you have higher assets, a feature that would dissappear in a deterministic environment.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Nice hidden markov model analysis from the mhsmm package.&lt;/li&gt;
&lt;li&gt;movement time series – high impact public data or closely guarded secret? (top secret)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;michael-bonsall&quot;&gt;Michael Bonsall&lt;/h2&gt;
&lt;p&gt;(Seminar to the Mangel megagroup meeting)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;uncertainty and variability in population dynamics. Mike uses the very words I’ve used to describe my interests: dynamic, nonlinear, and noisy.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;blasocyst-dynamics&quot;&gt;Blasocyst Dynamics&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Development of mammalian blastocyst much more messy/complicated than development in other taxa. heterogeneity in timing&lt;/li&gt;
&lt;li&gt;Begins with ODE model with time lags (to avoid poisson waiting times). Then add a distribution over the time lag.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Invasion analysis of cell types differing in time. Widening distribution of time lags increases fitness. &lt;em&gt;Interesting! But intuition/mechanism unclear&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Now add process noise, observation error and priors on parameters to compare model to data. Variability can be explained entirely by differences in rates. (as estimated from a particle filter). &lt;em&gt;Identifiability?&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;bruchid-dynamics&quot;&gt;Bruchid Dynamics&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Spatial dynamics with beatles and their parasitic wasps.&lt;/li&gt;
&lt;li&gt;Beautiful microcosm setup that follows Nicholson-Bailey dynamics.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Within patch dynamics show regimes.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Consider stochastic birth-death-diffusion model&lt;/li&gt;
&lt;li&gt;Stochastic focusing / demographic heterogeneity observed&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;bipolar-disorder-dynamics&quot;&gt;Bipolar disorder dynamics&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;(Inductive example)&lt;/li&gt;
&lt;li&gt;EM algorithm for missing values in time lag model&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;other-activities-today&quot;&gt;Other activities today&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;working on nominations&lt;/li&gt;
&lt;li&gt;ropensci sustainability plan (see email threads),&lt;/li&gt;
&lt;li&gt;also see the Conceptualizing an Institute for Sustainable Earth and Environmental Software (ISEES), http://isees.nceas.ucsb.edu/&lt;/li&gt;
&lt;li&gt;friendly review phylolm package and preprint&lt;/li&gt;
&lt;li&gt;summarizing reimbursement form&lt;/li&gt;
&lt;li&gt;updated issues lists for notebook&lt;/li&gt;
&lt;li&gt;Bonsall speaker dinner&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;further-reading&quot;&gt;Further reading&lt;/h2&gt;
&lt;p&gt;Following up on discussions today, seemed like a good time to reread:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Bonsall, M. B. &amp;amp; Hastings, A. 2004 Demographic and environmental stochasticity in predator - prey metapopulation dynamics. , 1043-1055. (doi:10.1111/j.0021-8790.2004.00874.x)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also taking a look at the ‘stochastic focusing’ literature. Unclear if the term has caught on much beyond Paulsson and co. though.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Paulsson, J., Berg, O. G. &amp;amp; Ehrenberg, M. 2000 Stochastic focusing: fluctuation-enhanced sensitivity of intracellular regulation. Proceedings of the National Academy of Sciences of the United States of America 97, 7148-53. (doi:10.1073/pnas.110057697)&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/02/19/notes.html"/>
   <updated>2013-02-19T00:00:00+00:00</updated>
   <id>/02/19/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Fixed notebook compile error, and adjusted timeouts on pageviews / google-analytics API&lt;/li&gt;
&lt;li&gt;Some minor fixes in knitcitations (thanks to another user bug report). &lt;a href=&quot;https://github.com/cboettig/knitcitations/blob/a717b5a3568db7e0f8b1a49cafb1e242bbef2fbe/NEWS&quot;&gt;NEWS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Accepted TE review request; better finish up ENMO review soon.&lt;/li&gt;
&lt;li&gt;Generating data tables for published figures for Dryad (from prosecutor’s fallacy). &lt;a href=&quot;http://dx.doi.org/10.5061/dryad.2k462&quot;&gt;Data in Dryad&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;applied-math-club-reading&quot;&gt;Applied Math club reading&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;with Marc and Mike Bonsall on Thurs, reading:&lt;/li&gt;
&lt;/ul&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Strevens, C. M. J. &amp;amp; Bonsall, M. B. 2011 Density-dependent population dynamics and dispersal in heterogeneous metapopulations. The Journal of animal ecology 80, 282-93. (doi:10.1111/j.1365-2656.2010.01768.x)&lt;/li&gt;
&lt;li&gt;Cover, T. M. &amp;amp; Thomas, J. A. 2006 Elements of Information Theory. Second. Hoboken, NJ, USA: John Wiley &amp;amp; Sons, Inc.&lt;/li&gt;
&lt;li&gt;Liepe, J., Filippi, S., Komorowski, M. &amp;amp; Stumpf, M. P. H. 2013 Maximizing the Information Content of Experiments in Systems Biology. PLoS Computational Biology 9, e1002888. (doi:10.1371/journal.pcbi.1002888)&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Silk, H., Demirel, G., Homer, M. &amp;amp; Gross, T. 2013 Exploring network dynamics with a mathematical triple jump. (Arxiv)&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Lade, S. J., Tavoni, A., Levin, S. A. &amp;amp; No, W. P. 2013 Regime shifts in a social-ecological system Centre for Climate Change Economics and Policy. preprint&lt;/li&gt;
&lt;li&gt;Torney, C. J., Levin, S. a. &amp;amp; Couzin, I. D. 2013 Decision Accuracy and the Role of Spatial Interaction in Opinion Dynamics. Journal of Statistical Physics (doi:10.1007/s10955-013-0700-5)&lt;/li&gt;
&lt;li&gt;Wang, S. &amp;amp; Campbell, B. C. 2013 Mr. Bayes Goes to Washington. Science 339, 758-759. (doi:10.1126/science.1232290)&lt;/li&gt;
&lt;li&gt;Kiernan, V. 2003 Diffusion of News about Research. Science Communication 25, 3-13. (doi:10.1177/1075547003255297) Interesting one of few papers discussing the role coverage in popular media has on citations&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/02/14/notes.html"/>
   <updated>2013-02-14T00:00:00+00:00</updated>
   <id>/02/14/notes</id>
   <content type="html">&lt;h2 id=&quot;research&quot;&gt;Research&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;consolidate and revise EWS text(?)&lt;/li&gt;
&lt;li&gt;replies to Luke and Brian on model choice&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;notebook-meta&quot;&gt;Notebook meta&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;fix google-analytics plugin (still needs to get toggle working?)&lt;/li&gt;
&lt;li&gt;tests of notebook-parsing.Rmd. New errors on &lt;code&gt;;&lt;/code&gt; somehow in straight XML parsing, ignoring for the moment.&lt;/li&gt;
&lt;li&gt;Opened a few new issues around improving site semantics. (#59, #60)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ropensci&quot;&gt;ropensci&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Resubmit rfishbase – silently load to local, not global namespace. Updated data cache (and ASCII-ify and compress).&lt;br /&gt;Also replaced &lt;code&gt;data&lt;/code&gt; loading with &lt;code&gt;system.file(&amp;quot;data&amp;quot;, &amp;quot;fishbase.rda&amp;quot;, package=&amp;quot;fishbase&amp;quot;)&lt;/code&gt;. ASCII-only .rda is very annoying. Should work around this with alternative data file?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Resubmit rfigshare – punt on 3.0.0 compatible vignette for the moment&lt;/li&gt;
&lt;li&gt;&lt;p&gt;knitcitations: Fix the stupid disambiguation for inline citations (took way too long).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Brandt, G. &amp;amp; Merico, A. 2013 Tipping points and user-resource system collapse in a simple model of evolutionary dynamics. Ecological Complexity (doi:10.1016/j.ecocom.2012.12.003)&lt;/li&gt;
&lt;li&gt;Cuddington, K., Fortin, M. &amp;amp; Gerber, L. 2013 Process-based models are required to manage ecological systems in a changing world. Ecosphere 4, 1-12. (doi:10.1890/ES12-00178.1)&lt;/li&gt;
&lt;li&gt;Reiner, R. C. et al. 2013 A systematic review of mathematical models of mosquito-borne pathogen transmission: 1970-2010. Journal of The Royal Society Interface 10, 20120921-20120921. (doi:10.1098/rsif.2012.0921)&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/02/13/notes.html"/>
   <updated>2013-02-13T00:00:00+00:00</updated>
   <id>/02/13/notes</id>
   <content type="html">&lt;h3 id=&quot;ropensci&quot;&gt;ropensci&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;rfishbase: 0.1-1 released to CRAN: bugfix updating server address. (Broke &lt;code&gt;updateCache()&lt;/code&gt;). See &lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/master/NEWS&quot;&gt;NEWS&lt;/a&gt; for details.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;rfigshare: 0.2-4 released to CRAN: added method to remove attached files (issue &lt;a href=&quot;https://github.com/ropensci/rfigshare/issues/42&quot;&gt;#42&lt;/a&gt;), see &lt;a href=&quot;https://github.com/ropensci/rfigshare/blob/master/NEWS&quot;&gt;NEWS&lt;/a&gt; for details&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;misc&quot;&gt;Misc&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;My reply to John on Prosecutor’s Fallacy piece.&lt;/li&gt;
&lt;li&gt;Thinking about a better way to provide convenient, stable access to code and data. Should provide csv versions of data.table outputs used to create each of the figures. Could by Dryad archived.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;reading&quot;&gt;Reading&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Deyle, E. R. &amp;amp; Sugihara, G. 2011 Generalized theorems for nonlinear state space reconstruction. PloS one 6, e18295. (doi:10.1371/journal.pone.0018295)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Brock, W., Xepapadeas, A. &amp;amp; Yannacopoulos, A. 2013 Robust Control of a Spatially Distributed Commercial Fishery. (preprint)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Costello, C., Ovando, D., Hilborn, R., Gaines, S. D., Deschenes, O. &amp;amp; Lester, S. E. 2012 Status and solutions for the world’s unassessed fisheries. Science (New York, N.Y.) 338, 517-20. (doi:10.1126/science.1223389)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2013/02/12/notes.html"/>
   <updated>2013-02-12T00:00:00+00:00</updated>
   <id>/02/12/notes</id>
   <content type="html">&lt;h2 id=&quot;writing&quot;&gt;Writing&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Working on nonparametric-bayes.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;p&gt;Interesting PNAS comment from &lt;a rel=&quot;http://purl.org/spar/cito/discusses&quot;, href=&quot;http://dx.doi.org/10.1073/pnas.1222736110&quot;&gt;Doney &amp;amp; Sailley, (2013)&lt;/a&gt; (“When an ecological regime shift is really just stochastic noise”) on the &lt;a rel=&quot;http://purl.org/spar/cito/discusses&quot;, href=&quot;http://dx.doi.org/10.1073/pnas.1218022110&quot;&gt;Di Lorenzo &amp;amp; Ohman, (2013)&lt;/a&gt; piece in the same issue, showing that time integrated zooplankton data correlates closely with environmental drivers: in this case, the pacific decadal oscillation (PDO) index, which would be missed by the traditional approach of direct correlations. This refutes the previous explanation of such shifts observed in the krill populations as being driven by nonlinear ecological interactions, rather than merely linearly tracking the environment (&lt;a rel=&quot;http://purl.org/spar/cito/refutes&quot;, href=&quot;http://dx.doi.org/10.1016/S0079-6611(00)00033-1&quot;&gt;(Hare &amp;amp; Mantua, 2000)&lt;/a&gt;). While there is some mention of how this may complicate traditional assumptions of warning signals, they do not remark on the obvious converse that the integral data may be more informative of detecting such shifts (whether or not they are tracking some abiotic dynamics).&lt;/p&gt;
&lt;p&gt;In a related vein in the same issue is &lt;a rel=&quot;http://purl.org/spar/cito/discusses&quot;, href=&quot;http://dx.doi.org/10.1073/pnas.1215508110&quot;&gt;Liu &lt;em&gt;et. al.&lt;/em&gt; (2013)&lt;/a&gt;, discussing their algorithm for inferring complex dynamics from limited observations. Seems to do a poor job of putting the method into context of the suite of related approaches to addressing this problem (hidden Markov models, POMDP, etc), let alone directly comparing to them, which makes for a somewhat frustrating read. Still, could be a gem in the method I haven’t had a chance to dig into.&lt;/p&gt;
&lt;h2 id=&quot;ropensci&quot;&gt;ropensci&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/sandbox/blob/b5fc66ddfa690416a3d10c299f3245fe6e660416/testcache/inst/doc/example.md&quot;&gt;Example of caching for authentication&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Finalize scoring, replies to &lt;a href=&quot;http://ropensci.org/open-science-challenge/&quot;&gt;challenge&lt;/a&gt; participants&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;div prefix=&quot;dc: http://purl.org/dc/terms/,
                      bibo: http://purl.org/ontology/bibo/,
                      foaf: http://xmlns.com/foaf/spec/,
                      biro: http://purl.org/spar/biro/&quot; rel=&quot;http://purl.org/spar/biro/ReferenceList&quot;&gt;
&lt;ul class=&quot;bibliography&quot;&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;From The Cover: A Double-Integration Hypothesis to Explain Ocean Ecosystem Response to Climate Forcing.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;E.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Di Lorenzo&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;M. D.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Ohman&lt;/span&gt;, &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;2013&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot; Proceedings of The National Academy of Sciences &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; Proceedings of The National Academy of Sciences &lt;/span&gt; &lt;/span&gt; &lt;span property=&quot;bibo:volume&quot;&gt;110&lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/10.1073/pnas.1218022110&quot;&gt;10.1073/pnas.1218022110&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;When an Ecological Regime Shift is Really Just Stochastic Noise.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;S. C.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Doney&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;S. F.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Sailley&lt;/span&gt;, &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;2013&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot; Proceedings of The National Academy of Sciences &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; Proceedings of The National Academy of Sciences &lt;/span&gt; &lt;/span&gt; &lt;span property=&quot;bibo:volume&quot;&gt;110&lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/10.1073/pnas.1222736110&quot;&gt;10.1073/pnas.1222736110&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;Observability of Complex Systems.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;Y.-Y.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Liu&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;J.-J.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Slotine&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;A.-L.&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Barabasi&lt;/span&gt;, &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;2013&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot; Proceedings of The National Academy of Sciences &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; Proceedings of The National Academy of Sciences &lt;/span&gt; &lt;/span&gt; &lt;span property=&quot;bibo:volume&quot;&gt;110&lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/10.1073/pnas.1215508110&quot;&gt;10.1073/pnas.1215508110&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;span property=&quot;dc:title&quot;&gt;Empirical Evidence For North Pacific Regime Shifts in 1977 And 1989.&lt;/span&gt; &lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;Steven R&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Hare&lt;/span&gt;, &lt;/span&gt;&lt;span property=&quot;dc:creator&quot;&gt; &lt;span property=&quot;foaf:givenName&quot;&gt;Nathan J&lt;/span&gt; &lt;span property=&quot;foaf:familyName&quot;&gt;Mantua&lt;/span&gt;, &lt;/span&gt; (&lt;span property=&quot;dc:date&quot;&gt;2000&lt;/span&gt;) &lt;span rel=&quot;http://purl.org/dc/terms/isPartOf&quot; resource=&quot;[http://purl.org/dc/terms/journal]&quot;&gt; &lt;span property=&quot;http://purl.org/dc/terms/title&quot; content=&quot; Progress in Oceanography &quot;&gt; &lt;/span&gt; &lt;span property=&quot;bibo:shortTitle&quot;&gt; Progress in Oceanography &lt;/span&gt; &lt;/span&gt; &lt;span property=&quot;bibo:volume&quot;&gt;47&lt;/span&gt; &lt;a property=&quot;bibo:doi&quot; href=&quot;http://dx.doi.org/10.1016/S0079-6611(00)00033-1&quot;&gt;10.1016/S0079-6611(00)00033-1&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Ews Review Paper Chat</title>
	 <link href="/2013/02/11/ews-review-paper-chat.html"/>
   <updated>2013-02-11T00:00:00+00:00</updated>
   <id>/02/11/ews-review-paper-chat</id>
   <content type="html">&lt;h2 id=&quot;skype-with-alan-and-noam-on-ews&quot;&gt;Skype with Alan and Noam on EWS&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/ews-review/issues/11&quot;&gt;Expand section on statistical power and noise (following draft of Alan’s intro)&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/ews-review/issues/10&quot;&gt;Flush out unfinished sections in main body&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/ews-review/issues/9&quot;&gt;Write discussion (after intro is done)&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/ews-review/issues/8&quot;&gt;Discussion with Alan - misc notes&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/ews-review/issues/7&quot;&gt;edit introduction&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/ews-review/issues/6&quot;&gt;Schreiber figure&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/ews-review/issues/5&quot;&gt;Kefi figure&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/ews-review/issues/4&quot;&gt;Venn Diagram figure should have numbers corresponding to the references that examine each area&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/ews-review/issues/3&quot;&gt;Finalize edits before sending for internal review&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;other&quot;&gt;Other&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Some &lt;a href=&quot;https://github.com/cboettig/knitcitations/commits?author=cboettig&quot;&gt;updates to knitcitations&lt;/a&gt; addressing special cases.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Re-organized methods section to &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/a&gt; manuscript.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Updates Across Various Projects</title>
	 <link href="/2013/02/04/updates-across-various-projects.html"/>
   <updated>2013-02-04T00:00:00+00:00</updated>
   <id>/02/04/updates-across-various-projects</id>
   <content type="html">&lt;p&gt;At home after birth of Edward since Jan 19th, leaving little time for research. Assembled notes from a few side projects I’ve moved forward in the wee hours. Covers the past several days.&lt;/p&gt;
&lt;h2 id=&quot;xml-and-rdfa-parsing&quot;&gt;XML and RDFa parsing&lt;/h2&gt;
&lt;p&gt;I have been using the lab notebook to explore technology for scientific communication, including making use of semantic and linked data concepts. To illustrate some of the potential these tools can offer I’ve started working on a short post with examples parsing and exploring the XML and RDFa data in the notebook. Still forthcoming. The &lt;a href=&quot;http://any23.org&quot;&gt;any23&lt;/a&gt; API provides a great tool for this (particularly RDFa to RDF XML, where we can then take full advantage of xpath tools on the semantics).&lt;/p&gt;
&lt;h2 id=&quot;other-notebook-updates&quot;&gt;Other notebook updates&lt;/h2&gt;
&lt;p&gt;MathML: Can have Pandoc render source in MathML and MathJax will still perform the HTML rendering in all browsers. Unfortunately, certain commands seem not to parse in this mode that do parse in Pandoc mathjax mode (e.g. those with &lt;code&gt;operatorname&lt;/code&gt; in 2012-11-01 post).&lt;/p&gt;
&lt;p&gt;Updated timeout setting on twitter plugin. &lt;a href=&quot;https://github.com/cboettig/labnotebook/commit/0cb7a11247d3dd4ca040ed156a63b6a5d2197bf7&quot;&gt;0cb7a11&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;pdg-control-follow-up&quot;&gt;PDG Control Follow-up&lt;/h2&gt;
&lt;p&gt;Skype with Paul for follow-up on third working group meeting. Key steps forward on policy costs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;All comparisons should be with reference to total value/profit of the strategy, rather than induced cost. Then compare against induced values directly. (Issue #35)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Quadratic costs should appear in supplement only (Issue #45)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Real-world context framing worked out. (Issue #39)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These and further details are listed in &lt;a href=&quot;https://github.com/cboettig/pdg_control/issues?direction=desc&amp;amp;labels=policy+costs&amp;amp;page=1&amp;amp;sort=created&amp;amp;state=open&quot;&gt;issues tracker&lt;/a&gt; for the project.&lt;/p&gt;
&lt;h2 id=&quot;updates-to-knitcitations&quot;&gt;Updates to knitcitations&lt;/h2&gt;
&lt;h3 id=&quot;v0.3-3&quot;&gt;v0.3-3&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Added a new display option, &lt;code&gt;bibliography(&#39;markdown&#39;)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;fixed BUG in the printing of the text-based name in bibliography for bibstyle-based calls&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;v0.3-2&quot;&gt;v0.3-2&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Semantic citations now enabled. &lt;code&gt;bibliography&lt;/code&gt; can print with method ‘rdfa’ to provide RDFa enhanced HTML bibliography data, and citations can take cito arguments as an option. (Closes issues #16 and #17)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bibliography&lt;/code&gt; now takes more options to match the &lt;code&gt;bibstyle&lt;/code&gt; and &lt;code&gt;print.bibentry&lt;/code&gt; functions.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;citet&lt;/code&gt; and &lt;code&gt;citep&lt;/code&gt; take an optional argument for formating the citation, defaulting to &lt;code&gt;authoryear&lt;/code&gt; format. Future versions may move this into an option.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;newbib()&lt;/code&gt; function initializes and clears existing cache files.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;README.md updated with semantic examples and more background text (generated by inst/examples/README.Rmd).&lt;/li&gt;
&lt;li&gt;Some basic unit tests built in. Could use more, but meanwhile closes #8.&lt;/li&gt;
&lt;li&gt;Test cases work with knit2html button in RStudio, closes #14&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;v0.3-1&quot;&gt;v0.3-1&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Switched to handling citation data using environment rather than an external bibfile. This does not refer to the handling of user-provided bibtex files as input data, which are supported as before, but changes only the backend management of that data. The external bibtex file method can be switched back on by setting &lt;code&gt;options(&amp;quot;bibtex_data&amp;quot; = TRUE)&lt;/code&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;There is no need to call &lt;code&gt;print(bibliography, &amp;quot;html&amp;quot;)&lt;/code&gt;, one can simply call &lt;code&gt;bibliography()&lt;/code&gt; or &lt;code&gt;bibliography(&amp;quot;html&amp;quot;)&lt;/code&gt;. Sort is still an option, other options that were for internal use (&lt;code&gt;debug&lt;/code&gt;, &lt;code&gt;remove_duplicates&lt;/code&gt;) are removed as they are no longer necessary.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Several new functions have been added to handle the new methods.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;v0.2-0&quot;&gt;v0.2-0&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix vignette error that prevents knitr 1.0 submission&lt;/li&gt;
&lt;li&gt;Fixed errors on installing package and lack of entries in bibliography&lt;/li&gt;
&lt;li&gt;Semantic print option added but still in early testing&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;O’Dwyer, J. P. &amp;amp; Green, J. L. 2010 Field theory for biogeography: a spatially explicit model for predicting patterns of biodiversity. Ecology letters 13, 87-95. (doi:10.1111/j.1461-0248.2009.01404.x)&lt;/li&gt;
&lt;li&gt;Stewart, E. C. A., Almes, G. T., Mccaulay, D. S. &amp;amp; Bradley, C. 2009 Cyberinfrastructure Software Sustainability and Reusability : Report from an NSF-funded workshop Report from an NSF-funded workshop held 27 and 28 March 2009.&lt;/li&gt;
&lt;li&gt;Ingram, T. &amp;amp; Mahler, D. L. 2013 SURFACE: detecting convergent evolution from comparative data by fitting Ornstein-Uhlenbeck models with stepwise AIC. Methods in Ecology and Evolution , 1-25. (doi:10.1111/2041-210X.12034)&lt;/li&gt;
&lt;li&gt;Shelton, A. &amp;amp; Munch, S. 2012 Maternal age, fecundity, egg quality, and recruitment: linking stock structure to recruitment using an age-structured Ricker model. Canadian Journal of … 1641, 1631-1641. (doi:10.1139/F2012-082)&lt;/li&gt;
&lt;li&gt;Regan, T. J., Chadès, I. &amp;amp; Possingham, H. P. 2011 Optimally managing under imperfect detection: a method for plant invasions. Journal of Applied Ecology 48, 76-85. (doi:10.1111/j.1365-2664.2010.01915.x)&lt;/li&gt;
&lt;li&gt;Gewin, V. 2013 Turning point: Carl Boettiger. Nature 493, 711-711. (doi:10.1038/nj7434-711a)&lt;/li&gt;
&lt;li&gt;Nicol, S. &amp;amp; Chadès, I. 2012 Which states matter? An application of an intelligent discretization method to solve a continuous POMDP in conservation biology. PloS one 7, e28993. (doi:10.1371/journal.pone.0028993)&lt;/li&gt;
&lt;li&gt;McDonald-Madden, E., Chadès, I., McCarthy, M. a, Linkie, M. &amp;amp; Possingham, H. P. 2011 Allocating conservation resources between areas where persistence of a species is uncertain. Ecological applications : a publication of the Ecological Society of America 21, 844-58.&lt;/li&gt;
&lt;li&gt;Krell 2011 The U.S. Department of Energy Computational Science Graduate Fellowship 1991-­‐2011: Recipient Outcomes and Programmatic Impacts.&lt;/li&gt;
&lt;li&gt;Dougherty, D. T., Hilborn, R., Punt, A. E. &amp;amp; Stewart, I. J. 2013 Modeling co-occurring species : a simulation study on the effects of spatial scale for setting management targets. 8, 1-8.&lt;/li&gt;
&lt;li&gt;Chadès, I., Martin, T. G., Nicol, S., Burgman, M. a, Possingham, H. P. &amp;amp; Buckley, Y. M. 2011 General rules for managing and surveying networks of pests, diseases, and endangered species. Proceedings of the National Academy of Sciences of the United States of America 108, 8323-8. (doi:10.1073/pnas.1016846108)&lt;/li&gt;
&lt;li&gt;Chad, I., Carwardine, J., Martin, T. G. &amp;amp; Nicol, S. In press. MOMDPs : A Solution for Modelling Adaptive Management Problems. , 267-273.&lt;/li&gt;
&lt;li&gt;Kapaun, U. &amp;amp; Quaas, M. 2012 Does the optimal size of a fish stock increase with environmental uncertainties?&lt;/li&gt;
&lt;li&gt;Mattmann, C. A. 2013 Computing: A vision for data science. Nature 493, 473-5. (doi:10.1038/493473a)&lt;/li&gt;
&lt;li&gt;Seekell, D. a., Cline, T. J. &amp;amp; Winchcombe, R. J. 2013 Can Management Reduce Harvest Inequality in Recreational Fisheries? North American Journal of Fisheries Management 33, 148-152. (doi:10.1080/02755947.2012.746246)&lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>Data Uris For Image Archives</title>
	 <link href="/2013/01/24/Data-URIs-for-image-archives.html"/>
   <updated>2013-01-24T00:00:00+00:00</updated>
   <id>/01/24/Data-URIs-for-image-archives</id>
   <content type="html">&lt;p&gt;Figures have been one of the standing challenges of the open notebook. Displaying figures online requires that they are first uploaded to a server somewhere. Recently I have used automated uploads to external servers such as figshare to host all images generated in the course of my research, and simply point to those graphs which I wish to include in a notebook page using an image link. Unfortunately, this means that the images themselves are not being permanently archived when I deposit my notebook entries into their annual archives on figshare. (Because figshare provides objects with unique identifier DOIs and benefits from &lt;a href=&quot;http://clockss.org&quot;&gt;CLOCKSS&lt;/a&gt; archival preservation, I use it to ensure a permanent backup of the notebook contents is available). I’ve recently discovered Data URIs, which provide a way to embed the image data directly into HTML (or markdown) entries. I am trying to decide if they offer a better way to address this challenge, so working through my thinking here.&lt;/p&gt;
&lt;h2 id=&quot;history-of-figure-management-in-the-notebook&quot;&gt;History of Figure management in the notebook&lt;/h2&gt;
&lt;p&gt;When I first started an open online notebook on the MediaWiki platform &lt;a href=&quot;http://openwetware.org/wiki/User:Carl_Boettiger&quot;&gt;OpenWetWare&lt;/a&gt;, I simply uploaded all images manually to the wiki. Soon I discovered that it was much easier to upload them programmatically. To accomplish this, I used Flickr as the image hosting service. Flickr gave me a few convenient tools like batch uploads, pre-sized images and slide-shows for embedding. More conveniently, Flickr allowed me to automate the uploading of images through the API. Using the API in my R scripts I could &lt;a href=&quot;http://www.carlboettiger.info/2010/12/10/socialr-an-r-package-to-track-the-status-of-computations-with-social-network-tools.html&quot;&gt;automate uploading&lt;/a&gt; of the figures as they were created when scripts were run. This integration became easier with my adoption of &lt;code&gt;knitr&lt;/code&gt;, which has the option to automatically upload images built in (using imgur.com). I soon extended this to &lt;a href=&quot;http://www.carlboettiger.info/2012/02/28/knitr-with-flickr-and-wordpress.html&quot;&gt;use Flickr or Wordpress&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;challenges-of-linked-images&quot;&gt;Challenges of linked images&lt;/h2&gt;
&lt;p&gt;While this simplified the workflow considerably, it does not lend itself to archiving content well. Since &lt;a href=&quot;http://www.carlboettiger.info/2012/09/19/migrating-from-wordpress-to-jekyll.html&quot;&gt;migrating to Jekyll&lt;/a&gt;, it is relatively straight forward to archive the notebook entry by entry in markdown format, without all the external web content for the appearance. Unfortunately, with images linked in from Flickr and other external hosting services are not included in this way. Even archiving the entire HTML source for the site doesn’t help, since the figures are on a remote repository. When I migrated my OWW and Wordpress notebooks to Jekyll, the image links remained pointing to OWW or Flickr or wherever the images were originally uploaded. Should Flickr vanish (as Delicious effectively did), the images would be lost. The copies of the notebook entries I &lt;a href=&quot;http://figshare.com/authors/Carl%20Boettiger/96387&quot;&gt;deposit on figshare&lt;/a&gt; only have the links to these entries, not the entries themselves. Even if the images were copied over, the entry would still point to the original URL, not the copy. To address this, I started &lt;a href=&quot;http://www.carlboettiger.info/2012/11/30/Note-on-notebook-figures.html&quot;&gt;archiving the images locally&lt;/a&gt;. This removed the external dependency and kept everything together so that it could be archived in a way that preserved the link structure, but has its own drawbacks.&lt;/p&gt;
&lt;p&gt;As I do far more runs of the scripts then I post to the notebook (though most of these can be found in the Github links), the image archive is much larger than what images are actually included in the notebook. Another issue is that the notebook source files are all conveniently managed with git and stored on Github, so storing the images locally involves explicitly excluding the image files which are both much larger and as binaries not ideal for version management.&lt;/p&gt;
&lt;h2 id=&quot;data-uris&quot;&gt;Data URIs&lt;/h2&gt;
&lt;p&gt;The simple solution is to avoid linking the images externally, but instead embed the image data directly into the notebook entry. &lt;a href=&quot;http://en.wikipedia.org/wiki/Data_URI_scheme&quot;&gt;Data URIs&lt;/a&gt; do exactly that, encoding all the image as part of the link url following a declaration of MIME type, such as&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;img&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;9TXL0Y4OHwAAAABJRU5ErkJggg==&amp;quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Image data URIs are usually introduced to reduce the load and waiting time on the server, which has to query each external image separately (CSS sprites are a more effective way to accomplish that goal; which is what I use for the icons on this site). They are also convenient for generating stand-alone HTML files, in which the externally linked data sources, such as images, CSS, etc, are encoded as 64bit data strings.&lt;/p&gt;
&lt;h2 id=&quot;generating-uris&quot;&gt;Generating URIs&lt;/h2&gt;
&lt;p&gt;Given an image, we can generate the data URI using the &lt;code&gt;knitr&lt;/code&gt; function &lt;code&gt;image_uri(&amp;quot;image_name.png&amp;quot;)&lt;/code&gt;. Knitr also supports data URIs as directly as an image output option, in just the same way that one would specify a custom upload function, using the command&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;upload.fun =&lt;/span&gt; image_uri)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pandoc can also generate HTML with data URIs for images in place of the remote image links using the &lt;code&gt;--self-contained&lt;/code&gt; option, where it will download all the external images and encode them. This may be the best strategy for creating archival versions of entries for figshare, etc. Unfortunately the conversion is not available when running markdown to markdown, but can be effected using markdown to HTML, and then back. The only downside of this approach is that the yaml header formatting is lost, and the output markdown used is Pandoc’s flavor.&lt;/p&gt;
&lt;h2 id=&quot;difficulties-of-data-uris&quot;&gt;Difficulties of Data URIs&lt;/h2&gt;
&lt;h3 id=&quot;not-displayed-in-github-markdown&quot;&gt;Not displayed in Github Markdown&lt;/h3&gt;
&lt;p&gt;My chief disappointment is realizing that Github’s markdown renderer will not display data URIs, so images won’t show up on the Github copy of &lt;code&gt;knitr&lt;/code&gt; markdown files. It would have been most convenient to have knitr always embed the images for my scripts and avoid external linking for Github files. This would be particularly helpful for scripts run on remote servers where the compute nodes do not have external web connections and so images have to be uploaded from the head node after running the script. Oh well, hopefully Github will consider addressing this.&lt;/p&gt;
&lt;p&gt;I don’t see a good reason why Github markdown doesn’t display images, since markdown displays any other valid HTML. Perhaps it is security related since almost anything can be put in a data URI. It may have something to do with how there server is handling images to begin with, since the images that are displayed come not from the original URL but from a separate link on &lt;code&gt;akamai.net&lt;/code&gt;. I did send in a suggestion that they address this and was told they would look into it. Meanwhile I will continue uploading these images externally, and converting to data URIs when generating the files for the notebook version.&lt;/p&gt;
&lt;h3 id=&quot;large-file-sizes&quot;&gt;Large File Sizes&lt;/h3&gt;
&lt;p&gt;Because all of the image encoding is embedded directly within the link, and these data URIs are huge. This creates several issues.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The markdown a deal less readable before it is rendered. A decent editor can just fold these away (e.g. select block and &lt;code&gt;zf&lt;/code&gt; in vim).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The data URIs increase the filesize of the HTML dramatically. Compression is about 1/3rd more than the original image sizes. This can slow load times and makes the repository larger. As most images in the notebook are generated as basic pngs, the file sizes aren’t huge (100 Kb range), but much larger than the raw HTML.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Not all browsers support Data URIs, so images may not render in older versions of IE&lt;/li&gt;
&lt;li&gt;The markdown parser takes much longer to generate the output. This appears to actually time out Jekyll building in my current notebook.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;resolution&quot;&gt;Resolution&lt;/h2&gt;
&lt;p&gt;I have a branch of the notebook, &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/image-uri&quot;&gt;image-uri&lt;/a&gt;, in which (almost) all images are converted to data URIs. Unfortunately, the images do not display on the Github copy and the branch takes rather much longer to compile, making this an impractical standard solution for the notebook.&lt;/p&gt;
&lt;p&gt;As I discussed above, I have recently experimented with hosting all images I generate on the local server, removing the dependency and archival concerns of Figshare. Unfortunately, it makes for a very large and potentially more fragile site to have to carry around the complete image log, 99% of which does not appear in the notebook but only on Github script runs. Keeping only the images used in posts makes more sense, but requires an extra step which is otherwise redundant, since the web being what it is can just point to the external copy. To address the primary concern is making sure that the archival copies on figshare include the images, I think I will stick with compiling an archival version with Data URIs while otherwise continuing to host the images on Flickr.&lt;/p&gt;
&lt;p&gt;Archival copies can be made using Pandoc by generating the site using the &lt;code&gt;--self-contained&lt;/code&gt; option for the pandoc parser in &lt;code&gt;_config.yaml&lt;/code&gt;, though this is rather slow. Then the archive would be the HTML files in the &lt;code&gt;_site&lt;/code&gt; directory, rather than the raw markdown files. While alternatively I could use a script to just render the markdown, overall it may make more sense to archive the stand-alone HTML, since it includes more metadata and the advantages of the XML formatting.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tipping Points Comment In Nature</title>
	 <link href="/2013/01/12/tipping-points-comment-in-nature.html"/>
   <updated>2013-01-12T00:00:00+00:00</updated>
   <id>/01/12/tipping-points-comment-in-nature</id>
   <content type="html">&lt;p&gt;On Wednesday my comment piece with Alan, &lt;a href=&quot;http://www.nature.com/nature/journal/v493/n7431/full/493157a.html&quot;&gt;&lt;em&gt;Tipping points: from patterns to predictions&lt;/em&gt;&lt;/a&gt; appeared in Nature (next to a nice &lt;a href=&quot;http://www.nature.com/nature/journal/v493/n7431/full/493159a.html&quot;&gt;comment by Heather Piwowar&lt;/a&gt; on NSF’s move to recognizing products of research more broadly than publications alone).&lt;/p&gt;
&lt;p&gt;Heather has written an excellent &lt;a href=&quot;http://researchremix.wordpress.com/2013/01/11/process-behind-a-nature-comment/&quot;&gt;post&lt;/a&gt; on the process of writing, which rings true with my own experience. Working with an editor with clear expertise in science writing and communication who was otherwise unfamiliar with the details of this field was an immensely rewarding experience, and her contributions really ought to be recognized more clearly. She stuck with me as I struggled to explain concepts I wasn’t even sure were well understood in my subfield, and then helped me rephrase towards a larger audience. I learned how specific examples and even potentially extraneous details could help anchor and clarify a description. Of course, some compromise was inevitable. I later had some explaining to do when the fact-checker questioned some of my citations. Yes, I know Sebastian doesn’t actually talk about salemanders in Schreiber and Randolf 2008, and Stephen Lade and Thilo Gross don’t talk about cod collapse; but their models do, I promise!&lt;/p&gt;
&lt;p&gt;I doubt any scholar takes on a topic of close personal interest in the space of two pages and feels completely happy with the resulting message. While the piece will no doubt be received as a pushback against the bandwagon, our goal was more road-map to interesting open questions than critique of the early steps. In the piece, I aimed to raise two important issues or gaps in the existing literature, and then to propose two potential ways forward for each issue. The goal is not to close the door on early warning signals, but to further unroll the map and draw more attention to the uncharted lands.&lt;/p&gt;
&lt;h2 id=&quot;warning-signals-without-controls&quot;&gt;Warning signals without controls&lt;/h2&gt;
&lt;p&gt;The first gap we highlight is the need to understand how early warning signals might be applied in the real world, rather than in experimental designs that rely on replicates and controls to identify what is and what isn’t a warning signal. We propose two potential directions, one primarily empirical, one primarily theoretical:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Establish baselines.&lt;/strong&gt; The challenges to doing this well are manifold, but we won’t know if or how to address them without more active research.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Statistical Models&lt;/strong&gt; In the absence of controls, appropriate null models might be able to simulate comparison groups we do not have. I have begun to explore this in my own work, see &lt;a href=&quot;/vita.html&quot;&gt;Boettiger and Hastings (2012).&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;inability-to-leverage-context-specific-information&quot;&gt;Inability to leverage context-specific information&lt;/h2&gt;
&lt;p&gt;In our comment, this comes off as condeming the generality of warning signals. Early warning signals such as variance (Carpenter and Brock 2006) or spatial autocorrelation (Dakos et al 2011) may incerase before a catastrophic transition, but they can also decrease (Schreiber and Rudolf 2008, Bel et al 2012).&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Use all the data&lt;/strong&gt;. While a lack of detailed mechanistic understanding of complex systems is more often the rule then the exception, we mustn’t give into the huberis that we can ignore context-specific information we know. When facing problems as challenging as detecting sudden shifts are no time to go battle with one hand tied behind our backs. By working with domain experts in areas where transitions are best understood, we may learn how best to do this.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Follow the data&lt;/strong&gt; A more widely appreciated issue for any signal is the concern of an adequately long and well sampled data set. While the globe ushers in an era of “big data”, long time series aren’t easy to come by. Perhaps this is a case in which searching under the street light for the keys can pay off. Early warning signal research has already shown us once how to find weak patterns if we know what to look for. A promising line of of work would identify (potentially system-specific) signals in the kind of data that is most likely to be available, such as high-resolution spatial imagery. Ignoring such patterns because they do not generalize to other systems will only slow us down.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;icanhazpdf&quot;&gt;#icanhazpdf?&lt;/h3&gt;
&lt;p&gt;Unfortunately the piece is not available open access (though do write to me for a reprint if you are interested). I can distribute the original text in 6 months. As an advocate for open science, my 0/9 record of publishing in open access journals might raise eyebrows, if also unequivocally demonstrating my commitment to pragmatism ;-). All my other papers are available through as green open access/preprints on arXiv, and I hope this one can join them when the terms permit.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Lade, S. J. &amp;amp; Gross, T. Early Warning Signals for Critical Transitions: A Generalized Modeling Approach. PLoS Computational Biology 8, e1002360 (2012). doi:10.1371/journal.pcbi.1002360&lt;/li&gt;
&lt;li&gt;Schreiber, S. J. &amp;amp; Rudolf, V. H. W. Crossing habitat boundaries: coupling dynamics of ecosystems through complex life cycles. Ecology Letters 11, 576-87 (2008). doi:10.1111/j.1461-0248.2008.01171.x&lt;/li&gt;
&lt;li&gt;Dakos, V., Kéfi, S., Rietkerk, M., Nes, E. H. Van &amp;amp; Scheffer, M. Slowing Down in Spatially Patterned Ecosystems at the Brink of Collapse. The American Naturalist (2011).doi:10.1086/659945&lt;/li&gt;
&lt;li&gt;Bel, G., Hagberg, A. &amp;amp; Meron, E. Gradual regime shifts in spatially extended ecosystems. Theoretical Ecology 5, 591-604 (2012). doi:10.1007/s12080-011-0149-6&lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>Haldanes Sieve Guest Post</title>
	 <link href="/2013/01/08/haldanes-sieve-guest-post.html"/>
   <updated>2013-01-08T00:00:00+00:00</updated>
   <id>/01/08/haldanes-sieve-guest-post</id>
   <content type="html">&lt;h1 id=&quot;consider-public-archiving-for-your-dissertation&quot;&gt;Consider public archiving for your dissertation&lt;/h1&gt;
&lt;p&gt;As researchers we spend an immense amount of time generating products other than papers. While we go through great lengths to see that our papers are published in just the right place to be seen by our colleagues (fretting about the different impact factors, percieved audience, editorial boards, open access policies, and many other factors that determine just how a paper will see the light of day), other products of our labors largely languish on forgotten hard-drives from long ago.&lt;/p&gt;
&lt;p&gt;Among the items that recieve considerable investiment of blood, sweat and tears in not only producing but formating just right, etc, is the PhD dissertation. As much of this work will no doubt eventually make its way into various formal publications, if it hasn’t already, it easy to view the process more as ritual than practical, whose only outcome will be another dusty black cover to grace the darkest shelves of the University library and the office of any adviser over fifty. Yet dissertations have more practical uses than bookends as well.&lt;/p&gt;
&lt;p&gt;A dissertation is frequently the first time certain results will see the light of day, and may offer a more accessible introduction with more complete review of background material than a published paper, thanks to the long-hand monograph style that seems to be out of vogue in the peer reviewed literature. Dissertation acknowledgements often provide wonderful snapshot into the toils of a PhD in recognizing contributions and support. And while the published results may appear only in journals requiring subscriptions, the author can almost always still release the original thesis as open access to gain the potential benefits of larger readership.[^1]&lt;/p&gt;
&lt;p&gt;While some dissertations have been important references to me during my own PhD and beyond, they aren’t always easy to find – for me, author’s webpages have been a more common source than University or publisher catalogs. Meanwhile, many other researchers do not even mention their dissertations on their own websites. Today, there are better and easier alternatives for sharing your dissertation.&lt;/p&gt;
&lt;p&gt;An increasing recognition of other products of research has led to a proliferation of possible outlets to share research materials. Repositories such as &lt;a href=&quot;http://arxiv.org&quot;&gt;arXiv&lt;/a&gt; and &lt;a href=&quot;http://figshare.com&quot;&gt;Figshare&lt;/a&gt; are indexed by Google Scholar, provide reliable persistent storage, and permanent identifiers or DOIs that can make it easy to cite or link.&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Gargouri, Y. et al. Self-Selected or Mandated, Open Access Increases Citation Impact for Higher Quality Research. PLoS ONE 5, e13636 (2010).&lt;/li&gt;
&lt;li&gt;Eysenbach, G. Citation advantage of open access articles. PLoS Biology 4, e157 (2006).&lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 
